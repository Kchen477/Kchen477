(self.webpackChunkhapticology1=self.webpackChunkhapticology1||[]).push([[762],{5762:(Qn,J,k)=>{"use strict";k.r(J),k.d(J,{VizModule:()=>i6});var ee=k(6895),p=k(4650),L=k(4006),R=k(6720),V=k(3238),G=k(1281);let ue=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({}),t})(),De=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[ue,V.BQ,V.si,ee.ez,ue,V.BQ]}),t})();var xe=k(4080),Me=k(9643),Pe=(k(7340),k(3353));let Cm=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[ee.ez,V.BQ,xe.eL,V.si,Me.Q8,R.rt,V.BQ]}),t})();var ea=k(8492),bm=k(7489),ir=k(4795);function vu(t,e){let i=0;if(void 0===e)for(let r of t)(r=+r)&&(i+=r);else{let r=-1;for(let n of t)(n=+e(n,++r,t))&&(i+=n)}return i}function rp(t,e){let i;if(void 0===e)for(const r of t)null!=r&&(i<r||void 0===i&&r>=r)&&(i=r);else{let r=-1;for(let n of t)null!=(n=e(n,++r,t))&&(i<n||void 0===i&&n>=n)&&(i=n)}return i}function xm(t,e){return t.sourceLinks.length?t.depth:e-1}function po(t){return function(){return t}}function np(t,e){return kl(t.source,e.source)||t.index-e.index}function ap(t,e){return kl(t.target,e.target)||t.index-e.index}function kl(t,e){return t.y0-e.y0}function Cu(t){return t.value}function Sm(t){return t.index}function Em(t){return t.nodes}function Ml(t){return t.links}function sp(t,e){const i=t.get(e);if(!i)throw new Error("missing: "+e);return i}function fo({nodes:t}){for(const e of t){let i=e.y0,r=i;for(const n of e.sourceLinks)n.y0=i+n.width/2,i+=n.width;for(const n of e.targetLinks)n.y1=r+n.width/2,r+=n.width}}var bu=Math.PI,yu=2*bu,ta=1e-6,op=yu-ta;function Ll(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lp(){return new Ll}Ll.prototype=lp.prototype={constructor:Ll,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,a){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(t,e,i,r,n){var a=this._x1,s=this._y1,o=(i=+i)-(t=+t),d=(r=+r)-(e=+e),u=a-t,c=s-e,f=u*u+c*c;if((n=+n)<0)throw new Error("negative radius: "+n);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>ta)if(Math.abs(c*o-d*u)>ta&&n){var g=i-a,m=r-s,y=o*o+d*d,w=g*g+m*m,I=Math.sqrt(y),P=Math.sqrt(f),$=n*Math.tan((bu-Math.acos((y+f-w)/(2*I*P)))/2),se=$/P,fe=$/I;Math.abs(se-1)>ta&&(this._+="L"+(t+se*u)+","+(e+se*c)),this._+="A"+n+","+n+",0,0,"+ +(c*g>u*m)+","+(this._x1=t+fe*o)+","+(this._y1=e+fe*d)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,i,r,n,a){t=+t,e=+e,a=!!a;var s=(i=+i)*Math.cos(r),o=i*Math.sin(r),d=t+s,u=e+o,c=1^a,f=a?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+d+","+u:(Math.abs(this._x1-d)>ta||Math.abs(this._y1-u)>ta)&&(this._+="L"+d+","+u),i&&(f<0&&(f=f%yu+yu),f>op?this._+="A"+i+","+i+",0,1,"+c+","+(t-s)+","+(e-o)+"A"+i+","+i+",0,1,"+c+","+(this._x1=d)+","+(this._y1=u):f>ta&&(this._+="A"+i+","+i+",0,"+ +(f>=bu)+","+c+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))))},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};const Tm=lp;var Dm=Array.prototype.slice;function dp(t){return function(){return t}}function up(t){return t[0]}function hp(t){return t[1]}function cp(t){return t.source}function wu(t){return t.target}function pp(t,e,i,r,n){t.moveTo(e,i),t.bezierCurveTo(e=(e+r)/2,i,e,n,r,n)}function Su(t){return[t.source.x1,t.y0]}function Bm(t){return[t.target.x0,t.y1]}function _p(){return function Am(){return function xu(t){var e=cp,i=wu,r=up,n=hp,a=null;function s(){var o,d=Dm.call(arguments),u=e.apply(this,d),c=i.apply(this,d);if(a||(a=o=Tm()),t(a,+r.apply(this,(d[0]=u,d)),+n.apply(this,d),+r.apply(this,(d[0]=c,d)),+n.apply(this,d)),o)return a=null,o+""||null}return s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(i=o,s):i},s.x=function(o){return arguments.length?(r="function"==typeof o?o:dp(+o),s):r},s.y=function(o){return arguments.length?(n="function"==typeof o?o:dp(+o),s):n},s.context=function(o){return arguments.length?(a=o??null,s):a},s}(pp)}().source(Su).target(Bm)}class Eu{constructor(e,i,r,n){this.columns=[],this.data=i,this.orders=r,this.id=e,this.select_fields=n,this.columns=n.filter(a=>a.selected).map(a=>a.label),this.init_svg(),this.get_node_links(),this.render_scale(),this.generate_sankey(),console.log(this.data,"this.data===")}get_node_links(){this.nodes=this.columns.map(i=>this.get_indity_arr(this.data,i)).flat(1/0),this.nodes=[...new Set(this.nodes)],this.nodes=this.nodes.map(i=>({id:i})),this.nodes=this.nodes.filter(i=>i.id&&" "!==i.id);const e=(i,r)=>this.data.map(n=>({source:i+"~"+n[i],target:r+"~"+n[r],value:1,ID:n.ID,t1:n.T1,meetingName:n["Meeting name"],web:n.web}));this.links=[],this.columns.forEach((i,r)=>{r<this.columns.length-1&&this.links.push(...e(i,this.columns[r+1]))}),this.links=this.links.filter(i=>i.source&&" "!==i.source),this.links=this.links.filter(i=>i.target&&" "!==i.target)}flatRollupLinks(){this.links=ir.uTd(this.links,e=>e.length,e=>e.source,e=>e.target,e=>e.ID),this.links=this.links.map(e=>({source:e[0],target:e[1],ID:e[2],value:e[3]}))}get_indity_arr(e,i){let r=ir.Xxj(e,n=>n[i]).map(n=>i+"~"+n[0]);return r.sort((n,a)=>this.sort_nodes(n,a)),[...new Set(r)]}generate_sankey(){const{nodes:i,links:r}=(()=>{const n=function Im(){let s,u,c,t=0,e=0,i=1,r=1,n=24,a=8,o=Sm,d=xm,f=Em,g=Ml,m=6;function y(){const Oe={nodes:f.apply(null,arguments),links:g.apply(null,arguments)};return function w({nodes:Oe,links:rt}){for(const[st,Je]of Oe.entries())Je.index=st,Je.sourceLinks=[],Je.targetLinks=[];const et=new Map(Oe.map((st,Je)=>[o(st,Je,Oe),st]));for(const[st,Je]of rt.entries()){Je.index=st;let{source:Ot,target:ri}=Je;"object"!=typeof Ot&&(Ot=Je.source=sp(et,Ot)),"object"!=typeof ri&&(ri=Je.target=sp(et,ri)),Ot.sourceLinks.push(Je),ri.targetLinks.push(Je)}if(null!=c)for(const{sourceLinks:st,targetLinks:Je}of Oe)st.sort(c),Je.sort(c)}(Oe),function I({nodes:Oe}){for(const rt of Oe)rt.value=void 0===rt.fixedValue?Math.max(vu(rt.sourceLinks,Cu),vu(rt.targetLinks,Cu)):rt.fixedValue}(Oe),function P({nodes:Oe}){const rt=Oe.length;let et=new Set(Oe),st=new Set,Je=0;for(;et.size;){for(const Ot of et){Ot.depth=Je;for(const{target:ri}of Ot.sourceLinks)st.add(ri)}if(++Je>rt)throw new Error("circular link");et=st,st=new Set}}(Oe),function $({nodes:Oe}){const rt=Oe.length;let et=new Set(Oe),st=new Set,Je=0;for(;et.size;){for(const Ot of et){Ot.height=Je;for(const{source:ri}of Ot.targetLinks)st.add(ri)}if(++Je>rt)throw new Error("circular link");et=st,st=new Set}}(Oe),function Se(Oe){const rt=function se({nodes:Oe}){const rt=rp(Oe,Je=>Je.depth)+1,et=(i-t-n)/(rt-1),st=new Array(rt);for(const Je of Oe){const Ot=Math.max(0,Math.min(rt-1,Math.floor(d.call(null,Je,rt))));Je.layer=Ot,Je.x0=t+Ot*et,Je.x1=Je.x0+n,st[Ot]?st[Ot].push(Je):st[Ot]=[Je]}if(u)for(const Je of st)Je.sort(u);return st}(Oe);s=Math.min(a,(r-e)/(rp(rt,et=>et.length)-1)),function fe(Oe){const rt=function ym(t,e){let i;if(void 0===e)for(const r of t)null!=r&&(i>r||void 0===i&&r>=r)&&(i=r);else{let r=-1;for(let n of t)null!=(n=e(n,++r,t))&&(i>n||void 0===i&&n>=n)&&(i=n)}return i}(Oe,et=>(r-e-(et.length-1)*s)/vu(et,Cu));for(const et of Oe){let st=e;for(const Je of et){Je.y0=st,Je.y1=st+Je.value*rt,st=Je.y1+s;for(const Ot of Je.sourceLinks)Ot.width=Ot.value*rt}st=(r-st+s)/(et.length+1);for(let Je=0;Je<et.length;++Je){const Ot=et[Je];Ot.y0+=st*(Je+1),Ot.y1+=st*(Je+1)}jt(et)}}(rt);for(let et=0;et<m;++et){const st=Math.pow(.99,et),Je=Math.max(1-st,(et+1)/m);$e(rt,st,Je),Fe(rt,st,Je)}}(Oe),fo(Oe),Oe}function Fe(Oe,rt,et){for(let st=1,Je=Oe.length;st<Je;++st){const Ot=Oe[st];for(const ri of Ot){let Dl=0,fs=0;for(const{source:Al,value:hw}of ri.targetLinks){let ip=hw*(ri.layer-Al.layer);Dl+=$t(Al,ri)*ip,fs+=ip}if(!(fs>0))continue;let _s=(Dl/fs-ri.y0)*rt;ri.y0+=_s,ri.y1+=_s,mt(ri)}void 0===u&&Ot.sort(kl),We(Ot,et)}}function $e(Oe,rt,et){for(let Je=Oe.length-2;Je>=0;--Je){const Ot=Oe[Je];for(const ri of Ot){let Dl=0,fs=0;for(const{target:Al,value:hw}of ri.sourceLinks){let ip=hw*(Al.layer-ri.layer);Dl+=mi(ri,Al)*ip,fs+=ip}if(!(fs>0))continue;let _s=(Dl/fs-ri.y0)*rt;ri.y0+=_s,ri.y1+=_s,mt(ri)}void 0===u&&Ot.sort(kl),We(Ot,et)}}function We(Oe,rt){const et=Oe.length>>1,st=Oe[et];nt(Oe,st.y0-s,et-1,rt),Ze(Oe,st.y1+s,et+1,rt),nt(Oe,r,Oe.length-1,rt),Ze(Oe,e,0,rt)}function Ze(Oe,rt,et,st){for(;et<Oe.length;++et){const Je=Oe[et],Ot=(rt-Je.y0)*st;Ot>1e-6&&(Je.y0+=Ot,Je.y1+=Ot),rt=Je.y1+s}}function nt(Oe,rt,et,st){for(;et>=0;--et){const Je=Oe[et],Ot=(Je.y1-rt)*st;Ot>1e-6&&(Je.y0-=Ot,Je.y1-=Ot),rt=Je.y0-s}}function mt({sourceLinks:Oe,targetLinks:rt}){if(void 0===c){for(const{source:{sourceLinks:et}}of rt)et.sort(ap);for(const{target:{targetLinks:et}}of Oe)et.sort(np)}}function jt(Oe){if(void 0===c)for(const{sourceLinks:rt,targetLinks:et}of Oe)rt.sort(ap),et.sort(np)}function $t(Oe,rt){let et=Oe.y0-(Oe.sourceLinks.length-1)*s/2;for(const{target:st,width:Je}of Oe.sourceLinks){if(st===rt)break;et+=Je+s}for(const{source:st,width:Je}of rt.targetLinks){if(st===Oe)break;et-=Je}return et}function mi(Oe,rt){let et=rt.y0-(rt.targetLinks.length-1)*s/2;for(const{source:st,width:Je}of rt.targetLinks){if(st===Oe)break;et+=Je+s}for(const{target:st,width:Je}of Oe.sourceLinks){if(st===rt)break;et-=Je}return et}return y.update=function(Oe){return fo(Oe),Oe},y.nodeId=function(Oe){return arguments.length?(o="function"==typeof Oe?Oe:po(Oe),y):o},y.nodeAlign=function(Oe){return arguments.length?(d="function"==typeof Oe?Oe:po(Oe),y):d},y.nodeSort=function(Oe){return arguments.length?(u=Oe,y):u},y.nodeWidth=function(Oe){return arguments.length?(n=+Oe,y):n},y.nodePadding=function(Oe){return arguments.length?(a=s=+Oe,y):a},y.nodes=function(Oe){return arguments.length?(f="function"==typeof Oe?Oe:po(Oe),y):f},y.links=function(Oe){return arguments.length?(g="function"==typeof Oe?Oe:po(Oe),y):g},y.linkSort=function(Oe){return arguments.length?(c=Oe,y):c},y.size=function(Oe){return arguments.length?(t=e=0,i=+Oe[0],r=+Oe[1],y):[i-t,r-e]},y.extent=function(Oe){return arguments.length?(t=+Oe[0][0],i=+Oe[1][0],e=+Oe[0][1],r=+Oe[1][1],y):[[t,e],[i,r]]},y.iterations=function(Oe){return arguments.length?(m=+Oe,y):m},y}().nodeId(a=>a.id).nodeWidth(5).nodePadding(2).extent([[this.margin.left,this.margin.top],[this.innerW+this.margin.left,this.innerH]]).nodeSort((a,s)=>this.sort_nodes(a.id,s.id));return({nodes:a,links:s})=>n({nodes:a.map(o=>Object.assign({},o)),links:s.map(o=>Object.assign({},o))})})()({nodes:this.nodes,links:this.links});this.render({nodes:i,links:r})}sort_nodes(e,i){return this.orders.findIndex(n=>n.toUpperCase()===e.toUpperCase())>this.orders.findIndex(n=>n.toUpperCase()===i.toUpperCase())?1:-1}render_scale(){this.colors_arr=[["#d4ee9f","#FFF074"],["#55acae","#9cd599"],["#8db4e0","#5758A6"],["#a3a3c6","#98b1dc"],["#BBA7F4","#959DF3"],["#aeceec","#EF6FA4"],["#e6c4db","#EF6FA4"],["#ECF7A7","#FAF9B0"]];let e=new Map;this.select_fields.forEach((i,r)=>{let n=this.get_indity_arr(this.data,i.label);e.set(i.label,ir.PKp().domain(n).range(ir.q$2(ir.JHv(this.colors_arr[r][0],this.colors_arr[r][1]),n.length+1)))}),this.color_map=e,this.xScale=ir.tiA().domain(this.columns).range([0,1.1*this.innerW])}debounce(e,i){let r;return function(){let n=this,a=arguments;r||(r=setTimeout(function(){r=null,e.apply(n,a)},i))}}render({nodes:e,links:i}){let r=this.svg;(()=>{r.append("g").attr("stroke","#000").selectAll("rect").data(e).join("rect").attr("x",d=>d.x0).attr("y",d=>d.y0).attr("height",d=>d.y1-d.y0).attr("width",d=>d.x1-d.x0).attr("fill",d=>this.color_map.get(d.id.split("~")[0])(d.id)).attr("stroke-opacity",0).append("title").text(d=>`${d.id}`)})(),(()=>{const d=r.append("g").attr("fill","none").attr("stroke-opacity",.8).selectAll("g").data(i).join("g").attr("fill","none").style("mix-blend-mode","multiply");d.append("path").attr("class",c=>this.get_line_className(c)+" mypath").attr("id",c=>"mypath"+Iu(c.ID)).attr("d",_p()).attr("stroke",c=>this.color_map.get(c.source.id.split("~")[0])(c.source.id)).attr("stroke-width",1),this.path=d,d.append("title").text(c=>`${c.source.id} \u2192 ${c.target.id}}`);const u=document.querySelector(".d3-template");d.on("mousemove",this.debounce((c,f)=>{u.style.display="flex",u.style.left=c.clientX+"px",u.style.top=c.clientY+"px",f&&(console.log(f?.t1),u.querySelector(".title").innerHTML=f?.t1,u.querySelector(".title-sub").innerHTML=f.meetingName.toUpperCase(),u.querySelector("img").src=`../../../assets/Picture/${f.t1.toLowerCase()}.png`,u.querySelector("a").src=f.web)},200)).on("mouseout",()=>{console.log("111"),u.style.display="none"}),ir.Ys("#sankeychart").on("mouseout",()=>{u.style.display="none"})})(),r.append("g").attr("font-family","sans-serif").attr("font-size","0.58vw").attr("fill","#000000").selectAll("text").data(e).join("text").attr("x",u=>u.x0-6).attr("y",u=>(u.y1+u.y0)/2).attr("dy","0.29vw").attr("text-anchor",(u,c)=>"end").text(u=>u.id.split("~")[1]),(()=>{this.svg.selectAll(".mytitle").data(this.columns).join("text").attr("x",(u,c)=>this.xScale.bandwidth()*c+this.margin.left).attr("y",30).attr("text-anchor","middle").attr("font-weight",900).attr("font-size","0.6vw").text(u=>u)})()}init_svg(){const e=ir.Ys(`#${this.id}`);e.selectAll("*").remove();const i=e?.node()?.getBoundingClientRect().width||500,r=e?.node()?.getBoundingClientRect().height||500;this.margin={left:120,right:20,top:50,bottom:0},this.innerW=i-this.margin.left-this.margin.right,this.innerH=r-this.margin.top-this.margin.bottom,this.svg=e.append("svg").attr("width",i).attr("height",r)}get_line_className(e){return function vs(t){return t.match(/[a-zA-Z]/g)?.join("")}(e.source.id+e.target.id)}}function Iu(t){return t.match(/[a-zA-Z0-9]/g)?.join("")}const mp=["Haptic Sensations","Correlated User Manipulation","Stimulus","Interfacing method","Ground method","Actuating mechanism","Simple to complex mechanism"];var ia=k(4004),Tu=k(529);let _o=(()=>{var t;class e{constructor(r){this.http=r}upper_case(r){return r?r?.charAt(0).toUpperCase()+r.slice(1).toLowerCase():""}get_data(){return this.http.get("/assets/sankey_data.csv",{responseType:"text"}).pipe((0,ia.U)(r=>ir.ueB(r)),(0,ia.U)(r=>(r.forEach(n=>Object.entries(n).forEach(a=>n[a[0]]=this.upper_case(a[1]))),r)))}set_filtered_data(r){this.filtered_data=r}get_filtered_data(){return this.filtered_data}get_order(){return this.http.get("/assets/order.csv",{responseType:"text"}).pipe((0,ia.U)(r=>ir.ueB(r)),(0,ia.U)(r=>r.map(n=>this.upper_case(n.Dimensions)+"~"+this.upper_case(n.values))))}}return(t=e).\u0275fac=function(r){return new(r||t)(p.LFG(Tu.eN))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var Fl=k(495),Kr=k(445),km=k(5698),cr=k(7579);const Mm=["knob"],vp=["valueIndicatorContainer"];function Lm(t,e){if(1&t&&(p.TgZ(0,"div",4,5)(2,"div",6)(3,"span",7),p._uU(4),p.qZA()()()),2&t){const i=p.oxw();p.xp6(4),p.Oqu(i.valueIndicatorText)}}const Pm=["trackActive"];function Fm(t,e){if(1&t&&p._UZ(0,"div"),2&t){const i=e.$implicit,r=e.index,n=p.oxw(3);p.Tol(0===i?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),p.Udp("transform",n._calcTickMarkTransform(r))}}function Vm(t,e){if(1&t&&(p.ynx(0),p.YNc(1,Fm,1,4,"div",11),p.BQk()),2&t){const i=p.oxw(2);p.xp6(1),p.Q6J("ngForOf",i._tickMarks)}}function Du(t,e){if(1&t&&(p.TgZ(0,"div",8,9),p.YNc(2,Vm,2,1,"ng-container",10),p.qZA()),2&t){const i=p.oxw();p.xp6(2),p.Q6J("ngIf",i._cachedWidth)}}function Nm(t,e){if(1&t&&p._UZ(0,"mat-slider-visual-thumb",7),2&t){const i=p.oxw();p.Q6J("discrete",i.discrete)("thumbPosition",1)("valueIndicatorText",i.startValueIndicatorText)}}const zm=["*"],Vl=new p.OlP("_MatSlider"),Cp=new p.OlP("_MatSliderThumb"),bp=new p.OlP("_MatSliderRangeThumb"),di=new p.OlP("_MatSliderVisualThumb");let Hm=(()=>{class t{constructor(i,r,n,a){this._cdr=i,this._ngZone=r,this._slider=a,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._onPointerMove=s=>{if(this._sliderInput._isFocused)return;const o=this._hostElement.getBoundingClientRect(),d=this._isSliderThumbHovered(s,o);this._isHovered=d,d?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=()=>{this._isActive=!0,this._showActiveRipple()},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef)},this._hostElement=n.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const i=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{i.addEventListener("pointermove",this._onPointerMove),i.addEventListener("pointerdown",this._onDragStart),i.addEventListener("pointerup",this._onDragEnd),i.addEventListener("pointerleave",this._onMouseLeave),i.addEventListener("focus",this._onFocus),i.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const i=this._sliderInputEl;i.removeEventListener("pointermove",this._onPointerMove),i.removeEventListener("pointerdown",this._onDragStart),i.removeEventListener("pointerup",this._onDragEnd),i.removeEventListener("pointerleave",this._onMouseLeave),i.removeEventListener("focus",this._onFocus),i.removeEventListener("blur",this._onBlur)}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(i){return 0===i?.state||1===i?.state}_showRipple(i,r){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(1===this.thumbPosition?2:1)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||r))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:i,centered:!0,persistent:!0})}_hideRipple(i){if(i?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const r=this._getSibling();r._isShowingAnyRipple()||(this._hideValueIndicator(),r._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(1===this.thumbPosition?2:1)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}_isSliderThumbHovered(i,r){const n=r.width/2,d=i.clientY-(r.y+n);return Math.pow(i.clientX-(r.x+n),2)+Math.pow(d,2)<Math.pow(n,2)}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.sBO),p.Y36(p.R0b),p.Y36(p.SBq),p.Y36(Vl))},t.\u0275cmp=p.Xpm({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,r){if(1&i&&(p.Gf(V.wG,5),p.Gf(Mm,5),p.Gf(vp,5)),2&i){let n;p.iGM(n=p.CRH())&&(r._ripple=n.first),p.iGM(n=p.CRH())&&(r._knob=n.first),p.iGM(n=p.CRH())&&(r._valueIndicatorContainer=n.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[p._Bn([{provide:di,useExisting:t}])],decls:4,vars:2,consts:[["class","mdc-slider__value-indicator-container",4,"ngIf"],[1,"mdc-slider__thumb-knob"],["knob",""],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator-container"],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,r){1&i&&(p.YNc(0,Lm,5,1,"div",0),p._UZ(1,"div",1,2)(3,"div",3)),2&i&&(p.Q6J("ngIf",r.discrete),p.xp6(3),p.Q6J("matRippleDisabled",!0))},dependencies:[ee.O5,V.wG],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),t})();const Zm=(0,V.pj)((0,V.Kr)(class{constructor(t){this._elementRef=t}}),"primary");let $m=(()=>{class t extends Zm{get disabled(){return this._disabled}set disabled(i){this._disabled=(0,G.Ig)(i);const r=this._getInput(2),n=this._getInput(1);r&&(r.disabled=this._disabled),n&&(n.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(i){this._discrete=(0,G.Ig)(i),this._updateValueIndicatorUIs()}get showTickMarks(){return this._showTickMarks}set showTickMarks(i){this._showTickMarks=(0,G.Ig)(i)}get min(){return this._min}set min(i){const r=(0,G.su)(i,this._min);this._min!==r&&this._updateMin(r)}_updateMin(i){const r=this._min;this._min=i,this._isRange?this._updateMinRange({old:r,new:i}):this._updateMinNonRange(i),this._onMinMaxOrStepChange()}_updateMinRange(i){const r=this._getInput(2),n=this._getInput(1),a=r.value,s=n.value;n.min=i.new,r.min=Math.max(i.new,n.value),n.max=Math.min(r.max,r.value),n._updateWidthInactive(),r._updateWidthInactive(),i.new<i.old?this._onTranslateXChangeBySideEffect(r,n):this._onTranslateXChangeBySideEffect(n,r),a!==r.value&&this._onValueChange(r),s!==n.value&&this._onValueChange(n)}_updateMinNonRange(i){const r=this._getInput(2);if(r){const n=r.value;r.min=i,r._updateThumbUIByValue(),this._updateTrackUI(r),n!==r.value&&this._onValueChange(r)}}get max(){return this._max}set max(i){const r=(0,G.su)(i,this._max);this._max!==r&&this._updateMax(r)}_updateMax(i){const r=this._max;this._max=i,this._isRange?this._updateMaxRange({old:r,new:i}):this._updateMaxNonRange(i),this._onMinMaxOrStepChange()}_updateMaxRange(i){const r=this._getInput(2),n=this._getInput(1),a=r.value,s=n.value;r.max=i.new,n.max=Math.min(i.new,r.value),r.min=n.value,r._updateWidthInactive(),n._updateWidthInactive(),i.new>i.old?this._onTranslateXChangeBySideEffect(n,r):this._onTranslateXChangeBySideEffect(r,n),a!==r.value&&this._onValueChange(r),s!==n.value&&this._onValueChange(n)}_updateMaxNonRange(i){const r=this._getInput(2);if(r){const n=r.value;r.max=i,r._updateThumbUIByValue(),this._updateTrackUI(r),n!==r.value&&this._onValueChange(r)}}get step(){return this._step}set step(i){const r=(0,G.su)(i,this._step);this._step!==r&&this._updateStep(r)}_updateStep(i){this._step=i,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const i=this._getInput(2),r=this._getInput(1),n=i.value,a=r.value,s=r.value;i.min=this._min,r.max=this._max,i.step=this._step,r.step=this._step,this._platform.SAFARI&&(i.value=i.value,r.value=r.value),i.min=Math.max(this._min,r.value),r.max=Math.min(this._max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),i.value<s?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),n!==i.value&&this._onValueChange(i),a!==r.value&&this._onValueChange(r)}_updateStepNonRange(){const i=this._getInput(2);if(i){const r=i.value;i.step=this._step,this._platform.SAFARI&&(i.value=i.value),i._updateThumbUIByValue(),r!==i.value&&this._onValueChange(i)}}constructor(i,r,n,a,s,o,d){super(a),this._ngZone=i,this._cdr=r,this._platform=n,this._dir=s,this._globalRippleOptions=o,this._disabled=!1,this._discrete=!1,this._showTickMarks=!1,this._min=0,this._max=100,this._step=0,this.displayWith=u=>`${u}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===d,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const i=this._getInput(2),r=this._getInput(1);this._isRange=!!i&&!!r,this._cdr.detectChanges();const n=this._getThumb(2);this._rippleRadius=n._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._inputOffset=this._knobRadius,this._isRange?this._initUIRange(i,r):this._initUINonRange(i),this._updateTrackUI(i),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(i){i.initProps(),i.initUI(),this._updateValueIndicatorUI(i),this._hasViewInitialized=!0,i._updateThumbUIByValue()}_initUIRange(i,r){i.initProps(),i.initUI(),r.initProps(),r.initUI(),i._updateMinMax(),r._updateMinMax(),i._updateStaticStyles(),r._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,i._updateThumbUIByValue(),r._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const i=this._getInput(2),r=this._getInput(1);i._setIsLeftThumb(),r._setIsLeftThumb(),i.translateX=i._calcTranslateXByValue(),r.translateX=r._calcTranslateXByValue(),i._updateStaticStyles(),r._updateStaticStyles(),i._updateWidthInactive(),r._updateWidthInactive(),i._updateThumbUIByValue(),r._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(2)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(1)._isActive||this._getThumb(2)._isActive}_getValue(i=2){const r=this._getInput(i);return r?r.value:this.min}_skipUpdate(){return!(!this._getInput(1)?._skipUIUpdate&&!this._getInput(2)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(i){const r=this._trackActive.nativeElement.style,n=i.left!==r.left&&i.right!==r.right;r.left=i.left,r.right=i.right,r.transformOrigin=i.transformOrigin,n?(this._elementRef.nativeElement.classList.add("mat-mdc-slider-disable-track-animation"),this._ngZone.onStable.pipe((0,km.q)(1)).subscribe(()=>{this._elementRef.nativeElement.classList.remove("mat-mdc-slider-disable-track-animation"),r.transform=i.transform})):r.transform=i.transform}_calcTickMarkTransform(i){return`translateX(${i*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(i){this._hasViewInitialized&&(this._updateThumbUI(i),this._updateTrackUI(i),this._updateOverlappingThumbUI(i))}_onTranslateXChangeBySideEffect(i,r){this._hasViewInitialized&&(i._updateThumbUIByValue(),r._updateThumbUIByValue())}_onValueChange(i){this._hasViewInitialized&&(this._updateValueIndicatorUI(i),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const i=this._getInput(2),r=this._getInput(1);i._updateThumbUIByValue(),r._updateThumbUIByValue(),i._updateStaticStyles(),r._updateStaticStyles(),i._updateMinMax(),r._updateMinMax(),i._updateWidthInactive(),r._updateWidthInactive()}else{const i=this._getInput(2);i&&i._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const i=this._getInput(1),r=this._getInput(2);return!(!i||!r)&&r.translateX-i.translateX<20}_updateOverlappingThumbClassNames(i){const r=i.getSibling(),n=this._getThumb(i.thumbPosition);this._getThumb(r.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),n._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(i){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(i))}_updateThumbUI(i){this._skipUpdate()||(this._getThumb(2===i.thumbPosition?2:1)._hostElement.style.transform=`translateX(${i.translateX}px)`)}_updateValueIndicatorUI(i){if(this._skipUpdate())return;const r=this.displayWith(i.value);if(this._hasViewInitialized?i._valuetext=r:i._hostElement.setAttribute("aria-valuetext",r),this.discrete){1===i.thumbPosition?this.startValueIndicatorText=r:this.endValueIndicatorText=r;const n=this._getThumb(i.thumbPosition);r.length<3?n._hostElement.classList.add("mdc-slider__thumb--short-value"):n._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const i=this._getInput(2),r=this._getInput(1);i&&this._updateValueIndicatorUI(i),r&&this._updateValueIndicatorUI(r)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const i=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/i)*i-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*n-6}_updateTrackUI(i){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(i):this._updateTrackUINonRange(i))}_updateTrackUIRange(i){const r=i.getSibling();if(!r||!this._cachedWidth)return;const n=Math.abs(r.translateX-i.translateX)/this._cachedWidth;this._setTrackActiveStyles(i._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-r.translateX+"px",transformOrigin:"right",transform:`scaleX(${n})`}:{left:`${r.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${n})`})}_updateTrackUINonRange(i){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-i.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${i.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const i=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(i):this._updateTickMarkUINonRange(i),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(i){const r=this._getValue();let n=Math.max(Math.round((r-this.min)/i),0),a=Math.max(Math.round((this.max-r)/i),0);this._isRtl?n++:a++,this._tickMarks=Array(n).fill(0).concat(Array(a).fill(1))}_updateTickMarkUIRange(i){const r=this._getValue(),n=this._getValue(1),a=Math.max(Math.floor((n-this.min)/i),0),s=Math.max(Math.floor((r-n)/i)+1,0),o=Math.max(Math.floor((this.max-r)/i),0);this._tickMarks=Array(a).fill(1).concat(Array(s).fill(0),Array(o).fill(1))}_getInput(i){return 2===i&&this._input?this._input:this._inputs?.length?1===i?this._inputs.first:this._inputs.last:void 0}_getThumb(i){return 2===i?this._thumbs?.last:this._thumbs?.first}_setTransition(i){this._hasAnimation=i&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(Pe.t4),p.Y36(p.SBq),p.Y36(Kr.Is,8),p.Y36(V.Y2,8),p.Y36(p.QbO,8))},t.\u0275cmp=p.Xpm({type:t,selectors:[["mat-slider"]],contentQueries:function(i,r,n){if(1&i&&(p.Suo(n,Cp,5),p.Suo(n,bp,4)),2&i){let a;p.iGM(a=p.CRH())&&(r._input=a.first),p.iGM(a=p.CRH())&&(r._inputs=a)}},viewQuery:function(i,r){if(1&i&&(p.Gf(Pm,5),p.Gf(di,5)),2&i){let n;p.iGM(n=p.CRH())&&(r._trackActive=n.first),p.iGM(n=p.CRH())&&(r._thumbs=n)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:10,hostBindings:function(i,r){2&i&&p.ekj("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations)},inputs:{color:"color",disableRipple:"disableRipple",disabled:"disabled",discrete:"discrete",showTickMarks:"showTickMarks",min:"min",max:"max",step:"step",displayWith:"displayWith"},exportAs:["matSlider"],features:[p._Bn([{provide:Vl,useExisting:t}]),p.qOj],ngContentSelectors:zm,decls:9,vars:5,consts:[[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],["trackActive",""],["class","mdc-slider__tick-marks",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText"],[1,"mdc-slider__tick-marks"],["tickMarkContainer",""],[4,"ngIf"],[3,"class","transform",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&(p.F$t(),p.Hsn(0),p.TgZ(1,"div",0),p._UZ(2,"div",1),p.TgZ(3,"div",2),p._UZ(4,"div",3,4),p.qZA(),p.YNc(6,Du,3,1,"div",5),p.qZA(),p.YNc(7,Nm,1,3,"mat-slider-visual-thumb",6),p._UZ(8,"mat-slider-visual-thumb",7)),2&i&&(p.xp6(6),p.Q6J("ngIf",r.showTickMarks),p.xp6(1),p.Q6J("ngIf",r._isRange),p.xp6(1),p.Q6J("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[ee.sg,ee.O5,Hm],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000));border-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color, var(--mdc-theme-primary, #6200ee));opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mdc-theme-on-surface, #000));opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mdc-theme-primary, #6200ee));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mdc-theme-on-surface, #000));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color, #666666);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color, #666666)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height, 6px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 6px)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height, 6px)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size, 2px);width:var(--mdc-slider-with-tick-marks-container-size, 2px)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking, 0.0071428571em);font-size:var(--mdc-slider-label-label-text-size, 0.875rem);font-family:var(--mdc-slider-label-label-text-font, Roboto, sans-serif);font-weight:var(--mdc-slider-label-label-text-weight, 500);line-height:var(--mdc-slider-label-label-text-line-height, 1.375rem)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape, 50%);width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-style:solid;border-width:calc(var(--mdc-slider-handle-height, 20px) / 2) calc(var(--mdc-slider-handle-width, 20px) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape, 50%)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color, #fff);border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator{opacity:var(--mat-mdc-slider-value-indicator-opacity, 1)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-mdc-slider-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-mdc-slider-hover-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-mdc-slider-focus-ripple-color, transparent)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})();const Km={provide:L.JU,useExisting:(0,p.Gpc)(()=>wp),multi:!0},yp={provide:L.JU,useExisting:(0,p.Gpc)(()=>Pi),multi:!0};let wp=(()=>{class t{get value(){return(0,G.su)(this._hostElement.value)}set value(i){const r=(0,G.su)(i).toString();this._hasSetInitialValue?this._isActive||(this._hostElement.value=r,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges()):this._initialValue=r}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=0,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(i){this._translateX=i}get min(){return(0,G.su)(this._hostElement.min)}set min(i){this._hostElement.min=(0,G.su)(i).toString(),this._cdr.detectChanges()}get max(){return(0,G.su)(this._hostElement.max)}set max(i){this._hostElement.max=(0,G.su)(i).toString(),this._cdr.detectChanges()}get step(){return(0,G.su)(this._hostElement.step)}set step(i){this._hostElement.step=(0,G.su)(i).toString(),this._cdr.detectChanges()}get disabled(){return(0,G.Ig)(this._hostElement.disabled)}set disabled(i){this._hostElement.disabled=(0,G.Ig)(i),this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(i){this._isFocused=i}constructor(i,r,n,a){this._ngZone=i,this._elementRef=r,this._cdr=n,this._slider=a,this.valueChange=new p.vpe,this.dragStart=new p.vpe,this.dragEnd=new p.vpe,this.thumbPosition=2,this._knobRadius=8,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new cr.x,this._skipUIUpdate=!1,this._onChangeFn=()=>{},this._onTouchedFn=()=>{},this._hostElement=r.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(i){this.disabled||0!==i.button||(this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(i,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(i),this.dragStart.emit({source:this,parent:this._slider,value:this.value})))}_handleValueCorrection(i){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(i)},0)}_fixValue(i){const r=i.clientX-this._slider._cachedLeft,n=this._slider._cachedWidth,a=0===this._slider.step?1:this._slider.step,s=Math.floor((this._slider.max-this._slider.min)/a),u=Math.round((this._slider._isRtl?1-r/n:r/n)*s)/s*(this._slider.max-this._slider.min)+this._slider.min,c=Math.round(u/a)*a;if(c===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation}));this.value=c,this.valueChange.emit(this.value),this._onChangeFn(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation})}_onPointerMove(i){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(i)}_onPointerUp(){this._isActive&&(this._isActive=!1,this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive()))}_clamp(i){return Math.max(Math.min(i,this._slider._cachedWidth),0)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*this._slider._cachedWidth:this.percentage*this._slider._cachedWidth}_calcTranslateXByPointerEvent(i){return i.clientX-this._slider._cachedLeft}_updateWidthActive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding}px)`}_updateWidthInactive(){this._hostElement.style.padding="0px",this._hostElement.style.width="calc(100% + 48px)",this._hostElement.style.left="-24px"}_updateThumbUIByValue(i){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(i)}_updateThumbUIByPointerEvent(i,r){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(i)),this._updateThumbUI(r)}_updateThumbUI(i){this._slider._setTransition(!!i?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(i){this.value=i}registerOnChange(i){this._onChangeFn=i}registerOnTouched(i){this._onTouchedFn=i}setDisabledState(i){this.disabled=i}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.R0b),p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(Vl))},t.\u0275dir=p.lG2({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,r){1&i&&p.NdJ("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),2&i&&p.uIk("aria-valuetext",r._valuetext)},inputs:{value:"value"},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[p._Bn([Km,{provide:Cp,useExisting:t}])]}),t})(),Pi=(()=>{class t extends wp{getSibling(){return this._sibling||(this._sibling=this._slider._getInput(this._isEndThumb?1:2)),this._sibling}getMinPos(){const i=this.getSibling();return!this._isLeftThumb&&i?i.translateX:0}getMaxPos(){const i=this.getSibling();return this._isLeftThumb&&i?i.translateX:this._slider._cachedWidth}_setIsLeftThumb(){this._isLeftThumb=this._isEndThumb&&this._slider._isRtl||!this._isEndThumb&&!this._slider._isRtl}constructor(i,r,n,a){super(i,n,a,r),this._cdr=a,this._isEndThumb=this._hostElement.hasAttribute("matSliderEndThumb"),this._setIsLeftThumb(),this.thumbPosition=this._isEndThumb?2:1}_getDefaultValue(){return this._isEndThumb&&this._slider._isRange?this.max:this.min}_onInput(){super._onInput(),this._updateSibling(),this._isActive||this._updateWidthInactive()}_onNgControlValueChange(){super._onNgControlValueChange(),this.getSibling()?._updateMinMax()}_onPointerDown(i){this.disabled||(this._sibling&&(this._sibling._updateWidthActive(),this._sibling._hostElement.classList.add("mat-mdc-slider-input-no-pointer-events")),super._onPointerDown(i))}_onPointerUp(){super._onPointerUp(),this._sibling&&setTimeout(()=>{this._sibling._updateWidthInactive(),this._sibling._hostElement.classList.remove("mat-mdc-slider-input-no-pointer-events")})}_onPointerMove(i){super._onPointerMove(i),!this._slider.step&&this._isActive&&this._updateSibling()}_fixValue(i){super._fixValue(i),this._sibling?._updateMinMax()}_clamp(i){return Math.max(Math.min(i,this.getMaxPos()),this.getMinPos())}_updateMinMax(){const i=this.getSibling();i&&(this._isEndThumb?(this.min=Math.max(this._slider.min,i.value),this.max=this._slider.max):(this.min=this._slider.min,this.max=Math.min(this._slider.max,i.value)))}_updateWidthActive(){const i=2*this._slider._rippleRadius-2*this._slider._inputPadding;this._hostElement.style.width=`${(this._slider._cachedWidth+this._slider._inputPadding-i)*(this._slider.min<this._slider.max?(this.max-this.min)/(this._slider.max-this._slider.min):1)+i}px`,this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`}_updateWidthInactive(){const i=this.getSibling();if(!i)return;const n=this._isEndThumb?this.value-(this.value-i.value)/2:this.value+(i.value-this.value)/2;this._hostElement.style.width=this._slider._cachedWidth*(this._slider.min<this._slider.max?this._isEndThumb?(this.max-n)/(this._slider.max-this._slider.min):(n-this.min)/(this._slider.max-this._slider.min):1)+24+"px",this._hostElement.style.padding="0px",this._isLeftThumb?(this._hostElement.style.left="-24px",this._hostElement.style.right="auto"):(this._hostElement.style.left="auto",this._hostElement.style.right="-24px")}_updateStaticStyles(){this._hostElement.classList.toggle("mat-slider__right-input",!this._isLeftThumb)}_updateSibling(){const i=this.getSibling();i&&(i._updateMinMax(),this._isActive?i._updateWidthActive():i._updateWidthInactive())}writeValue(i){this.value=i,this._updateWidthInactive(),this._updateSibling()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.R0b),p.Y36(Vl),p.Y36(p.SBq),p.Y36(p.sBO))},t.\u0275dir=p.lG2({type:t,selectors:[["input","matSliderStartThumb",""],["input","matSliderEndThumb",""]],exportAs:["matSliderRangeThumb"],features:[p._Bn([yp,{provide:bp,useExisting:t}]),p.qOj]}),t})(),xp=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[V.BQ,ee.ez,V.si]}),t})();var Cs=k(4859),Au=k(7392),rr=k(7582),Rr=k(4968),yi=k(2722),pr=k(3187),Sp=k(2912);const Ru=["*"],Ep=["inputElement"],Ip=["nz-checkbox",""];let Tp=(()=>{class t{constructor(i,r){this.nzOnChange=new p.vpe,this.checkboxList=[],i.addClass(r.nativeElement,"ant-checkbox-group")}addCheckbox(i){this.checkboxList.push(i)}removeCheckbox(i){this.checkboxList.splice(this.checkboxList.indexOf(i),1)}onChange(){const i=this.checkboxList.filter(r=>r.nzChecked).map(r=>r.nzValue);this.nzOnChange.emit(i)}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.Qsj),p.Y36(p.SBq))},t.\u0275cmp=p.Xpm({type:t,selectors:[["nz-checkbox-wrapper"]],outputs:{nzOnChange:"nzOnChange"},exportAs:["nzCheckboxWrapper"],ngContentSelectors:Ru,decls:1,vars:0,template:function(i,r){1&i&&(p.F$t(),p.Hsn(0))},encapsulation:2,changeDetection:0}),t})(),Ur=(()=>{class t{constructor(i,r,n,a,s,o,d){this.ngZone=i,this.elementRef=r,this.nzCheckboxWrapperComponent=n,this.cdr=a,this.focusMonitor=s,this.directionality=o,this.nzFormStatusService=d,this.dir="ltr",this.destroy$=new cr.x,this.isNzDisableFirstChange=!0,this.onChange=()=>{},this.onTouched=()=>{},this.nzCheckedChange=new p.vpe,this.nzValue=null,this.nzAutoFocus=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzChecked=!1,this.nzId=null}innerCheckedChange(i){this.nzDisabled||(this.nzChecked=i,this.onChange(this.nzChecked),this.nzCheckedChange.emit(this.nzChecked),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.onChange())}writeValue(i){this.nzChecked=i,this.cdr.markForCheck()}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||i,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).pipe((0,yi.R)(this.destroy$)).subscribe(i=>{i||Promise.resolve().then(()=>this.onTouched())}),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.addCheckbox(this),this.directionality.change.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,Rr.R)(this.elementRef.nativeElement,"click").pipe((0,yi.R)(this.destroy$)).subscribe(i=>{i.preventDefault(),this.focus(),!this.nzDisabled&&this.ngZone.run(()=>{this.innerCheckedChange(!this.nzChecked),this.cdr.markForCheck()})}),(0,Rr.R)(this.inputElement.nativeElement,"click").pipe((0,yi.R)(this.destroy$)).subscribe(i=>i.stopPropagation())})}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.removeCheckbox(this),this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.R0b),p.Y36(p.SBq),p.Y36(Tp,8),p.Y36(p.sBO),p.Y36(R.tE),p.Y36(Kr.Is,8),p.Y36(Sp.kH,8))},t.\u0275cmp=p.Xpm({type:t,selectors:[["","nz-checkbox",""]],viewQuery:function(i,r){if(1&i&&p.Gf(Ep,7),2&i){let n;p.iGM(n=p.CRH())&&(r.inputElement=n.first)}},hostAttrs:[1,"ant-checkbox-wrapper"],hostVars:6,hostBindings:function(i,r){2&i&&p.ekj("ant-checkbox-wrapper-in-form-item",!!r.nzFormStatusService)("ant-checkbox-wrapper-checked",r.nzChecked)("ant-checkbox-rtl","rtl"===r.dir)},inputs:{nzValue:"nzValue",nzAutoFocus:"nzAutoFocus",nzDisabled:"nzDisabled",nzIndeterminate:"nzIndeterminate",nzChecked:"nzChecked",nzId:"nzId"},outputs:{nzCheckedChange:"nzCheckedChange"},exportAs:["nzCheckbox"],features:[p._Bn([{provide:L.JU,useExisting:(0,p.Gpc)(()=>t),multi:!0}])],attrs:Ip,ngContentSelectors:Ru,decls:6,vars:11,consts:[[1,"ant-checkbox"],["type","checkbox",1,"ant-checkbox-input",3,"checked","ngModel","disabled","ngModelChange"],["inputElement",""],[1,"ant-checkbox-inner"]],template:function(i,r){1&i&&(p.F$t(),p.TgZ(0,"span",0)(1,"input",1,2),p.NdJ("ngModelChange",function(a){return r.innerCheckedChange(a)}),p.qZA(),p._UZ(3,"span",3),p.qZA(),p.TgZ(4,"span"),p.Hsn(5),p.qZA()),2&i&&(p.ekj("ant-checkbox-checked",r.nzChecked&&!r.nzIndeterminate)("ant-checkbox-disabled",r.nzDisabled)("ant-checkbox-indeterminate",r.nzIndeterminate),p.xp6(1),p.Q6J("checked",r.nzChecked)("ngModel",r.nzChecked)("disabled",r.nzDisabled),p.uIk("autofocus",r.nzAutoFocus?"autofocus":null)("id",r.nzId))},dependencies:[L.Wl,L.JJ,L.On],encapsulation:2,changeDetection:0}),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzAutoFocus",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzDisabled",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzIndeterminate",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzChecked",void 0),t})(),Dp=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[Kr.vT,ee.ez,L.u5,R.rt]}),t})();function ra(t,e){if(1&t){const i=p.EpF();p.TgZ(0,"div")(1,"label",15),p.NdJ("ngModelChange",function(n){const s=p.CHM(i).$implicit;return p.KtG(s.selected=n)}),p._uU(2),p.qZA()()}if(2&t){const i=e.$implicit;p.xp6(1),p.Q6J("ngModel",i.selected),p.xp6(1),p.Oqu(i.label)}}let go=(()=>{var t;class e{constructor(r){this.data_sevice=r,this.is_hightlight=!1,this.orders=[],this.selected_filters_values=new Map,this.columns=mp,this.start_year=2010,this.end_year=2022,this.year_range_change=new p.vpe,this.min_year=2010,this.max_year=2022,this.fields=[{label:"Sensations",selected:!0},{label:"Manipulations",selected:!0},{label:"Stimuli",selected:!0},{label:"Grounding Methods",selected:!0},{label:"Stimulating Methods",selected:!0},{label:"Source to Mechanical Mechanism",selected:!0},{label:"Simple to Complex Mechanism",selected:!0}]}set filter_conditions(r){r&&(this._filter_conditions=r,this.is_hightlight&&this.high_light_sankey())}set filtered_data(r){r&&(this.filter_data=r,this.filter_data_copy=r,this.copy_data=r,this.table_data=[...r],!this.is_hightlight&&this.filter_sankey(this.filter_data))}set data(r){r&&(this.sankey_data=r,this.table_data=[...r],this.render_sankey())}ngOnInit(){this.redraw_sankey("Filter")}clear_table(){location.reload()}render_sankey(){this.data_sevice.get_order().subscribe(r=>{this.orders=r,this.re_init_sanky(this.sankey_data),this.set_path_event(),console.log(r)})}set_path_event(){this.sankey_chart.path.on("click",(r,n)=>{})}high_light_sankey(){ir.td_(".mypath").attr("opacity",.1),this.filter_data.forEach(r=>{ir.td_("#mypath"+Iu(r.ID)).attr("opacity",.9)})}filter_sankey(r){this.re_init_sanky(this.filter_data),this.set_path_event()}redraw_sankey(r){"Highlight"===r?(this.is_hightlight=!0,this.re_init_sanky(this.sankey_data),this.high_light_sankey()):(this.is_hightlight=!1,this.re_init_sanky(this.filter_data)),this.table_data=this.filter_data,this.set_path_event()}re_init_sanky(r){this.sankey_chart=new Eu("sankeychart",r,this.orders,this.fields)}start_end_year_change(r){console.log("e==>",this.end_year,this.start_year),console.log(this.filter_data,"this.fitlerdata"),console.log(this.data,"ata==");let n=this.filter_data_copy.filter(a=>+a.Year>=this.start_year&&+a.Year<=this.end_year);this.table_data=[...n],this.filter_data=n,this.re_init_sanky(this.filter_data),this.table_data=n,this.set_path_event(),this.year_range_change.emit([this.start_year,this.end_year])}fileds_change(){this.redraw_sankey(this.is_hightlight?"Highlight":"Filter")}}return(t=e).\u0275fac=function(r){return new(r||t)(p.Y36(_o))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-sankey"]],inputs:{filter_conditions:"filter_conditions",filtered_data:"filtered_data",data:"data"},outputs:{year_range_change:"year_range_change"},decls:24,vars:10,consts:[[2,"position","relative"],["mat-mini-fab","","color","primary","aria-label","Clear Selected lines highlight",1,"refresh-btn",3,"click"],["id","sankeychart"],[1,"grid","grid-cols-7","pl-28","flex",2,"width","100%",3,"nzOnChange"],[4,"ngFor","ngForOf"],[1,"toggle"],["color","primary","aria-label","Select an option",3,"change"],["value","Filter",3,"checked"],["value","Highlight"],[1,"time-scope"],[1,"year_filter"],["for",""],[3,"min","max"],["step","1","matSliderStartThumb","",2,"margin-right","10px",3,"value","valueChange"],["step","1","matSliderEndThumb","",2,"margin-left","10px",3,"value","valueChange"],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(r,n){1&r&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(){return n.clear_table()}),p.TgZ(2,"mat-icon"),p._uU(3,"autorenew"),p.qZA()()(),p._UZ(4,"div",2),p.TgZ(5,"nz-checkbox-wrapper",3),p.NdJ("nzOnChange",function(){return n.fileds_change()}),p.YNc(6,ra,3,2,"div",4),p.qZA(),p.TgZ(7,"div",5)(8,"mat-radio-group",6),p.NdJ("change",function(s){return n.redraw_sankey(s.value)}),p.TgZ(9,"mat-radio-button",7),p._uU(10,"Filter Mode"),p.qZA(),p.TgZ(11,"mat-radio-button",8),p._uU(12,"Highlight Mode"),p.qZA()()(),p.TgZ(13,"div",9)(14,"p"),p._uU(15),p.qZA()(),p.TgZ(16,"div",10)(17,"label",11),p._uU(18),p.qZA(),p.TgZ(19,"mat-slider",12)(20,"input",13),p.NdJ("valueChange",function(s){return n.start_year=s})("valueChange",function(s){return n.start_end_year_change(s)}),p.qZA(),p.TgZ(21,"input",14),p.NdJ("valueChange",function(s){return n.end_year=s})("valueChange",function(s){return n.start_end_year_change(s)}),p.qZA()(),p.TgZ(22,"label",11),p._uU(23),p.qZA()()),2&r&&(p.xp6(6),p.Q6J("ngForOf",n.fields),p.xp6(3),p.Q6J("checked",!0),p.xp6(6),p.AsE("current time-scope: ",n.start_year,"--",n.end_year,""),p.xp6(3),p.hij("",n.start_year," "),p.xp6(1),p.Q6J("min",n.min_year)("max",n.max_year),p.xp6(1),p.Q6J("value",n.start_year),p.xp6(1),p.Q6J("value",n.end_year),p.xp6(2),p.hij("",n.end_year," "))},dependencies:[ee.sg,Fl.VQ,Fl.U0,L.JJ,L.On,$m,Pi,Cs.nh,Au.Hw,Ur,Tp],styles:["#sankeychart[_ngcontent-%COMP%]{width:100%;height:65vh}.toggle[_ngcontent-%COMP%]{text-align:center;display:grid;justify-items:end;justify-content:center;line-height:2rem;margin-bottom:20px}mat-slide-toggle[_ngcontent-%COMP%]{transform:scale(1.4)}.material-symbols-rounded[_ngcontent-%COMP%]{padding-left:20rem;transform:scale(1.4)}.columnFilters[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;width:100%}mat-slider[_ngcontent-%COMP%]{width:90%}.time-scope[_ngcontent-%COMP%]{display:flex;justify-content:center}.time-scope[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:-10px 0 -15px;background:#eff0ff;padding:2px 10px;border-radius:999px;width:-moz-fit-content;width:fit-content}.year_filter[_ngcontent-%COMP%]{display:flex;align-items:center}.year_filter[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0 10px}.boldtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:900}  .ant-checkbox-checked .ant-checkbox-inner{background-color:#3f51b5;border-color:#3f51b5}.refresh-btn[_ngcontent-%COMP%]{position:absolute;left:-1.2vw;top:1.2vw}@media (max-width: 1500px){.flex[_ngcontent-%COMP%]{display:flex!important}.ant-checkbox-wrapper[_ngcontent-%COMP%]{font-size:12px!important}.flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:5px}.flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}}"]}),e})(),Ou=(()=>{var t;class e{constructor(r){this.http=r}get_data(){return this.http.get("/assets/search_data.csv",{responseType:"text"}).pipe((0,ia.U)(r=>ir.ueB(r)))}}return(t=e).\u0275fac=function(r){return new(r||t)(p.LFG(Tu.eN))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var Xt="delete",Ht=5,fr=1<<Ht,nr=fr-1,Bt={};function Yr(t){t&&(t.value=!0)}function ku(){}function Ma(t){return void 0===t.size&&(t.size=t.__iterate(La)),t.size}function hn(t,e){if("number"!=typeof e){var i=e>>>0;if(""+i!==e||4294967295===i)return NaN;e=i}return e<0?Ma(t)+e:e}function La(){return!0}function mo(t,e,i){return(0===t&&!zl(t)||void 0!==i&&t<=-i)&&(void 0===e||void 0!==i&&e>=i)}function Pa(t,e){return Nl(t,e,0)}function bs(t,e){return Nl(t,e,e)}function Nl(t,e,i){return void 0===t?i:zl(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function zl(t){return t<0||0===t&&1/t==-1/0}var Mu="@@__IMMUTABLE_ITERABLE__@@";function ar(t){return Boolean(t&&t[Mu])}var Hl="@@__IMMUTABLE_KEYED__@@";function Qt(t){return Boolean(t&&t[Hl])}var Ap="@@__IMMUTABLE_INDEXED__@@";function Hi(t){return Boolean(t&&t[Ap])}function Zi(t){return Qt(t)||Hi(t)}var hi=function(e){return ar(e)?e:ie(e)},Ui=function(t){function e(i){return Qt(i)?i:Ce(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(hi),na=function(t){function e(i){return Hi(i)?i:pe(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(hi),Fa=function(t){function e(i){return ar(i)&&!Zi(i)?i:Qe(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(hi);hi.Keyed=Ui,hi.Indexed=na,hi.Set=Fa;var Rp="@@__IMMUTABLE_SEQ__@@";function Zl(t){return Boolean(t&&t[Rp])}var Op="@@__IMMUTABLE_RECORD__@@";function Va(t){return Boolean(t&&t[Op])}function qr(t){return ar(t)||Va(t)}var cn="@@__IMMUTABLE_ORDERED__@@";function jr(t){return Boolean(t&&t[cn])}var vo=0,Or=1,Br=2,wn="function"==typeof Symbol&&Symbol.iterator,Co="@@iterator",$l=wn||Co,Zt=function(e){this.next=e};function ci(t,e,i,r){var n=0===t?e:1===t?i:[e,i];return r?r.value=n:r={value:n,done:!1},r}function Di(){return{value:void 0,done:!0}}function kr(t){return!!Array.isArray(t)||!!Wl(t)}function Lu(t){return t&&"function"==typeof t.next}function Pu(t){var e=Wl(t);return e&&e.call(t)}function Wl(t){var e=t&&(wn&&t[wn]||t[Co]);if("function"==typeof e)return e}Zt.prototype.toString=function(){return"[Iterator]"},Zt.KEYS=vo,Zt.VALUES=Or,Zt.ENTRIES=Br,Zt.prototype.inspect=Zt.prototype.toSource=function(){return this.toString()},Zt.prototype[$l]=function(){return this};var ys=Object.prototype.hasOwnProperty;function ws(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var ie=function(t){function e(i){return null==i?bo():qr(i)?i.toSeq():function Kl(t){var e=Vu(t);if(e)return function Gm(t){var e=Wl(t);return e&&e===t.entries}(t)?e.fromEntrySeq():function Um(t){var e=Wl(t);return e&&e===t.keys}(t)?e.toSetSeq():e;if("object"==typeof t)return new Ft(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(r,n){var a=this._cache;if(a){for(var s=a.length,o=0;o!==s;){var d=a[n?s-++o:o++];if(!1===r(d[1],d[0],this))break}return o}return this.__iterateUncached(r,n)},e.prototype.__iterator=function(r,n){var a=this._cache;if(a){var s=a.length,o=0;return new Zt(function(){if(o===s)return{value:void 0,done:!0};var d=a[n?s-++o:o++];return ci(r,d[0],d[1])})}return this.__iteratorUncached(r,n)},e}(hi),Ce=function(t){function e(i){return null==i?bo().toKeyedSeq():ar(i)?Qt(i)?i.toSeq():i.fromEntrySeq():Va(i)?i.toSeq():Fu(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(ie),pe=function(t){function e(i){return null==i?bo():ar(i)?Qt(i)?i.entrySeq():i.toIndexedSeq():Va(i)?i.toSeq().entrySeq():Mr(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(ie),Qe=function(t){function e(i){return(ar(i)&&!Zi(i)?i:pe(i)).toSetSeq()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(ie);ie.isSeq=Zl,ie.Keyed=Ce,ie.Set=Qe,ie.Indexed=pe,ie.prototype[Rp]=!0;var pt=function(t){function e(i){this._array=i,this.size=i.length}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(r,n){return this.has(r)?this._array[hn(this,r)]:n},e.prototype.__iterate=function(r,n){for(var a=this._array,s=a.length,o=0;o!==s;){var d=n?s-++o:o++;if(!1===r(a[d],d,this))break}return o},e.prototype.__iterator=function(r,n){var a=this._array,s=a.length,o=0;return new Zt(function(){if(o===s)return{value:void 0,done:!0};var d=n?s-++o:o++;return ci(r,d,a[d])})},e}(pe),Ft=function(t){function e(i){var r=Object.keys(i).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i):[]);this._object=i,this._keys=r,this.size=r.length}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(r,n){return void 0===n||this.has(r)?this._object[r]:n},e.prototype.has=function(r){return ys.call(this._object,r)},e.prototype.__iterate=function(r,n){for(var a=this._object,s=this._keys,o=s.length,d=0;d!==o;){var u=s[n?o-++d:d++];if(!1===r(a[u],u,this))break}return d},e.prototype.__iterator=function(r,n){var a=this._object,s=this._keys,o=s.length,d=0;return new Zt(function(){if(d===o)return{value:void 0,done:!0};var u=s[n?o-++d:d++];return ci(r,u,a[u])})},e}(Ce);Ft.prototype[cn]=!0;var Jt,ki=function(t){function e(i){this._collection=i,this.size=i.length||i.size}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.__iterateUncached=function(r,n){if(n)return this.cacheResult().__iterate(r,n);var s=Pu(this._collection),o=0;if(Lu(s))for(var d;!(d=s.next()).done&&!1!==r(d.value,o++,this););return o},e.prototype.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var s=Pu(this._collection);if(!Lu(s))return new Zt(Di);var o=0;return new Zt(function(){var d=s.next();return d.done?d:ci(r,o++,d.value)})},e}(pe);function bo(){return Jt||(Jt=new pt([]))}function Fu(t){var e=Vu(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new Ft(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Mr(t){var e=Vu(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Vu(t){return ws(t)?new pt(t):kr(t)?new ki(t):void 0}var Na="@@__IMMUTABLE_MAP__@@";function za(t){return Boolean(t&&t[Na])}function xs(t){return za(t)&&jr(t)}function Wt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function Fi(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Wt(t)&&Wt(e)&&t.equals(e))}var Ss="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,i){var r=65535&(e|=0),n=65535&(i|=0);return r*n+((e>>>16)*n+r*(i>>>16)<<16>>>0)|0};function Ha(t){return t>>>1&1073741824|3221225471&t}var Ym=Object.prototype.valueOf;function _r(t){if(null==t)return Bp(t);if("function"==typeof t.hashCode)return Ha(t.hashCode(t));var e=function Mp(t){return t.valueOf!==Ym&&"function"==typeof t.valueOf?t.valueOf(t):t}(t);if(null==e)return Bp(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return function Gl(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return Ha(e)}(e);case"string":return e.length>ql?function aa(t){var e=Zu[t];return void 0===e&&(e=Es(t),yo===jl&&(yo=0,Zu={}),yo++,Zu[t]=e),e}(e):Es(e);case"object":case"function":return function Ul(t){var e;if(Vn&&void 0!==(e=Ts.get(t))||void 0!==(e=t[Za])||!zu&&(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Za])||(e=function Yl(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t),void 0!==e)))return e;if(e=Is(),Vn)Ts.set(t,e);else{if(void 0!==Nu&&!1===Nu(t))throw new Error("Non-extensible objects are not allowed as keys.");if(zu)Object.defineProperty(t,Za,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Za]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Za]=e}}return e}(e);case"symbol":return function kp(t){var e=Lp[t];return void 0!==e||(e=Is(),Lp[t]=e),e}(e);default:if("function"==typeof e.toString)return Es(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function Bp(t){return null===t?1108378658:1108378659}function Es(t){for(var e=0,i=0;i<t.length;i++)e=31*e+t.charCodeAt(i)|0;return Ha(e)}var Nu=Object.isExtensible,zu=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Is(){var t=++Hu;return 1073741824&Hu&&(Hu=0),t}var Ts,Vn="function"==typeof WeakMap;Vn&&(Ts=new WeakMap);var Lp=Object.create(null),Hu=0,Za="__immutablehash__";"function"==typeof Symbol&&(Za=Symbol(Za));var ql=16,jl=255,yo=0,Zu={},wo=function(t){function e(i,r){this._iter=i,this._useKeys=r,this.size=i.size}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(r,n){return this._iter.get(r,n)},e.prototype.has=function(r){return this._iter.has(r)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var r=this,n=$u(this,!0);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().reverse()}),n},e.prototype.map=function(r,n){var a=this,s=Vp(this,r,n);return this._useKeys||(s.valueSeq=function(){return a._iter.toSeq().map(r,n)}),s},e.prototype.__iterate=function(r,n){var a=this;return this._iter.__iterate(function(s,o){return r(s,o,a)},n)},e.prototype.__iterator=function(r,n){return this._iter.__iterator(r,n)},e}(Ce);wo.prototype[cn]=!0;var Pp=function(t){function e(i){this._iter=i,this.size=i.size}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.includes=function(r){return this._iter.includes(r)},e.prototype.__iterate=function(r,n){var a=this,s=0;return n&&Ma(this),this._iter.__iterate(function(o){return r(o,n?a.size-++s:s++,a)},n)},e.prototype.__iterator=function(r,n){var a=this,s=this._iter.__iterator(Or,n),o=0;return n&&Ma(this),new Zt(function(){var d=s.next();return d.done?d:ci(r,n?a.size-++o:o++,d.value,d)})},e}(pe),Fp=function(t){function e(i){this._iter=i,this.size=i.size}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.has=function(r){return this._iter.includes(r)},e.prototype.__iterate=function(r,n){var a=this;return this._iter.__iterate(function(s){return r(s,s,a)},n)},e.prototype.__iterator=function(r,n){var a=this._iter.__iterator(Or,n);return new Zt(function(){var s=a.next();return s.done?s:ci(r,s.value,s.value,s)})},e}(Qe),Ai=function(t){function e(i){this._iter=i,this.size=i.size}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(r,n){var a=this;return this._iter.__iterate(function(s){if(s){Bs(s);var o=ar(s);return r(o?s.get(1):s[1],o?s.get(0):s[0],a)}},n)},e.prototype.__iterator=function(r,n){var a=this._iter.__iterator(Or,n);return new Zt(function(){for(;;){var s=a.next();if(s.done)return s;var o=s.value;if(o){Bs(o);var d=ar(o);return ci(r,d?o.get(0):o[0],d?o.get(1):o[1],s)}}})},e}(Ce);function $i(t){var e=T(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var i=t.reverse.apply(this);return i.flip=function(){return t.reverse()},i},e.has=function(i){return t.includes(i)},e.includes=function(i){return t.has(i)},e.cacheResult=sa,e.__iterateUncached=function(i,r){var n=this;return t.__iterate(function(a,s){return!1!==i(s,a,n)},r)},e.__iteratorUncached=function(i,r){if(i===Br){var n=t.__iterator(i,r);return new Zt(function(){var a=n.next();if(!a.done){var s=a.value[0];a.value[0]=a.value[1],a.value[1]=s}return a})}return t.__iterator(i===Or?vo:Or,r)},e}function Vp(t,e,i){var r=T(t);return r.size=t.size,r.has=function(n){return t.has(n)},r.get=function(n,a){var s=t.get(n,Bt);return s===Bt?a:e.call(i,s,n,t)},r.__iterateUncached=function(n,a){var s=this;return t.__iterate(function(o,d,u){return!1!==n(e.call(i,o,d,u),d,s)},a)},r.__iteratorUncached=function(n,a){var s=t.__iterator(Br,a);return new Zt(function(){var o=s.next();if(o.done)return o;var d=o.value,u=d[0];return ci(n,u,e.call(i,d[1],u,t),o)})},r}function $u(t,e){var i=this,r=T(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var n=$i(t);return n.reverse=function(){return t.flip()},n}),r.get=function(n,a){return t.get(e?n:-1-n,a)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(n){return t.includes(n)},r.cacheResult=sa,r.__iterate=function(n,a){var s=this,o=0;return a&&Ma(t),t.__iterate(function(d,u){return n(d,e?u:a?s.size-++o:o++,s)},!a)},r.__iterator=function(n,a){var s=0;a&&Ma(t);var o=t.__iterator(Br,!a);return new Zt(function(){var d=o.next();if(d.done)return d;var u=d.value;return ci(n,e?u[0]:a?i.size-++s:s++,u[1],d)})},r}function Wu(t,e,i,r){var n=T(t);return r&&(n.has=function(a){var s=t.get(a,Bt);return s!==Bt&&!!e.call(i,s,a,t)},n.get=function(a,s){var o=t.get(a,Bt);return o!==Bt&&e.call(i,o,a,t)?o:s}),n.__iterateUncached=function(a,s){var o=this,d=0;return t.__iterate(function(u,c,f){if(e.call(i,u,c,f))return d++,a(u,r?c:d-1,o)},s),d},n.__iteratorUncached=function(a,s){var o=t.__iterator(Br,s),d=0;return new Zt(function(){for(;;){var u=o.next();if(u.done)return u;var c=u.value,f=c[0],g=c[1];if(e.call(i,g,f,t))return ci(a,r?f:d++,g,u)}})},n}function So(t,e,i,r){var n=t.size;if(mo(e,i,n))return t;var a=Pa(e,n),s=bs(i,n);if(a!=a||s!=s)return So(t.toSeq().cacheResult(),e,i,r);var d,o=s-a;o==o&&(d=o<0?0:o);var u=T(t);return u.size=0===d?d:t.size&&d||void 0,!r&&Zl(t)&&d>=0&&(u.get=function(c,f){return(c=hn(this,c))>=0&&c<d?t.get(c+a,f):f}),u.__iterateUncached=function(c,f){var g=this;if(0===d)return 0;if(f)return this.cacheResult().__iterate(c,f);var m=0,y=!0,w=0;return t.__iterate(function(I,P){if(!y||!(y=m++<a))return w++,!1!==c(I,r?P:w-1,g)&&w!==d}),w},u.__iteratorUncached=function(c,f){if(0!==d&&f)return this.cacheResult().__iterator(c,f);if(0===d)return new Zt(Di);var g=t.__iterator(c,f),m=0,y=0;return new Zt(function(){for(;m++<a;)g.next();if(++y>d)return{value:void 0,done:!0};var w=g.next();return r||c===Or||w.done?w:ci(c,y-1,c===vo?void 0:w.value[1],w)})},u}function As(t,e,i,r){var n=T(t);return n.__iterateUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterate(a,s);var d=!0,u=0;return t.__iterate(function(c,f,g){if(!d||!(d=e.call(i,c,f,g)))return u++,a(c,r?f:u-1,o)}),u},n.__iteratorUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterator(a,s);var d=t.__iterator(Br,s),u=!0,c=0;return new Zt(function(){var f,g,m;do{if((f=d.next()).done)return r||a===Or?f:ci(a,c++,a===vo?void 0:f.value[1],f);var y=f.value;g=y[0],m=y[1],u&&(u=e.call(i,m,g,o))}while(u);return a===Br?f:ci(a,g,m,f)})},n}function Io(t,e,i){var r=T(t);return r.__iterateUncached=function(n,a){if(a)return this.cacheResult().__iterate(n,a);var s=0,o=!1;return function d(u,c){u.__iterate(function(f,g){return(!e||c<e)&&ar(f)?d(f,c+1):(s++,!1===n(f,i?g:s-1,r)&&(o=!0)),!o},a)}(t,0),s},r.__iteratorUncached=function(n,a){if(a)return this.cacheResult().__iterator(n,a);var s=t.__iterator(n,a),o=[],d=0;return new Zt(function(){for(;s;){var u=s.next();if(!1===u.done){var c=u.value;if(n===Br&&(c=c[1]),e&&!(o.length<e)||!ar(c))return i?u:ci(n,d++,c,u);o.push(s),s=c.__iterator(n,a)}else s=o.pop()}return{value:void 0,done:!0}})},r}function Os(t,e,i){e||(e=To);var r=Qt(t),n=0,a=t.toSeq().map(function(s,o){return[o,s,n++,i?i(s,o,t):s]}).valueSeq().toArray();return a.sort(function(s,o){return e(s[3],o[3])||s[2]-o[2]}).forEach(r?function(s,o){a[o].length=2}:function(s,o){a[o]=s[1]}),r?Ce(a):Hi(t)?pe(a):Qe(a)}function Xl(t,e,i){if(e||(e=To),i){var r=t.toSeq().map(function(n,a){return[n,i(n,a,t)]}).reduce(function(n,a){return Np(e,n[1],a[1])?a:n});return r&&r[0]}return t.reduce(function(n,a){return Np(e,n,a)?a:n})}function Np(t,e,i){var r=t(i,e);return 0===r&&i!==e&&(null==i||i!=i)||r>0}function Ql(t,e,i,r){var n=T(t),a=new pt(i).map(function(s){return s.size});return n.size=r?a.max():a.min(),n.__iterate=function(s,o){for(var u,d=this.__iterator(Or,o),c=0;!(u=d.next()).done&&!1!==s(u.value,c++,this););return c},n.__iteratorUncached=function(s,o){var d=i.map(function(f){return f=hi(f),Pu(o?f.reverse():f)}),u=0,c=!1;return new Zt(function(){var f;return c||(f=d.map(function(g){return g.next()}),c=r?f.every(function(g){return g.done}):f.some(function(g){return g.done})),c?{value:void 0,done:!0}:ci(s,u++,e.apply(null,f.map(function(g){return g.value})))})},n}function Gt(t,e){return t===e?t:Zl(t)?e:t.constructor(e)}function Bs(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Jl(t){return Qt(t)?Ui:Hi(t)?na:Fa}function T(t){return Object.create((Qt(t)?Ce:Hi(t)?pe:Qe).prototype)}function sa(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ie.prototype.cacheResult.call(this)}function To(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ti(t,e){e=e||0;for(var i=Math.max(0,t.length-e),r=new Array(i),n=0;n<i;n++)r[n]=t[n+e];return r}function Rt(t,e){if(!t)throw new Error(e)}function Lr(t){Rt(t!==1/0,"Cannot perform this action with an infinite size.")}function zp(t){if(ws(t)&&"string"!=typeof t)return t;if(jr(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Pp.prototype.cacheResult=wo.prototype.cacheResult=Fp.prototype.cacheResult=Ai.prototype.cacheResult=sa;var Xm=Object.prototype.toString;function oa(t){return"object"==typeof t&&(qr(t)||Array.isArray(t)||function Nn(t){if(!t||"object"!=typeof t||"[object Object]"!==Xm.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var i=e,r=Object.getPrototypeOf(e);null!==r;)i=r,r=Object.getPrototypeOf(i);return i===e}(t))}function Do(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Gu(t,e,i){return qr(t)?t.get(e,i):function Hp(t,e){return qr(t)?t.has(e):oa(t)&&ys.call(t,e)}(t,e)?"function"==typeof t.get?t.get(e):t[e]:i}function ed(t){if(Array.isArray(t))return Ti(t);var e={};for(var i in t)ys.call(t,i)&&(e[i]=t[i]);return e}function $a(t,e,i,r){r||(r=i,i=void 0);var n=$p(qr(t),t,zp(e),0,i,r);return n===Bt?i:n}function $p(t,e,i,r,n,a){var s=e===Bt;if(r===i.length){var o=s?n:e,d=a(o);return d===o?e:d}if(!s&&!oa(e))throw new TypeError("Cannot update within non-data-structure value in path ["+i.slice(0,r).map(Do)+"]: "+e);var u=i[r],c=s?Bt:Gu(e,u,Bt),f=$p(c===Bt?t:qr(c),c,i,r+1,n,a);return f===c?e:f===Bt?function xn(t,e){if(!oa(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(qr(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!ys.call(t,e))return t;var i=ed(t);return Array.isArray(i)?i.splice(e,1):delete i[e],i}(e,u):function Zp(t,e,i){if(!oa(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(qr(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,i)}if(ys.call(t,e)&&i===t[e])return t;var r=ed(t);return r[e]=i,r}(s?t?gr():{}:e,u,f)}function Uu(t,e){return function Wp(t,e,i){return $a(t,e,Bt,function(){return i})}(this,t,e)}function Yu(t){return function Sn(t,e){return $a(t,e,function(){return Bt})}(this,t)}function qu(t,e,i,r){return $a(t,[e],i,r)}function ju(t,e,i){return 1===arguments.length?t(this):qu(this,t,e,i)}function Xu(t,e,i){return $a(this,t,e,i)}function Kp(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Gp(this,t)}function la(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Gp(this,e,t)}function Gp(t,e,i){for(var r=[],n=0;n<e.length;n++){var a=Ui(e[n]);0!==a.size&&r.push(a)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(s){for(var o=i?function(u,c){qu(s,c,Bt,function(f){return f===Bt?u:i(f,u,c)})}:function(u,c){s.set(c,u)},d=0;d<r.length;d++)r[d].forEach(o)}):t.constructor(r[0])}function Ao(t,e,i){return Ro(t,e,function tv(t){return function e(i,r,n){return oa(i)&&oa(r)&&function Up(t,e){var i=ie(t),r=ie(e);return Hi(i)===Hi(r)&&Qt(i)===Qt(r)}(i,r)?Ro(i,[r],e):t?t(i,r,n):r}}(i))}function Ro(t,e,i){if(!oa(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(qr(t))return"function"==typeof i&&t.mergeWith?t.mergeWith.apply(t,[i].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),n=t,a=r?na:Ui,s=r?function(d){n===t&&(n=ed(n)),n.push(d)}:function(d,u){var c=ys.call(n,u),f=c&&i?i(n[u],d,u):d;(!c||f!==n[u])&&(n===t&&(n=ed(n)),n[u]=f)},o=0;o<e.length;o++)a(e[o]).forEach(s);return n}function Qu(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ao(this,t)}function Yp(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Ao(this,e,t)}function Ju(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return $a(this,t,gr(),function(r){return Ro(r,e)})}function Oo(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return $a(this,t,gr(),function(r){return Ao(r,e)})}function zn(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function da(){return this.__ownerID?this:this.__ensureOwner(new ku)}function Bo(){return this.__ensureOwner()}function td(){return this.__altered}var ua=function(t){function e(i){return null==i?gr():za(i)&&!jr(i)?i:gr().withMutations(function(r){var n=t(i);Lr(n.size),n.forEach(function(a,s){return r.set(s,a)})})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return gr().withMutations(function(a){for(var s=0;s<r.length;s+=2){if(s+1>=r.length)throw new Error("Missing value for key: "+r[s]);a.set(r[s],r[s+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(r,n){return this._root?this._root.get(0,void 0,r,n):n},e.prototype.set=function(r,n){return Xp(this,r,n)},e.prototype.remove=function(r){return Xp(this,r,Bt)},e.prototype.deleteAll=function(r){var n=hi(r);return 0===n.size?this:this.withMutations(function(a){n.forEach(function(s){return a.remove(s)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):gr()},e.prototype.sort=function(r){return Qr(Os(this,r))},e.prototype.sortBy=function(r,n){return Qr(Os(this,n,r))},e.prototype.map=function(r,n){var a=this;return this.withMutations(function(s){s.forEach(function(o,d){s.set(d,r.call(n,o,d,a))})})},e.prototype.__iterator=function(r,n){return new qp(this,r,n)},e.prototype.__iterate=function(r,n){var a=this,s=0;return this._root&&this._root.iterate(function(o){return s++,r(o[1],o[0],a)},n),s},e.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?id(this.size,this._root,r,this.__hash):0===this.size?gr():(this.__ownerID=r,this.__altered=!1,this)},e}(Ui);ua.isMap=za;var Vt=ua.prototype;Vt[Na]=!0,Vt[Xt]=Vt.remove,Vt.removeAll=Vt.deleteAll,Vt.setIn=Uu,Vt.removeIn=Vt.deleteIn=Yu,Vt.update=ju,Vt.updateIn=Xu,Vt.merge=Vt.concat=Kp,Vt.mergeWith=la,Vt.mergeDeep=Qu,Vt.mergeDeepWith=Yp,Vt.mergeIn=Ju,Vt.mergeDeepIn=Oo,Vt.withMutations=zn,Vt.wasAltered=td,Vt.asImmutable=Bo,Vt["@@transducer/init"]=Vt.asMutable=da,Vt["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Vt["@@transducer/result"]=function(t){return t.asImmutable()};var Wa=function(e,i){this.ownerID=e,this.entries=i};Wa.prototype.get=function(e,i,r,n){for(var a=this.entries,s=0,o=a.length;s<o;s++)if(Fi(r,a[s][0]))return a[s][1];return n},Wa.prototype.update=function(e,i,r,n,a,s,o){for(var d=a===Bt,u=this.entries,c=0,f=u.length;c<f&&!Fi(n,u[c][0]);c++);var g=c<f;if(g?u[c][1]===a:d)return this;if(Yr(o),(d||!g)&&Yr(s),!d||1!==u.length){if(!g&&!d&&u.length>=th)return function Qp(t,e,i,r){t||(t=new ku);for(var n=new En(t,_r(i),[i,r]),a=0;a<e.length;a++){var s=e[a];n=n.update(t,0,void 0,s[0],s[1])}return n}(e,u,n,a);var m=e&&e===this.ownerID,y=m?u:Ti(u);return g?d?c===f-1?y.pop():y[c]=y.pop():y[c]=[n,a]:y.push([n,a]),m?(this.entries=y,this):new Wa(e,y)}};var Xr=function(e,i,r){this.ownerID=e,this.bitmap=i,this.nodes=r};Xr.prototype.get=function(e,i,r,n){void 0===i&&(i=_r(r));var a=1<<((0===e?i:i>>>e)&nr),s=this.bitmap;return s&a?this.nodes[Mo(s&a-1)].get(e+Ht,i,r,n):n},Xr.prototype.update=function(e,i,r,n,a,s,o){void 0===r&&(r=_r(n));var d=(0===i?r:r>>>i)&nr,u=1<<d,c=this.bitmap,f=0!=(c&u);if(!f&&a===Bt)return this;var g=Mo(c&u-1),m=this.nodes,y=f?m[g]:void 0,w=rd(y,e,i+Ht,r,n,a,s,o);if(w===y)return this;if(!f&&w&&m.length>=iv)return function eh(t,e,i,r,n){for(var a=0,s=new Array(fr),o=0;0!==i;o++,i>>>=1)s[o]=1&i?e[a++]:void 0;return s[r]=n,new Yi(t,a+1,s)}(e,m,c,d,w);if(f&&!w&&2===m.length&&Vi(m[1^g]))return m[1^g];if(f&&w&&1===m.length&&Vi(w))return w;var I=e&&e===this.ownerID,P=f?w?c:c^u:c|u,$=f?w?ha(m,g,w,I):function sr(t,e,i){var r=t.length-1;if(i&&e===r)return t.pop(),t;for(var n=new Array(r),a=0,s=0;s<r;s++)s===e&&(a=1),n[s]=t[s+a];return n}(m,g,I):function Jp(t,e,i,r){var n=t.length+1;if(r&&e+1===n)return t[e]=i,t;for(var a=new Array(n),s=0,o=0;o<n;o++)o===e?(a[o]=i,s=-1):a[o]=t[o+s];return a}(m,g,w,I);return I?(this.bitmap=P,this.nodes=$,this):new Xr(e,P,$)};var Yi=function(e,i,r){this.ownerID=e,this.count=i,this.nodes=r};Yi.prototype.get=function(e,i,r,n){void 0===i&&(i=_r(r));var s=this.nodes[(0===e?i:i>>>e)&nr];return s?s.get(e+Ht,i,r,n):n},Yi.prototype.update=function(e,i,r,n,a,s,o){void 0===r&&(r=_r(n));var d=(0===i?r:r>>>i)&nr,c=this.nodes,f=c[d];if(a===Bt&&!f)return this;var g=rd(f,e,i+Ht,r,n,a,s,o);if(g===f)return this;var m=this.count;if(f){if(!g&&--m<rv)return function In(t,e,i,r){for(var n=0,a=0,s=new Array(i),o=0,d=1,u=e.length;o<u;o++,d<<=1){var c=e[o];void 0!==c&&o!==r&&(n|=d,s[a++]=c)}return new Xr(t,n,s)}(e,c,m,d)}else m++;var y=e&&e===this.ownerID,w=ha(c,d,g,y);return y?(this.count=m,this.nodes=w,this):new Yi(e,m,w)};var ks=function(e,i,r){this.ownerID=e,this.keyHash=i,this.entries=r};ks.prototype.get=function(e,i,r,n){for(var a=this.entries,s=0,o=a.length;s<o;s++)if(Fi(r,a[s][0]))return a[s][1];return n},ks.prototype.update=function(e,i,r,n,a,s,o){void 0===r&&(r=_r(n));var d=a===Bt;if(r!==this.keyHash)return d?this:(Yr(o),Yr(s),ko(this,e,i,r,[n,a]));for(var u=this.entries,c=0,f=u.length;c<f&&!Fi(n,u[c][0]);c++);var g=c<f;if(g?u[c][1]===a:d)return this;if(Yr(o),(d||!g)&&Yr(s),d&&2===f)return new En(e,this.keyHash,u[1^c]);var m=e&&e===this.ownerID,y=m?u:Ti(u);return g?d?c===f-1?y.pop():y[c]=y.pop():y[c]=[n,a]:y.push([n,a]),m?(this.entries=y,this):new ks(e,this.keyHash,y)};var En=function(e,i,r){this.ownerID=e,this.keyHash=i,this.entry=r};En.prototype.get=function(e,i,r,n){return Fi(r,this.entry[0])?this.entry[1]:n},En.prototype.update=function(e,i,r,n,a,s,o){var d=a===Bt,u=Fi(n,this.entry[0]);return(u?a===this.entry[1]:d)?this:(Yr(o),d?void Yr(s):u?e&&e===this.ownerID?(this.entry[1]=a,this):new En(e,this.keyHash,[n,a]):(Yr(s),ko(this,e,i,_r(n),[n,a])))},Wa.prototype.iterate=ks.prototype.iterate=function(t,e){for(var i=this.entries,r=0,n=i.length-1;r<=n;r++)if(!1===t(i[e?n-r:r]))return!1},Xr.prototype.iterate=Yi.prototype.iterate=function(t,e){for(var i=this.nodes,r=0,n=i.length-1;r<=n;r++){var a=i[e?n-r:r];if(a&&!1===a.iterate(t,e))return!1}},En.prototype.iterate=function(t,e){return t(this.entry)};var jp,qp=function(t){function e(i,r,n){this._type=r,this._reverse=n,this._stack=i._root&&Hn(i._root)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){for(var r=this._type,n=this._stack;n;){var a=n.node,s=n.index++,o=void 0;if(a.entry){if(0===s)return Ka(r,a.entry)}else if(a.entries){if(s<=(o=a.entries.length-1))return Ka(r,a.entries[this._reverse?o-s:s])}else if(s<=(o=a.nodes.length-1)){var d=a.nodes[this._reverse?o-s:s];if(d){if(d.entry)return Ka(r,d.entry);n=this._stack=Hn(d,n)}continue}n=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(Zt);function Ka(t,e){return ci(t,e[0],e[1])}function Hn(t,e){return{node:t,index:0,__prev:e}}function id(t,e,i,r){var n=Object.create(Vt);return n.size=t,n._root=e,n.__ownerID=i,n.__hash=r,n.__altered=!1,n}function gr(){return jp||(jp=id(0))}function Xp(t,e,i){var r,n;if(t._root){var a={value:!1},s={value:!1};if(r=rd(t._root,t.__ownerID,0,void 0,e,i,a,s),!s.value)return t;n=t.size+(a.value?i===Bt?-1:1:0)}else{if(i===Bt)return t;n=1,r=new Wa(t.__ownerID,[[e,i]])}return t.__ownerID?(t.size=n,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?id(n,r):gr()}function rd(t,e,i,r,n,a,s,o){return t?t.update(e,i,r,n,a,s,o):a===Bt?t:(Yr(o),Yr(s),new En(e,r,[n,a]))}function Vi(t){return t.constructor===En||t.constructor===ks}function ko(t,e,i,r,n){if(t.keyHash===r)return new ks(e,r,[t.entry,n]);var o,a=(0===i?t.keyHash:t.keyHash>>>i)&nr,s=(0===i?r:r>>>i)&nr,d=a===s?[ko(t,e,i+Ht,r,n)]:(o=new En(e,r,n),a<s?[t,o]:[o,t]);return new Xr(e,1<<a|1<<s,d)}function Mo(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function ha(t,e,i,r){var n=r?t:Ti(t);return n[e]=i,n}var th=fr/4,iv=fr/2,rv=fr/4,ef="@@__IMMUTABLE_LIST__@@";function Lo(t){return Boolean(t&&t[ef])}var ca=function(t){function e(i){var r=nd();if(null==i)return r;if(Lo(i))return i;var n=t(i),a=n.size;return 0===a?r:(Lr(a),a>0&&a<fr?$n(0,a,Ht,null,new Zn(n.toArray())):r.withMutations(function(s){s.setSize(a),n.forEach(function(o,d){return s.set(d,o)})}))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(r,n){if((r=hn(this,r))>=0&&r<this.size){var a=nf(this,r+=this._origin);return a&&a.array[r&nr]}return n},e.prototype.set=function(r,n){return function ih(t,e,i){if((e=hn(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(s){e<0?pa(s,e).set(0,i):pa(s,0,e+1).set(e,i)});var r=t._tail,n=t._root,a={value:!1};return(e+=t._origin)>=Ls(t._capacity)?r=ad(r,t.__ownerID,0,e,i,a):n=ad(n,t.__ownerID,t._level,e,i,a),a.value?t.__ownerID?(t._root=n,t._tail=r,t.__hash=void 0,t.__altered=!0,t):$n(t._origin,t._capacity,t._level,n,r):t}(this,r,n)},e.prototype.remove=function(r){return this.has(r)?0===r?this.shift():r===this.size-1?this.pop():this.splice(r,1):this},e.prototype.insert=function(r,n){return this.splice(r,0,n)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ht,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):nd()},e.prototype.push=function(){var r=arguments,n=this.size;return this.withMutations(function(a){pa(a,0,n+r.length);for(var s=0;s<r.length;s++)a.set(n+s,r[s])})},e.prototype.pop=function(){return pa(this,0,-1)},e.prototype.unshift=function(){var r=arguments;return this.withMutations(function(n){pa(n,-r.length);for(var a=0;a<r.length;a++)n.set(a,r[a])})},e.prototype.shift=function(){return pa(this,1)},e.prototype.concat=function(){for(var r=arguments,n=[],a=0;a<arguments.length;a++){var s=r[a],o=t("string"!=typeof s&&kr(s)?s:[s]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(d){n.forEach(function(u){return u.forEach(function(c){return d.push(c)})})}):this.constructor(n[0])},e.prototype.setSize=function(r){return pa(this,0,r)},e.prototype.map=function(r,n){var a=this;return this.withMutations(function(s){for(var o=0;o<a.size;o++)s.set(o,r.call(n,s.get(o),o,a))})},e.prototype.slice=function(r,n){var a=this.size;return mo(r,n,a)?this:pa(this,Pa(r,a),bs(n,a))},e.prototype.__iterator=function(r,n){var a=n?this.size:0,s=tf(this,n);return new Zt(function(){var o=s();return o===Po?{value:void 0,done:!0}:ci(r,n?--a:a++,o)})},e.prototype.__iterate=function(r,n){for(var o,a=n?this.size:0,s=tf(this,n);(o=s())!==Po&&!1!==r(o,n?--a:a++,this););return a},e.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?$n(this._origin,this._capacity,this._level,this._root,this._tail,r,this.__hash):0===this.size?nd():(this.__ownerID=r,this.__altered=!1,this)},e}(na);ca.isList=Lo;var Ci=ca.prototype;Ci[ef]=!0,Ci[Xt]=Ci.remove,Ci.merge=Ci.concat,Ci.setIn=Uu,Ci.deleteIn=Ci.removeIn=Yu,Ci.update=ju,Ci.updateIn=Xu,Ci.mergeIn=Ju,Ci.mergeDeepIn=Oo,Ci.withMutations=zn,Ci.wasAltered=td,Ci.asImmutable=Bo,Ci["@@transducer/init"]=Ci.asMutable=da,Ci["@@transducer/step"]=function(t,e){return t.push(e)},Ci["@@transducer/result"]=function(t){return t.asImmutable()};var Zn=function(e,i){this.array=e,this.ownerID=i};Zn.prototype.removeBefore=function(e,i,r){if(r===i?1<<i:0===this.array.length)return this;var n=r>>>i&nr;if(n>=this.array.length)return new Zn([],e);var s,a=0===n;if(i>0){var o=this.array[n];if((s=o&&o.removeBefore(e,i-Ht,r))===o&&a)return this}if(a&&!s)return this;var d=Ms(this,e);if(!a)for(var u=0;u<n;u++)d.array[u]=void 0;return s&&(d.array[n]=s),d},Zn.prototype.removeAfter=function(e,i,r){if(r===(i?1<<i:0)||0===this.array.length)return this;var a,n=r-1>>>i&nr;if(n>=this.array.length)return this;if(i>0){var s=this.array[n];if((a=s&&s.removeAfter(e,i-Ht,r))===s&&n===this.array.length-1)return this}var o=Ms(this,e);return o.array.splice(n+1),a&&(o.array[n]=a),o};var rf,Po={};function tf(t,e){var i=t._origin,r=t._capacity,n=Ls(r),a=t._tail;return function s(u,c,f){return 0===c?function o(u,c){var f=c===n?a&&a.array:u&&u.array,g=c>i?0:i-c,m=r-c;return m>fr&&(m=fr),function(){if(g===m)return Po;var y=e?--m:g++;return f&&f[y]}}(u,f):function d(u,c,f){var g,m=u&&u.array,y=f>i?0:i-f>>c,w=1+(r-f>>c);return w>fr&&(w=fr),function(){for(;;){if(g){var I=g();if(I!==Po)return I;g=null}if(y===w)return Po;var P=e?--w:y++;g=s(m&&m[P],c-Ht,f+(P<<c))}}}(u,c,f)}(t._root,t._level,0)}function $n(t,e,i,r,n,a,s){var o=Object.create(Ci);return o.size=e-t,o._origin=t,o._capacity=e,o._level=i,o._root=r,o._tail=n,o.__ownerID=a,o.__hash=s,o.__altered=!1,o}function nd(){return rf||(rf=$n(0,0,Ht))}function ad(t,e,i,r,n,a){var d,s=r>>>i&nr,o=t&&s<t.array.length;if(!o&&void 0===n)return t;if(i>0){var u=t&&t.array[s],c=ad(u,e,i-Ht,r,n,a);return c===u?t:((d=Ms(t,e)).array[s]=c,d)}return o&&t.array[s]===n?t:(a&&Yr(a),d=Ms(t,e),void 0===n&&s===d.array.length-1?d.array.pop():d.array[s]=n,d)}function Ms(t,e){return e&&t&&e===t.ownerID?t:new Zn(t?t.array.slice():[],e)}function nf(t,e){if(e>=Ls(t._capacity))return t._tail;if(e<1<<t._level+Ht){for(var i=t._root,r=t._level;i&&r>0;)i=i.array[e>>>r&nr],r-=Ht;return i}}function pa(t,e,i){void 0!==e&&(e|=0),void 0!==i&&(i|=0);var r=t.__ownerID||new ku,n=t._origin,a=t._capacity,s=n+e,o=void 0===i?a:i<0?a+i:n+i;if(s===n&&o===a)return t;if(s>=o)return t.clear();for(var d=t._level,u=t._root,c=0;s+c<0;)u=new Zn(u&&u.array.length?[void 0,u]:[],r),c+=1<<(d+=Ht);c&&(s+=c,n+=c,o+=c,a+=c);for(var f=Ls(a),g=Ls(o);g>=1<<d+Ht;)u=new Zn(u&&u.array.length?[u]:[],r),d+=Ht;var m=t._tail,y=g<f?nf(t,o-1):g>f?new Zn([],r):m;if(m&&g>f&&s<a&&m.array.length){for(var w=u=Ms(u,r),I=d;I>Ht;I-=Ht){var P=f>>>I&nr;w=w.array[P]=Ms(w.array[P],r)}w.array[f>>>Ht&nr]=m}if(o<a&&(y=y&&y.removeAfter(r,0,o)),s>=g)s-=g,o-=g,d=Ht,u=null,y=y&&y.removeBefore(r,0,s);else if(s>n||g<f){for(c=0;u;){var $=s>>>d&nr;if($!==g>>>d&nr)break;$&&(c+=(1<<d)*$),d-=Ht,u=u.array[$]}u&&s>n&&(u=u.removeBefore(r,d,s-c)),u&&g<f&&(u=u.removeAfter(r,d,g-c)),c&&(s-=c,o-=c)}return t.__ownerID?(t.size=o-s,t._origin=s,t._capacity=o,t._level=d,t._root=u,t._tail=y,t.__hash=void 0,t.__altered=!0,t):$n(s,o,d,u,y)}function Ls(t){return t<fr?0:t-1>>>Ht<<Ht}var sd,Qr=function(t){function e(i){return null==i?Ps():xs(i)?i:Ps().withMutations(function(r){var n=Ui(i);Lr(n.size),n.forEach(function(a,s){return r.set(s,a)})})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(r,n){var a=this._map.get(r);return void 0!==a?this._list.get(a)[1]:n},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Ps()},e.prototype.set=function(r,n){return nh(this,r,n)},e.prototype.remove=function(r){return nh(this,r,Bt)},e.prototype.__iterate=function(r,n){var a=this;return this._list.__iterate(function(s){return s&&r(s[1],s[0],a)},n)},e.prototype.__iterator=function(r,n){return this._list.fromEntrySeq().__iterator(r,n)},e.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var n=this._map.__ensureOwner(r),a=this._list.__ensureOwner(r);return r?rh(n,a,r,this.__hash):0===this.size?Ps():(this.__ownerID=r,this.__altered=!1,this._map=n,this._list=a,this)},e}(ua);function rh(t,e,i,r){var n=Object.create(Qr.prototype);return n.size=t?t.size:0,n._map=t,n._list=e,n.__ownerID=i,n.__hash=r,n.__altered=!1,n}function Ps(){return sd||(sd=rh(gr(),nd()))}function nh(t,e,i){var o,d,r=t._map,n=t._list,a=r.get(e),s=void 0!==a;if(i===Bt){if(!s)return t;n.size>=fr&&n.size>=2*r.size?(o=(d=n.filter(function(u,c){return void 0!==u&&a!==c})).toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=d.__ownerID=t.__ownerID)):(o=r.remove(e),d=a===n.size-1?n.pop():n.set(a,void 0))}else if(s){if(i===n.get(a)[1])return t;o=r,d=n.set(a,[e,i])}else o=r.set(e,n.size),d=n.set(n.size,[e,i]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=d,t.__hash=void 0,t.__altered=!0,t):rh(o,d)}Qr.isOrderedMap=xs,Qr.prototype[cn]=!0,Qr.prototype[Xt]=Qr.prototype.remove;var ah="@@__IMMUTABLE_STACK__@@";function Ga(t){return Boolean(t&&t[ah])}var od=function(t){function e(i){return null==i?Fo():Ga(i)?i:Fo().pushAll(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(r,n){var a=this._head;for(r=hn(this,r);a&&r--;)a=a.next;return a?a.value:n},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var r=arguments;if(0===arguments.length)return this;for(var n=this.size+arguments.length,a=this._head,s=arguments.length-1;s>=0;s--)a={value:r[s],next:a};return this.__ownerID?(this.size=n,this._head=a,this.__hash=void 0,this.__altered=!0,this):Fs(n,a)},e.prototype.pushAll=function(r){if(0===(r=t(r)).size)return this;if(0===this.size&&Ga(r))return r;Lr(r.size);var n=this.size,a=this._head;return r.__iterate(function(s){n++,a={value:s,next:a}},!0),this.__ownerID?(this.size=n,this._head=a,this.__hash=void 0,this.__altered=!0,this):Fs(n,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Fo()},e.prototype.slice=function(r,n){if(mo(r,n,this.size))return this;var a=Pa(r,this.size);if(bs(n,this.size)!==this.size)return t.prototype.slice.call(this,r,n);for(var o=this.size-a,d=this._head;a--;)d=d.next;return this.__ownerID?(this.size=o,this._head=d,this.__hash=void 0,this.__altered=!0,this):Fs(o,d)},e.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?Fs(this.size,this._head,r,this.__hash):0===this.size?Fo():(this.__ownerID=r,this.__altered=!1,this)},e.prototype.__iterate=function(r,n){var a=this;if(n)return new pt(this.toArray()).__iterate(function(d,u){return r(d,u,a)},n);for(var s=0,o=this._head;o&&!1!==r(o.value,s++,this);)o=o.next;return s},e.prototype.__iterator=function(r,n){if(n)return new pt(this.toArray()).__iterator(r,n);var a=0,s=this._head;return new Zt(function(){if(s){var o=s.value;return s=s.next,ci(r,a++,o)}return{value:void 0,done:!0}})},e}(na);od.isStack=Ga;var af,qi=od.prototype;function Fs(t,e,i,r){var n=Object.create(qi);return n.size=t,n._head=e,n.__ownerID=i,n.__hash=r,n.__altered=!1,n}function Fo(){return af||(af=Fs(0))}qi[ah]=!0,qi.shift=qi.pop,qi.unshift=qi.push,qi.unshiftAll=qi.pushAll,qi.withMutations=zn,qi.wasAltered=td,qi.asImmutable=Bo,qi["@@transducer/init"]=qi.asMutable=da,qi["@@transducer/step"]=function(t,e){return t.unshift(e)},qi["@@transducer/result"]=function(t){return t.asImmutable()};var sf="@@__IMMUTABLE_SET__@@";function Vs(t){return Boolean(t&&t[sf])}function ld(t){return Vs(t)&&jr(t)}function Vo(t,e){if(t===e)return!0;if(!ar(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||Qt(t)!==Qt(e)||Hi(t)!==Hi(e)||jr(t)!==jr(e))return!1;if(0===t.size&&0===e.size)return!0;var i=!Zi(t);if(jr(t)){var r=t.entries();return e.every(function(d,u){var c=r.next().value;return c&&Fi(c[1],d)&&(i||Fi(c[0],u))})&&r.next().done}var n=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{n=!0;var a=t;t=e,e=a}var s=!0,o=e.__iterate(function(d,u){if(i?!t.has(d):n?!Fi(d,t.get(u,Bt)):!Fi(t.get(u,Bt),d))return s=!1,!1});return s&&t.size===o}function Ua(t,e){var i=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(i),t}function Ns(t){if(!t||"object"!=typeof t)return t;if(!ar(t)){if(!oa(t))return t;t=ie(t)}if(Qt(t)){var e={};return t.__iterate(function(r,n){e[n]=Ns(r)}),e}var i=[];return t.__iterate(function(r){i.push(Ns(r))}),i}var bt=function(t){function e(i){return null==i?No():Vs(i)&&!jr(i)?i:No().withMutations(function(r){var n=t(i);Lr(n.size),n.forEach(function(a){return r.add(a)})})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(r){return this(Ui(r).keySeq())},e.intersect=function(r){return(r=hi(r).toArray()).length?Wi.intersect.apply(e(r.pop()),r):No()},e.union=function(r){return(r=hi(r).toArray()).length?Wi.union.apply(e(r.pop()),r):No()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return dd(this,this._map.set(r,r))},e.prototype.remove=function(r){return dd(this,this._map.remove(r))},e.prototype.clear=function(){return dd(this,this._map.clear())},e.prototype.map=function(r,n){var a=this,s=!1,o=dd(this,this._map.mapEntries(function(d){var u=d[1],c=r.call(n,u,u,a);return c!==u&&(s=!0),[c,c]},n));return s?o:this},e.prototype.union=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return 0===(r=r.filter(function(a){return 0!==a.size})).length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(a){for(var s=0;s<r.length;s++)"string"==typeof r[s]?a.add(r[s]):t(r[s]).forEach(function(o){return a.add(o)})}):this.constructor(r[0])},e.prototype.intersect=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];if(0===r.length)return this;r=r.map(function(s){return t(s)});var a=[];return this.forEach(function(s){r.every(function(o){return o.includes(s)})||a.push(s)}),this.withMutations(function(s){a.forEach(function(o){s.remove(o)})})},e.prototype.subtract=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];if(0===r.length)return this;r=r.map(function(s){return t(s)});var a=[];return this.forEach(function(s){r.some(function(o){return o.includes(s)})&&a.push(s)}),this.withMutations(function(s){a.forEach(function(o){s.remove(o)})})},e.prototype.sort=function(r){return qa(Os(this,r))},e.prototype.sortBy=function(r,n){return qa(Os(this,n,r))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(r,n){var a=this;return this._map.__iterate(function(s){return r(s,s,a)},n)},e.prototype.__iterator=function(r,n){return this._map.__iterator(r,n)},e.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var n=this._map.__ensureOwner(r);return r?this.__make(n,r):0===this.size?this.__empty():(this.__ownerID=r,this._map=n,this)},e}(Fa);bt.isSet=Vs;var sh,Wi=bt.prototype;function dd(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function zs(t,e){var i=Object.create(Wi);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function No(){return sh||(sh=zs(gr()))}Wi[sf]=!0,Wi[Xt]=Wi.remove,Wi.merge=Wi.concat=Wi.union,Wi.withMutations=zn,Wi.asImmutable=Bo,Wi["@@transducer/init"]=Wi.asMutable=da,Wi["@@transducer/step"]=function(t,e){return t.add(e)},Wi["@@transducer/result"]=function(t){return t.asImmutable()},Wi.__empty=No,Wi.__make=zs;var mr,lf=function(t){function e(i,r,n){if(!(this instanceof e))return new e(i,r,n);if(Rt(0!==n,"Cannot step a Range by 0"),i=i||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<i&&(n=-n),this._start=i,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-i)/n-1)+1),0===this.size){if(mr)return mr;mr=this}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(r,n){return this.has(r)?this._start+hn(this,r)*this._step:n},e.prototype.includes=function(r){var n=(r-this._start)/this._step;return n>=0&&n<this.size&&n===Math.floor(n)},e.prototype.slice=function(r,n){return mo(r,n,this.size)?this:(r=Pa(r,this.size),(n=bs(n,this.size))<=r?new e(0,0):new e(this.get(r,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(r){var n=r-this._start;if(n%this._step==0){var a=n/this._step;if(a>=0&&a<this.size)return a}return-1},e.prototype.lastIndexOf=function(r){return this.indexOf(r)},e.prototype.__iterate=function(r,n){for(var a=this.size,s=this._step,o=n?this._start+(a-1)*s:this._start,d=0;d!==a&&!1!==r(o,n?a-++d:d++,this);)o+=n?-s:s;return d},e.prototype.__iterator=function(r,n){var a=this.size,s=this._step,o=n?this._start+(a-1)*s:this._start,d=0;return new Zt(function(){if(d===a)return{value:void 0,done:!0};var u=o;return o+=n?-s:s,ci(r,n?a-++d:d++,u)})},e.prototype.equals=function(r){return r instanceof e?this._start===r._start&&this._end===r._end&&this._step===r._step:Vo(this,r)},e}(pe);function oh(t,e,i){for(var r=zp(e),n=0;n!==r.length;)if((t=Gu(t,r[n++],Bt))===Bt)return i;return t}function zo(t,e){return oh(this,t,e)}function lh(){Lr(this.size);var t={};return this.__iterate(function(e,i){t[i]=e}),t}hi.isIterable=ar,hi.isKeyed=Qt,hi.isIndexed=Hi,hi.isAssociative=Zi,hi.isOrdered=jr,hi.Iterator=Zt,Ua(hi,{toArray:function(){Lr(this.size);var e=new Array(this.size||0),i=Qt(this),r=0;return this.__iterate(function(n,a){e[r++]=i?[a,n]:n}),e},toIndexedSeq:function(){return new Pp(this)},toJS:function(){return Ns(this)},toKeyedSeq:function(){return new wo(this,!0)},toMap:function(){return ua(this.toKeyedSeq())},toObject:lh,toOrderedMap:function(){return Qr(this.toKeyedSeq())},toOrderedSet:function(){return qa(Qt(this)?this.valueSeq():this)},toSet:function(){return bt(Qt(this)?this.valueSeq():this)},toSetSeq:function(){return new Fp(this)},toSeq:function(){return Hi(this)?this.toIndexedSeq():Qt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return od(Qt(this)?this.valueSeq():this)},toList:function(){return ca(Qt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,i){return 0===this.size?e+i:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+i},concat:function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Gt(this,function Eo(t,e){var i=Qt(t),r=[t].concat(e).map(function(s){return ar(s)?i&&(s=Ui(s)):s=i?Fu(s):Mr(Array.isArray(s)?s:[s]),s}).filter(function(s){return 0!==s.size});if(0===r.length)return t;if(1===r.length){var n=r[0];if(n===t||i&&Qt(n)||Hi(t)&&Hi(n))return n}var a=new pt(r);return i?a=a.toKeyedSeq():Hi(t)||(a=a.toSetSeq()),(a=a.flatten(!0)).size=r.reduce(function(s,o){if(void 0!==s){var d=o.size;if(void 0!==d)return s+d}},0),a}(this,e))},includes:function(e){return this.some(function(i){return Fi(i,e)})},entries:function(){return this.__iterator(Br)},every:function(e,i){Lr(this.size);var r=!0;return this.__iterate(function(n,a,s){if(!e.call(i,n,a,s))return r=!1,!1}),r},filter:function(e,i){return Gt(this,Wu(this,e,i,!0))},partition:function(e,i){return function xo(t,e,i){var r=Qt(t),n=[[],[]];t.__iterate(function(s,o){n[e.call(i,s,o,t)?1:0].push(r?[o,s]:s)});var a=Jl(t);return n.map(function(s){return Gt(t,a(s))})}(this,e,i)},find:function(e,i,r){var n=this.findEntry(e,i);return n?n[1]:r},forEach:function(e,i){return Lr(this.size),this.__iterate(i?e.bind(i):e)},join:function(e){Lr(this.size),e=void 0!==e?""+e:",";var i="",r=!0;return this.__iterate(function(n){r?r=!1:i+=e,i+=null!=n?n.toString():""}),i},keys:function(){return this.__iterator(vo)},map:function(e,i){return Gt(this,Vp(this,e,i))},reduce:function(e,i,r){return Ho(this,e,i,r,arguments.length<2,!1)},reduceRight:function(e,i,r){return Ho(this,e,i,r,arguments.length<2,!0)},reverse:function(){return Gt(this,$u(this,!0))},slice:function(e,i){return Gt(this,So(this,e,i,!0))},some:function(e,i){Lr(this.size);var r=!1;return this.__iterate(function(n,a,s){if(e.call(i,n,a,s))return r=!0,!1}),r},sort:function(e){return Gt(this,Os(this,e))},values:function(){return this.__iterator(Or)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,i){return Ma(e?this.toSeq().filter(e,i):this)},countBy:function(e,i){return function qm(t,e,i){var r=ua().asMutable();return t.__iterate(function(n,a){r.update(e.call(i,n,a,t),0,function(s){return s+1})}),r.asImmutable()}(this,e,i)},equals:function(e){return Vo(this,e)},entrySeq:function(){var e=this;if(e._cache)return new pt(e._cache);var i=e.toSeq().map(dh).toIndexedSeq();return i.fromEntrySeq=function(){return e.toSeq()},i},filterNot:function(e,i){return this.filter(hd(e),i)},findEntry:function(e,i,r){var n=r;return this.__iterate(function(a,s,o){if(e.call(i,a,s,o))return n=[s,a],!1}),n},findKey:function(e,i){var r=this.findEntry(e,i);return r&&r[0]},findLast:function(e,i,r){return this.toKeyedSeq().reverse().find(e,i,r)},findLastEntry:function(e,i,r){return this.toKeyedSeq().reverse().findEntry(e,i,r)},findLastKey:function(e,i){return this.toKeyedSeq().reverse().findKey(e,i)},first:function(e){return this.find(La,null,e)},flatMap:function(e,i){return Gt(this,function Rs(t,e,i){var r=Jl(t);return t.toSeq().map(function(n,a){return r(e.call(i,n,a,t))}).flatten(!0)}(this,e,i))},flatten:function(e){return Gt(this,Io(this,e,!0))},fromEntrySeq:function(){return new Ai(this)},get:function(e,i){return this.find(function(r,n){return Fi(n,e)},void 0,i)},getIn:zo,groupBy:function(e,i){return function Ku(t,e,i){var r=Qt(t),n=(jr(t)?Qr():ua()).asMutable();t.__iterate(function(s,o){n.update(e.call(i,s,o,t),function(d){return(d=d||[]).push(r?[o,s]:s),d})});var a=Jl(t);return n.map(function(s){return Gt(t,a(s))}).asImmutable()}(this,e,i)},has:function(e){return this.get(e,Bt)!==Bt},hasIn:function df(t){return function ud(t,e){return oh(t,e,Bt)!==Bt}(this,t)},isSubset:function(e){return e="function"==typeof e.includes?e:hi(e),this.every(function(i){return e.includes(i)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:hi(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(i){return Fi(i,e)})},keySeq:function(){return this.toSeq().map(uf).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Xl(this,e)},maxBy:function(e,i){return Xl(this,i,e)},min:function(e){return Xl(this,e?cd(e):Wn)},minBy:function(e,i){return Xl(this,i?cd(i):Wn,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,i){return Gt(this,As(this,e,i,!0))},skipUntil:function(e,i){return this.skipWhile(hd(e),i)},sortBy:function(e,i){return Gt(this,Os(this,i,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,i){return Gt(this,function Ds(t,e,i){var r=T(t);return r.__iterateUncached=function(n,a){var s=this;if(a)return this.cacheResult().__iterate(n,a);var o=0;return t.__iterate(function(d,u,c){return e.call(i,d,u,c)&&++o&&n(d,u,s)}),o},r.__iteratorUncached=function(n,a){var s=this;if(a)return this.cacheResult().__iterator(n,a);var o=t.__iterator(Br,a),d=!0;return new Zt(function(){if(!d)return{value:void 0,done:!0};var u=o.next();if(u.done)return u;var c=u.value,f=c[0],g=c[1];return e.call(i,g,f,s)?n===Br?u:ci(n,f,g,u):(d=!1,{value:void 0,done:!0})})},r}(this,e,i))},takeUntil:function(e,i){return this.takeWhile(hd(e),i)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function nv(t){if(t.size===1/0)return 0;var e=jr(t),i=Qt(t),r=e?1:0;return function _a(t,e){return e=Ss(e,3432918353),e=Ss(e<<15|e>>>-15,461845907),e=Ss(e<<13|e>>>-13,5),e=Ss((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Ha((e=Ss(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(i?e?function(a,s){r=31*r+uh(_r(a),_r(s))|0}:function(a,s){r=r+uh(_r(a),_r(s))|0}:e?function(a){r=31*r+_r(a)|0}:function(a){r=r+_r(a)|0}),r)}(this))}});var ei=hi.prototype;ei[Mu]=!0,ei[$l]=ei.values,ei.toJSON=ei.toArray,ei.__toStringMapper=Do,ei.inspect=ei.toSource=function(){return this.toString()},ei.chain=ei.flatMap,ei.contains=ei.includes,Ua(Ui,{flip:function(){return Gt(this,$i(this))},mapEntries:function(e,i){var r=this,n=0;return Gt(this,this.toSeq().map(function(a,s){return e.call(i,[s,a],n++,r)}).fromEntrySeq())},mapKeys:function(e,i){var r=this;return Gt(this,this.toSeq().flip().map(function(n,a){return e.call(i,n,a,r)}).flip())}});var Jr=Ui.prototype;Jr[Hl]=!0,Jr[$l]=ei.entries,Jr.toJSON=lh,Jr.__toStringMapper=function(t,e){return Do(e)+": "+Do(t)},Ua(na,{toKeyedSeq:function(){return new wo(this,!1)},filter:function(e,i){return Gt(this,Wu(this,e,i,!1))},findIndex:function(e,i){var r=this.findEntry(e,i);return r?r[0]:-1},indexOf:function(e){var i=this.keyOf(e);return void 0===i?-1:i},lastIndexOf:function(e){var i=this.lastKeyOf(e);return void 0===i?-1:i},reverse:function(){return Gt(this,$u(this,!1))},slice:function(e,i){return Gt(this,So(this,e,i,!1))},splice:function(e,i){var r=arguments.length;if(i=Math.max(i||0,0),0===r||2===r&&!i)return this;e=Pa(e,e<0?this.count():this.size);var n=this.slice(0,e);return Gt(this,1===r?n:n.concat(Ti(arguments,2),this.slice(e+i)))},findLastIndex:function(e,i){var r=this.findLastEntry(e,i);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Gt(this,Io(this,e,!1))},get:function(e,i){return(e=hn(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?i:this.find(function(r,n){return n===e},void 0,i)},has:function(e){return(e=hn(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Gt(this,function jm(t,e){var i=T(t);return i.size=t.size&&2*t.size-1,i.__iterateUncached=function(r,n){var a=this,s=0;return t.__iterate(function(o){return(!s||!1!==r(e,s++,a))&&!1!==r(o,s++,a)},n),s},i.__iteratorUncached=function(r,n){var o,a=t.__iterator(Or,n),s=0;return new Zt(function(){return(!o||s%2)&&(o=a.next()).done?o:s%2?ci(r,s++,e):ci(r,s++,o.value,o)})},i}(this,e))},interleave:function(){var e=[this].concat(Ti(arguments)),i=Ql(this.toSeq(),pe.of,e),r=i.flatten(!0);return i.size&&(r.size=i.size*e.length),Gt(this,r)},keySeq:function(){return lf(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,i){return Gt(this,As(this,e,i,!1))},zip:function(){return Gt(this,Ql(this,pd,[this].concat(Ti(arguments))))},zipAll:function(){return Gt(this,Ql(this,pd,[this].concat(Ti(arguments)),!0))},zipWith:function(e){var i=Ti(arguments);return i[0]=this,Gt(this,Ql(this,e,i))}});var fa=na.prototype;fa[Ap]=!0,fa[cn]=!0,Ua(Fa,{get:function(e,i){return this.has(e)?e:i},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Ya=Fa.prototype;function Ho(t,e,i,r,n,a){return Lr(t.size),t.__iterate(function(s,o,d){n?(n=!1,i=s):i=e.call(r,i,s,o,d)},a),i}function uf(t,e){return e}function dh(t,e){return[e,t]}function hd(t){return function(){return!t.apply(this,arguments)}}function cd(t){return function(){return-t.apply(this,arguments)}}function pd(){return Ti(arguments)}function Wn(t,e){return t<e?1:t>e?-1:0}function uh(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Ya.has=ei.includes,Ya.contains=Ya.includes,Ya.keys=Ya.values,Ua(Ce,Jr),Ua(pe,fa),Ua(Qe,Ya);var qa=function(t){function e(i){return null==i?hh():ld(i)?i:hh().withMutations(function(r){var n=Fa(i);Lr(n.size),n.forEach(function(a){return r.add(a)})})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(r){return this(Ui(r).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(bt);qa.isOrderedSet=ld;var cf,Kn=qa.prototype;function hf(t,e){var i=Object.create(Kn);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function hh(){return cf||(cf=hf(Ps()))}Kn[cn]=!0,Kn.zip=fa.zip,Kn.zipWith=fa.zipWith,Kn.zipAll=fa.zipAll,Kn.__empty=hh,Kn.__make=hf;var Mi=function(e,i){var r;!function ff(t){if(Va(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(qr(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var n=function(o){var d=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var u=Object.keys(e),c=a._indices={};a._name=i,a._keys=u,a._defaultValues=e;for(var f=0;f<u.length;f++){var g=u[f];c[g]=f,a[g]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+ji(this)+' with property "'+g+'" since that property name is part of the Record API.'):av(a,g)}}return this.__ownerID=void 0,this._values=ca().withMutations(function(m){m.setSize(d._keys.length),Ui(o).forEach(function(y,w){m.set(d._indices[w],y===d._defaultValues[w]?void 0:y)})}),this},a=n.prototype=Object.create(ai);return a.constructor=n,i&&(n.displayName=i),n};Mi.prototype.toString=function(){for(var r,e=ji(this)+" { ",i=this._keys,n=0,a=i.length;n!==a;n++)e+=(n?", ":"")+(r=i[n])+": "+Do(this.get(r));return e+" }"},Mi.prototype.equals=function(e){return this===e||Va(e)&&or(this).equals(or(e))},Mi.prototype.hashCode=function(){return or(this).hashCode()},Mi.prototype.has=function(e){return this._indices.hasOwnProperty(e)},Mi.prototype.get=function(e,i){if(!this.has(e))return i;var n=this._values.get(this._indices[e]);return void 0===n?this._defaultValues[e]:n},Mi.prototype.set=function(e,i){if(this.has(e)){var r=this._values.set(this._indices[e],i===this._defaultValues[e]?void 0:i);if(r!==this._values&&!this.__ownerID)return fd(this,r)}return this},Mi.prototype.remove=function(e){return this.set(e)},Mi.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fd(this,e)},Mi.prototype.wasAltered=function(){return this._values.wasAltered()},Mi.prototype.toSeq=function(){return or(this)},Mi.prototype.toJS=function(){return Ns(this)},Mi.prototype.entries=function(){return this.__iterator(Br)},Mi.prototype.__iterator=function(e,i){return or(this).__iterator(e,i)},Mi.prototype.__iterate=function(e,i){return or(this).__iterate(e,i)},Mi.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var i=this._values.__ensureOwner(e);return e?fd(this,i,e):(this.__ownerID=e,this._values=i,this)},Mi.isRecord=Va,Mi.getDescriptiveName=ji;var ai=Mi.prototype;function fd(t,e,i){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=i,r}function ji(t){return t.constructor.displayName||t.constructor.name||"Record"}function or(t){return Fu(t._keys.map(function(e){return[e,t.get(e)]}))}function av(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(i){Rt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,i)}})}catch{}}ai[Op]=!0,ai[Xt]=ai.remove,ai.deleteIn=ai.removeIn=Yu,ai.getIn=zo,ai.hasIn=ei.hasIn,ai.merge=Kp,ai.mergeWith=la,ai.mergeIn=Ju,ai.mergeDeep=Qu,ai.mergeDeepWith=Yp,ai.mergeDeepIn=Oo,ai.setIn=Uu,ai.update=ju,ai.updateIn=Xu,ai.withMutations=zn,ai.asMutable=da,ai.asImmutable=Bo,ai[$l]=ai.entries,ai.toJSON=ai.toObject=ei.toObject,ai.inspect=ai.toSource=function(){return this.toString()};class dv{constructor(e){this.filtered_conditon=ua(),this.fields=["Sensations","Manipulations","Stimuli","Grounding Methods","Stimulating Methods","Source to Mechanical Mechanism","Simple to Complex Mechanism"],this.data=e,this.filtered_data=e}update_filtered_data(){this.filtered_data=this.data}get_distinct_arr(e,i){return bt(e.map(a=>a[i])).toList().map(a=>{let s=e.find(o=>o[i]===a).filtered||!1;return[a,s]})}get_contents(){return this.contents=ca(this.fields.map(e=>({key:e,values:this.get_distinct_arr(this.filtered_data,e)}))),this.contents}}var ph=k(9054),fh=k(6709),$o=k(266);const gf=function(t){return{color:t}};function gd(t,e){if(1&t){const i=p.EpF();p.TgZ(0,"div")(1,"mat-checkbox",5),p.NdJ("change",function(){p.CHM(i);const n=p.oxw();return p.KtG(n.filter_change())}),p.TgZ(2,"span",6),p._uU(3),p.ALo(4,"slice"),p.qZA()()()}if(2&t){const i=e.$implicit;p.xp6(1),p.Q6J("disabled",!0)("formControlName",i[0]),p.xp6(1),p.Q6J("matTooltip",i[0])("ngStyle",p.VKq(10,gf,i[1]?"red":"black")),p.xp6(1),p.AsE(" ",p.Dn7(4,6,i[0],0,15),"",i[0].length>15?"...":""," ")}}let _h=(()=>{var t;class e{constructor(r,n){this.fb=r,this.data_service=n,this.fb_group=new L.cw({value:new L.NI(!1)}),this.first_time=!0,this.filterChange=new p.vpe}set list(r){this.data_service.get_order().subscribe(n=>{this.handel_orders(r,n),this.render_form()})}ngOnInit(){}handel_orders(r,n){r=r.sort((a,s)=>n.findIndex(o=>o===a[0])>n.findIndex(o=>o===s[0])?1:-1),this.item_list=r}render_form(){if(this.item_list.size>0){let r={};this.item_list.forEach(n=>{Object.assign(r,{[n[0]]:new L.NI({value:n[1],disabled:!1})})}),this.fb_group=new L.cw(r)}}filter_change(){if(this.check_if_all_false(this.fb_group.value)){let r=this.get_all_true_form_value();this.filterChange.emit({key:this.title,values:r,is_all:!0})}else this.filterChange.emit({key:this.title,values:this.fb_group.value,is_all:!1})}select_all(){Object.keys(this.fb_group.value).forEach(n=>{this.fb_group.patchValue({[n]:!0})}),this.filterChange.emit({key:this.title,values:this.fb_group.value,is_all:!0})}clear_all(){Object.keys(this.fb_group.value).forEach(a=>{this.fb_group.patchValue({[a]:!1})});let n=this.get_all_true_form_value();this.filterChange.emit({key:this.title,values:n,is_all:!0})}get_all_true_form_value(){let r={};return Object.entries(this.fb_group.value).map(n=>{Object.assign(r,{[n[0]]:!0})}),r}check_if_all_false(r){return!Object.entries(r).reduce((n,a)=>n||a[1],!1)}}return(t=e).\u0275fac=function(r){return new(r||t)(p.Y36(L.qu),p.Y36(_o))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-filter"]],inputs:{first_time:"first_time",title:"title",list:"list"},outputs:{filterChange:"filterChange"},decls:10,vars:2,consts:[[1,"actionBtns"],[1,"selectAllbtn","text-[0.72vw]",3,"click"],[1,"clearAllbtn","text-[0.72vw]",3,"click"],[1,"filters","text-[0.72vw]",3,"formGroup"],[4,"ngFor","ngForOf"],["color","primary",3,"disabled","formControlName","change"],["matTooltipClass","example-tooltip-uppercase",1,"custom-checkbox-label","text-[0.72vw]",3,"matTooltip","ngStyle"]],template:function(r,n){1&r&&(p.TgZ(0,"main")(1,"div",0)(2,"div")(3,"button",1),p.NdJ("click",function(){return n.select_all()}),p._uU(4," All "),p.qZA()(),p.TgZ(5,"div")(6,"button",2),p.NdJ("click",function(){return n.clear_all()}),p._uU(7," Clear "),p.qZA()()(),p.TgZ(8,"div",3),p.YNc(9,gd,5,12,"div",4),p.qZA()()),2&r&&(p.xp6(8),p.Q6J("formGroup",n.fb_group),p.xp6(1),p.Q6J("ngForOf",n.item_list))},dependencies:[ee.sg,ee.PC,fh.oG,L.JJ,L.JL,L.sg,L.u,$o.gM,ee.OU],styles:[".filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}mat-checkbox[_ngcontent-%COMP%]{width:80%;word-break:normal}.clearAllbtn[_ngcontent-%COMP%]{border-radius:10.8462px!important;font-family:Roboto;font-style:normal;font-weight:700;font-size:12.8571px;line-height:15px;border:#4b4b4b solid;padding:2px 5px}.actionBtns[_ngcontent-%COMP%]{display:grid;grid-template-columns:80% 20%}.selectAllbtn[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:700;font-size:12.8571px;line-height:15px;color:#929292;background-color:#fff;border:#ffffff}"]}),e})();function md(t,e){if(1&t){const i=p.EpF();p.TgZ(0,"nz-collapse-panel",3)(1,"app-filter",4),p.NdJ("filterChange",function(n){p.CHM(i);const a=p.oxw();return p.KtG(a.filter_change(n))}),p.qZA()()}if(2&t){const i=e.$implicit,r=p.oxw();p.Q6J("nzHeader",i.key)("nzActive",!1),p.xp6(1),p.Q6J("list",i.values)("title",i.key)("first_time",r.first_time)}}let uv=(()=>{var t;class e{constructor(r){this.data_service=r,this.first_time=!0,this.filtersChange=new p.vpe}ngOnInit(){this.data_service.get_data().subscribe(r=>{this.data_service.get_order().subscribe(n=>{this.orders=n,r.forEach(a=>{a.filtered=!1}),this.data=r,this.get_contents()})})}filter_change(r){console.log("e==>",r),this.filtersChange.emit(r)}update_filter(r){this.change_data(r),this.get_contents()}change_data(r){this.data.forEach(n=>{r.values[n[r.key]]&&(n.filtered=!0)})}get_contents(){this.filter_service=new dv(ca(ca(this.data))),this.contents=this.filter_service.get_contents(),this.contents.map(r=>(r.values=r.values.sort((n,a)=>this.orders.findIndex(d=>d.toUpperCase()===(r.key+"~"+n[0].toUpperCase()).toUpperCase())>this.orders.findIndex(d=>d.toUpperCase()===(r.key+"~"+a[0].toUpperCase()).toUpperCase())?-1:1),r)),console.log("this.contents==>",this.contents.toJS())}}return(t=e).\u0275fac=function(r){return new(r||t)(p.Y36(_o))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-filters"]],outputs:{filtersChange:"filtersChange"},decls:3,vars:1,consts:[[1,"content"],["nzAccordion","false"],[3,"nzHeader","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzActive"],[3,"list","title","first_time","filterChange"]],template:function(r,n){1&r&&(p.TgZ(0,"main",0)(1,"nz-collapse",1),p.YNc(2,md,2,5,"nz-collapse-panel",2),p.qZA()()),2&r&&(p.xp6(2),p.Q6J("ngForOf",n.contents))},dependencies:[ee.sg,ph.Zv,ph.yH,_h],styles:["mat-radio-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:5px}.content[_ngcontent-%COMP%]{margin:10px 0 0 30px;height:90vh;overflow-y:scroll}.clearBtn[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 30%}h4[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:700;font-size:18px;line-height:21px;color:#4b4b4b}section[_ngcontent-%COMP%]{margin-top:20px}"]}),e})();var vd=k(1481);function Cd(t,e){if(1&t&&(p.TgZ(0,"div")(1,"p",9),p._uU(2),p.qZA()()),2&t){const i=e.$implicit;p.xp6(2),p.Oqu(i)}}function mf(t,e){if(1&t&&(p.TgZ(0,"div")(1,"p",10),p._uU(2),p.qZA()()),2&t){const i=e.$implicit,r=p.oxw().$implicit;p.xp6(2),p.Oqu(r[i])}}function gh(t,e){if(1&t){const i=p.EpF();p.TgZ(0,"section",1)(1,"section",2),p._UZ(2,"img",3),p.qZA(),p.TgZ(3,"section",4)(4,"p",5),p.NdJ("click",function(){const a=p.CHM(i).$implicit,s=p.oxw();return p.KtG(s.nav_to_paper_link(a["Paper link"]))}),p._uU(5),p.qZA(),p.TgZ(6,"div",6)(7,"span"),p._uU(8),p.qZA(),p.TgZ(9,"span"),p._uU(10),p.qZA()(),p.TgZ(11,"div",7),p.YNc(12,Cd,3,1,"div",8),p.YNc(13,mf,3,1,"div",8),p.qZA()()()}if(2&t){const i=e.$implicit,r=p.oxw();p.xp6(2),p.Q6J("src","assets/Picture/"+i.Name+".png",p.LSH),p.xp6(3),p.hij(" ",i.Title," "),p.xp6(3),p.Oqu(i.Venue),p.xp6(2),p.Oqu(i.Year),p.xp6(2),p.Q6J("ngForOf",r.titles),p.xp6(1),p.Q6J("ngForOf",r.titles)}}let hv=(()=>{var t;class e{constructor(r){this.sanitizer=r,this.year_range=[2010,2022],this.titles=["Sensations","Manipulations","Stimuli","Grounding Methods","Stimulating Methods","Source to Mechanical Mechanisms","Simple to Complex Mechanisms"]}get_url(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}nav_to_paper_link(r){window.open(r)}ngOnInit(){console.log("this.year_range\u5217\u8868\u7684\u53d8\u5316==>",this.year_range,this.data),this.data=this.data.filter(r=>+r.Year>=this.year_range[0]&&+r.Year<=this.year_range[1]),console.log("  this.data==>",this.data)}}return(t=e).\u0275fac=function(r){return new(r||t)(p.Y36(vd.H7))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-content"]],inputs:{data:"data",year_range:"year_range"},decls:1,vars:1,consts:[["class","shadow-lg grid grid-cols-12 mt-5 mb-5 p-5",4,"ngFor","ngForOf"],[1,"shadow-lg","grid","grid-cols-12","mt-5","mb-5","p-5"],[1,"col-span-3","mr-6"],["width","100%","alt","show",1,"rounded-lg",3,"src"],[1,"col-span-9"],[1,"font-normal","text-2xl","mt-2","cursor-pointer",3,"click"],[1,"font-medium","text-sm","mt-2"],[1,"grid","grid-cols-7","mt-2"],[4,"ngFor","ngForOf"],[1,"font-light","italic"],[1,"font-semibold"]],template:function(r,n){1&r&&p.YNc(0,gh,14,6,"section",0),2&r&&p.Q6J("ngForOf",n.data)},dependencies:[ee.sg]}),e})();var Gn=k(1135),Tn=k(6451),Wo=k(9841),vf=k(5577),Cf=k(9300),bf=k(9718),cv=k(3601),yf=k(1884),Dn=k(8675),mh=k(3900),$s=k(8184),vr=k(1691),Ws=k(4903),An=k(7423),ht=k(6287),Ks=k(2539);const vh=["nz-submenu-title",""];function ja(t,e){if(1&t&&p._UZ(0,"span",4),2&t){const i=p.oxw();p.Q6J("nzType",i.nzIcon)}}function pv(t,e){if(1&t&&(p.ynx(0),p.TgZ(1,"span"),p._uU(2),p.qZA(),p.BQk()),2&t){const i=p.oxw();p.xp6(2),p.Oqu(i.nzTitle)}}function Ch(t,e){1&t&&p._UZ(0,"span",8)}function wf(t,e){1&t&&p._UZ(0,"span",9)}function Xi(t,e){if(1&t&&(p.TgZ(0,"span",5),p.YNc(1,Ch,1,0,"span",6),p.YNc(2,wf,1,0,"span",7),p.qZA()),2&t){const i=p.oxw();p.Q6J("ngSwitch",i.dir),p.xp6(1),p.Q6J("ngSwitchCase","rtl")}}function fv(t,e){1&t&&p._UZ(0,"span",10)}const _v=["*"],xf=["nz-submenu-inline-child",""];function gv(t,e){}const Sf=["nz-submenu-none-inline-child",""];function mv(t,e){}const vv=["nz-submenu",""];function Cv(t,e){1&t&&p.Hsn(0,0,["*ngIf","!nzTitle"])}function Un(t,e){if(1&t&&p._UZ(0,"div",6),2&t){const i=p.oxw(),r=p.MAs(7);p.Q6J("mode",i.mode)("nzOpen",i.nzOpen)("@.disabled",!(null==i.noAnimation||!i.noAnimation.nzNoAnimation))("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("menuClass",i.nzMenuClassName)("templateOutlet",r)}}function lr(t,e){if(1&t){const i=p.EpF();p.TgZ(0,"div",8),p.NdJ("subMenuMouseState",function(n){p.CHM(i);const a=p.oxw(2);return p.KtG(a.setMouseEnterState(n))}),p.qZA()}if(2&t){const i=p.oxw(2),r=p.MAs(7);p.Q6J("theme",i.theme)("mode",i.mode)("nzOpen",i.nzOpen)("position",i.position)("nzDisabled",i.nzDisabled)("isMenuInsideDropDown",i.isMenuInsideDropDown)("templateOutlet",r)("menuClass",i.nzMenuClassName)("@.disabled",!(null==i.noAnimation||!i.noAnimation.nzNoAnimation))("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)}}function bh(t,e){if(1&t){const i=p.EpF();p.YNc(0,lr,1,10,"ng-template",7),p.NdJ("positionChange",function(n){p.CHM(i);const a=p.oxw();return p.KtG(a.onPositionChange(n))})}if(2&t){const i=p.oxw(),r=p.MAs(1);p.Q6J("cdkConnectedOverlayPositions",i.overlayPositions)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayWidth",i.triggerWidth)("cdkConnectedOverlayOpen",i.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function bv(t,e){1&t&&p.Hsn(0,1)}const yh=[[["","title",""]],"*"],yv=["[title]","*"],Gs=new p.OlP("NzIsInDropDownMenuToken"),Ef=new p.OlP("NzMenuServiceLocalToken");let ga=(()=>{class t{constructor(){this.descendantMenuItemClick$=new cr.x,this.childMenuItemClick$=new cr.x,this.theme$=new Gn.X("light"),this.mode$=new Gn.X("vertical"),this.inlineIndent$=new Gn.X(24),this.isChildSubMenuOpen$=new Gn.X(!1)}onDescendantMenuItemClick(i){this.descendantMenuItemClick$.next(i)}onChildMenuItemClick(i){this.childMenuItemClick$.next(i)}setMode(i){this.mode$.next(i)}setTheme(i){this.theme$.next(i)}setInlineIndent(i){this.inlineIndent$.next(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})(),yd=(()=>{class t{constructor(i,r,n){this.nzHostSubmenuService=i,this.nzMenuService=r,this.isMenuInsideDropDown=n,this.mode$=this.nzMenuService.mode$.pipe((0,ia.U)(d=>"inline"===d?"inline":"vertical"===d||this.nzHostSubmenuService?"vertical":"horizontal")),this.level=1,this.isCurrentSubMenuOpen$=new Gn.X(!1),this.isChildSubMenuOpen$=new Gn.X(!1),this.isMouseEnterTitleOrOverlay$=new cr.x,this.childMenuItemClick$=new cr.x,this.destroy$=new cr.x,this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);const a=this.childMenuItemClick$.pipe((0,vf.z)(()=>this.mode$),(0,Cf.h)(d=>"inline"!==d||this.isMenuInsideDropDown),(0,bf.h)(!1)),s=(0,Tn.T)(this.isMouseEnterTitleOrOverlay$,a);(0,Wo.a)([this.isChildSubMenuOpen$,s]).pipe((0,ia.U)(([d,u])=>d||u),(0,cv.e)(150),(0,yf.x)(),(0,yi.R)(this.destroy$)).pipe((0,yf.x)()).subscribe(d=>{this.setOpenStateWithoutDebounce(d),this.nzHostSubmenuService?this.nzHostSubmenuService.isChildSubMenuOpen$.next(d):this.nzMenuService.isChildSubMenuOpen$.next(d)})}onChildMenuItemClick(i){this.childMenuItemClick$.next(i)}setOpenStateWithoutDebounce(i){this.isCurrentSubMenuOpen$.next(i)}setMouseEnterTitleOrOverlayState(i){this.isMouseEnterTitleOrOverlay$.next(i)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.LFG(t,12),p.LFG(ga),p.LFG(Gs))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})(),wh=(()=>{class t{constructor(i,r,n,a,s,o,d){this.nzMenuService=i,this.cdr=r,this.nzSubmenuService=n,this.isMenuInsideDropDown=a,this.directionality=s,this.routerLink=o,this.router=d,this.destroy$=new cr.x,this.level=this.nzSubmenuService?this.nzSubmenuService.level+1:1,this.selected$=new cr.x,this.inlinePaddingLeft=null,this.dir="ltr",this.nzDisabled=!1,this.nzSelected=!1,this.nzDanger=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,d&&this.router.events.pipe((0,yi.R)(this.destroy$),(0,Cf.h)(u=>u instanceof ea.m2)).subscribe(()=>{this.updateRouterActive()})}clickMenuItem(i){this.nzDisabled?(i.preventDefault(),i.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}setSelectedState(i){this.nzSelected=i,this.selected$.next(i)}updateRouterActive(){!this.listOfRouterLink||!this.router||!this.router.navigated||!this.nzMatchRouter||Promise.resolve().then(()=>{const i=this.hasActiveLinks();this.nzSelected!==i&&(this.nzSelected=i,this.setSelectedState(this.nzSelected),this.cdr.markForCheck())})}hasActiveLinks(){const i=this.isLinkActive(this.router);return this.routerLink&&i(this.routerLink)||this.listOfRouterLink.some(i)}isLinkActive(i){return r=>i.isActive(r.urlTree||"",{paths:this.nzMatchRouterExact?"exact":"subset",queryParams:this.nzMatchRouterExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}ngOnInit(){(0,Wo.a)([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,yi.R)(this.destroy$)).subscribe(([i,r])=>{this.inlinePaddingLeft="inline"===i?this.level*r:null}),this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i})}ngAfterContentInit(){this.listOfRouterLink.changes.pipe((0,yi.R)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(i){i.nzSelected&&this.setSelectedState(this.nzSelected)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(ga),p.Y36(p.sBO),p.Y36(yd,8),p.Y36(Gs),p.Y36(Kr.Is,8),p.Y36(ea.rH,8),p.Y36(ea.F0,8))},t.\u0275dir=p.lG2({type:t,selectors:[["","nz-menu-item",""]],contentQueries:function(i,r,n){if(1&i&&p.Suo(n,ea.rH,5),2&i){let a;p.iGM(a=p.CRH())&&(r.listOfRouterLink=a)}},hostVars:20,hostBindings:function(i,r){1&i&&p.NdJ("click",function(a){return r.clickMenuItem(a)}),2&i&&(p.Udp("padding-left","rtl"===r.dir?null:r.nzPaddingLeft||r.inlinePaddingLeft,"px")("padding-right","rtl"===r.dir?r.nzPaddingLeft||r.inlinePaddingLeft:null,"px"),p.ekj("ant-dropdown-menu-item",r.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",r.isMenuInsideDropDown&&r.nzSelected)("ant-dropdown-menu-item-danger",r.isMenuInsideDropDown&&r.nzDanger)("ant-dropdown-menu-item-disabled",r.isMenuInsideDropDown&&r.nzDisabled)("ant-menu-item",!r.isMenuInsideDropDown)("ant-menu-item-selected",!r.isMenuInsideDropDown&&r.nzSelected)("ant-menu-item-danger",!r.isMenuInsideDropDown&&r.nzDanger)("ant-menu-item-disabled",!r.isMenuInsideDropDown&&r.nzDisabled))},inputs:{nzPaddingLeft:"nzPaddingLeft",nzDisabled:"nzDisabled",nzSelected:"nzSelected",nzDanger:"nzDanger",nzMatchRouterExact:"nzMatchRouterExact",nzMatchRouter:"nzMatchRouter"},exportAs:["nzMenuItem"],features:[p.TTD]}),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzDisabled",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzSelected",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzDanger",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzMatchRouterExact",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzMatchRouter",void 0),t})(),xh=(()=>{class t{constructor(i,r){this.cdr=i,this.directionality=r,this.nzIcon=null,this.nzTitle=null,this.isMenuInsideDropDown=!1,this.nzDisabled=!1,this.paddingLeft=null,this.mode="vertical",this.toggleSubMenu=new p.vpe,this.subMenuMouseState=new p.vpe,this.dir="ltr",this.destroy$=new cr.x}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMouseState(i){this.nzDisabled||this.subMenuMouseState.next(i)}clickTitle(){"inline"===this.mode&&!this.nzDisabled&&this.toggleSubMenu.emit()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.sBO),p.Y36(Kr.Is,8))},t.\u0275cmp=p.Xpm({type:t,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(i,r){1&i&&p.NdJ("click",function(){return r.clickTitle()})("mouseenter",function(){return r.setMouseState(!0)})("mouseleave",function(){return r.setMouseState(!1)}),2&i&&(p.Udp("padding-left","rtl"===r.dir?null:r.paddingLeft,"px")("padding-right","rtl"===r.dir?r.paddingLeft:null,"px"),p.ekj("ant-dropdown-menu-submenu-title",r.isMenuInsideDropDown)("ant-menu-submenu-title",!r.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],attrs:vh,ngContentSelectors:_v,decls:6,vars:4,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch",4,"ngIf","ngIfElse"],["notDropdownTpl",""],["nz-icon","",3,"nzType"],[1,"ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch"],["nz-icon","","nzType","left","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchCase"],["nz-icon","","nzType","right","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nz-icon","","nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"],[1,"ant-menu-submenu-arrow"]],template:function(i,r){if(1&i&&(p.F$t(),p.YNc(0,ja,1,1,"span",0),p.YNc(1,pv,3,1,"ng-container",1),p.Hsn(2),p.YNc(3,Xi,3,2,"span",2),p.YNc(4,fv,1,0,"ng-template",null,3,p.W1O)),2&i){const n=p.MAs(5);p.Q6J("ngIf",r.nzIcon),p.xp6(1),p.Q6J("nzStringTemplateOutlet",r.nzTitle),p.xp6(2),p.Q6J("ngIf",r.isMenuInsideDropDown)("ngIfElse",n)}},dependencies:[ee.O5,ee.RF,ee.n9,ee.ED,An.Ls,ht.f],encapsulation:2,changeDetection:0}),t})(),If=(()=>{class t{constructor(i,r,n){this.elementRef=i,this.renderer=r,this.directionality=n,this.templateOutlet=null,this.menuClass="",this.mode="vertical",this.nzOpen=!1,this.listOfCacheClassName=[],this.expandState="collapsed",this.dir="ltr",this.destroy$=new cr.x}calcMotionState(){this.expandState=this.nzOpen?"expanded":"collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i})}ngOnChanges(i){const{mode:r,nzOpen:n,menuClass:a}=i;(r||n)&&this.calcMotionState(),a&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(s=>!!s).forEach(s=>{this.renderer.removeClass(this.elementRef.nativeElement,s)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(s=>!!s).forEach(s=>{this.renderer.addClass(this.elementRef.nativeElement,s)})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Kr.Is,8))},t.\u0275cmp=p.Xpm({type:t,selectors:[["","nz-submenu-inline-child",""]],hostAttrs:[1,"ant-menu","ant-menu-inline","ant-menu-sub"],hostVars:3,hostBindings:function(i,r){2&i&&(p.d8E("@collapseMotion",r.expandState),p.ekj("ant-menu-rtl","rtl"===r.dir))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],features:[p.TTD],attrs:xf,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(i,r){1&i&&p.YNc(0,gv,0,0,"ng-template",0),2&i&&p.Q6J("ngTemplateOutlet",r.templateOutlet)},dependencies:[ee.tP],encapsulation:2,data:{animation:[Ks.J_]},changeDetection:0}),t})(),Ko=(()=>{class t{constructor(i){this.directionality=i,this.menuClass="",this.theme="light",this.templateOutlet=null,this.isMenuInsideDropDown=!1,this.mode="vertical",this.position="right",this.nzDisabled=!1,this.nzOpen=!1,this.subMenuMouseState=new p.vpe,this.expandState="collapsed",this.dir="ltr",this.destroy$=new cr.x}setMouseState(i){this.nzDisabled||this.subMenuMouseState.next(i)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calcMotionState(){this.nzOpen?"horizontal"===this.mode?this.expandState="bottom":"vertical"===this.mode&&(this.expandState="active"):this.expandState="collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i})}ngOnChanges(i){const{mode:r,nzOpen:n}=i;(r||n)&&this.calcMotionState()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(Kr.Is,8))},t.\u0275cmp=p.Xpm({type:t,selectors:[["","nz-submenu-none-inline-child",""]],hostAttrs:[1,"ant-menu-submenu","ant-menu-submenu-popup"],hostVars:14,hostBindings:function(i,r){1&i&&p.NdJ("mouseenter",function(){return r.setMouseState(!0)})("mouseleave",function(){return r.setMouseState(!1)}),2&i&&(p.d8E("@slideMotion",r.expandState)("@zoomBigMotion",r.expandState),p.ekj("ant-menu-light","light"===r.theme)("ant-menu-dark","dark"===r.theme)("ant-menu-submenu-placement-bottom","horizontal"===r.mode)("ant-menu-submenu-placement-right","vertical"===r.mode&&"right"===r.position)("ant-menu-submenu-placement-left","vertical"===r.mode&&"left"===r.position)("ant-menu-submenu-rtl","rtl"===r.dir))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],features:[p.TTD],attrs:Sf,decls:2,vars:16,consts:[[3,"ngClass"],[3,"ngTemplateOutlet"]],template:function(i,r){1&i&&(p.TgZ(0,"div",0),p.YNc(1,mv,0,0,"ng-template",1),p.qZA()),2&i&&(p.ekj("ant-dropdown-menu",r.isMenuInsideDropDown)("ant-menu",!r.isMenuInsideDropDown)("ant-dropdown-menu-vertical",r.isMenuInsideDropDown)("ant-menu-vertical",!r.isMenuInsideDropDown)("ant-dropdown-menu-sub",r.isMenuInsideDropDown)("ant-menu-sub",!r.isMenuInsideDropDown)("ant-menu-rtl","rtl"===r.dir),p.Q6J("ngClass",r.menuClass),p.xp6(1),p.Q6J("ngTemplateOutlet",r.templateOutlet))},dependencies:[ee.mk,ee.tP],encapsulation:2,data:{animation:[Ks.$C,Ks.mF]},changeDetection:0}),t})();const wd=[vr.yW.rightTop,vr.yW.right,vr.yW.rightBottom,vr.yW.leftTop,vr.yW.left,vr.yW.leftBottom],Tf=[vr.yW.bottomLeft,vr.yW.bottomRight,vr.yW.topRight,vr.yW.topLeft];let Df=(()=>{class t{constructor(i,r,n,a,s,o,d){this.nzMenuService=i,this.cdr=r,this.nzSubmenuService=n,this.platform=a,this.isMenuInsideDropDown=s,this.directionality=o,this.noAnimation=d,this.nzMenuClassName="",this.nzPaddingLeft=null,this.nzTitle=null,this.nzIcon=null,this.nzOpen=!1,this.nzDisabled=!1,this.nzPlacement="bottomLeft",this.nzOpenChange=new p.vpe,this.cdkOverlayOrigin=null,this.listOfNzSubMenuComponent=null,this.listOfNzMenuItemDirective=null,this.level=this.nzSubmenuService.level,this.destroy$=new cr.x,this.position="right",this.triggerWidth=null,this.theme="light",this.mode="vertical",this.inlinePaddingLeft=null,this.overlayPositions=wd,this.isSelected=!1,this.isActive=!1,this.dir="ltr"}setOpenStateWithoutDebounce(i){this.nzSubmenuService.setOpenStateWithoutDebounce(i)}toggleSubMenu(){this.setOpenStateWithoutDebounce(!this.nzOpen)}setMouseEnterState(i){this.isActive=i,"inline"!==this.mode&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(i)}setTriggerWidth(){"horizontal"===this.mode&&this.platform.isBrowser&&this.cdkOverlayOrigin&&"bottomLeft"===this.nzPlacement&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(i){const r=(0,vr.d_)(i);"rightTop"===r||"rightBottom"===r||"right"===r?this.position="right":("leftTop"===r||"leftBottom"===r||"left"===r)&&(this.position="left")}ngOnInit(){this.nzMenuService.theme$.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.theme=i,this.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.mode=i,"horizontal"===i?this.overlayPositions=[vr.yW[this.nzPlacement],...Tf]:"vertical"===i&&(this.overlayPositions=wd),this.cdr.markForCheck()}),(0,Wo.a)([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,yi.R)(this.destroy$)).subscribe(([i,r])=>{this.inlinePaddingLeft="inline"===i?this.level*r:null,this.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.isActive=i,i!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=i,this.nzOpenChange.emit(this.nzOpen),this.cdr.markForCheck())}),this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth();const i=this.listOfNzMenuItemDirective,r=i.changes,n=(0,Tn.T)(r,...i.map(a=>a.selected$));r.pipe((0,Dn.O)(i),(0,mh.w)(()=>n),(0,Dn.O)(!0),(0,ia.U)(()=>i.some(a=>a.nzSelected)),(0,yi.R)(this.destroy$)).subscribe(a=>{this.isSelected=a,this.cdr.markForCheck()})}ngOnChanges(i){const{nzOpen:r}=i;r&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(ga),p.Y36(p.sBO),p.Y36(yd),p.Y36(Pe.t4),p.Y36(Gs),p.Y36(Kr.Is,8),p.Y36(Ws.P,9))},t.\u0275cmp=p.Xpm({type:t,selectors:[["","nz-submenu",""]],contentQueries:function(i,r,n){if(1&i&&(p.Suo(n,t,5),p.Suo(n,wh,5)),2&i){let a;p.iGM(a=p.CRH())&&(r.listOfNzSubMenuComponent=a),p.iGM(a=p.CRH())&&(r.listOfNzMenuItemDirective=a)}},viewQuery:function(i,r){if(1&i&&p.Gf($s.xu,7,p.SBq),2&i){let n;p.iGM(n=p.CRH())&&(r.cdkOverlayOrigin=n.first)}},hostVars:34,hostBindings:function(i,r){2&i&&p.ekj("ant-dropdown-menu-submenu",r.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",r.isMenuInsideDropDown&&r.nzDisabled)("ant-dropdown-menu-submenu-open",r.isMenuInsideDropDown&&r.nzOpen)("ant-dropdown-menu-submenu-selected",r.isMenuInsideDropDown&&r.isSelected)("ant-dropdown-menu-submenu-vertical",r.isMenuInsideDropDown&&"vertical"===r.mode)("ant-dropdown-menu-submenu-horizontal",r.isMenuInsideDropDown&&"horizontal"===r.mode)("ant-dropdown-menu-submenu-inline",r.isMenuInsideDropDown&&"inline"===r.mode)("ant-dropdown-menu-submenu-active",r.isMenuInsideDropDown&&r.isActive)("ant-menu-submenu",!r.isMenuInsideDropDown)("ant-menu-submenu-disabled",!r.isMenuInsideDropDown&&r.nzDisabled)("ant-menu-submenu-open",!r.isMenuInsideDropDown&&r.nzOpen)("ant-menu-submenu-selected",!r.isMenuInsideDropDown&&r.isSelected)("ant-menu-submenu-vertical",!r.isMenuInsideDropDown&&"vertical"===r.mode)("ant-menu-submenu-horizontal",!r.isMenuInsideDropDown&&"horizontal"===r.mode)("ant-menu-submenu-inline",!r.isMenuInsideDropDown&&"inline"===r.mode)("ant-menu-submenu-active",!r.isMenuInsideDropDown&&r.isActive)("ant-menu-submenu-rtl","rtl"===r.dir)},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzOpen:"nzOpen",nzDisabled:"nzDisabled",nzPlacement:"nzPlacement"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],features:[p._Bn([yd]),p.TTD],attrs:vv,ngContentSelectors:yv,decls:8,vars:9,consts:[["nz-submenu-title","","cdkOverlayOrigin","",3,"nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft","subMenuMouseState","toggleSubMenu"],["origin","cdkOverlayOrigin"],[4,"ngIf"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet",4,"ngIf","ngIfElse"],["nonInlineTemplate",""],["subMenuTemplate",""],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn","positionChange"],["nz-submenu-none-inline-child","",3,"theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","templateOutlet","menuClass","nzNoAnimation","subMenuMouseState"]],template:function(i,r){if(1&i&&(p.F$t(yh),p.TgZ(0,"div",0,1),p.NdJ("subMenuMouseState",function(a){return r.setMouseEnterState(a)})("toggleSubMenu",function(){return r.toggleSubMenu()}),p.YNc(2,Cv,1,0,"ng-content",2),p.qZA(),p.YNc(3,Un,1,6,"div",3),p.YNc(4,bh,1,5,"ng-template",null,4,p.W1O),p.YNc(6,bv,1,0,"ng-template",null,5,p.W1O)),2&i){const n=p.MAs(5);p.Q6J("nzIcon",r.nzIcon)("nzTitle",r.nzTitle)("mode",r.mode)("nzDisabled",r.nzDisabled)("isMenuInsideDropDown",r.isMenuInsideDropDown)("paddingLeft",r.nzPaddingLeft||r.inlinePaddingLeft),p.xp6(2),p.Q6J("ngIf",!r.nzTitle),p.xp6(1),p.Q6J("ngIf","inline"===r.mode)("ngIfElse",n)}},dependencies:[ee.O5,$s.pI,$s.xu,Ws.P,xh,If,Ko],encapsulation:2,changeDetection:0}),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzOpen",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzDisabled",void 0),t})();function xd(t,e){return t||e}function Af(t){return t||!1}let Rn=(()=>{class t{constructor(i,r,n,a){this.nzMenuService=i,this.isMenuInsideDropDown=r,this.cdr=n,this.directionality=a,this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInlineCollapsed=!1,this.nzSelectable=!this.isMenuInsideDropDown,this.nzClick=new p.vpe,this.actualMode="vertical",this.dir="ltr",this.inlineCollapsed$=new Gn.X(this.nzInlineCollapsed),this.mode$=new Gn.X(this.nzMode),this.destroy$=new cr.x,this.listOfOpenedNzSubMenuComponent=[]}setInlineCollapsed(i){this.nzInlineCollapsed=i,this.inlineCollapsed$.next(i)}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(i=>i.nzOpen),this.listOfNzSubMenuComponent.forEach(i=>i.setOpenStateWithoutDebounce(!1))):(this.listOfOpenedNzSubMenuComponent.forEach(i=>i.setOpenStateWithoutDebounce(!0)),this.listOfOpenedNzSubMenuComponent=[]))}ngOnInit(){(0,Wo.a)([this.inlineCollapsed$,this.mode$]).pipe((0,yi.R)(this.destroy$)).subscribe(([i,r])=>{this.actualMode=i?"vertical":r,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.nzClick.emit(i),this.nzSelectable&&!i.nzMatchRouter&&this.listOfNzMenuItemDirective.forEach(r=>r.setSelectedState(r===i))}),this.dir=this.directionality.value,this.directionality.change?.pipe((0,yi.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()})}ngAfterContentInit(){this.inlineCollapsed$.pipe((0,yi.R)(this.destroy$)).subscribe(()=>{this.updateInlineCollapse(),this.cdr.markForCheck()})}ngOnChanges(i){const{nzInlineCollapsed:r,nzInlineIndent:n,nzTheme:a,nzMode:s}=i;r&&this.inlineCollapsed$.next(this.nzInlineCollapsed),n&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),a&&this.nzMenuService.setTheme(this.nzTheme),s&&(this.mode$.next(this.nzMode),!i.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(o=>o.setOpenStateWithoutDebounce(!1)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(ga),p.Y36(Gs),p.Y36(p.sBO),p.Y36(Kr.Is,8))},t.\u0275dir=p.lG2({type:t,selectors:[["","nz-menu",""]],contentQueries:function(i,r,n){if(1&i&&(p.Suo(n,wh,5),p.Suo(n,Df,5)),2&i){let a;p.iGM(a=p.CRH())&&(r.listOfNzMenuItemDirective=a),p.iGM(a=p.CRH())&&(r.listOfNzSubMenuComponent=a)}},hostVars:34,hostBindings:function(i,r){2&i&&p.ekj("ant-dropdown-menu",r.isMenuInsideDropDown)("ant-dropdown-menu-root",r.isMenuInsideDropDown)("ant-dropdown-menu-light",r.isMenuInsideDropDown&&"light"===r.nzTheme)("ant-dropdown-menu-dark",r.isMenuInsideDropDown&&"dark"===r.nzTheme)("ant-dropdown-menu-vertical",r.isMenuInsideDropDown&&"vertical"===r.actualMode)("ant-dropdown-menu-horizontal",r.isMenuInsideDropDown&&"horizontal"===r.actualMode)("ant-dropdown-menu-inline",r.isMenuInsideDropDown&&"inline"===r.actualMode)("ant-dropdown-menu-inline-collapsed",r.isMenuInsideDropDown&&r.nzInlineCollapsed)("ant-menu",!r.isMenuInsideDropDown)("ant-menu-root",!r.isMenuInsideDropDown)("ant-menu-light",!r.isMenuInsideDropDown&&"light"===r.nzTheme)("ant-menu-dark",!r.isMenuInsideDropDown&&"dark"===r.nzTheme)("ant-menu-vertical",!r.isMenuInsideDropDown&&"vertical"===r.actualMode)("ant-menu-horizontal",!r.isMenuInsideDropDown&&"horizontal"===r.actualMode)("ant-menu-inline",!r.isMenuInsideDropDown&&"inline"===r.actualMode)("ant-menu-inline-collapsed",!r.isMenuInsideDropDown&&r.nzInlineCollapsed)("ant-menu-rtl","rtl"===r.dir)},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:"nzInlineCollapsed",nzSelectable:"nzSelectable"},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],features:[p._Bn([{provide:Ef,useClass:ga},{provide:ga,useFactory:xd,deps:[[new p.tp0,new p.FiY,ga],Ef]},{provide:Gs,useFactory:Af,deps:[[new p.tp0,new p.FiY,Gs]]}]),p.TTD]}),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzInlineCollapsed",void 0),(0,rr.gn)([(0,pr.yF)()],t.prototype,"nzSelectable",void 0),t})(),Ev=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[Kr.vT,ee.ez,Pe.ud,$s.U8,An.PV,Ws.g,ht.T]}),t})();var Sh=k(5635);let Iv=(()=>{class t{constructor(i,r){this.elementRef=i,this.renderer=r,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return t.\u0275fac=function(i){return new(i||t)(p.Y36(p.SBq),p.Y36(p.Qsj))},t.\u0275dir=p.lG2({type:t,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"],["nz-input-group"]],inputs:{hidden:"hidden"},features:[p.TTD]}),t})(),Rf=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[Pe.ud]}),t})();function Tv(t,e){1&t&&p._UZ(0,"span",24)}const Dv=[{path:"",component:(()=>{var t;class e{constructor(r,n){this.data_service=r,this.search_module_service=n,this.filter_conditions=new Map,this.sankey_filter_conditions=new Map,this.showSankey=!0,this.filter_search_conditions=new Map,this.year_range=[2010,2022],this.fields_to_search=["Title","Year","Venue","Sensations","Manipulations","Stimuli","Grounding Methods","Stimulating Methods","Source to Mechanical Mechanisms","Simple to Complex Mechanisms"],this.value="",this.subtitle="An illustration that shows how to divide 198 haptic interfacing researches into  7 dimensions\uff0cin which each of those researches are represented by fold lines."}ngAfterViewInit(){}ngOnInit(){this.get_sankey_data(),this.get_search_data()}filters_change(r){let n=Object.entries(r.values).filter(a=>a[1]).map(a=>a[0]);this.filter_search_conditions.set(r.key,n),this.update_sankey_filter_data(n,r),this.update_search_filter_data()}update_sankey_filter_data(r,n){this.filter_conditions.set(n.key,r),this.sankey_filter_conditions=bm.cloneDeep(n),this.filtered_data=this.data.filter(a=>{let s=!0;return this.filter_conditions.forEach((o,d)=>{s=s&&o.includes(a[d])}),s})}update_search_filter_data(){this.filter_search_data=this.seach_data.filter(r=>{let n=!0;return this.filter_search_conditions.forEach((a,s)=>{n=n&&this.match_multi_value(r[s],a)}),n}),this.filter_search_data=this.filter_search_data.filter(r=>this.fields_to_search.reduce((n,a)=>n||r[a].includes(this.value),!1))}match_multi_value(r,n){return r.split(",").reduce((a,s)=>a||n.map(o=>o.toUpperCase()).includes(s.toUpperCase()),!1)}show_sankey_chart(r){this.showSankey=r,this.subtitle=r?"An illustration that shows how to divide 198 haptic interfacing researches into  7 dimensions\uff0cin which each of those researches are represented by fold lines.":"in which each of those researches are represented by fold lines."}get_sankey_data(){this.data_service.get_data().subscribe(r=>{this.data_service.get_order().subscribe(n=>{this.data=r,this.filtered_data=[...r],this.orders=n.map(a=>a.order),console.log("this.orders==>",this.orders),this.data_arr=[this.filtered_data,this.orders]})})}get_search_data(){this.search_module_service.get_data().subscribe(r=>{this.seach_data=r,this.filter_search_data=r,console.log("search_data==>",r)})}search(r){console.log("text==>",this.value),this.update_search_filter_data()}clear(){this.value="",this.update_search_filter_data()}year_range_change(r){console.log("event==>",r),this.year_range=r}}return(t=e).\u0275fac=function(r){return new(r||t)(p.Y36(_o),p.Y36(Ou))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-viz"]],viewQuery:function(r,n){if(1&r&&p.Gf(go,5),2&r){let a;p.iGM(a=p.CRH())&&(n.sankey_component=a.first)}},decls:33,vars:10,consts:[["id","viz_title",1,"grid","grid-cols-[77%_23%]","mt-[3.65vw]"],[1,"pb-7","text-center","justify-center"],["id","nav_title","nz-menu","","nzMode","horizontal",1,"text-[1vw]","text-center","mt-4"],["nz-menu-item","","nzMatchRouter","",3,"click"],["nz-menu-item","","nzMatchRouter",""],["id","subtitle",1,"text-center","text=[0.8vw]"],[1,"search_area","justify-start","pt-10","w-[10vw]"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","input search text",1,"text-[0.8vw]","input-text",3,"ngModel","ngModelChange","input"],["class","icon-box"],["suffixIconSearch",""],[1,"pl-1/10","grid","grid-cols-12"],[1,"col-span-9","bg-white","ml-[5vw]"],[3,"hidden","filtered_data","data","filter_conditions","year_range_change"],[3,"hidden"],[3,"year_range","data"],[1,"col-span-3",3,"filtersChange"],[1,"d3-template"],[1,"img"],["src","","alt",""],[1,"content"],[1,"title"],[1,"title-sub"],["href","www.baidu.com"],["nz-icon","","nzType","search","id","search_icon"]],template:function(r,n){if(1&r&&(p.TgZ(0,"main",0)(1,"section",1)(2,"ul",2)(3,"li",3),p.NdJ("click",function(){return n.show_sankey_chart(!0)}),p._uU(4," Parallel Coordinate "),p.qZA(),p.TgZ(5,"li",4),p._uU(6,"|"),p.qZA(),p.TgZ(7,"li",3),p.NdJ("click",function(){return n.show_sankey_chart(!1)}),p._uU(8," Research List "),p.qZA()(),p.TgZ(9,"div",5),p._uU(10),p.qZA()(),p.TgZ(11,"section",6)(12,"nz-input-group",7)(13,"input",8),p.NdJ("ngModelChange",function(s){return n.value=s})("input",function(s){return n.search(s)}),p.qZA()(),p.YNc(14,Tv,1,0,"ng-template",9,10,p.W1O),p.qZA()(),p.TgZ(16,"div",11)(17,"div",12)(18,"app-sankey",13),p.NdJ("year_range_change",function(s){return n.year_range_change(s)}),p.qZA(),p.TgZ(19,"div",14),p._UZ(20,"app-content",15),p.qZA()(),p.TgZ(21,"app-filters",16),p.NdJ("filtersChange",function(s){return n.filters_change(s)}),p.qZA(),p.TgZ(22,"div",17)(23,"div",18),p._UZ(24,"img",19),p.qZA(),p.TgZ(25,"div",20)(26,"p",21),p._uU(27,"Aora2019viertualbratc"),p.qZA(),p.TgZ(28,"p",22),p._uU(29,"ACM CHI"),p.qZA(),p.TgZ(30,"p")(31,"a",23),p._uU(32,"Article Link"),p.qZA()()()()()),2&r){const a=p.MAs(15);p.xp6(10),p.hij(" ",n.subtitle," "),p.xp6(2),p.Q6J("nzAddOnAfter",a),p.xp6(1),p.Q6J("ngModel",n.value),p.xp6(5),p.Q6J("hidden",!n.showSankey)("filtered_data",n.filtered_data)("data",n.data)("filter_conditions",n.sankey_filter_conditions),p.xp6(1),p.Q6J("hidden",n.showSankey),p.xp6(1),p.Q6J("year_range",n.year_range)("data",n.filter_search_data)}},dependencies:[uv,L.Fj,L.JJ,L.On,hv,Rn,wh,Sh.Zp,Sh.gB,An.Ls,Iv,go],styles:[".ant-menu-item[_ngcontent-%COMP%]:after{border-bottom:none}ul[_ngcontent-%COMP%]{border-bottom:none}#viz_title[_ngcontent-%COMP%]{position:relative}.search_area[_ngcontent-%COMP%]{background-color:transparent}.search_area[_ngcontent-%COMP%]   .ant-input-group-wrapper[_ngcontent-%COMP%]{border:1px solid #c2c2c2;display:flex;align-items:center;border-radius:9999px;width:200px}.search_area[_ngcontent-%COMP%]   .ant-input-group-wrapper[_ngcontent-%COMP%]   .ant-input-group-addon[_ngcontent-%COMP%]{background:transparent!important;position:relative!important;top:-2px;left:-10px}.search_area[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{background-color:transparent!important;color:#000;margin-left:10px;outline:none}.search_area[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]:focus, .search_area[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]:hover{outline:none!important;border:none!important;box-shadow:none!important}.search_area[_ngcontent-%COMP%]   #search_icon[_ngcontent-%COMP%]{position:relative;left:-8px;top:-2px}input[_ngcontent-%COMP%]{background-color:#222!important;border:#222222;border-bottom:#f7f8f8 solid 1px;color:#f7f8f8}.d3-template[_ngcontent-%COMP%]{display:flex;display:none;min-width:200px;background-color:#fff;border-radius:10px;position:absolute;left:100px;top:100px;padding:10px}.d3-template[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background-color:#eaeaea;width:80px;height:80px;display:flex;justify-content:center;align-items:center;border-radius:15px;margin-right:15px;overflow:hidden}.d3-template[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.d3-template[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.d3-template[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4646ff}.d3-template[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]}),e})()}];let Av=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[ea.Bz.forChild(Dv),ea.Bz]}),e})();var C=k(3520),O=k(3684),U=k(1553),Q=k(1374),v=k(4596),Z=k(4705),le=k(911),be=k(6129),tt=k(8082),ne=k(6836),Eh="dx-state-focused",Rv="dx-cell-focus-disabled",Of=".dx-datagrid-rowsview .dx-row",Bf="".concat(Of," > td"),kf=".dx-treelist-rowsview .dx-row",Pr="".concat(kf," > td"),Mf={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(Of,"[tabindex]"),"".concat(Bf,"[tabindex]"),"".concat(Bf),"".concat(kf,"[tabindex]"),"".concat(Pr,"[tabindex]"),"".concat(Pr)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},Ih=!1,Sd=!1,Xa=null;function Lf(t,e){var i=(0,C.Z)(t),r=i.attr("aria-label"),a=Pf(r,e.element()).index(i);Xa=(0,O.l)({},{ariaLabel:r,index:a},{viewInstance:e})}function Pf(t,e){return(0,C.Z)(e).find(t?'[aria-label="'.concat(t,'"][tabindex]'):"[tabindex]")}function kv(t,e){var i=e?.getRootNode()||tt.Z.getDocument();for(var r in t){var n=t[r],a=(0,C.Z)(i).find(n).first();if(a.length)return a}}function Ff(){Sd="visible"===tt.Z.getDocument().visibilityState}function Vf(){Z.Z.off(tt.Z.getDocument(),"visibilitychange",Ff)}function Nf(t,e,i,r,n,a){if(e.option("useLegacyKeyboardNavigation"))return ne.ZT;var s=()=>(0,C.Z)(e.element()),o=c=>function Bv(t,e,i,r,n,a){var s=function Th(t,e,i){var r={event:e,handled:!1};return i?i(r):t._createActionByOption("onKeyDown")(r),r.handled}(e,i.originalEvent,a);if(!s){var o=(0,be.EV)(i);"enter"===o||"space"===o?(Lf(i.target,e),r&&r({event:i})):"tab"===o?n.addClass(Eh):Ah(t,e,i)}}(t,e,c,n,s(),a),d=()=>{Ih=!0,s().removeClass(Eh)},u=()=>{!Ih&&!Sd&&s().addClass(Eh),Ih=!1};return Z.Z.on(i,"keydown",r,o),Z.Z.on(i,"mousedown",r,d),Z.Z.on(i,"focusin",r,u),()=>{Z.Z.off(i,"keydown",r,o),Z.Z.off(i,"mousedown",r,d),Z.Z.off(i,"focusin",r,u)}}function Dh(t){if(!t.option("useLegacyKeyboardNavigation")&&Xa){var e=Xa.viewInstance;if(e){var r=Pf(Xa.ariaLabel,e.element()).eq(Xa.index);Xa=null,Z.Z.trigger(r,"focus")}}}function Ah(t,e,i){var r=(0,be.EV)(i);if(i.ctrlKey&&("upArrow"===r||"downArrow"===r))for(var n=Object.keys(Mf),a=n.indexOf(t);a>=0&&a<n.length;){a="upArrow"===r?--a:++a;var d=kv(Mf[n[a]],i.target);if(d&&d.length){d.attr("tabindex",e.option("tabindex")||0),Z.Z.trigger(d,"focus"),d.removeClass(Rv);break}}}var Go=function(t,e,i,r,n){var a=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||a&&!a.isKeyboardEnabled()||(e.createAction("onKeyDown"),Nf(t,e,i,r,n,s=>{e.executeAction("onKeyDown",s)}))},gt=k(7075),Ed=k(9694),pi=k(805),Y=k(316),ti=k(7839),fn=k(7455),ma=k(5303),qe=k(4500),ii=k(1037),zf=k(4507),qt=k(5390),Uo=k(9890),Rh="dx-column-indicators";const Vv={_applyColumnState(t){var e,i=this.option("rtlEnabled"),r=this._getColumnAlignment(t.column.alignment,i),n=(0,O.l)(!0,{columnAlignment:r},t),a=n.rootElement.hasClass("dx-group-panel-item"),s=this._createIndicatorContainer(n,a),o=(0,C.Z)("<span>").addClass(this._getIndicatorClassName(t.name)),u=(null===(e=this.component)||void 0===e?void 0:e.getController("columns"))?.getHeaderContentAlignment(r)||r;return n.container=s,n.indicator=o,this._renderIndicator(n),s[!a&&t.showColumnLines||"left"!==u?"prependTo":"appendTo"](t.rootElement),o},_getIndicatorClassName:ne.ZT,_getColumnAlignment(t,e){return e=e||this.option("rtlEnabled"),t&&"center"!==t?t:(0,ti.q)(e)},_createIndicatorContainer(t,e){var i=this._getIndicatorContainer(t.rootElement),r="left"===t.columnAlignment?"right":"left";return i.length||(i=(0,C.Z)("<div>").addClass(Rh)),this.setAria("role","presentation",i),i.css("float",t.showColumnLines&&!e?r:null)},_getIndicatorContainer:t=>t&&t.find(".".concat(Rh)),_getIndicatorElements(t){var e=this._getIndicatorContainer(t);return e&&e.children()},_renderIndicator(t){var e=t.container,i=t.indicator;e&&i&&e.append(i)},_updateIndicators(t){var r,e=this.getColumns(),i=this.getColumnElements();if(i&&e.length===i.length)for(var n=0;n<e.length;n++){r=i.eq(n),this._updateIndicator(r,e[n],t);var a=r.parent().data("options");a&&a.cells&&(a.cells[r.index()].column=e[n])}},_updateIndicator(t,e,i){if(!e.command)return this._applyColumnState({name:i,rootElement:t,column:e,showColumnLines:this.option("showColumnLines")})}};var je=k(7462),en=k(4245),fi=k(7685),Nt=k(6795),Hf=en.Z.inherit({_endUpdateCore(){},ctor(t){var e=this;e._updateLockCount=0,e.component=t,e._actions={},e._actionConfigs={},(0,U.S6)(this.callbackNames()||[],function(i,r){var n=e.callbackFlags(r)||{};n.unique=!0,n.syncStrategy=!0,e[this]=(0,fi.Z)(n)})},init(){},callbackNames(){},callbackFlags(){},publicMethods(){},beginUpdate(){this._updateLockCount++},endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())},option(t){var{component:e}=this,i=e._optionCache;return 1===arguments.length&&i?(t in i||(i[t]=e.option(t)),i[t]):e.option.apply(e,arguments)},_silentOption(t,e){var{component:i}=this,r=i._optionCache;return r&&(r[t]=e),i._setOptionWithoutOptionChange(t,e)},localize(t){var e=this.component._optionCache;return e?(t in e||(e[t]=le.Z.format(t)),e[t]):le.Z.format(t)},on(){return this.component.on.apply(this.component,arguments)},off(){return this.component.off.apply(this.component,arguments)},optionChanged(t){t.name in this._actions&&(this.createAction(t.name,this._actionConfigs[t.name]),t.handled=!0)},getAction(t){return this._actions[t]},setAria(t,e,i){var r=i.get(0),n="role"!==t&&"id"!==t?"aria-":"";r.setAttribute?r.setAttribute(n+t,e):i.attr(n+t,e)},_createComponent(){return this.component._createComponent.apply(this.component,arguments)},getController(t){return this.component._controllers[t]},createAction(t,e){if((0,v.mf)(t)){var i=this.component._createAction(t.bind(this),e);return function(r){i({event:r})}}this._actions[t]=this.component._createActionByOption(t,e),this._actionConfigs[t]=e},executeAction(t,e){var i=this._actions[t];return i&&i(e)},dispose(){var t=this;(0,U.S6)(t.callbackNames()||[],function(){t[this].empty()})},addWidgetPrefix(t){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(t?"-".concat(t):"")},getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")},elementIsInsideGrid(t){return t.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}),Id=Hf,zv=Id.inherit({getView(t){return this.component._views[t]},getViews(){return this.component._views}}),Yo=Hf.inherit({_isReady(){return this.component.isReady()},_endUpdateCore(){this.callBase(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))},_invalidate(t,e){this._requireRender=!0,this.component._requireResize=(0,qe.Ym)()&&(this.component._requireResize||t),this._requireReady=this._requireReady||e},_renderCore(){},_resizeCore(){},_parentElement(){return this._$parent},ctor(t){this.callBase(t),this.renderCompleted=(0,fi.Z)(),this.resizeCompleted=(0,fi.Z)()},element(){return this._$element},getElementHeight(){var t=this.element();if(!t)return 0;var e=parseFloat(t.css("marginTop"))||0,i=parseFloat(t.css("marginBottom"))||0,{offsetHeight:r}=t.get(0);return r+e+i},isVisible:()=>!0,getTemplate(t){return this.component._getTemplate(t)},render(t,e){var i=this._$element,r=this.isVisible();if((i||t)&&(this._requireReady=!1,i||(i=this._$element=(0,C.Z)("<div>").appendTo(t),this._$parent=t),i.toggleClass("dx-hidden",!r),r)){this.component._optionCache={};var n=this._renderCore(e);this.component._optionCache=void 0,n?n.done(()=>{this.renderCompleted.fire(e)}):this.renderCompleted.fire(e)}},resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus(t){this.element().get(0).focus({preventScroll:t})}});function $f(t){var i={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(r=>{var[n,a]=r,s=t[n];s&&(i[n]=(0,v.mf)(a)?a(s):s.inherit(a))}),i}const zt={modules:[],View:Yo,ViewController:zv,Controller:Id,registerModule(t,e){for(var{modules:i}=this,r=0;r<i.length;r++)if(i[r].name===t)return;e.name=t,i.push(e)},registerModulesOrder(t){this.modulesOrder=t},unregisterModule(t){this.modules=(0,ne.h3)(this.modules,e=>e.name!==t)},processModules:function Zv(t,e){var{modules:i}=e,{modulesOrder:r}=e;function n(c){var f={};return(0,U.S6)(c,(g,m)=>{var y=new m(t);y.name=g,function Hv(t,e,i){var r=i.publicMethods();r&&(0,U.S6)(r,(n,a)=>{if(!i[a])throw Nt.Z.Error("E1006",e,a);if(t[a])throw Nt.Z.Error("E1005",a);t[a]=function(){return i[a](...arguments)}})}(t,g,y),f[g]=y}),f}r&&i.sort((c,f)=>{var g=r.indexOf(c.name),m=r.indexOf(f.name);return g<0&&(g=1e6),m<0&&(m=1e6),g-m});var a={},s={};i.forEach(c=>{var{name:f,controllers:g={},views:m={}}=c;Object.entries(g).forEach(y=>{var P,[w,I]=y;if(a[w])throw Nt.Z.Error("E1001",f,w);if(null===(P=I?.subclassOf)||void 0===P||!P.call(I,Id))throw Nt.Z.Error("E1002",f,w);a[w]=I}),Object.entries(m).forEach(y=>{var P,[w,I]=y;if(s[w])throw Nt.Z.Error("E1003",f,w);if(null===(P=I?.subclassOf)||void 0===P||!P.call(I,Yo))throw Nt.Z.Error("E1004",f,w);s[w]=I})});var o=i.filter(c=>{var{extenders:f}=c;return!!f}),d=o.reduce((c,f)=>{var{extenders:g}=f;return(0,je.Z)((0,je.Z)({},c),$f(c,g?.controllers))},a),u=o.reduce((c,f)=>{var{extenders:g}=f;return(0,je.Z)((0,je.Z)({},c),$f(c,g?.views))},s);t._controllers=n(d),t._views=n(u)},callModuleItemsMethod:function(t,e,i){i=i||[],t._controllers&&(0,U.S6)(t._controllers,function(){this[e]&&this[e].apply(this,i)}),t._views&&(0,U.S6)(t._views,function(){this[e]&&this[e].apply(this,i)})}};var Pt=k(1996),tn=k(3626),_n=k(6619),Ys=k(4422),Td=k(2928),On=k(6059),Ut=k(2657),Cr=k(8262),Wv={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function Dd(t){return Wv[t]}var qs=7,qo=["millisecond","second","minute","hour","day","week","month","quarter","year"],Gf=function(t){var e,i,r,n=["millisecond","second","minute","hour","day","month","year"],a={};for(e=n.length-1;e>=0;e--)r=n[e],(i=Math.floor(t/Dd(r)))>0&&(a[r+"s"]=i,t-=Rd(r,i));return a};function Rd(t,e){return Dd(t)*e}function Od(t){var i,e=-1;return(0,v.HD)(t)?t:(0,v.Kn)(t)?((0,U.S6)(t,function(r,n){for(i=0;i<qo.length;i++)n&&(r===qo[i]+"s"||r===qo[i])&&e<i&&(e=i)}),qo[e]):""}var Uv={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"},Uf=function(t){return Math.floor(t/3)},Yf=function(t){return 3*Uf(t)};function qf(t,e,i,r){t=new Date(t.getTime());var a,s,n=new Date(t.getTime()),o=Od(e);switch(o){case"second":t=new Date(1e3*Math.floor(n.getTime()/1e3));break;case"minute":t=new Date(6e4*Math.floor(n.getTime()/6e4));break;case"hour":t=new Date(36e5*Math.floor(n.getTime()/36e5));break;case"year":t.setMonth(0);case"month":t.setDate(1);case"day":t.setHours(0,0,0,0);break;case"week":(t=r_(t,r||0)).setHours(0,0,0,0);break;case"quarter":a=Yf(t.getMonth()),s=t.getMonth(),t.setDate(1),t.setHours(0,0,0,0),s!==a&&t.setMonth(a)}return i&&"hour"!==o&&"minute"!==o&&"second"!==o&&s_(n,t),t}function jf(t){return qf(t,"day")}function Xf(t,e,i){var r=new Date(t.getTime()),n=(0,v.HD)(e)?Xo(e.toLowerCase()):(0,v.kE)(e)?Gf(e):e;return n.years&&r.setFullYear(r.getFullYear()+n.years*i),n.quarters&&r.setMonth(r.getMonth()+3*n.quarters*i),n.months&&r.setMonth(r.getMonth()+n.months*i),n.weeks&&r.setDate(r.getDate()+7*n.weeks*i),n.days&&r.setDate(r.getDate()+n.days*i),n.hours&&r.setTime(r.getTime()+36e5*n.hours*i),n.minutes&&r.setTime(r.getTime()+6e4*n.minutes*i),n.seconds&&r.setTime(r.getTime()+1e3*n.seconds*i),n.milliseconds&&r.setTime(r.getTime()+n.milliseconds*i),r}var Bh=function(t,e,i){var r=i?-1:1;return(0,v.J_)(t)?Xf(t,e,r):(0,Ut.zB)(t+e*r,e)};function jo(t){return Fr(t.getFullYear(),t.getMonth()+1,0).getDate()}function Xo(t){var e={};switch(t){case"year":e.years=1;break;case"month":e.months=1;break;case"quarter":e.months=3;break;case"week":e.weeks=1;break;case"day":e.days=1;break;case"hour":e.hours=1;break;case"minute":e.minutes=1;break;case"second":e.seconds=1;break;case"millisecond":e.milliseconds=1}return e}function Mh(t,e){return Md(t,e)&&t.getMonth()===e.getMonth()}function Md(t,e){return t&&e&&t.getFullYear()===e.getFullYear()}function Qo(t){return t&&t.getFullYear()-t.getFullYear()%100}function Jo(t){return t&&t.getFullYear()-t.getFullYear()%10}function r_(t,e){var i=(t.getDay()-e+qs)%qs,r=new Date(t);return r.setDate(t.getDate()-i),r}function n_(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}function a_(t){return new Date(t,0,1)}function Lh(t){return new Date(t,11,31)}function rn(t,e){var i=t.getDay()-e+1;return i<=0&&(i+=qs),i}function Ei(t,e,i){var r=t;return(0,v.$K)(t)?((0,v.$K)(e)&&t<e&&(r=e),(0,v.$K)(i)&&t>i&&(r=i),r):t}function s_(t,e){if((0,v.$K)(t)){var i=e.getHours()-t.getHours();if(0!==i){var r=1===i||-23===i?-1:1,n=new Date(e.getTime()+36e5*r);(r>0||n.getDate()===e.getDate())&&e.setTime(n.getTime())}}}function o_(t,e){return 60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3}var Fr=function(t){var e=new Date(...arguments);return e.setFullYear(t),e},Ja={dateUnitIntervals:qo,convertMillisecondsToDateUnits:Gf,dateToMilliseconds:function(t){var e=0;return(0,v.Kn)(t)&&(0,U.S6)(t,function(i,r){e+=Rd(i.substr(0,i.length-1),r)}),(0,v.HD)(t)&&(e=Rd(t,1)),e},getNextDateUnit:function(t,e){switch(Od(t)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return e?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},convertDateUnitToMilliseconds:Rd,getDateUnitInterval:Od,getDateFormatByTickInterval:function Yv(t){return Uv[Od(t)]||""},getDatesDifferences:function(t,e){var i=0,r={year:t.getFullYear()!==e.getFullYear(),month:t.getMonth()!==e.getMonth(),day:t.getDate()!==e.getDate(),hour:t.getHours()!==e.getHours(),minute:t.getMinutes()!==e.getMinutes(),second:t.getSeconds()!==e.getSeconds(),millisecond:t.getMilliseconds()!==e.getMilliseconds()};return(0,U.S6)(r,function(n,a){a&&i++}),0===i&&0!==o_(t,e)&&(r.hour=!0,i++),r.count=i,r},correctDateWithUnitBeginning:qf,trimTime:jf,setToDayEnd:function(t){var e=jf(t);return e.setDate(e.getDate()+1),new Date(e.getTime()-1)},roundDateByStartDayHour:function(t,e){var i=this.dateTimeFromDecimal(e),r=new Date(t);return(t.getHours()===i.hours&&t.getMinutes()<i.minutes||t.getHours()<i.hours)&&r.setHours(i.hours,i.minutes,0,0),r},dateTimeFromDecimal:function(t){return{hours:Math.floor(t),minutes:t%1*60}},addDateInterval:Xf,addInterval:Bh,getSequenceByInterval:function(t,e,i){var n,r=[];for(r.push((0,v.J_)(t)?new Date(t.getTime()):t),n=t;n<e;)n=Bh(n,i),r.push(n);return r},getDateIntervalByString:Xo,sameHoursAndMinutes:function i_(t,e){return t&&e&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()},sameDate:function Jv(t,e){return Mh(t,e)&&t.getDate()===e.getDate()},sameMonthAndYear:Mh,sameMonth:Mh,sameYear:Md,sameDecade:function(t,e){if((0,v.$K)(t)&&(0,v.$K)(e)){var i=t.getFullYear()-t.getFullYear()%10,r=e.getFullYear()-e.getFullYear()%10;return t&&e&&i===r}},sameCentury:function(t,e){if((0,v.$K)(t)&&(0,v.$K)(e)){var i=t.getFullYear()-t.getFullYear()%100,r=e.getFullYear()-e.getFullYear()%100;return t&&e&&i===r}},getDifferenceInMonth:function(t){var e=1;return"year"===t&&(e=12),"decade"===t&&(e=120),"century"===t&&(e=1200),e},getDifferenceInMonthForCells:function(t){var e=1;return"decade"===t&&(e=12),"century"===t&&(e=120),e},getFirstYearInDecade:Jo,getFirstDecadeInCentury:Qo,getShortDateFormat:function(){return"yyyy/MM/dd"},getViewFirstCellDate:function(t,e){return"month"===t?Fr(e.getFullYear(),e.getMonth(),1):"year"===t?Fr(e.getFullYear(),0,e.getDate()):"decade"===t?Fr(Jo(e),e.getMonth(),e.getDate()):"century"===t?Fr(Qo(e),e.getMonth(),e.getDate()):void 0},getViewLastCellDate:function(t,e){return"month"===t?Fr(e.getFullYear(),e.getMonth(),jo(e)):"year"===t?Fr(e.getFullYear(),11,e.getDate()):"decade"===t?Fr(Jo(e)+9,e.getMonth(),e.getDate()):"century"===t?Fr(Qo(e)+90,e.getMonth(),e.getDate()):void 0},getViewDown:function(t){switch(t){case"century":return"decade";case"decade":return"year";case"year":return"month"}},getViewUp:function(t){switch(t){case"month":return"year";case"year":return"decade";case"decade":return"century"}},getLastMonthDay:jo,getLastMonthDate:function(t){if((0,v.$K)(t))return Fr(t.getFullYear(),t.getMonth()+1,0)},getFirstMonthDate:function(t){if((0,v.$K)(t))return Fr(t.getFullYear(),t.getMonth(),1)},getFirstWeekDate:r_,getWeekNumber:function Ph(t,e,i){var r=rn(a_(t.getFullYear()),e),n=rn(Lh(t.getFullYear()),e),a=qs-r+1,s=Math.ceil((function aC(t){var e=n_(t)-n_(a_(t.getFullYear()));return 1+Math.floor(e/Dd("day"))}(t)-a)/7);switch(i){case"fullWeek":return a===qs&&s++,0===s?Ph(Lh(t.getFullYear()-1),e,i):s;case"firstDay":return a>0&&s++,(s>52&&!(7===r||7===n)||54===s)&&(s=1),s;case"firstFourDays":return a>3&&s++,s>52&&!(4===r||4===n)&&(s=1),0===s?Ph(Lh(t.getFullYear()-1),e,i):s}},normalizeDateByWeek:function(t,e){var i=Ja.getDatesInterval(t,e,"day"),r=new Date(t);return i>=6&&(r=new Date(r.setDate(r.getDate()+7))),r},getQuarter:Uf,getFirstQuarterMonth:Yf,dateInRange:function(t,e,i,r){return"date"===r&&(e=e&&Ja.correctDateWithUnitBeginning(e,"day"),i=i&&Ja.correctDateWithUnitBeginning(i,"day"),t=t&&Ja.correctDateWithUnitBeginning(t,"day")),Ei(t,e,i)===t},intervalsOverlap:function(t){var{firstMin:e,firstMax:i,secondMin:r,secondMax:n}=t;return e<=r&&r<=i||e>r&&e<n||e<n&&i>n},roundToHour:function(t){var e=new Date(t.getTime());return e.setHours(e.getHours()+1),e.setMinutes(0),e},normalizeDate:Ei,getViewMinBoundaryDate:function(t,e){var i=Fr(e.getFullYear(),e.getMonth(),1);return"month"===t||(i.setMonth(0),"year"===t)||("decade"===t&&i.setFullYear(Jo(e)),"century"===t&&i.setFullYear(Qo(e))),i},getViewMaxBoundaryDate:function(t,e){var i=new Date(e);return i.setDate(jo(e)),"month"===t||(i.setMonth(11),i.setDate(jo(i)),"year"===t)||("decade"===t&&i.setFullYear(Jo(e)+9),"century"===t&&i.setFullYear(Qo(e)+99)),i},fixTimezoneGap:s_,getTimezonesDifference:o_,makeDate:function(t){return new Date(t)},getDatesInterval:function(t,e,i){var r=e.getTime()-t.getTime(),n=Dd(i)||1;return Math.floor(r/n)},getDatesOfInterval:function(t,e,i){for(var r=[],n=new Date(t.getTime());n<e;)r.push(new Date(n.getTime())),n=this.addInterval(n,i);return r},createDateWithFullYear:Fr,sameView:function(t,e,i){return Ja[(0,Cr._A)("same "+t)](e,i)}};const Xe=Ja;var Kt=k(2384),Bn=k(3568),Ld=k(7484);function dr(t,e){for(;t.length<e;)t="0"+t;return t}var si={3:"abbreviated",4:"wide",5:"narrow"},bi={y:function(t,e,i){var r=t[i?"getUTCFullYear":"getFullYear"]();return 2===e&&(r%=100),dr(r.toString(),e)},M:function(t,e,i,r){var n=t[i?"getUTCMonth":"getMonth"](),a=si[e];return a?r.getMonthNames(a,"format")[n]:dr((n+1).toString(),Math.min(e,2))},L:function(t,e,i,r){var n=t[i?"getUTCMonth":"getMonth"](),a=si[e];return a?r.getMonthNames(a,"standalone")[n]:dr((n+1).toString(),Math.min(e,2))},Q:function(t,e,i,r){var n=t[i?"getUTCMonth":"getMonth"](),a=Math.floor(n/3),s=si[e];return s?r.getQuarterNames(s)[a]:dr((a+1).toString(),Math.min(e,2))},E:function(t,e,i,r){var n=t[i?"getUTCDay":"getDay"]();return r.getDayNames(si[e<3?3:e])[n]},a:function(t,e,i,r){var a=t[i?"getUTCHours":"getHours"]()<12?0:1;return r.getPeriodNames(si[e])[a]},d:function(t,e,i){return dr(t[i?"getUTCDate":"getDate"]().toString(),Math.min(e,2))},H:function(t,e,i){return dr(t[i?"getUTCHours":"getHours"]().toString(),Math.min(e,2))},h:function(t,e,i){return dr((t[i?"getUTCHours":"getHours"]()%12||12).toString(),Math.min(e,2))},m:function(t,e,i){return dr(t[i?"getUTCMinutes":"getMinutes"]().toString(),Math.min(e,2))},s:function(t,e,i){return dr(t[i?"getUTCSeconds":"getSeconds"]().toString(),Math.min(e,2))},S:function(t,e,i){return dr(t[i?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,e)},x:function(t,e,i){var r=i?0:t.getTimezoneOffset(),n=r>0?"-":"+",a=Math.abs(r),o=a%60,d=dr(Math.floor(a/60).toString(),2),u=dr(o.toString(),2);return n+d+(e>=3?":":"")+(e>1||o?u:"")},X:function(t,e,i){return i||!t.getTimezoneOffset()?"Z":bi.x(t,e,i)},Z:function(t,e,i){return bi.X(t,e>=5?3:2,i)}},Fh=function(t,e){return function(i){var r,n,a,d,s=0,o=!1,u="";if(!i)return null;if(!t)return i;var c="Z"===t[t.length-1]||"'Z'"===t.slice(-3);for(r=0;r<t.length;r++)n=bi[a=t[r]],s++,(d=a===t[r+1])||(n&&!o&&(u+=n(i,s,c,e)),s=0),"'"!==a||d?(o||!n)&&(u+=a):o=!o,"'"===a&&d&&r++;return u}},l_=" .,:;/\\<>()-[]\u060c",Ca=function(t){var e=t&&Kt.Z.convertDigits(t,!1).charCodeAt(0),i=Kt.Z.convertDigits("0",!1).charCodeAt(0);return i<=e&&e<i+10},cC=function(t,e,i,r){var n=t[i],a=t[i+1];if(!r&&("."===n||" "===n&&". m."===t.slice(i-1,i+3)||"-"===n&&!Ca(a)))return!0;var s=r&&e.some(o=>t[i]!==o[i]);return l_.indexOf(n)<0&&r===Ca(n)&&(!r||s)},pC=function(t,e){if(!Ca(t[e]))for(;e>0&&!Ca(t[e-1])&&("."===t[e-1]||l_.indexOf(t[e-1])<0);)e--;return e},u_=function(t,e){return Array.isArray(t)?t.map(function(i){return(e(i)||"").toString()}):(e(t)||"").toString()},h_=/[a-zA-Z]/g,ur=function(t){var e=[],i=u_(new Date(2009,8,8,6,5,4),t),r=i.split("").map(function(o,d){return d}),n=i,a={},s=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(n&&(s.forEach(function(o){var d=function(t,e,i,r){var n=0,a=[],s=function(o){return t[n]!==o[n]&&(void 0===r||Ca(t[n])===r)};for(Array.isArray(e)||(e=[e]),n=0;n<t.length;n++)if(i.indexOf(n)<0&&e.filter(s).length){n=pC(t,n);do{if(r=Ca(t[n]),!a.length&&!r&&Ca(e[0][n]))break;a.push(n),i.unshift(n),n++}while(t[n]&&cC(t,e,n,r));break}return 1===a.length&&("0"===t[i[0]-1]||"\u0660"===t[i[0]-1])&&i.unshift(i[0]-1),a}(i,u_(o.date,t),e,o.isDigit),u="M"!==o.pattern||a.d?o.pattern:"L";n=function(t,e,i,r){var n,a,s;if(!Ca(t[e[0]]||"0")){for(var o=Math.max(e.length<=3?3:4,i.length);e.length>o;){for(s=r[a=e.pop()],r[a]=-1,n=a+1;n<r.length;n++)r[n]--;t=t.substr(0,s)+t.substr(s+1)}for(s=(a=e[e.length-1]+1)<r.length?r[a]:a;e.length<o;){for(e.push(e[e.length-1]+1),n=a;n<r.length;n++)r[n]++;t=t.substr(0,s)+" "+t.substr(s)}}return t=function(t,e,i,r){var n=e[0],a=n<r.length?r[n]:n;return e.forEach(function(s,o){t=t.substr(0,a+o)+(i.length>1?i[o]:i)+t.substr(a+o+1)}),1===e.length&&(t=(t=t.replace("0"+i,i+i)).replace("\u0660"+i,i+i)),t}(t,e,i,r),t}(n,d,u,r),a[u]=d.length}),n=function(t,e,i,r){var n=e.split("").map(function(a,s){return i.indexOf(s)<0&&(a.match(h_)||"'"===a)?r[s]:-1});return t.split("").map(function(a,s){var o=a,d=n.indexOf(s)>=0,u=s>0&&n.indexOf(s-1)>=0,c=n.indexOf(s+1)>=0;return d&&(u||(o="'"+o),c||(o+="'")),o}).join("")}(n,i,e,r),e.length))return n},ba=k(9107),Yn={3:"abbreviated",4:"wide",5:"narrow"},c_=function(t,e){return t>2?Object.keys(Yn).map(function(i){return["format","standalone"].map(function(r){return e.getMonthNames(Yn[i],r).join("|")}).join("|")}).join("|"):2===t?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},fC={":":function(t,e){var i=t>1?"{".concat(t,"}"):"",r=(0,ne.hr)(e.getTimeSeparator());return":"!==r&&(r="".concat(r,"|:")),"".concat(r).concat(i)},y:function(t){return 2===t?"[0-9]{".concat(t,"}"):"[0-9]+?"},M:c_,L:c_,Q:function(t,e){return t>2?e.getQuarterNames(Yn[t],"format").join("|"):"0?[1-4]"},E:function(t,e){return"\\D*"},a:function(t,e){return e.getPeriodNames(Yn[t<3?3:t],"format").join("|")},d:function(t){return 2===t?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(t){return 2===t?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(t){return 2===t?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(t){return 2===t?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(t){return 2===t?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(t){return"[0-9]{1,".concat(t,"}")},w:function(t){return 2===t?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"}},qn=Number,Nh=function(t,e){return t.map(i=>i.toLowerCase()).indexOf(e.toLowerCase())},zh=function(t,e,i){return e>2?["format","standalone"].map(function(r){return Object.keys(Yn).map(function(n){var a=i.getMonthNames(Yn[n],r);return Nh(a,t)})}).reduce(function(r,n){return r.concat(n)}).filter(function(r){return r>=0})[0]:qn(t)-1},jn={y:function(t,e){var i=qn(t);return 2===e?i<30?2e3+i:1900+i:i},M:zh,L:zh,Q:function(t,e,i){return e>2?i.getQuarterNames(Yn[e],"format").indexOf(t):qn(t)-1},E:function(t,e,i){var r=i.getDayNames(Yn[e<3?3:e],"format");return Nh(r,t)},a:function(t,e,i){var r=i.getPeriodNames(Yn[e<3?3:e],"format");return Nh(r,t)},d:qn,H:qn,h:qn,m:qn,s:qn,S:function(t,e){for(e=Math.max(e,3),t=t.slice(0,3);e<3;)t+="0",e++;return qn(t)}},yt=["y","M","d","h","m","s","S"],Fd={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(t,e,i){var r=t.getHours(),n=i.h;void 0!==n&&n!==r&&r--,e||12!==r?e&&12!==r&&(r+=12):r=0,t.setHours(r)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},nn=function(t,e){var i=t[e];if(!i)return 0;var r=0;do{e++,r++}while(t[e]===i);return r},p_=function(t,e){for(var i="",r=0;r<e;r++)i+=t;return i},f_=function(t,e){for(var n,i="",r="",a=[],s=function(){r&&(a.push("'".concat(r,"'")),i+="".concat((0,ne.hr)(r),")"),r="")},o=0;o<t.length;o++){var d=t[o],c=fC[d];if("'"!==d||(n=!n,"'"===t[o-1]))if(c&&!n){var f=nn(t,o),g=p_(d,f);s(),a.push(g),i+="(".concat(c(f,e),")"),o+=f-1}else r||(i+="("),r+=d}return s(),_C(a)||ba.k.warn("The following format may be parsed incorrectly: ".concat(t,".")),{patterns:a,regexp:new RegExp("^".concat(i,"$"),"i")}},Yt=["d","H","h","m","s","w","M","L","Q"],_C=function(t){var e=n=>{if(!n)return!1;var a=n[0];return["y","S"].includes(a)||Yt.includes(a)&&n.length<3},i=!0,r=0;return t.every((n,a,s)=>{return e(n)&&("S"!==(o=n)[0]&&2!==o.length&&(i=++r<2),e(s[a+1])||(r=0)),i;var o})},yC=["January","February","March","April","May","June","July","August","September","October","November","December"],wC=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xC=["AM","PM"],SC=["Q1","Q2","Q3","Q4"],g_=(t,e)=>{var i={abbreviated:3,short:2,narrow:1};return(0,U.UI)(t,r=>r.substr(0,i[e]))};const tl={getMonthNames:function(t){return g_(yC,t)},getDayNames:function(t){return g_(wC,t)},getQuarterNames:function(t){return SC},getPeriodNames:function(t){return xC}},EC={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1};var es=k(6948),Hh=/[\u200E\u200F]/g,IC=/[\u202F]/g,Xn=t=>e=>{if(!t.timeZoneName){var i=e.getFullYear(),r=String(i).length<3,a=new Date(Date.UTC(r?i+400:i,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r&&a.setFullYear(i),$h(a,(0,O.l)({timeZone:"UTC"},t))}return $h(e,t)},Zh={},TC=t=>{var e=es.Z.locale()+"/"+JSON.stringify(t);return Zh[e]||(Zh[e]=new Intl.DateTimeFormat(es.Z.locale(),t).format),Zh[e]};function $h(t,e){return TC(e)(t).replace(Hh,"").replace(IC," ")}var t,Ri=t=>new Intl.NumberFormat(es.Z.locale()).format(t),yr=(t={},e=>{if(!(e in t)){if("0"===Ri(0))return t[e]=!1,!1;t[e]={};for(var i=0;i<10;++i)t[e][Ri(i)]=i}return t[e]}),Nd=t=>{var e=yr(es.Z.locale());return e?t.split("").map(i=>i in e?String(e[i]):i).join(""):t},m_=t=>t.replace(/(\D)0+(\d)/g,"$1$2"),zd=t=>t.replace("d\u2019","de "),Wh={day:{day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(Wh,"shortdateshorttime",{get:function(){var t=Intl.DateTimeFormat(es.Z.locale()).resolvedOptions();return{year:t.year,month:t.month,day:t.day,hour:"numeric",minute:"numeric"}}});var AC=t=>"string"==typeof t&&Wh[t.toLowerCase()],v_={standalone:function(t,e){var i=new Date(1999,t,13,1);return Xn({month:e})(i)},format:function(t,e){var i=new Date(0,t,13,1),n=zd(Xn({day:"numeric",month:e})(i)).split(" ").filter(a=>a.indexOf("13")<0);return 1===n.length?n[0]:2===n.length?n[0].length>n[1].length?n[0]:n[1]:v_.standalone(t,e)}};const C_={engine:function(){return"intl"},getMonthNames:function(t,e){var i={wide:"long",abbreviated:"short",narrow:"narrow"}[t||"wide"];return e="format"===e?e:"standalone",Array.apply(null,new Array(12)).map((r,n)=>v_[e](n,i))},getDayNames:function(t){var i;return i={wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[t||"wide"],Array.apply(null,new Array(7)).map((r,n)=>Xn({weekday:i})(new Date(0,0,n)))},getPeriodNames:function(){var t=Xn({hour:"numeric",hour12:!0});return[1,13].map(e=>{var i=Ri(1),r=t(new Date(0,0,1,e)).split(i);return 2!==r.length?"":(r[0].length>r[1].length?r[0]:r[1]).trim()})},format:function(t,e){if(t){if(!e)return t;"function"!=typeof e&&!e.formatter&&(e=e.type||e);var i=AC(e);if(i)return Xn(i)(t);var r=typeof e;return e.formatter||"function"===r||"string"===r?this.callBase.apply(this,arguments):Xn(e)(t)}},parse:function(t,e){var i;return e&&!e.parser&&"string"==typeof t&&(t=zd(t),i=r=>zd(this.format(r,e))),this.callBase(t,i||e)},_parseDateBySimpleFormat:function(t,e){t=Nd(t);var i=this.getFormatParts(e),r=t.split(/\D+/).filter(s=>s.length>0);if(i.length===r.length){var n=this._generateDateArgs(i,r),a=s=>{var d,o=(d=n,new Date(d.year,d.month,d.day,(d.hours+(s?12:0))%24,d.minutes,d.seconds));if(((t,e)=>m_(t)===m_(e))(Nd(this.format(o,e)),t))return o};return a(!1)||a(!0)}},_generateDateArgs:function(t,e){var i=new Date,r={year:i.getFullYear(),month:i.getMonth(),day:i.getDate(),hours:0,minutes:0,seconds:0};return t.forEach((n,a)=>{var o=parseInt(e[a],10);"month"===n&&(o-=1),r[n]=o}),r},formatUsesMonthName:function(t){return"object"!=typeof t||t.type||t.format?this.callBase.apply(this,arguments):"long"===t.month},formatUsesDayName:function(t){return"object"!=typeof t||t.type||t.format?this.callBase.apply(this,arguments):"long"===t.weekday},getTimeSeparator:function(){return Nd($h(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(t){if("string"==typeof t)return this.callBase(t);var e=(0,O.l)({},Wh[t.toLowerCase()]),i=new Date(2001,2,4,5,6,7),r=Xn(e)(i);return r=Nd(r),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map(n=>({name:n.name,index:r.indexOf(n.value)})).filter(n=>n.index>-1).sort((n,a)=>n.index-a.index).map(n=>n.name)}};var OC=typeof Intl<"u",Kh={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},b_={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},Gh=(0,Bn.Z)({engine:function(){return"base"},_getPatternByFormat:function(t){return Kh[t.toLowerCase()]},_expandPattern:function(t){return this._getPatternByFormat(t)||t},formatUsesMonthName:function(t){return-1!==this._expandPattern(t).indexOf("MMMM")},formatUsesDayName:function(t){return-1!==this._expandPattern(t).indexOf("EEEE")},getFormatParts:function(t){var e=this._getPatternByFormat(t)||t,i=[];return(0,U.S6)(e.split(/\W+/),(r,n)=>{(0,U.S6)(b_,(a,s)=>{s.includes(n)&&i.push(a)})}),i},getMonthNames:function(t){return tl.getMonthNames(t)},getDayNames:function(t){return tl.getDayNames(t)},getQuarterNames:function(t){return tl.getQuarterNames(t)},getPeriodNames:function(t){return tl.getPeriodNames(t)},getTimeSeparator:function(){return":"},is24HourFormat:function(t){for(var e=new Date(2017,0,20,11,0,0,0),i=new Date(2017,0,20,23,0,0,0),r=this.format(e,t),n=this.format(i,t),a=0;a<r.length;a++)if(r[a]!==n[a])return!isNaN(parseInt(r[a]))},format:function(t,e){if(t){if(!e)return t;var i;if("function"==typeof e)i=e;else if(e.formatter)i=e.formatter;else if((0,v.HD)(e=e.type||e))return e=Kh[e.toLowerCase()]||e,Kt.Z.convertDigits(Fh(e,this)(t));if(i)return i(t)}},parse:function(t,e){var r,n,i=this;if(t){if(!e)return this.parse(t,"shortdate");if(e.parser)return e.parser(t);if("string"!=typeof e||Kh[e.toLowerCase()]){n=s=>{var o=i.format(s,e);return Kt.Z.convertDigits(o,!0)};try{r=ur(n)}catch{}}else r=e;if(r)return t=Kt.Z.convertDigits(t,!0),function(t,e){var i=f_(t,e);return function(r){var n=i.regexp.exec(r);if(n){var a=new Date,s=new Date(a.getFullYear(),0,1),o=function(t){return t.map(function(e){return"'"===e[0]?"":"H"===e[0]?"h":e[0]})}(i.patterns),d=function(t){var e=t.map(function(i){return yt.indexOf(i)});return Math.max.apply(Math,e)}(o),u=function(t){var e=t.filter(function(i){return yt.indexOf(i)<0});return yt.concat(e)}(o),c={};return u.forEach(function(f,g){if(f&&!(g<yt.length&&g>d)){var m=o.indexOf(f);m>=0?function(t,e,i,r,n){var a=e[0],s=Fd[a],o=jn[a];if(s&&o){var d=o(i,e.length,r);n[e]=d,t[s]?t[s](d):s(t,d,n)}}(s,i.patterns[m],n[m+1],e,c):function(t,e,i){var r=Fd[e],a=i["g"+r.substr(1)]();t[r](a)}(s,f,a)}}),s}return null}}(r,this)(t);Ld.Z.log("W0012");var a=new Date(t);if(a&&!isNaN(a.getTime()))return a}},firstDayOfWeekIndex:function(){var t=es.Z.getValueByClosestLocale(e=>EC[e]);return void 0===t?0:t}});OC&&Gh.inject(C_);const ct=Gh;k(7987);const y_=(0,Bn.Z)({format:function(t,e){var i=(0,v.HD)(e)&&""!==e||(0,v.PO)(e)||(0,v.mf)(e),r=(0,v.kE)(t)||(0,v.J_)(t);return i&&r?(0,v.mf)(e)?e(t):((0,v.HD)(e)&&(e={type:e}),(0,v.kE)(t)?Kt.Z.format(t,e):(0,v.J_)(t)?ct.format(t,e):void 0):(0,v.$K)(t)?t.toString():""},getTimeFormat:function(t){return t?"longtime":"shorttime"},_normalizeFormat:function(t){return Array.isArray(t)?1===t.length?t[0]:function(e){return t.map(function(i){return ct.format(e,i)}).join(" ")}:t},getDateFormatByDifferences:function(t,e){var i=[],r=e&&t.millisecond&&!(t.year||t.month||t.day);return r?i.push(function(n){return n.getSeconds()+n.getMilliseconds()/1e3+"s"}):t.millisecond&&i.push("millisecond"),(t.hour||t.minute||!r&&t.second)&&i.unshift(this.getTimeFormat(t.second)),t.year&&t.month&&t.day?e&&"month"===e?"monthandyear":(i.unshift("shortdate"),this._normalizeFormat(i)):t.year&&t.month?"monthandyear":t.year&&t.quarter?"quarterandyear":t.year?"year":t.quarter?"quarter":t.month&&t.day?(i.unshift(e?function(n){return ct.getMonthNames("abbreviated")[n.getMonth()]+" "+ct.format(n,"day")}:"monthandday"),this._normalizeFormat(i)):t.month?"month":t.day?(i.unshift(e?"day":function(n){return ct.format(n,"dayofweek")+", "+ct.format(n,"day")}),this._normalizeFormat(i)):this._normalizeFormat(i)},getDateFormatByTicks:function(t){var e,i,r;if(t.length>1)for(e=Xe.getDatesDifferences(t[0],t[1]),r=1;r<t.length-1;r++)i=Xe.getDatesDifferences(t[r],t[r+1]),e.count<i.count&&(e=i);else e={year:!0,month:!0,day:!0,hour:t[0].getHours()>0,minute:t[0].getMinutes()>0,second:t[0].getSeconds()>0,millisecond:t[0].getMilliseconds()>0};return this.getDateFormatByDifferences(e)},getDateFormatByTickInterval:function(t,e,i){var r,n=function(o,d,u){switch(d){case"year":case"quarter":o.month=u;case"month":o.day=u;case"week":case"day":o.hour=u;case"hour":o.minute=u;case"minute":o.second=u;case"second":o.millisecond=u}};i=(0,v.HD)(i)?i.toLowerCase():i;var o,d,u,a=Xe.getDatesDifferences(t,e);return t!==e&&(o=a,d=t>e?e:t,!(u=t>e?t:e).getMilliseconds()&&u.getSeconds()?u.getSeconds()-d.getSeconds()==1&&(o.millisecond=!0,o.second=!1):!u.getSeconds()&&u.getMinutes()?u.getMinutes()-d.getMinutes()==1&&(o.second=!0,o.minute=!1):!u.getMinutes()&&u.getHours()?u.getHours()-d.getHours()==1&&(o.minute=!0,o.hour=!1):!u.getHours()&&u.getDate()>1?u.getDate()-d.getDate()==1&&(o.hour=!0,o.day=!1):1===u.getDate()&&u.getMonth()?u.getMonth()-d.getMonth()==1&&(o.day=!0,o.month=!1):!u.getMonth()&&u.getFullYear()&&u.getFullYear()-d.getFullYear()==1&&(o.month=!0,o.year=!1)),n(a,Xe.getDateUnitInterval(a),!0),n(a,r=Xe.getDateUnitInterval(i||"second"),!1),a[{week:"day"}[r]||r]=!0,this.getDateFormatByDifferences(a)}});var kt=k(7771),Vr=k(4046),ts=k(1855),_i=k(8961),w_="dx-loadpanel-indicator",Uh="dx-loadpanel-message",S_=ts.Z.inherit({_supportedKeys:function(){return(0,O.l)(this.callBase(),{escape:ne.ZT})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{message:le.Z.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:function(){return(0,_i.x2)()},options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}}])},_init:function(){this.callBase.apply(this,arguments)},_render:function(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper")},_renderContentImpl:function(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=(0,C.Z)("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show:function(){var t=this.option("delay");if(!t)return this.callBase();var e=new Y.BH,i=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(function(){i().done(function(){e.resolve()})},t),e.promise()},_hide:function(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout:function(){clearTimeout(this._showTimeout)},_renderMessage:function(){if(this._$loadPanelContentWrapper){var t=this.option("message");if(t){var e=(0,C.Z)("<div>").addClass(Uh).text(t);this._$loadPanelContentWrapper.append(e)}}},_renderLoadIndicator:function(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=(0,C.Z)("<div>").addClass(w_).appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,Vr.Z,{indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent:function(){this.$content().find("."+Uh).remove(),this.$content().find("."+w_).remove(),delete this._$indicator},_togglePaneVisible:function(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged:function(t){switch(t.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(t)}},_dispose:function(){this._clearShowTimeout(),this.callBase()}});(0,kt.Z)("dxLoadPanel",S_);const E_=S_;var PC=["year","month","day"],FC=["year","month","day","hour","minute"],Yh=function(t){return"date"===t||"datetime"===t},qh=function(t){var e,i=[],r=["year","month","day","hour","minute","second"],n=t.headerFilter&&t.headerFilter.groupInterval,a="quarter"===n?"month":n;return Yh(t.dataType)&&null!==n?(i="datetime"===t.dataType?FC:PC,(e=r.indexOf(a))>=0&&(i=r.slice(0,e)).push(n),i):(0,v.$K)(n)?Array.isArray(n)?n:[n]:void 0};const is=function(){var t=function(n,a){var s=n.dataField||n.selector;return"search"===a&&(s=n.displayField||n.calculateDisplayValue||s),s},e=function(n,a){var s,o,d,c,u=t(this,a);if(Array.isArray(n)&&(0,v.$K)(n[0])&&(0,v.$K)(n[1]))return o=[u,">=",n[0]],d=[u,"<=",n[1]],Yh(this.dataType)&&(c=n[1]).getHours()+c.getMinutes()+c.getSeconds()+c.getMilliseconds()<1&&(s=new Date(n[1].getTime()),"date"===this.dataType&&s.setDate(n[1].getDate()+1),d=[u,"<",s]),[o,"and",d]},i=function(n,a,s){var o,d,u,g,c=(0,v.J_)(g=n)?[g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()]:(0,U.UI)((""+g).split("/"),function(m,y){return 1===y?Number(m)-1:Number(m)}),f=t(this,s);switch("headerFilter"===s?u=qh(this)[c.length-1]:"datetime"===this.dataType&&(u="minute"),u){case"year":o=new Date(c[0],0,1),d=new Date(c[0]+1,0,1);break;case"month":o=new Date(c[0],c[1],1),d=new Date(c[0],c[1]+1,1);break;case"quarter":o=new Date(c[0],3*c[1],1),d=new Date(c[0],3*c[1]+3,1);break;case"hour":o=new Date(c[0],c[1],c[2],c[3]),d=new Date(c[0],c[1],c[2],c[3]+1);break;case"minute":o=new Date(c[0],c[1],c[2],c[3],c[4]),d=new Date(c[0],c[1],c[2],c[3],c[4]+1);break;case"second":o=new Date(c[0],c[1],c[2],c[3],c[4],c[5]),d=new Date(c[0],c[1],c[2],c[3],c[4],c[5]+1);break;default:o=new Date(c[0],c[1],c[2]),d=new Date(c[0],c[1],c[2]+1)}switch(a){case"<":return[f,"<",o];case"<=":return[f,"<",d];case">":return[f,">=",d];case">=":return[f,">=",o];case"<>":return[[f,"<",o],"or",[f,">=",d]];default:return[[f,">=",o],"and",[f,"<",d]]}},r=function(n,a,s){var o=t(this,s),d=qh(this);if("headerFilter"===s&&d&&(0,v.$K)(n)){var u=(""+n).split("/"),c=Number(u[u.length-1]);return[[o,">=",c],"and",[o,"<",c+d[u.length-1]]]}return[o,a||"=",n]};return{defaultCalculateFilterExpression:function(n,a,s){var o=this,d=t(o,s),u=o.calculateDisplayValue&&"search"===s,c=u&&o.lookup&&o.lookup.dataType||o.dataType,f=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==n)if("string"!==c||o.lookup&&!u){if("between"===a)return e.apply(o,[n,s]);if(Yh(c)&&(0,v.$K)(n))return i.apply(o,arguments);if("number"===c)return r.apply(o,arguments);f=[d,a||"=",n]}else f=[d,a||"contains",n];else f=[d,a||"=",null],"string"===c&&(f=[f,"="===a?"or":"and",[d,a||"=",""]]);return f},getGroupInterval:qh}}();var I_="virtual",T_="scrolling.mode",GC={year:t=>t&&t.getFullYear(),month:t=>t&&t.getMonth()+1,day:t=>t&&t.getDate(),quarter:t=>t&&Math.floor(t.getMonth()/3)+1,hour:t=>t&&t.getHours(),minute:t=>t&&t.getMinutes(),second:t=>t&&t.getSeconds()},UC=function(){var e=this.calculateCellValue(arguments[1]);if(!(0,v.$K)(e))return null;if(D_(this.dataType))return GC[arguments[0]](e);if("number"===this.dataType){var r=arguments[0];return Math.floor(Number(e)/r)*r}},YC=function(t,e){return(0,v.mf)(t)&&(0,v.mf)(e)&&t.originalCallback&&e.originalCallback?t.originalCallback===e.originalCallback&&t.columnIndex===e.columnIndex:t===e};function D_(t){return"date"===t||"datetime"===t}var A_=function(t){t.get(0).textContent="\xa0"},jh=function(t){for(var e=(0,On.G5)(t=t||[]),i=0;i<t.length;i++)t&&t[i]&&void 0!==t[i].isExpanded&&(e[i].isExpanded=t[i].isExpanded),t&&t[i]&&void 0!==t[i].groupInterval&&(e[i].groupInterval=t[i].groupInterval);return e},Hd=function(t,e){var i=y_.format(t,e.format)||t&&t.toString()||"",r={value:t,valueText:e.getDisplayFormat?e.getDisplayFormat(i):i,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,r):r.valueText},Xh=function(t,e){var i=t.displayFormat||t.columnCaption&&e["".concat(t.summaryType,"OtherColumn")]||e[t.summaryType];return Hd(t.value,{format:t.valueFormat,getDisplayFormat:r=>i?(0,tn.WU)(i,r,t.columnCaption):r,customizeText:t.customizeText})},Qh=function(t){var e=t.data&&t.data(),i=e&&e.dxComponents,r=i&&i[0];return r&&e[r]};const ye={renderNoDataText(t){if(t=t||this.element()){var e=this.addWidgetPrefix("nodata"),i=t.find(".".concat(e)).last(),r=this._dataController.isEmpty(),n=this._dataController.isLoading();i.length||(i=(0,C.Z)("<span>").addClass(e)),i.parent().is(t)||i.appendTo(t),r&&!n?i.removeClass("dx-hidden").text(this._getNoDataText()):i.addClass("dx-hidden")}},renderLoadPanel(t,e,i){var r;this._loadPanel&&this._loadPanel.$element().remove(),(r=this.option("loadPanel"))&&("auto"===r.enabled?!i:r.enabled)?(r=(0,O.l)({shading:!1,message:r.text,container:e},r),this._loadPanel=this._createComponent((0,C.Z)("<div>").appendTo(e),E_,r)):this._loadPanel=null},calculateLoadPanelPosition(t){var e=(0,C.Z)((0,qe.Jj)());return(0,Q.Cr)(t)>(0,Q.Cr)(e)?{of:e,boundary:t,collision:"fit"}:{of:t}},getIndexByKey(t,e,i){var r=-1;if(void 0!==t&&Array.isArray(e)){i=arguments.length<=2?"key":i;for(var n=0;n<e.length;n++){var a=(0,v.$K)(i)?e[n][i]:e[n];if((0,ne.bY)(t,a)){r=n;break}}}return r},combineFilters(t,e){var i,r=[];e=e||"and";for(var n=0;n<t.length;n++)if(t[n]){if(1===(null===(i=t[n])||void 0===i?void 0:i.length)&&"!"===t[n][0]){if("and"===e)return["!"];if("or"===e)continue}r.length&&r.push(e),r.push(t[n])}if(1===r.length&&(r=r[0]),r.length)return r},checkChanges(t,e){for(var i=0,r=0;r<e.length;r++)t[e[r]]&&i++;return t.length&&t.length===i},equalFilterParameters:function t(e,i){if(Array.isArray(e)&&Array.isArray(i)){if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}return(0,v.mf)(e)&&e.columnIndex>=0&&(0,v.mf)(i)&&i.columnIndex>=0?e.columnIndex===i.columnIndex&&(0,Pt.Ex)(e.filterValue)===(0,Pt.Ex)(i.filterValue)&&(0,Pt.Ex)(e.selectedFilterOperation)===(0,Pt.Ex)(i.selectedFilterOperation):(0,Pt.Ex)(e)==(0,Pt.Ex)(i)},proxyMethod(t,e,i){t[e]||(t[e]=function(){var r=this._dataSource;return r?r[e].apply(r,arguments):i})},formatValue:Hd,getFormatOptionsByColumn:(t,e)=>({format:t.format,getDisplayFormat:t.getDisplayFormat,customizeText:t.customizeText,target:e,trueText:t.trueText,falseText:t.falseText}),getDisplayValue:(t,e,i,r)=>t.displayValueMap&&void 0!==t.displayValueMap[e]?t.displayValueMap[e]:t.calculateDisplayValue&&i&&"group"!==r?t.calculateDisplayValue(i):!t.lookup||"group"===r&&(t.calculateGroupValue||t.calculateDisplayValue)?e:t.lookup.calculateCellValue(e),getGroupRowSummaryText(t,e){for(var i="(",r=0;r<t.length;r++)i+=(r>0?", ":"")+Xh(t[r],e);return i+")"},getSummaryText:Xh,normalizeSortingInfo:jh,getFormatByDataType(t){switch(t){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(t,e){var i=[],r=t.dataField||t.name,n=is.getGroupInterval(t);return n?((0,U.S6)(n,(a,s)=>{i.push(e?{selector:r,groupInterval:s,isExpanded:a<n.length-1}:UC.bind(t,s))}),i):(e?i=[{selector:r,isExpanded:!1}]:(i=function(a){var s=t.calculateCellValue(a);return(void 0===s||""===s)&&(s=null),s},t.sortingMethod&&(i=[{selector:i,compare:t.sortingMethod.bind(t)}])),i)},equalSortParameters(t,e,i){if(t=jh(t),e=jh(e),Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!YC(t[r].selector,e[r].selector)||t[r].desc!==e[r].desc||t[r].groupInterval!==e[r].groupInterval||!i&&Boolean(t[r].isExpanded)!==Boolean(e[r].isExpanded))return!1;return!0}return(!t||!t.length)==(!e||!e.length)},getPointsByColumns(t,e,i,r){for(var s,o,c,n=t.length,a=!1,d=r||0,u=[],f=0;f<=n;f++){f<n&&(o=(s=t.eq(f)).offset(),c="rtl"===s.css("direction"));var g={index:d,x:o?o.left+(!i&&c^f===n?(0,ti.l)(s[0]).width:0):0,y:o?o.top+(i&&f===n?(0,ti.l)(s[0]).height:0):0,columnIndex:d};if(!i&&f>0){var m=t.eq(f-1).offset();m.top<g.y&&(g.y=m.top)}e&&(a=e(g)),a||u.push(g),d++}return u},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(t,e){var i=(0,C.Z)(t);if(!(0,v.$K)(e.value)||e.data&&e.data.isContinuation||e.row.isNewRow)A_(i);else{var r=e.component.getView("rowsView");i.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,C.Z)("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(i),r.setAria("label",r.localize(e.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),i)}}}),setEmptyText:A_,isDateType:D_,getSelectionRange(t){try{if(t)return{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd}}catch{}return{}},setSelectionRange(t,e){try{t&&t.setSelectionRange&&t.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(t,e){var i=e.is(":focus");Z.Z.trigger(e,"focus");var r=t.option("editing.selectTextOnEditStart"),n=e.get(0);if(!i&&r&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){var a=Qh(e.closest(".dx-texteditor"));(0,Y.gx)(a&&a._loadItemDeferred).done(()=>{n.select()})}},getWidgetInstance:Qh,getLastResizableColumnIndex(t,e){var r,i=t.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(r=t.length-1;t[r];r--){var n=t[r];if(!(n.command||n.fixed||"adaptiveHidden"===(e&&e[r])||i&&!1===n.allowResizing))break}return r},isElementInCurrentGrid:(t,e)=>!(!e||!e.length)&&e.closest(".".concat(t.getWidgetContainerClass())).parent().is(t.component.$element()),isVirtualRowRendering(t){var e=t.option("scrolling.rowRenderingMode"),i=t.option(T_)===I_,r="infinite"===t.option(T_);return!(!1!==t.option("scrolling.legacyMode")||!i&&!r)||e===I_},getPixelRatio:t=>t.devicePixelRatio||1,getContentHeightLimit(t){return t.mozilla?8e6:15e6/this.getPixelRatio((0,qe.Jj)())},normalizeLookupDataSource(t){var e;return t.items?e=t.items:(0,v.mf)(e=t.dataSource)&&!_n.Z.isWrapped(e)&&(e=e({})),(0,Td.aN)(e)},getWrappedLookupDataSource(t,e,i){if(!e)return[];var r=this.normalizeLookupDataSource(t.lookup);if(t.calculateCellValue!==t.defaultCalculateCellValue)return r;var s,o,d,n=e.remoteOperations().groupPaging,a=t.displayField&&(0,v.HD)(t.displayField),u=(f,g)=>{var m,y=null!==(m=g.skip)&&void 0!==m?m:0;return f.slice(y,g.take?y+g.take:f.length)},c=(0,je.Z)((0,je.Z)({},r),{__dataGridSourceFilter:i,load:f=>{var m,y,w,g=new Y.BH;return(m=f,y=function jC(t){return Array.isArray(t)||(t=[t]),t.map((e,i)=>(0,v.HD)(e)?{selector:e,isExpanded:i<t.length-1}:e)}(a?[t.dataField,t.displayField]:t.dataField),w=new Y.BH,s&&(!n||m.skip===d&&m.take===o)?w.resolve(u(s,m)):(d=m.skip,o=m.take,e.load({filter:i,group:y,take:n?m.take:void 0,skip:n?m.skip:void 0}).done(P=>{s=P,w.resolve(n?P:u(P,m))}).fail(w.fail)),w).done(m=>{if(0!==m.length){var y=this.combineFilters(m.flatMap(I=>I.key).map(I=>[t.lookup.valueExpr,I]),"or");new Ys.o((0,je.Z)((0,je.Z)((0,je.Z)({},r),f),{filter:this.combineFilters([y,f.filter],"and"),paginate:!1})).load().done(g.resolve).fail(g.fail)}else g.resolve([])}).fail(g.fail),g},key:t.lookup.valueExpr,byKey(f){var g=(0,Y.BH)();return this.load({filter:[t.lookup.valueExpr,"=",f]}).done(m=>{g.resolve(m[0])}),g.promise()}});return c}};var Zd="scroll-container",il="dx-row",ec="dx-group-row",rl="dx-master-detail-row",R_="0.0001px",ic="dxCellHintVisible",O_={render(t){t.container.append(t.content)}},$d=function(t){return"auto"===t?"":(0,v.kE)(t)?"".concat(t,"px"):t},B_=function(t,e,i){t.style.width=t.style.maxWidth="auto"===e.width?"":i},nc=function(t){t.resolve()},k_=t=>"number"==typeof t?"".concat(t.toFixed(3),"px"):"adaptiveHidden"===t?R_:t,o0=zt.View.inherit(Vv);class nl extends o0{setTableRole(e){}_createScrollableOptions(){var e=this.option("scrolling"),i=this.option("scrolling.useNative"),r=(0,O.l)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===i&&(i=!0),"auto"===i?(delete r.useNative,delete r.useSimulatedScrollbar):(r.useNative=!!i,r.useSimulatedScrollbar=!i),r}_updateCell(e,i){i.rowType&&this._cellPrepared(e,i)}_createCell(e){var{column:i}=e,r=i.alignment||(0,ti.q)(this.option("rtlEnabled")),n=tt.Z.createElement("td");n.style.textAlign=r;var a=(0,C.Z)(n);return"data"===e.rowType&&i.headerId&&!i.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",i.headerId,a),i.cssClass&&a.addClass(i.cssClass),Array.isArray(i.elementAttr)&&i.elementAttr.forEach(s=>{var{name:o,value:d}=s;a.attr(o,d)}),"expand"===i.command&&(a.addClass(i.cssClass),a.addClass(this.addWidgetPrefix("group-space"))),i.colspan>1?a.attr("colSpan",i.colspan):!i.isBand&&"auto"!==i.visibleWidth&&this.option("columnAutoWidth")&&((i.width||i.minWidth)&&(n.style.minWidth=$d(i.minWidth||i.width)),i.width&&B_(n,i,$d(i.width))),a}_createRow(e,i){var r=(0,C.Z)("<".concat(i=i||"tr",">")).addClass(il);return this.setAria("role","row",r),r}_isAltRow(e){return e&&e.dataIndex%2==1}_createTable(e,i){var r=(0,C.Z)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!i?(r.append(this._createColGroup(e)),pi.Z.safari&&r.append((0,C.Z)("<thead>").append("<tr>")),this.setTableRole(r)):this.setAria("hidden",!0,r),this.setAria("role","presentation",(0,C.Z)("<tbody>").appendTo(r)),i)return r;pi.Z.mozilla&&Z.Z.on(r,"mousedown","td",a=>{a.ctrlKey&&a.preventDefault()}),this.option("cellHintEnabled")&&Z.Z.on(r,"mousemove",".dx-row > td",this.createAction(a=>{var s=a.event,o=(0,C.Z)(s.target),d=(0,C.Z)(s.currentTarget),u=d.parent(),c=this._columnsController.getVisibleColumns(),f=u.data("options"),g=d.index(),m=f&&f.cells&&f.cells[g],y=m?m.column:c[g],w=u.hasClass("dx-header-row"),I=u.hasClass("dx-data-row"),P=u.hasClass(rl),$=u.hasClass(ec),se=u.hasClass(this.addWidgetPrefix("filter-row"));P||se||I&&m&&(f.isEditing||m.isEditing||y?.showEditorAlways)||I&&(!y||y.cellTemplate)||w&&(!y||y.headerCellTemplate)||$&&(!y||y.groupIndex&&y.groupCellTemplate)||(o.data(ic)&&(o.removeAttr("title"),o.data(ic,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,v.$K)(o.attr("title"))&&(o.attr("title",o.text()),o.data(ic,!0)))}));var n=a=>{var s=(0,C.Z)(a.currentTarget),o=(0,C.Z)(a.target).closest(".".concat("dx-field-item-content")),d=s.parent(),u=d.data("options"),c=u&&u.cells&&u.cells[s.index()];if(s.closest("table").is(a.delegateTarget)){var f=(0,O.l)({},c,{cellElement:(0,gt.u)(s),event:a,eventType:a.type});if(f.rowIndex=this.getRowIndex(d),o.length){var g=o.data("dx-form-item");g.column&&(f.column=g.column,f.columnIndex=this._columnsController.getVisibleIndex(f.column.index))}return f}};return Z.Z.on(r,"mouseover",".dx-row > td",a=>{var s=n(a);s&&this.executeAction("onCellHoverChanged",s)}),Z.Z.on(r,"mouseout",".dx-row > td",a=>{var s=n(a);s&&this.executeAction("onCellHoverChanged",s)}),Z.Z.on(r,ii.u,".dx-row > td",a=>{var s=n(a);s&&this.executeAction("onCellClick",s)}),Z.Z.on(r,zf.u,".dx-row > td",a=>{var s=n(a);s&&this.executeAction("onCellDblClick",s)}),function(t,e){var i,r,n;function a(s){return setTimeout(()=>{i=r=null},s)}Z.Z.on(e,"touchstart touchend",".dx-row",s=>{clearTimeout(n),"touchstart"===s.type?(i=s.target,r=s.currentTarget,n=a(1e3)):n=a()}),Z.Z.on(e,[ii.u,zf.u,qt.Z.down].join(" "),".dx-row",t.createAction(s=>{var{event:o}=s;i&&(o.target=i,o.currentTarget=r),(0,C.Z)(o.target).closest("a").length||(s.rowIndex=t.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,gt.u)((0,C.Z)(o.currentTarget)),s.columns=t.getColumns(),o.type===qt.Z.down?t._rowPointerDown(s):o.type===ii.u?t._rowClick(s):t._rowDblClick(s)))}))}(this,r),r}_rowPointerDown(){}_rowClick(){}_rowDblClick(){}_createColGroup(e){for(var i=(0,C.Z)("<colgroup>"),r=0;r<e.length;r++)for(var n=e[r].colspan||1,a=0;a<n;a++)i.append(this._createCol(e[r]));return i}_createCol(e){var i=e.visibleWidth||e.width;"adaptiveHidden"===i&&(i=R_);var r=(0,C.Z)("<col>");return(0,fn.cl)(r,i),r}renderDelayedTemplates(e){var i=this._delayedTemplates,r=i.filter(a=>!a.async),n=i.filter(a=>a.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(r,!1,e),this._renderDelayedTemplatesCoreAsync(n)}_renderDelayedTemplatesCoreAsync(e){if(e.length){var i=(0,qe.Jj)().setTimeout(()=>{this._templateTimeouts.delete(i),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(i)}}_renderDelayedTemplatesCore(e,i,r){for(var n=new Date;e.length;){var a=e.shift(),{options:s}=a,o=tt.Z.getRootNode((0,C.Z)(s.container).get(0)),d=this.needWaitAsyncTemplates();if((!i||(0,C.Z)(s.container).closest(o).length||d)&&(r&&(s.change=r),a.template.render(s)),i&&new Date-n>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,i){var r;if(e&&e.render&&!(0,v.ZU)(e))r={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(a){e.render(a.container,a.model,a.change),a.deferred&&a.deferred.resolve()}};else if((0,v.mf)(e))r={render(a){var s=e((0,gt.u)(a.container),a.model,a.change);s&&(s.nodeType||(0,v.ZU)(s))&&a.container.append(s),a.deferred&&a.deferred.resolve()}};else{var n=(0,v.HD)(e)?e:(0,C.Z)(e).attr("id");n?(this._templatesCache[n]||(this._templatesCache[n]=this.getTemplate(e)),r=this._templatesCache[n]):r=this.getTemplate(e)}return r}renderTemplate(e,i,r,n,a){var s,o=this._processTemplate(i,r),{column:d}=r,u="data"===r.rowType,c=new Y.BH,f={container:e,model:r,deferred:c,onRendered:()=>{this.isDisposed()?c.reject():c.resolve()}};if(o){r.component=this.component;var g=d&&(d.renderAsync&&u||this.option("renderAsync")&&(!1!==d.renderAsync&&(d.command||d.showEditorAlways)&&u||"filter"===r.rowType)),m=null!==(s=r.renderAsync)&&void 0!==s?s:g;!o.allowRenderToDetachedContainer&&!n||m?this._delayedTemplates.push({template:o,options:f,async:m}):o.render(f),this._templateDeferreds.add(c),Z.Z.on(e,Uo.x,nc.bind(null,c))}else c.reject();return c.promise().always(()=>{this._templateDeferreds.delete(c)})}_getBodies(e){return(0,C.Z)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var i;return!!this.option().rowTemplate&&!(null===(i=this._getBodies(e))||void 0===i||!i.filter(".".concat(il)).length)}_wrapRowIfNeed(e,i,r){if(this._needWrapRow(r?e||this._tableElement:this._tableElement||e)){var s=(0,C.Z)("<tbody>").addClass(i.attr("class"));return this.setAria("role","presentation",s),s.append(i)}return i}_appendRow(e,i,r){(r=r||O_).render({content:i,container:e})}_resizeCore(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){var i=this.element().parent();(!i||i.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){(e=e||{}).columns=this._columnsController.getVisibleColumns();var i=e.change&&e.change.changeType,r=this._createTable(e.columns,"append"===i||"prepend"===i||"update"===i);return this._renderRows(r,e),r}_renderRows(e,i){for(var r=this._getRows(i.change),n=i.change&&i.change.columnIndices||[],a=i.change&&i.change.changeTypes||[],s=0;s<r.length;s++)this._renderRow(e,(0,O.l)({row:r[s],columnIndices:n[s],changeType:a[s]},i))}_renderRow(e,i){i.columnIndices||(i.row.cells=[]);var r=this._createRow(i.row),n=this._wrapRowIfNeed(e,r);"remove"!==i.changeType&&this._renderCells(r,i),this._appendRow(e,n);var a=(0,O.l)({columns:i.columns},i.row);this._addWatchMethod(a,i.row),this._rowPrepared(n,a,i.row)}_needRenderCell(e,i){return!i||i.indexOf(e)>=0}_renderCells(e,i){for(var r=0,{row:n}=i,{columns:a}=i,s=0;s<a.length;s++)this._needRenderCell(s,i.columnIndices)&&this._renderCell(e,(0,O.l)({column:a[s],columnIndex:r,value:n.values&&n.values[r],oldValue:n.oldValues&&n.oldValues[r]},i)),a[s].colspan>1?r+=a[s].colspan:r++}_updateCells(e,i,r){var n=e.children(),a=i.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");r.forEach((d,u)=>{var c=n.eq(d),f=a.eq(u);c.replaceWith(f),s&&!f.hasClass("dx-command-expand")&&f.addClass(o)}),function(t,e){if(t&&e){var n,i=t.attributes,r=e.attributes;for(n=0;n<i.length;n++){var a=i[n].nodeName;e.hasAttribute(a)||t.removeAttribute(a)}for(n=0;n<r.length;n++)t.setAttribute(r[n].nodeName,r[n].nodeValue)}}(e.get(0),i.get(0))}_setCellAriaAttributes(e,i){if("freeSpace"!==i.rowType){this.setAria("role","gridcell",e);var r=this._columnsController.getColumnIndexOffset();this.setAria("colindex",i.columnIndex+r+1,e)}}_renderCell(e,i){var r=this._getCellOptions(i);if(i.columnIndices){if(i.row.cells){var n=i.row.cells.findIndex(s=>s.columnIndex===r.columnIndex);i.row.cells[n]=r}}else i.row.cells.push(r);var a=this._createCell(r);return this._setCellAriaAttributes(a,r),this._renderCellContent(a,r,i),e.get(0).appendChild(a.get(0)),a}_renderCellContent(e,i,r){var n=this._getCellTemplate(i);(0,Y.gx)(!n||this.renderTemplate(e,n,i,void 0,r.change)).done(()=>{this._updateCell(e,i)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){var i={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(i),i}_addWatchMethod(e,i){if(this.option("repaintChangesOnly")){var r=[];return(i=i||e).watch=i.watch||function(n,a,s){var o=n(i.data),d=function(u){u&&s&&s(u);var c=n(i.data);JSON.stringify(o)!==JSON.stringify(c)&&(u&&a(c),o=c)};return r.push(d),function(){var u=r.indexOf(d);u>=0&&r.splice(u,1)}},i.update=i.update||function(n,a){n&&(this.data=e.data=n.data,this.rowIndex=e.rowIndex=n.rowIndex,this.dataIndex=e.dataIndex=n.dataIndex,this.isExpanded=e.isExpanded=n.isExpanded,e.row&&!a&&(e.row=n)),r.forEach(s=>{s(n)})},i!==e&&(e.watch=i.watch.bind(i)),e}}_cellPrepared(e,i){i.cellElement=(0,gt.u)((0,C.Z)(e)),this.executeAction("onCellPrepared",i)}_rowPrepared(e,i,r){(0,Ed.aT)(e.get(0),"options",i),i.rowElement=(0,gt.u)(e),this.executeAction("onRowPrepared",i)}_columnOptionChanged(e){var{optionNames:i}=e;if(ye.checkChanges(i,["width","visibleWidth"])){var n=this._columnsController.getVisibleColumns().map(a=>a.visibleWidth||a.width);this.setColumnWidths({widths:n,optionNames:i})}else this._requireReady||this.render()}getCellIndex(e){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,C.Z)()}getTableElement(e){return this._tableElement}setTableElement(e,i){this._tableElement=e}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":case"keyboardNavigation":this._invalidate(!0,!0),e.handled=!0}}init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}_afterRowPrepared(e){}_handleDataChanged(){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){var i=this.element(),r=i&&i.children(".".concat(this.addWidgetPrefix(Zd))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,v.$K)(e)&&(0,v.$K)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,r&&r.scrollLeft(e.left))}_getContent(e){var i;return null===(i=this._tableElement)||void 0===i?void 0:i.parent()}_removeContent(e){var i=this._getContent(e);i?.length&&i.remove()}_wrapTableInScrollContainer(e,i){var r=(0,C.Z)("<div>"),n=this.option("scrolling.useNative");return(!1===n||"auto"===n&&!ma.nativeScrolling)&&r.addClass(this.addWidgetPrefix("scrollable-simulated")),Z.Z.on(r,"scroll",()=>{var a=r.scrollLeft();a!==this._scrollLeft&&this.scrollChanged.fire({left:a},this.name)}),r.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(Zd)).append(e).appendTo(this.element()),this.setAria("role","presentation",r),r}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=new Y.BH;if(!e&&!this.needWaitAsyncTemplates())return i.resolve();var n=()=>Y.gx.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?i.reject():this._templateDeferreds.size>0?n():i.resolve()}).fail(i.reject);return n(),i.promise()}_updateContent(e,i,r){return this.waitAsyncTemplates().done(()=>{this._removeContent(r),this.setTableElement(e,r),this._wrapTableInScrollContainer(e,r)})}_findContentElement(){}_getWidths(e){if(!e)return[];var i=[];return e.toArray().forEach(n=>{var a=n.offsetWidth;if(n.getBoundingClientRect){var s=(0,ti.l)(n);s.width>n.offsetWidth-1&&(a=s.width)}i.push(a)}),i}getColumnWidths(e){if((this.option("forceApplyBindings")||ne.ZT)(),e=e??this.getTableElement())for(var i=e.children("tbody:not(.dx-header)").children(),r=0;r<i.length;r++){var n=i.eq(r),a=n.hasClass(ec),s=n.hasClass(rl),o=n.hasClass("dx-error-row");if(!("none"===n.get(0).style.display||n.hasClass("dx-state-invisible")||a||s||o)){var c=n.children("td");return this._getWidths(c)}}return[]}getVisibleColumnIndex(e,i){return e}setColumnWidths(e){var{widths:i}=e,n=this.getTableElement();if(n?.length&&i){var a=this.getColumns(),s=this.option("columnAutoWidth"),o=n.children("colgroup").children("col");o.toArray().forEach(d=>d.removeAttribute("style")),a.forEach((d,u)=>{if(s&&d.width&&!d.command)for(var c=$d(d.visibleWidth||d.width),f=$d(d.minWidth||c),g=n.children().children(".dx-row").not(".".concat(rl)),m=0;m<g.length;m++){var y=g.eq(m),w=this.getVisibleColumnIndex(u,m),P=(y.hasClass(ec)?y.find("td[aria-colindex='".concat(w+1,"']:not(.").concat("dx-group-cell",")")):y.find("td").eq(w)).get(0);P&&(B_(P,d,c),P.style.minWidth=f)}var $=k_(i[u]);(0,v.$K)($)&&(0,fn.cl)(o.eq(u),$)})}}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(!(e<0))return this._getRowElements().eq(e).children()}_getCellElement(e,i){var r=this.getCellElements(e),n=this._getVisibleColumnIndex(r,e,i);if(r?.length&&!(n<0)){var a=r.eq(n);return a.length>0?a:void 0}}_getRowElement(e){var i=this,r=(0,C.Z)(),n=i.getTableElements();if(U.S6(n,(a,s)=>{r=r.add(i._getRowElements((0,C.Z)(s)).eq(e))}),r.length)return r}getCellElement(e,i){var r=this._getCellElement(e,i);if(r)return(0,gt.u)(r)}getRowElement(e){var i=this._getRowElement(e),r=[];if(i&&!(0,gt.u)(i).get)for(var n=0;n<i.length;n++)r.push(i[n]);else r=i;return r}_getVisibleColumnIndex(e,i,r){if((0,v.HD)(r)){var n=this._columnsController.columnOption(r,"index");return this._columnsController.getVisibleIndex(n)}return r}getColumnElements(){}getColumns(e){return this._columnsController.getVisibleColumns(e)}getCell(e,i,r){var a,n=i||this._getRowElements();if(n.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<n.length?e.rowIndex:n.length-1),(a=r||this.getCellElements(e.rowIndex))?.length>0))return a.eq(a.length>e.columnIndex?e.columnIndex:a.length-1)}getRowsCount(){var e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement()){var r=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.".concat(il));return r&&r.length?r:e.find("> tbody > "+".".concat(il,", > .").concat(il))}return(0,C.Z)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){var i=this.element(),r=this.option("rtlEnabled");i&&i.css({paddingLeft:r?e:"",paddingRight:r?"":e})}isScrollbarVisible(e){var i=this.element(),r=this._tableElement;return!(!i||!r)&&(e?(0,Q.Y_)(r)-(0,Q.dz)(i)>0:(0,Q.zp)(r)-(0,Q.Cr)(i)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}dispose(){var e,i;if((0,qe.Ym)()){var r=(0,qe.Jj)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(n=>r.clearTimeout(n)),null===(i=this._templateTimeouts)||void 0===i||i.clear()}}}var ac="text-content",M_="dx-header-row",sc="dx-visibility-hidden",L_="dx-text-content-alignment-",g0="dx-sort-indicator",m0="dx-sort-index-indicator",C0="dx-header-filter-indicator",P_={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:nl.inherit(function(){var t=function(r,n,a){var s=(0,C.Z)("<div>").addClass(r.addWidgetPrefix(ac));r.setAria("role","presentation",s),e(r,n,a.column,s);var o=r.option("showColumnLines"),d=r.getController("columns").getHeaderContentAlignment(a.column.alignment);return s[o||"right"===d?"appendTo":"prependTo"](n)};function e(r,n,a,s){var o=r._getIndicatorElements(n,!0),d=r._getIndicatorElements(n),u=o&&o.length,c=r._getColumnAlignment(a.alignment),f=".".concat(r._getIndicatorClassName("sort")),g=".".concat(r._getIndicatorClassName("sortIndex")),m=d.filter(f),y=d.children().filter(g);(s=s||n.children(".".concat(r.addWidgetPrefix(ac)))).toggleClass(L_+c,u>0).toggleClass(L_+("left"===c?"right":"left"),u>0&&"center"===a.alignment).toggleClass(g0,!!m.length).toggleClass(m0,!!y.length).toggleClass(C0,!!d.filter(".".concat(r._getIndicatorClassName("headerFilter"))).length)}var i={_createTable(){var r=this.callBase.apply(this,arguments);return Z.Z.on(r,"mousedown selectstart",this.createAction(n=>{var{event:a}=n;a.shiftKey&&a.preventDefault()})),r},_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")},_getDefaultTemplate(r){var n=this;return function(a,s){var o=r.command?a:t(n,a,s),d="expand"!==r.command&&r.caption;d?o.text(d):r.command&&a.html("&nbsp;")}},_getHeaderTemplate(r){return r.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(r)}},_processTemplate(r,n){var a=this,{column:o}=n,d=a.callBase(r);return"header"===n.rowType&&d&&o.headerCellTemplate&&!o.command?{render(u){var c=t(a,u.container,u.model);d.render((0,O.l)({},u,{container:c}))}}:d},_handleDataChanged(r){"refresh"===r.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())},_renderCell(r,n){var a=this.callBase(r,n);return"header"===n.row.rowType&&(a.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||n.column&&!n.column.type&&a.attr("tabindex",this.option("tabindex")||0)),a},_setCellAriaAttributes(r,n){this.callBase(r,n),"header"===n.rowType&&(n.column.type||this.setAria("role","columnheader",r),n.column&&!n.column.command&&!n.column.isBand&&(r.attr("id",n.column.headerId),this.setAria("label","".concat(le.Z.format("dxDataGrid-ariaColumn")," ").concat(n.column.caption),r)))},_createRow(r){var n=this.callBase.apply(this,arguments);return n.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===r.rowType&&(n.addClass(M_),this._isLegacyKeyboardNavigation()||Go("columnHeaders",this,n,"td",this._handleActionKeyDown.bind(this))),n},_handleActionKeyDown(r){var{event:n}=r,a=(0,C.Z)(n.target);if(this._lastActionElement=n.target,a.is(".dx-header-filter")){var s=this.getController("headerFilter"),o=a.closest("td"),d=this.getColumnIndexByElement(o);d>=0&&s.showHeaderFilterMenu(d,!1)}else{var u=a.closest(".dx-row");this._processHeaderAction(n,u)}n.preventDefault()},_renderCore(){var r=this.element(),n={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){r.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",r);var a=this._updateContent(this._renderTable({change:n}),n);return this.getRowCount()>1&&r.addClass("dx-header-multi-row"),this.callBase.apply(this,arguments),a}},_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(this.callBase.apply(this,arguments),this._hasRowElements=!0)},_getRowVisibleColumns(r){return this._columnsController.getVisibleColumns(r)},_renderRow(r,n){n.columns=this._getRowVisibleColumns(n.row.rowIndex),this.callBase(r,n)},_createCell(r){var{column:n}=r,a=this.callBase.apply(this,arguments);return n.rowspan>1&&"header"===r.rowType&&a.attr("rowSpan",n.rowspan),a},_getRows(){var r=[],n=this.getRowCount();if(this.option("showColumnHeaders"))for(var a=0;a<n;a++)r.push({rowType:"header",rowIndex:a});return r},_getCellTemplate(r){if("header"===r.rowType)return this._getHeaderTemplate(r.column)},_columnOptionChanged(r){var{changeTypes:n}=r,{optionNames:a}=r;n.grouping||n.groupExpanding?n.grouping&&(this._isGroupingChanged=!0):(this.callBase(r),(a.width||a.visible)&&this.resizeCompleted.fire())},_isElementVisible:r=>r&&r.visible,_alignCaptionByCenter(r){var n=this._getIndicatorContainer(r,!0);n&&n.length&&(n.filter(".".concat(sc)).remove(),(n=this._getIndicatorContainer(r)).clone().addClass(sc).css("float","").insertBefore(r.children(".".concat(this.addWidgetPrefix(ac)))))},_updateCell(r,n){"header"===n.rowType&&"center"===n.column.alignment&&this._alignCaptionByCenter(r),this.callBase.apply(this,arguments)},_updateIndicator(r,n,a){var s=this.callBase.apply(this,arguments);return"center"===n.alignment&&this._alignCaptionByCenter(r),e(this,r,n),s},_getIndicatorContainer(r,n){var a=this.callBase(r);return n?a:a.filter(":not(.".concat(sc,")"))},_isSortableElement:()=>!0,getHeadersRowHeight(){var r=this.getTableElement(),n=r&&r.find(".".concat(M_));return n&&n.toArray().reduce((a,s)=>a+(0,Q.Cr)(s),0)||0},getHeaderElement(r){var n=this.getColumnElements();return n&&n.eq(r)},getColumnElements(r,n){var s,a=this,o=a._columnsController,d=a.getRowCount();if(a.option("showColumnHeaders")){if(d>1&&(!(0,v.$K)(r)||(0,v.$K)(n))){var u=[],c=(0,v.$K)(n)?o.getChildrenByBandColumn(n,!0):o.getVisibleColumns();return(0,U.S6)(c,(f,g)=>{var m=(0,v.$K)(r)?r:o.getRowIndex(g.index);(s=a._getCellElement(m,o.getVisibleIndex(g.index,m)))&&u.push(s.get(0))}),(0,C.Z)(u)}if(!r||r<d)return a.getCellElements(r||0)}},getColumnIndexByElement(r){var n=this.getCellIndex(r),a=r.closest(".dx-row"),{rowIndex:s}=a[0],o=this.getColumns(s)[n];return o?o.index:-1},getVisibleColumnIndex(r,n){var a=this.getColumns()[r];return a?this._columnsController.getVisibleIndex(a.index,n):-1},getColumnWidths(){var r=this.getColumnElements();return r&&r.length?this._getWidths(r):this.callBase.apply(this,arguments)},allowDragging(r,n,a){var s,m,o=0,d=r&&this._columnsController.getRowIndex(r.index),u=this.getColumns(0===d?0:null),c=r?.allowHiding&&u.length>1;for(s=0;s<u.length;s++)((m=u[s]).allowReordering||m.allowGrouping||m.allowHiding)&&o++;if(o<=1&&!c)return!1;if(!a)return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&r&&r.allowReordering;for(s=0;s<a.length;s++){var g=a[s];if(g&&g.allowDragging(r,n))return!0}return!1},getBoundingRect(){var r=this.getColumnElements();return r&&r.length?{top:this.getTableElement().offset().top}:null},getName:()=>"headers",getColumnCount(){var r=this.getColumnElements();return r?r.length:0},isVisible(){return this.option("showColumnHeaders")},optionChanged(r){switch(r.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),r.handled=!0;break;default:this.callBase(r)}},getHeight(){return this.getElementHeight()},getContextMenuItems(r){var n=this,{column:a}=r;if(r.row&&("header"===r.row.rowType||"detailAdaptive"===r.row.rowType)){var s=n.option("sorting");if(s&&"none"!==s.mode&&a&&a.allowSorting){var o=function(d){setTimeout(()=>{n._columnsController.changeSortOrder(a.index,d.itemData.value)})};return[{text:s.ascendingText,value:"asc",disabled:"asc"===a.sortOrder,icon:"context-menu-sort-asc",onItemClick:o},{text:s.descendingText,value:"desc",disabled:"desc"===a.sortOrder,icon:"context-menu-sort-desc",onItemClick:o},{text:s.clearText,value:"none",disabled:!a.sortOrder,icon:"context-menu-sort-none",onItemClick:o}]}}},getRowCount(){return this._columnsController&&this._columnsController.getRowCount()},setRowsOpacity(r,n,a){var s,o,d=this.getRowCount(),u=this._columnsController.getColumns(),c=u&&u[r],f=c&&c.isBand&&c.index,g=(y,w)=>{y.ownerBand===f&&(o.eq(w).css({opacity:n}),y.isBand&&this.setRowsOpacity(y.index,n,s+1))};if((0,v.$K)(f))for(s=a=a||0;s<d;s++)(o=this.getCellElements(s))&&this.getColumns(s).forEach(g)}};return i}())}};const l=(0,je.Z)((0,je.Z)((0,je.Z)({},zt),ye),{modules:[]});l.registerModule("columnHeaders",P_);var _=k(2429),b=k(4797),S=k(577),D=["filterValues","filterType","fixed","fixedPosition"],H=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(D),q={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},Ae=Number.MAX_SAFE_INTEGER||9007199254740991,Ee="groupExpand",Ye=/columns\[(\d+)\]\.?/gi,it={visible:!0,showInColumnChooser:!0},ft={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},It={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},lt="group",xt="columnChooser",At=k(6769),Qi="yyyy/MM/dd",Ii=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,an=/^(\d{2}):(\d{2})(:(\d{2}))?$/,kn=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],F_=/^(\d{4})\/(\d{2})\/(\d{2})$/,Aw=function(t,e){var i;return(0,v.HD)(t)&&!e&&(i=function nR(t){var e=t.match(Ii);if(!e)return(e=t.match(an))?new Date(0,0,0,Sr(e[1]),Sr(e[2]),Sr(e[4])):void 0;var i=Sr(e[1]),r=--e[3],n=e[5],a=0,s=0;a=Sr(e[14]),s=Sr(e[16]),"-"===e[13]&&(a=-a,s=-s);var g,d=Sr(e[6])-a,u=Sr(e[8])-s,c=Sr(e[10]),f=Sr(g=(g=e[11])||"")*Math.pow(10,3-g.length);return(g=>(i<100&&g.setFullYear(i),g))(e[12]?new Date(Date.UTC(i,r,n,d,u,c,f)):new Date(i,r,n,d,u,c,f))}(t)),i||function rR(t){var e=Rw(t)===Qi,i=!(0,v.J_)(t)&&Date.parse(t);if(!i&&e){var r=t.match(F_);if(r){var n=new Date(Sr(r[1]),Sr(r[2]),Sr(r[3]));return n.setFullYear(Sr(r[1])),n.setMonth(Sr(r[2])-1),n.setDate(Sr(r[3])),n}}return(0,v.kE)(i)?new Date(i):t}(t)};function Sr(t){return+t||0}var Rw=function(t){return"number"==typeof t?"number":(0,v.HD)(t)?((0,_.Z)().forceIsoDateParsing&&(e=function(t,e){var i=t.match(Ii),r="";if(!i)return(i=t.match(an))?i[3]?"HH:mm:ss":"HH:mm":void 0;for(var n=1;n<kn.length;n++)i[n]&&(r+=kn[n]||i[n]);return"Z"===i[12]&&(r+="'Z'"),i[14]&&(r+=i[15]?"xxx":i[16]?"xx":"x"),r}(t)),e||(t.indexOf(":")>=0?"yyyy/MM/dd HH:mm:ss":Qi)):t?null:void 0;var e};const Oi={dateParser:Aw,deserializeDate:function(t){return"number"==typeof t?new Date(t):Aw(t,!(0,_.Z)().forceIsoDateParsing)},serializeDate:function(t,e){return e?(0,v.J_)(t)?"number"===e?t&&t.valueOf?t.valueOf():null:Fh(e,tl)(t):null:t},getDateSerializationFormat:Rw};var Ow=function(t){t.filterOperations=t.defaultFilterOperations},lR=1,V_=function(t,e,i,r){var n={};if(e){(0,v.HD)(e)&&(e={dataField:e}),t.setName(e);var a={};if(e.command)a=(0,b.HR)(n,e);else{n=t.getCommonSettings(e),i&&i.name&&i.dataField&&(e=(0,O.l)({},e,{dataField:i.dataField}));var s=t._createCalculatedColumnOptions(e,r);e.type||(a={headerId:"dx-col-".concat(lR++)}),a=(0,b.HR)(a,it),(0,b.HR)(a,n),(0,b.HR)(a,s),(0,b.HR)(a,e),(0,b.HR)(a,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&Ow(a),a}},Wd=function t(e,i,r){var n=[];return i&&(0,U.S6)(i,(a,s)=>{var o=e._columnsUserState&&x0(s,e._columnsUserState[a])&&e._columnsUserState[a],d=V_(e,s,o,r);d&&(r&&(d.ownerBand=r),n.push(d),d.columns&&(n=n.concat(t(e,d.columns,d)),delete d.columns,d.hasColumns=!0))}),n},al=function(t,e){for(var i=[],r=e[t];r;)i.unshift(r),r=e[t=r.index];return i},dR=function t(e,i,r){var n=[],a=i[e];if(a)for(var s=0;s<a.length;s++){var o=a[s];(!(0,v.$K)(o.groupIndex)||o.showWhenGrouped)&&(n.push(o),r&&o.isBand&&(n=n.concat(t(o.index,i,r))))}return n},hR=function(t,e){var r,i=[],n=t.getBandColumnsCache(),a=function(o){return o.ownerBand===e.ownerBand};if(n.isPlain){var s=t._columns.indexOf(e);s>=0&&(i=["columns[".concat(s,"]")])}else for(r=t._columns.filter(a);r.length&&-1!==r.indexOf(e);)i.unshift("columns[".concat(r.indexOf(e),"]")),r=(e=n.columnParentByIndex[e.index])?t._columns.filter(a):[];return i.join(".")},cR=function t(e,i){var r=0,n=e.getChildrenByBandColumn(i,!0);return(0,U.S6)(n,(a,s)=>{s.isBand?(s.colspan=s.colspan||t(e,s.index),r+=s.colspan||1):r+=1}),r},y0=function(t){var e=(0,v.dt)(t);return"string"!==e&&"boolean"!==e&&"number"!==e&&"date"!==e&&"object"!==e&&(e=void 0),e},Bw=function(t,e){switch(t){case"date":case"datetime":return Oi.getDateSerializationFormat(e);case"number":if((0,v.HD)(e))return"string";if((0,v.kE)(e))return null}},kw=function(t,e){t.deserializeValue||(ye.isDateType(e)&&(t.deserializeValue=function(i){return Oi.deserializeDate(i)},t.serializeValue=function(i){return(0,v.HD)(i)?i:Oi.serializeDate(i,this.serializationFormat)}),"number"===e&&(t.deserializeValue=function(i){var r=parseFloat(i);return isNaN(r)?i:r},t.serializeValue=function(i,r){return"filter"===r?i:(0,v.$K)(i)&&"string"===this.serializationFormat?i.toString():i}))},_R=function(t){return!0===t.value?this.trueText||"true":!1===t.value?this.falseText||"false":t.valueText||""},Mw=function(t){if("boolean"===t)return _R},Lw=function(t){(0,U.S6)(t._columns,(e,i)=>{i.index=e}),(0,U.S6)(t._columns,(e,i)=>{(0,v.Kn)(i.ownerBand)&&(i.ownerBand=i.ownerBand.index)}),(0,U.S6)(t._commandColumns,(e,i)=>{i.index=-(e+1)})},Pw=function(t,e){(0,At.Sq)(t._columns,"groupIndex",e,i=>{var{grouped:r}=i;return delete i.grouped,r})},w0=function(t,e,i){var a,r=(0,v.Kn)(e)?e.rowIndex:null,n=i===lt?t.getGroupColumns():i===xt?t.getChooserColumns():t.getVisibleColumns(r);return e=(0,v.Kn)(e)?e.columnIndex:e,(a=n[e])&&a.type===Ee&&(a=t._columns.filter(s=>a.type===s.type)[0]||a),a&&(0,v.$K)(a.index)?a.index:-1};function x0(t,e){return t&&e&&e.name===(t.name||t.dataField)&&(e.dataField===t.dataField||t.name)}var Fw=function(t){var d,u,c,e=t._columnsUserState,i=t._ignoreColumnOptionNames||[],r=t._columns,n={},a=[],s=!0,o=[];function f(w,I){if(I)for(var P=0;P<H.length;P++){var $=H[P];i.includes($)||("dataType"===$?w[$]=w[$]||I[$]:D.includes($)?$ in I&&(w[$]=I[$]):("selectedFilterOperation"===$&&I[$]&&(w.defaultSelectedFilterOperation=w[$]||null),w[$]=I[$]))}}function g(w,I){for(var P=I.name||I.dataField,$=n[P]||0,se=0;se<w.length;se++)if(x0(I,w[se])){if(!$)return n[P]=n[P]||0,n[P]++,se;$--}return-1}if(e){for(c=0;c<r.length;c++)u=g(e,r[c]),s=s&&u>=0,o.push(u);for(c=0;c<r.length;c++)d=r[c],u=o[c],(t._hasUserState||s)&&f(d,e[u]),u>=0&&(0,v.$K)(e[u].initialIndex)?a[u]=d:a.push(d);var m=!1;for(c=0;c<e.length;c++){var y=e[c];y.added&&g(r,y)<0&&(f(d=V_(t,y.added),y),a.push(d),y.added.columns&&(m=!0))}m&&(Lw(t),a=Wd(t,a)),Kd(t,a)}},sl=function(t,e){Lw(t),Pw(t,e),function(t,e){(0,U.S6)(t._columns,(i,r)=>{(0,v.$K)(r.sortIndex)&&!z_(r.sortOrder)&&delete r.sortIndex}),(0,At.Sq)(t._columns,"sortIndex",e,i=>!(0,v.$K)(i.groupIndex)&&z_(i.sortOrder))}(t,e),$w(t),function(t,e){for(var i,r=[],n=t.getBandColumnsCache(),a=[],s=t._columns.filter(u=>!u.command),o=0;o<s.length;o++)i=s[o],al(o,n.columnParentByIndex).length?a.push(i):r.push(i);(0,At.Sq)(a,"visibleIndex",e),(0,At.Sq)(r,"visibleIndex",e)}(t,e)},N_=function(t){t.resetColumnsCache()};function Kd(t,e){t._previousColumns=t._columns,t._columns=e,N_(t),t.updateColumnDataTypes()}var ya=function(t,e,i,r){var n=t._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:r};i=(i=i||"all").split(".")[0];var{changeTypes:a}=n;e&&!a[e]&&(a[e]=!0,a.length++);var{optionNames:s}=n;i&&!s[i]&&(s[i]=!0,s.length++),(void 0===r||r!==n.columnIndex)&&delete n.columnIndex,t._columnChanges=n,N_(t)},oc=function(t){var n,e=t.option("onColumnsChanging"),i=t._columnChanges;t.isInitialized()&&!t._updateLockCount&&i&&(e&&(t._updateLockCount++,e((0,O.l)({component:t.component},i)),t._updateLockCount--),t._columnChanges=void 0,(n=i.optionNames)&&["dataField","lookup","dataType","columns"].some(a=>n[a])?(t._reinitAfterLookupChanges=i?.optionNames.lookup,t.reinit(),t._reinitAfterLookupChanges=void 0):t.columnsChanged.fire(i))},bR=function(t,e,i,r){if(i>=0)r>=0||(e.lastSortOrder=e.sortOrder);else{var a=t.option("sorting.mode"),s=e.lastSortOrder;"single"===a&&t._columns.some(d=>d!==e&&(0,v.$K)(d.sortIndex))&&(s=void 0),e.sortOrder=s}},yR=function(t,e){var{value:i}=e,{optionName:r}=e,{prevValue:n}=e,{fullOptionName:a}=e,s="".concat(a,".").concat(r);!q[r]&&t._skipProcessingColumnsChange!==s&&(t._skipProcessingColumnsChange=s,t.component._notifyOptionChanged(s,i,n),t._skipProcessingColumnsChange=!1)},S0=function(t,e,i,r,n){var o,d,u,a=(0,Pt.vb)(i),s=e.index;if(3===arguments.length)return a(e,{functionsAsIs:!0});var c=a(e,{functionsAsIs:!0});if(!(0,ne.bY)(c,r,{maxDepth:5})){"groupIndex"===i||"calculateGroupValue"===i?(d="grouping",bR(t,e,r,c)):d="sortIndex"===i||"sortOrder"===i||"calculateSortValue"===i?"sorting":"columns";var f=(0,Pt.OM)(i);f(e,r,{functionsAsIs:!0});var g=hR(t,e);It[i]&&(sl(t,e),r=a(e)),("name"===i||"allowEditing"===i)&&t._checkColumns(),!(0,v.$K)(c)&&!(0,v.$K)(r)&&0!==i.indexOf("buffer")&&(n=!0),n?N_(t):(!H.includes(i)&&"visibleWidth"!==i&&(o=t.option("columns"),u=t.getColumnByPath(g,o),(0,v.HD)(u)&&(u=o[s]={dataField:u}),u&&x0(u,e)&&f(u,r,{functionsAsIs:!0})),ya(t,d,i,s)),g&&yR(t,{fullOptionName:g,optionName:i,value:r,prevValue:c})}};function z_(t){return"asc"===t||"desc"===t}var xR=function(t,e){if(this.dataField){var i=this.dataField.split("."),r=i.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var n=0;n<r;n++){var a=i[n];t=t[a]=t[a]||{}}t[i[r]]=e}},SR=function t(e,i,r){var n=[];return e[i=i||0]&&(0,U.S6)(e[i],(a,s)=>{(s.ownerBand===r||s.type===Ee)&&(s.isBand&&s.colspan?n.push.apply(n,t(e,i+1,s.index)):(!s.command||i<1)&&n.push(s))}),n},E0=(t,e)=>!!t._columns.filter(r=>r.type===e.type).length,Vw=function(t,e){var i=t.option("rtlEnabled");return e.command&&!E0(t,e)||!e.fixedPosition?i?"right":"left":e.fixedPosition},Nw=function(t,e,i,r){var n,a=this.getRowCount(),s=t[r]&&t[r].rowspan,o=e.filter(d=>d.type===i);return t.forEach((d,u)=>{d.type===i&&(n=u,s=t[u+1]?t[u+1].rowspan:a)}),s>1&&(o=(0,U.UI)(o,d=>(0,O.l)({},d,{rowspan:s}))),o.unshift.apply(o,(0,v.$K)(n)?[n,1]:[r,0]),t.splice.apply(t,o),s||1},zw=function(t,e){for(var i=t?t.toString():"0";i.length<e;)i="0".concat(i);return i},Hw=(t,e,i,r)=>{for(var n,a,s=e.slice().map(m=>(0,O.l)({},m)),o=t._isColumnFixing(),d=i.slice().map(m=>(0,O.l)({fixed:o},m)),u=m=>i.reduce((y,w,I)=>w.type===(r&&m.type===Ee?"expand":m.type)||w.command===m.command?I:y,-1),c=m=>m.command!==i[a].command,f=0;f<e.length;f++)(a=(n=e[f])&&(n.type||n.command)?u(n):-1)>=0&&(r?(s[f]=(0,O.l)({fixed:o},i[a],n),n.type!==Ee&&(d=d.filter(c))):s[f]=(0,O.l)({},n,i[a],n.type===Ee&&{visibleIndex:n.visibleIndex,index:n.index,headerId:n.headerId,allowFixing:0===n.groupIndex,allowReordering:0===n.groupIndex,groupIndex:n.groupIndex}));return e.length&&r&&d.length&&(s=s.concat(d)),s},Zw=(t,e)=>(0,v.$K)(e.fixed)||!e.type?e.fixed:t._isColumnFixing(),$w=t=>{t._bandColumnsCache=void 0},Ww=(t,e)=>{var r,i=(0,v.HD)(e)&&e.substr(0,e.indexOf(":"));if(void 0!==e)return i&&(e=e.substr(i.length+1)),i?r=t.filter(n=>"".concat(n[i])===e)[0]:["index","name","dataField","caption"].some(n=>!!(r=t.filter(a=>a[n]===e)[0])),r},Kw={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:le.Z.format("dxDataGrid-trueText"),falseText:le.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class RR extends zt.Controller{_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){var i,r=[];return e&&e.items().length>0&&(i=ye.normalizeSortingInfo(e.group()).length,r=function n(a,s){if(!a||!s)return a;for(var o=0;o<a.length;o++){var d=n(a[o].items||a[o].collapsedItems,s-1);if(d&&d.length)return d}}(e.items(),i)||[]),r}_endUpdateCore(){!this._skipProcessingColumnsChange&&oc(this)}init(e){var i=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!i,this._isColumnsFromOptions?(Kd(this,i?Wd(this,i):[]),Fw(this)):Kd(this,this._columnsUserState?Wd(this,this._columnsUserState):this._columns),function(t){var e=t._getExpandColumnOptions();t.addCommandColumn(e)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):sl(this),this._checkColumns()}callbackNames(){return["columnsChanged"]}getColumnByPath(e,i){var r,n=[];return e.replace(Ye,(a,s)=>(n.push(parseInt(s)),"")),n.length&&(r=i?n.reduce((a,s)=>a&&a.columns&&a.columns[s],{columns:i}):function(t,e){var i,r,a=function(o){return o.ownerBand===(i?i.index:void 0)};if(t.getBandColumnsCache().isPlain)i=t._columns[e[0]];else{r=t._columns.filter(a);for(var s=0;s<e.length;s++)(i=r[e[s]])&&(r=t._columns.filter(a))}return i}(this,n)),r}optionChanged(e){var i;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":i=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),i=!0)),i&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0,this.reinit("columnWidth"===e.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){var i={},r=this.getColumnByPath(e.fullName),n=e.fullName.replace(Ye,"");r&&(n?i[n]=e.value:i=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(r.index,i),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){var{component:i}=this;"width"===e.fullName.replace(Ye,"")&&i._updateLockCount&&(i._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,i,r){var n=e&&e.isLoaded();if(this._dataSource=e,!this._dataSourceApplied||0===this._dataSourceColumnsCount||i||this.option("regenerateColumnsByVisibleItems")){if(n){if(!this._isColumnsFromOptions){var a=function(t,e){for(var r,i=t._getFirstItems(e),n={},a=[],s=0;s<i.length;s++)if(i[s])for(r in i[s])(!(0,v.mf)(i[s][r])||_n.Z.isWrapped(i[s][r]))&&(n[r]=!0);for(r in n)if(0!==r.indexOf("__")){var o=V_(t,r);a.push(o)}return a}(this,e);a.length&&(Kd(this,a),this._dataSourceColumnsCount=this._columns.length,Fw(this))}return this.updateColumns(e,i,r)}this._dataSourceApplied=!1,sl(this)}else if(n&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(e))return ya(this,"columns"),oc(this),(new Y.BH).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,$w(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){var i,r,n=(!e||!e.type)&&this.option("commonColumnSettings")||{},a=null!==(i=this.option("grouping"))&&void 0!==i?i:{},s=null!==(r=this.option("groupPanel"))&&void 0!==r?r:{};return(0,O.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:a.autoExpandAll,allowCollapsing:a.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||a.contextMenuEnabled},n)}isColumnOptionUsed(e){for(var i=0;i<this._columns.length;i++)if(this._columns[i][e])return!0}isAllDataTypesDefined(e){var i=this._columns;if(!i.length)return!1;for(var r=0;r<i.length;r++)if((i[r].dataField||i[r].calculateCellValue!==i[r].defaultCalculateCellValue)&&(!i[r].dataType||e&&i[r].deserializeValue&&void 0===i[r].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){var e=[];return(0,U.S6)(this._columns,function(){(0,v.$K)(this.groupIndex)&&(e[this.groupIndex]=this)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,v.$K)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,i){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,v.$K)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{var i=(0,O.l)(!0,{},e);return(0,v.$K)(i.dataField)||(i.dataField=i.name),i.filterOperations=e.filterOperations!==e.defaultFilterOperations?i.filterOperations:null,i})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,d,e=[],i=this.getRowCount(),n={command:"transparent"},a=0;if(this._isColumnFixing())for(var u=0;u<=i;u++){s=0,d=null,o=null;for(var c=this.getVisibleColumns(u,!0),f=0;f<c.length;f++){var g=c[f-1],m=c[f];m.fixed?g&&g.fixed&&Vw(this,g)!==Vw(this,m)?(0,v.$K)(o)||(o=f):d=m.fixedPosition:(0===u&&(m.isBand&&m.colspan?a+=m.colspan:a++),s++,(0,v.$K)(o)||(o=f))}if(0===u&&(0===s||s>=c.length))return[];(0,v.$K)(o)||(o="right"===d?0:c.length),e[u]=c.slice(0),n.colspan||(n.colspan=a),e[u].splice(o,s,n)}return e.map(y=>y.map(w=>{var I=(0,je.Z)({},w);return I.headerId&&(I.headerId+="-fixed"),I}))}_isColumnFixing(){var e=this.option("columnFixing.enabled");return!e&&(0,U.S6)(this._columns,(i,r)=>{if(r.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var i,e=this._getExpandColumnsCore(),r=e.filter(o=>0===o.groupIndex)[0],n=r&&r.fixed,a=this._isColumnFixing(),s=this.option("rtlEnabled");return e.length&&(i=this.columnOption("command:expand")),(0,U.UI)(e,o=>(0,O.l)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,v.$K)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,v.$K)(o.groupIndex)||!n)||a,fixedPosition:s?"right":"left"},i,{index:o.index,type:o.type||Ee}))}getBandColumnsCache(){if(!this._bandColumnsCache){var e=this._columns,i={},r={},n=!0;e.forEach(a=>{var{ownerBand:s}=a,o=(0,v.Kn)(s)?s.index:s,d=e[o];a.hasColumns&&(n=!1),a.colspan&&(a.colspan=void 0),a.rowspan&&(a.rowspan=void 0),d?r[a.index]=d:o=-1,i[o]=i[o]||[],i[o].push(a)}),this._bandColumnsCache={isPlain:n,columnChildrenByIndex:i,columnParentByIndex:r}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,v.$K)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(i=>{var r=this._isColumnVisible(i),n=this._isColumnInGroupPanel(i);return r&&!n&&!i.command})}_compileVisibleColumnsCore(){var e=this.getBandColumnsCache(),i=Hw(this,this._columns,this._commandColumns,!0);!function(t,e,i){for(var r,n=0;n<e.length;n++){var a=e[n];(a.visible||a.command)&&(a.isBand&&(a.colspan=a.colspan||cR(t,a.index)),(!a.isBand||!a.colspan)&&(r=t.getRowCount(),!a.command&&(!(0,v.$K)(a.groupIndex)||a.showWhenGrouped)&&(r-=al(a.index,i.columnParentByIndex).length),r>1&&(a.rowspan=r)))}}(this,i,e);var r=this._getIndexedColumns(i),n=this._getVisibleColumnsFromIndexed(r);return!this.hasVisibleDataColumns()&&this._columns.length&&n[n.length-1].push({command:"empty"}),n}_getIndexedColumns(e){for(var i=this.option("rtlEnabled"),r=this.getRowCount(),n=function(t){var e;for(e=0;t>1;e++)t/=10;return e}(e.length),a=this.getBandColumnsCache(),s=[],o=[],d=0;d<r;d+=1)o[d]=[{}],s[d]=[{},{},{}];return e.forEach(u=>{var c,f,g,m,w,{visibleIndex:y}=u,I=al(u.index,a.columnParentByIndex),P=this._isColumnVisible(u),$=this._isColumnInGroupPanel(u);if(P&&!$){var se=I.length;if(y<0)y=-y,w=o[se];else if(u.fixed=null!==(f=null===(c=I[0])||void 0===c?void 0:c.fixed)&&void 0!==f?f:u.fixed,u.fixedPosition=null!==(m=null===(g=I[0])||void 0===g?void 0:g.fixedPosition)&&void 0!==m?m:u.fixedPosition,u.fixed){var fe=!!u.command&&!E0(this,u),Se="right"===u.fixedPosition;i&&!fe&&(Se=!Se),w=Se?s[se][2]:s[se][0]}else w=s[se][1];if(I.length){y=zw(y,n);for(var Fe=I.length-1;Fe>=0;Fe-=1)y=zw(I[Fe].visibleIndex,n)+y}w[y]=w[y]||[],w[y].push(u)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(e){for(var i=this,{positiveIndexedColumns:r,negativeIndexedColumns:n}=e,a=[],s=this.getRowCount(),o=Hw(this,this.getExpandColumns(),this._columns),d=0,u=0,c=function(g){a.push([]),(0,b.jS)(n[g],(w,I)=>{a[g].unshift.apply(a[g],I)});var m=a[g].length;r[g].forEach(w=>{(0,b.jS)(w,(I,P)=>{a[g].push.apply(a[g],P)})}),u<=g&&(u+=Nw.call(i,a[g],o,"detailExpand",m)),d<=g&&(d+=Nw.call(i,a[g],o,Ee,m))},f=0;f<s;f+=1)c(f);return a.push(SR(a)),a}getInvisibleColumns(e,i){var a,r=this,n=[];return(0,U.S6)(e=e||r._columns,(s,o)=>{if(o.ownerBand===i){if(o.isBand)return void((a=o.visible?r.getInvisibleColumns(r.getChildrenByBandColumn(o.index),o.index):r.getChildrenByBandColumn(o.index)).length&&(n.push(o),n=n.concat(a)));o.visible||n.push(o)}}),n}getChooserColumns(e){return((t,e)=>{if("asc"!==e&&"desc"!==e)return t;var i="asc"===e?1:-1;return t.sort((r,n)=>i*(r.caption||"").localeCompare(n.caption||"")),t})((e?this.getColumns():this.getInvisibleColumns()).filter(a=>a.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(e,i,r,n){var a=w0(this,e,r),s=this._columns[a];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(r===n?r!==xt&&(e=(0,v.Kn)(e)?e.columnIndex:e)!==(i=(0,v.Kn)(i)?i.columnIndex:i)&&e+1!==i:r===lt&&n!==xt||n===lt?s&&s.allowGrouping:r!==xt&&n!==xt||s&&s.allowHiding)}moveColumn(e,i,r,n){var s,u,a={},o=w0(this,e,r),d=w0(this,i,n);if(o>=0){var c=this._columns[o];if(i=(0,v.Kn)(i)?i.columnIndex:i,u=d>=0?this._columns[d].groupIndex:-1,(0,v.$K)(c.groupIndex)&&r===lt&&(u>c.groupIndex&&u--,n!==lt?a.groupIndex=void 0:(s=c.groupIndex,delete c.groupIndex,Pw(this))),n===lt)a.groupIndex=function(t,e,i){var n,r=t.getGroupColumns();if(i>=0)for(n=0;n<r.length;n++)r[n].groupIndex>=i&&r[n].groupIndex++;else for(i=0,n=0;n<r.length;n++)i=Math.max(i,r[n].groupIndex+1);return i}(this,0,u),c.groupIndex=s;else if(i>=0){var f=this._columns[d];a.visibleIndex=!f||c.ownerBand!==f.ownerBand||Zw(this,c)^Zw(this,f)?Ae:f.visibleIndex}var g=n!==xt;c.visible!==g&&(a.visible=g),this.columnOption(c.index,a)}}changeSortOrder(e,i){var r={},n=this.option("sorting"),a=n&&n.mode,d=this._columns[e];("single"===a||"multiple"===a)&&d&&d.allowSorting&&(("single"===a||!i)&&!(0,v.$K)(d.groupIndex)&&(0,U.S6)(this._columns,function(u){u!==e&&this.sortOrder&&((0,v.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),z_(i)?d.sortOrder!==i&&(r.sortOrder=i):"none"===i?d.sortOrder&&(r.sortIndex=void 0,r.sortOrder=void 0):function(u){if("ctrl"===i){if(!("sortOrder"in u)||!("sortIndex"in u))return!1;r.sortOrder=void 0,r.sortIndex=void 0}else r.sortOrder=(0,v.$K)(u.groupIndex)||(0,v.$K)(u.sortIndex)?"desc"===u.sortOrder?"asc":"desc":"asc"}(d)),this.columnOption(d.index,r)}getSortDataSourceParameters(e){var i=[],r=[];return(0,U.S6)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,v.$K)(this.sortIndex)&&!(0,v.$K)(this.groupIndex)&&(i[this.sortIndex]=this)}),(0,U.S6)(i,function(){if(z_(this&&this.sortOrder)){var a={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(a.compare=this.sortingMethod.bind(this)),r.push(a)}}),r.length>0?r:null}getGroupDataSourceParameters(e){var i=[];return(0,U.S6)(this.getGroupColumns(),function(){var r=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(r){var n={selector:r,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),i.push(n)}}),i.length>0?i:null}refresh(e){var i=[];return(0,U.S6)(this._columns,function(){var{lookup:r}=this;if(r&&!this.calculateDisplayValue){if(e&&r.valueMap)return;r.update&&i.push(r.update())}}),Y.gx.apply(C.Z,i).done(N_.bind(null,this))}_updateColumnOptions(e,i){e.selector=e.selector||function(a){return e.calculateCellValue(a)},this._reinitAfterLookupChanges&&this._previousColumns?(e.selector.columnIndex=i,e.selector.originalCallback=this._previousColumns[i].selector.originalCallback):(e.selector.columnIndex=i,e.selector.originalCallback=e.selector),(0,U.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(a,s)=>{var o=e[s];if((0,v.mf)(o))if(o.originalCallback)e[s].context.column=e;else{var d={column:e};e[s]=function(u){return o.call(d.column,u)},e[s].originalCallback=o,e[s].columnIndex=i,e[s].context=d}}),(0,v.HD)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,Pt.vb)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),kw(e,e.dataType);var{lookup:r}=e;r&&kw(r,r.dataType);var n=r?r.dataType:e.dataType;n&&(e.alignment=e.alignment||function(t,e){switch(t){case"number":return"right";case"boolean":return"center";default:return(0,ti.q)(e)}}(n,this.option("rtlEnabled")),e.format=e.format||ye.getFormatByDataType(n),e.customizeText=e.customizeText||Mw(n),e.defaultFilterOperations=e.defaultFilterOperations||!r&&ft[n]||[],(0,v.$K)(e.filterOperations)||Ow(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,v.$K)(e.showEditorAlways)?e.showEditorAlways:"boolean"===n&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){var i=this,r=i.option("dateSerializationFormat"),n=i._getFirstItems(e),a=!1;return(0,U.S6)(i._columns,(s,o)=>{var d,u,c,f,g,{lookup:m}=o;if(ye.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=r),m&&ye.isDateType(m.dataType)&&void 0===o.serializationFormat&&(m.serializationFormat=r),o.calculateCellValue&&n.length){if(!o.dataType||m&&!m.dataType){for(d=0;d<n.length;d++)u=o.calculateCellValue(n[d]),o.dataType||(g=y0(u),(c=c||g)&&g&&c!==g&&(c="string")),m&&!m.dataType&&(g=y0(ye.getDisplayValue(o,u,n[d])),(f=f||g)&&g&&f!==g&&(f="string"));(c||f)&&(c&&(o.dataType=c),m&&f&&(m.dataType=f),a=!0)}if(void 0===o.serializationFormat||m&&void 0===m.serializationFormat)for(d=0;d<n.length;d++)u=o.calculateCellValue(n[d],!0),void 0===o.serializationFormat&&(o.serializationFormat=Bw(o.dataType,u)),m&&void 0===m.serializationFormat&&(m.serializationFormat=Bw(m.dataType,m.calculateCellValue(u,!0)))}i._updateColumnOptions(o,s)}),a}_customizeColumns(e){var i=this.option("customizeColumns");i&&(e.some(n=>(0,v.Kn)(n.ownerBand))&&sl(this),i(e),Kd(this,Wd(this,e)))}updateColumns(e,i,r){if(i||this.updateSortingGrouping(e),!e||e.isLoaded()){var n=e?e.sort()||[]:this.getSortDataSourceParameters(),a=e?e.group()||[]:this.getGroupDataSourceParameters(),s=e?.lastLoadOptions().filter;r||this._customizeColumns(this._columns),sl(this);var o=this._columns;return(0,Y.gx)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(e,{sorting:n,grouping:a,filtering:s}),oc(this))})}}_updateChanges(e,i){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),ye.equalSortParameters(i.sorting,this.getSortDataSourceParameters())||ya(this,"sorting"),ye.equalSortParameters(i.grouping,this.getGroupDataSourceParameters())||ya(this,"grouping");var r=this.getController("data");r&&!ye.equalFilterParameters(i.filtering,r.getCombinedFilter())&&ya(this,"filtering"),ya(this,"columns")}updateSortingGrouping(e,i){var n,a,r=this,s=function(g,m,y){(0,U.S6)(g,(w,I)=>{if(delete I[y],m)for(var P=0;P<m.length;P++){var{selector:$}=m[P],{isExpanded:se}=m[P];if($===I.dataField||$===I.name||$===I.selector||$===I.calculateCellValue||$===I.calculateGroupValue||$===I.calculateDisplayValue){I.sortOrder=i?"sortOrder"in I?I.sortOrder:m[P].desc?"desc":"asc":I.sortOrder||(m[P].desc?"desc":"asc"),void 0!==se&&(I.autoExpandGroup=se),I[y]=P;break}}})};if(e){n=ye.normalizeSortingInfo(e.sort());var o=ye.normalizeSortingInfo(e.group()),d=r.getGroupDataSourceParameters(),u=r.getSortDataSourceParameters(),c=!ye.equalSortParameters(o,d,!0),f=!c&&!ye.equalSortParameters(o,d);r._columns.length||((0,U.S6)(o,(g,m)=>{r._columns.push(m.selector)}),(0,U.S6)(n,(g,m)=>{(0,v.mf)(m.selector)||r._columns.push(m.selector)}),Kd(r,Wd(r,r._columns))),(i||!d&&!r._hasUserState)&&(c||f)&&(s(r._columns,o,"groupIndex"),i&&(c&&ya(r,"grouping"),f&&ya(r,"groupExpanding"),a=!0)),(i||!u&&!r._hasUserState)&&!ye.equalSortParameters(n,u)&&(s(r._columns,n,"sortIndex"),i&&(ya(r,"sorting"),a=!0)),a&&oc(r)}}updateFilter(e,i,r,n){if(!Array.isArray(e))return e;if(r=void 0!==(e=(0,O.l)([],e)).columnIndex?e.columnIndex:r,n=void 0!==e.filterValue?e.filterValue:n,(0,v.HD)(e[0])&&"!"!==e[0]){var a=this.columnOption(e[0]);i?(0,_.Z)().forceIsoDateParsing&&a&&a.serializeValue&&e.length>1&&(e[e.length-1]=a.serializeValue(e[e.length-1],"filter")):a&&a.selector&&(e[0]=a.selector,e[0].columnIndex=a.index)}else(0,v.mf)(e[0])&&(e[0].columnIndex=r,e[0].filterValue=n,e[0].selectedFilterOperation=e.selectedFilterOperation);for(var s=0;s<e.length;s++)e[s]=this.updateFilter(e[s],i,r,n);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,i,r,n){var a=this,s=a._columns.concat(a._commandColumns),o=Ww(s,e);if(o){if(1===arguments.length)return(0,O.l)({},o);if((0,v.HD)(i)){if(2===arguments.length)return S0(a,o,i);S0(a,o,i,r,n)}else(0,v.Kn)(i)&&(0,U.S6)(i,(d,u)=>{S0(a,o,d,u,n)});oc(a)}}clearSorting(){var e=this.columnCount();this.beginUpdate();for(var i=0;i<e;i++)this.columnOption(i,"sortOrder",void 0),delete Ww(this._columns,i).sortOrder;this.endUpdate()}clearGrouping(){var e=this.columnCount();this.beginUpdate();for(var i=0;i<e;i++)this.columnOption(i,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(e,i){for(var r=this.getVisibleColumns(i),n=r.length-1;n>=0;n--)if(r[n].index===e)return n;return-1}getVisibleIndexByColumn(e,i){var r=this.getVisibleColumns(i),n=r.filter(a=>a.index===e.index&&a.command===e.command)[0];return r.indexOf(n)}getVisibleColumnIndex(e,i){var r=this.columnOption(e,"index");return this.getVisibleIndex(r,i)}addColumn(e){var i=V_(this,e),r=this._columns.length;this._columns.push(i),i.isBand&&(this._columns=Wd(this,this._columns),i=this._columns[r]),i.added=e,sl(this,i),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(e){var i=this.columnOption(e);if(i&&i.index>=0){if((t=>{t.forEach(e=>{(0,v.$K)(e.ownerBand)&&(e.ownerBand=t[e.ownerBand])})})(this._columns),this._columns.splice(i.index,1),i.isBand){var r=this.getChildrenByBandColumn(i.index).map(n=>n.index);this._columns=this._columns.filter(n=>r.indexOf(n.index)<0)}sl(this),this.updateColumns(this._dataSource)}}addCommandColumn(e){var i=this._commandColumns.filter(r=>r.command===e.command)[0];i||this._commandColumns.push(i=e)}getUserState(){var r,e=this._columns,i=[];function n(a,s){void 0!==e[r][s]&&(i[r][s]=e[r][s])}for(r=0;r<e.length;r++)i[r]={},(0,U.S6)(H,n);return i}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){var i=this._dataSource,r=this.option("stateStoring.ignoreColumnOptionNames");if(e?.forEach(this.setName),!r){r=[];var n=this.getCommonSettings();this.option("columnChooser.enabled")||r.push("visible"),"none"===this.option("sorting.mode")&&r.push("sortIndex","sortOrder"),n.allowGrouping||r.push("groupIndex"),n.allowFixing||r.push("fixed","fixedPosition"),n.allowResizing||r.push("width","visibleWidth");var a=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&a&&r.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&a&&r.push("filterValues","filterType")}this._columnsUserState=e,this._ignoreColumnOptionNames=r,this._hasUserState=!!e,ya(this,"filtering"),this.init(!0),i&&(i.sort(this.getSortDataSourceParameters()),i.group(this.getGroupDataSourceParameters()))}_checkColumns(){var e={},i=!1,r=[];this._columns.forEach(n=>{var a,{name:s}=n,o=null===(a=n.columns)||void 0===a?void 0:a.length,d=n.allowEditing&&(n.dataField||n.setCellValue)&&!o;s?(e[s]&&r.push('"'.concat(s,'"')),e[s]=!0):d&&(i=!0)}),r.length&&Nt.Z.log("E1059",r.join(", ")),i&&Nt.Z.log("E1060")}_createCalculatedColumnOptions(e,i){var r={},{dataField:n}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(r.isBand=!0,n=null),n){if((0,v.HD)(n)){var a=(0,Pt.vb)(n);r={caption:(0,Cr.GK)(n),calculateCellValue(s,o){var d=a(s);return this.deserializeValue&&!o?this.deserializeValue(d):d},setCellValue:xR,parseValue(s){var o,d;return"number"===this.dataType?(0,v.HD)(s)&&this.format?o=function(t,e){var i=Kt.Z.parse(t);if((0,v.kE)(i)){var r=Kt.Z.format(i,e),n=Kt.Z.format(i,"decimal");if(r===t||n===t)return i}}(s.trim(),this.format):(0,v.$K)(s)&&(0,v.kE)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):ye.isDateType(this.dataType)?(d=ct.parse(s,this.format))&&(o=d):o=s,o}}}r.allowFiltering=!0}else r.allowFiltering=!!e.calculateFilterExpression;return r.calculateFilterExpression=function(){return is.defaultCalculateFilterExpression.apply(this,arguments)},r.defaultFilterOperation="=",r.createFilterExpression=function(s,o){var d;return this.calculateFilterExpression&&(d=this.calculateFilterExpression.apply(this,arguments)),(0,v.mf)(d)&&(d=[d,"=",!0]),d&&(d.columnIndex=this.index,d.filterValue=s,d.selectedFilterOperation=o),d},(!n||!(0,v.HD)(n))&&(0,O.l)(!0,r,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),i&&(r.allowFixing=!1),e.dataType&&(r.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in r)&&(r.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(r.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,Pt.vb)(this.valueExpr),o=(0,Pt.vb)(this.displayExpr),d=0;d<this.items.length;d++){var u=this.items[d],c=o(u);this.valueMap[s(u)]=c,this.dataType=this.dataType||y0(c)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,v.mf)(o)&&!_n.Z.isWrapped(o)&&(o=o({})),(0,v.PO)(o)||o instanceof S.Z||Array.isArray(o)){if(s.valueExpr){var d=(0,Td.aN)(o);return d.paginate=!1,(o=new Ys.o(d)).load().done(u=>{s.items=u,s.updateValueMap&&s.updateValueMap()})}}else Nt.Z.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),r.resizedCallbacks=(0,fi.Z)(),e.resized&&r.resizedCallbacks.add(e.resized.bind(e)),(0,U.S6)(r,s=>{if((0,v.mf)(r[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));r[o]=r[s]}}),r}getRowCount(){return this._rowCount=this._rowCount||function(t){var e=1,i=t.getBandColumnsCache(),{columnParentByIndex:r}=i;return t._columns.forEach(n=>{var a=al(n.index,r),s=a.filter(o=>!o.visible);n.visible&&!s.length&&(e=Math.max(e,a.length+1))}),e}(this),this._rowCount}getRowIndex(e,i){var r=this._columns[e],n=this.getBandColumnsCache();return r&&(i||r.visible&&!r.command&&!(0,v.$K)(r.groupIndex))?al(e,n.columnParentByIndex).length:0}getChildrenByBandColumn(e,i){var r=this.getBandColumnsCache(),n=dR(e,r.columnChildrenByIndex,!i);return i?n.filter(a=>a.visible&&!a.command).sort((a,s)=>a.visibleIndex-s.visibleIndex):n}isParentBandColumn(e,i){var r=!1,n=this._columns[e],a=this.getBandColumnsCache(),s=n&&al(e,a.columnParentByIndex);return s&&(0,U.S6)(s,(o,d)=>{if(d.index===i)return r=!0,!1}),r}isParentColumnVisible(e){var i=!0,r=this.getBandColumnsCache(),n=e>=0&&al(e,r.columnParentByIndex);return n&&(0,U.S6)(n,(a,s)=>i=i&&s.visible),i}getColumnId(e){return e.command&&e.type===Ee?E0(this,e)?"type:".concat(e.type):"command:".concat(e.command):e.index}getCustomizeTextByDataType(e){return Mw(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}};l.registerModule("columns",{defaultOptions:()=>(0,O.l)(!0,{},Kw.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:Kw.controllers});var Gw=k(5193),H_=k(6714),OR=k(2451),I0=k(469),Uw=function(t,e,i){var r=t._dataSource;if(r){if(void 0!==i){if(t._getPagingOptionValue(e)!==i){"pageSize"===e&&r.pageIndex(0),r[e](i),t._skipProcessingPagingChange=!0,t.option("paging.".concat(e),i),t._skipProcessingPagingChange=!1;var a=r.pageIndex();return t._isPaging="pageIndex"===e,r["pageIndex"===e?"load":"reload"]().done(()=>{t._isPaging=!1,t.pageChanged.fire(a)})}return(0,Y.BH)().resolve().promise()}return r[e]()}return 0},BR=zt.Controller.inherit(I0.Z),Yw={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:class kR extends BR{init(){var e=this;e._items=[],e._cachedProcessedItems=null,e._columnsController=this.getController("columns"),e._isPaging=!1,e._currentOperationTypes=null,e._dataChangedHandler=i=>{e._currentOperationTypes=this._dataSource.operationTypes(),e._handleDataChanged(i),e._currentOperationTypes=null},e._columnsChangedHandler=e._handleColumnsChanged.bind(e),e._loadingChangedHandler=e._handleLoadingChanged.bind(e),e._loadErrorHandler=e._handleLoadError.bind(e),e._customizeStoreLoadOptionsHandler=e._handleCustomizeStoreLoadOptions.bind(e),e._changingHandler=e._handleChanging.bind(e),e._dataPushedHandler=e._handleDataPushed.bind(e),e._columnsController.columnsChanged.add(e._columnsChangedHandler),e._isLoading=!1,e._isCustomLoading=!1,e._repaintChangesOnly=void 0,e._changes=[],e.createAction("onDataErrorOccurred"),e.dataErrorOccurred.add(i=>e.executeAction("onDataErrorOccurred",{error:i})),e._refreshDataSource()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","getCombinedFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey","getDataSource","getVisibleRows","repaintRows"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){var r=this.store();r&&(r._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){var r,n,i=this;function a(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))a();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":a();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":a(),i.reset();break;case"paging":if((r=i.dataSource())&&(n=i._setPagingOptions(r))){var s=r.pageIndex();this._isPaging=n.isPageIndexChanged,r.load().done(()=>{this._isPaging=!1,i.pageChanged.fire(s)})}a();break;case"rtlEnabled":i.reset();break;case"columns":(r=i.dataSource())&&r.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,r.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,i){if(!this._dataSource)return e;var r=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var a=this._calculateAdditionalFilter();r=a?ye.combineFilters([a,r]):r}var s=this._dataSource.remoteOperations().filtering||i;return this._columnsController.updateFilter(r,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new Y.BH,this._readyDeferred):(0,Y.gx)()}_endUpdateCore(){var e=this._changes;if(e.length){this._changes=[];var i=e.every(r=>r.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:i})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var i,r=this._columnsController,n=this._dataSource,{storeLoadOptions:a}=e;e.isCustomLoading&&!a.isLoadingAll||(a.filter=this.combinedFilter(a.filter),1===(null===(i=a.filter)||void 0===i?void 0:i.length)&&"!"===a.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),r.isDataSourceApplied()||r.updateColumnDataTypes(n),this._columnsUpdating=!0,r.updateSortingGrouping(n,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,a.sort=r.getSortDataSourceParameters(),a.group=r.getGroupDataSourceParameters(),n.sort(a.sort),n.group(a.group),a.sort=r.getSortDataSourceParameters(!n.remoteOperations().sorting),e.group=r.getGroupDataSourceParameters(!n.remoteOperations().grouping))}_handleColumnsChanged(e){var a,s,o,i=this,{changeTypes:r}=e,{optionNames:n}=e;if(r.sorting||r.grouping)i._dataSource&&!i._columnsUpdating&&(i._dataSource.group(i._columnsController.getGroupDataSourceParameters()),i._dataSource.sort(i._columnsController.getSortDataSourceParameters()),i.reload());else if(r.columns&&(s=i._columnsController.columnOption(e.columnIndex,"filterValues"),(n.filterValues||n.filterType&&Array.isArray(s)||n.filterValue||n.selectedFilterOperation||n.allowFiltering)&&(a=i._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,v.$K)(a)||!n.selectedFilterOperation||n.filterValue)&&(i._applyFilter(),o=!0)),!i._needApplyFilter&&!ye.checkChanges(n,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&i._columnsController.columnsChanged.add(function u(c){var f;i._columnsController.columnsChanged.remove(u),i.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(f=c?.changeTypes)||void 0===f?void 0:f.virtualColumnsScrolling})}),(0,v.$K)(n.visible))){var d=i._columnsController.columnOption(e.columnIndex);d&&((0,v.$K)(d.filterValue)||(0,v.$K)(d.filterValues))&&(i._applyFilter(),o=!0)}!o&&r.filtering&&i.reload()}_handleDataChanged(e){var i=this,r=i._dataSource,n=i._columnsController,a=!1;this._useSortingGroupingFromColumns=!1,r&&!i._isDataSourceApplying&&(i._isDataSourceApplying=!0,(0,Y.gx)(i._columnsController.applyDataSource(r)).done(()=>{i._isLoading&&i._handleLoadingChanged(!1),a&&e&&e.isDelayed&&(e.isDelayed=!1),i._isDataSourceApplying=!1;var o,s=i._needApplyFilter;i._needApplyFilter=!1,s&&!i._isAllDataTypesDefined&&(o=i._calculateAdditionalFilter())&&o.length?(Nt.Z.log("W1005",i.component.NAME),i._applyFilter()):i.updateItems(e,!0)}).fail(()=>{i._isDataSourceApplying=!1}),i._isDataSourceApplying&&(a=!0,i._handleLoadingChanged(!0)),i._needApplyFilter=!i._columnsController.isDataSourceApplied(),i._isAllDataTypesDefined=n.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];this.dataErrorOccurred.fire(Nt.Z.Error.apply(Nt.Z,i))}_setPagingOptions(e){var i=this.option("paging.pageIndex"),r=this.option("paging.pageSize"),n=this.option("paging.enabled"),a=this.option("scrolling.mode"),s="infinite"===a,d=n||"virtual"===a||s,u=!1,c=!1,f=!1;return e.requireTotalCount(!s),void 0!==n&&e.paginate()!==d&&(e.paginate(d),u=!0),void 0!==r&&e.pageSize()!==r&&(e.pageSize(r),c=!0),void 0!==i&&e.pageIndex()!==i&&(e.pageIndex(i),f=!0),!!(u||c||f)&&{isPaginateChanged:u,isPageSizeChanged:c,isPageIndexChanged:f}}_getSpecificDataSourceOption(){var e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){var e=this._dataSource;super._initDataSource();var i=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,i){var r=this._setPagingOptions(i);this._isPaging=r?.isPageIndexChanged,this.setDataSource(i)}else e&&this.updateItems()}_loadDataSource(){var e=this,i=e._dataSource,r=new Y.BH;return(0,Y.gx)(this._columnsController.refresh(!0)).always(()=>{i?i.load().done(function(){e._isPaging=!1,r.resolve.apply(r,arguments)}).fail(r.reject):r.resolve()}),r.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){var i=this._items,r="append"===e.changeType&&i.length>0?i[i.length-1]:null;return(0,v.$K)(r?.dataIndex)?r.dataIndex+1:0}_processItems(e,i){var r=this,n=r.getRowIndexDelta(),{changeType:a}=i,d={visibleColumns:r._columnsController.getVisibleColumns(null,"loadingAll"===a),dataIndex:this.getDataIndex(i)},u=[];return(0,U.S6)(e,(c,f)=>{(0,v.$K)(f)&&(d.rowIndex=c-n,f=r._processItem(f,d),u.push(f))}),u}_processItem(e,i){return e=this._generateDataItem(e,i),(e=this._processDataItem(e,i)).dataIndex=i.dataIndex++,e}_generateDataItem(e,i){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,i){return e.values=this.generateDataValues(e.data,i.visibleColumns),e}generateDataValues(e,i,r){for(var a,n=[],s=0;s<i.length;s++){var o=i[s];a=r?void 0:null,o.command||(o.calculateCellValue?a=o.calculateCellValue(e):o.dataField&&(a=e[o.dataField])),n.push(a)}return n}_applyChange(e){"update"===e.changeType?this._applyChangeUpdate(e):this.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?this._applyChangesOnly(e):"refresh"===e.changeType&&this._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){var i=e.rowIndices.slice(0),r=this.getRowIndexDelta();i.sort((s,o)=>s-o);for(var n=0;n<i.length;n++){var a=i[n];e.allowInvisibleRowIndices&&(a+=r),a<0&&(i.splice(n,1),n--)}return i}_applyChangeUpdate(e){var u,i=this,{items:r}=e,n=i._getRowIndices(e),a=i.getRowIndexDelta(),s=i.option("repaintChangesOnly"),o=-1,d=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];var c=function(f,g,m){var y=f&&g&&(0,ne.bY)(f.key,g.key);return y&&m&&(y=f.rowType===g.rowType&&("detail"!==g.rowType||f.isEditing===g.isEditing)),y};(0,U.S6)(n,(f,g)=>{var m;if(o!==(g+=d+a)){o=g;var y=i._items[g],w=i._items[g+1],I=r[g],P=r[g+1],$=c(y,w)||c(I,P);if(I&&(I.rowIndex=g,e.items.push(I)),y&&I&&c(y,I,$))u="update",i._items[g]=I,y.visible!==I.visible?e.items.splice(-1,1,{visible:I.visible}):s&&!e.isFullUpdate&&(m=i._partialUpdateRow(y,I,g-a));else if(I&&!y||P&&c(y,P,$))u="insert",i._items.splice(g,0,I),d++;else if(y&&!I||w&&c(I,w,$))u="remove",i._items.splice(g,1),d--,o=-1;else{if(!I)return;u="update",i._items[g]=I}e.rowIndices.push(g-a),e.changeTypes.push(u),e.columnIndices.push(m)}})}_isCellChanged(e,i,r,n,a){if(JSON.stringify(e.values[n])!==JSON.stringify(i.values[n]))return!0;function s(o,d){return!!o.modifiedValues&&void 0!==o.modifiedValues[d]}return s(e,n)!==s(i,n)}_getChangedColumnIndices(e,i,r,n){var a;if(e.rowType===i.rowType){if("group"!==i.rowType&&"groupFooter"!==i.rowType&&(a=[],"detail"!==i.rowType))for(var s=0;s<e.values.length;s++)this._isCellChanged(e,i,r,s,n)&&a.push(s);"group"===i.rowType&&i.isExpanded===e.isExpanded&&e.cells&&(a=e.cells.map((o,d)=>{var u;return"groupExpand"!==(null===(u=o.column)||void 0===u?void 0:u.type)?d:-1}).filter(o=>o>=0))}return a}_partialUpdateRow(e,i,r,n){var a=this._getChangedColumnIndices(e,i,r,n);return a?.length&&this.option("dataRowTemplate")&&(a=void 0),a&&(e.cells&&e.cells.forEach((s,o)=>{!(a.indexOf(o)>=0)&&s&&s.update&&s.update(i)}),i.update=e.update,i.watch=e.watch,i.cells=e.cells,n&&(i.oldValues=e.values),e.update&&e.update(i)),a}_isItemEquals(e,i){var r,n,a,s;if(JSON.stringify(e.values)!==JSON.stringify(i.values)||["modified","isNewRow","removed","isEditing"].some(c=>e[c]!==i[c]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var o=e.isExpanded===i.isExpanded,d=JSON.stringify(e.summaryCells)===JSON.stringify(i.summaryCells),u=(null===(r=e.data)||void 0===r?void 0:r.isContinuation)===(null===(n=i.data)||void 0===n?void 0:n.isContinuation)&&(null===(a=e.data)||void 0===a?void 0:a.isContinuationOnNextPage)===(null===(s=i.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!d||!u)return!1}return!0}_applyChangesOnly(e){var i,r=[],n=[],a=[],s=[],o={},d=null===(i=e?.isLiveUpdate)||void 0===i||i;function u(m){if(m)return"".concat(m.rowType,",").concat(JSON.stringify(m.key))}var c=this._items,f=c.slice();e.items.forEach((m,y)=>{var w=u(m);o[w]=y,m.rowIndex=y});var g=(0,Gw.h)(f,e.items,u,(m,y)=>!!this._isItemEquals(m,y)&&(m.cells&&(m.update&&m.update(y),m.cells.forEach(w=>{w&&w.update&&w.update(y,!0)})),!0));g?(g.forEach(m=>{switch(m.type){case"update":var{index:y}=m,w=m.data,{oldItem:I}=m,P=this._partialUpdateRow(I,w,y,d);r.push(y),a.push("update"),s.push(w),c[y]=w,n.push(P);break;case"insert":r.push(m.index),a.push("insert"),s.push(m.data),n.push(void 0),c.splice(m.index,0,m.data);break;case"remove":r.push(m.index),a.push("remove"),c.splice(m.index,1),s.push(m.oldItem),n.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=r,e.columnIndices=n,e.changeTypes=a,e.items=s,f.length&&(e.isLiveUpdate=!0),this._correctRowIndices(m=>{var y=this._rowIndexOffset||0,w=this.getRowIndexOffset(),P=u(f[m-y]),$=o[P];return $>=0?$+w-m:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,i){return e}_updateItemsCore(e){var i,r=this._dataSource;if(e.changeType=e.changeType||"refresh",r){var a=this._cachedProcessedItems;e.useProcessedItemsCache&&a?i=a:(i=e.items||r.items(),i=this._beforeProcessItems(i),i=this._processItems(i,e),this._cachedProcessedItems=i),i=this._afterProcessItems(i,e),e.items=i;var s=this._items.length===i.length&&this._items;this._applyChange(e);var o=this.getRowIndexDelta();(0,U.S6)(this._items,(d,u)=>{var c;u.rowIndex=d-o,s&&(u.cells=null!==(c=s[d].cells)&&void 0!==c?c:[]);var f=i[d];f&&(u.loadIndex=f.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){var i=this.getVisibleRows();this.dataSource()&&e.changes.forEach(n=>{if("insert"===n.type&&n.index>=0){for(var a=0,s=0;s<n.index;s++){var o=i[s];o&&("data"===o.rowType||"group"===o.rowType)&&a++}n.index=a}})}updateItems(e,i){var r;if(e=e||{},void 0!==this._repaintChangesOnly)e.repaintChangesOnly=null!==(r=e.repaintChangesOnly)&&void 0!==r?r:this._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||this._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=this.option("repaintChangesOnly");else if(i){var n=this.dataSource().operationTypes();e.repaintChangesOnly=n&&!n.grouping&&!n.filtering&&this.option("repaintChangesOnly"),e.isDataChanged=!0,n&&(n.reload||n.paging||n.groupExpanding)&&(e.needUpdateDimensions=!0)}!this._updateLockCount||e.cancel?(this._updateItemsCore(e),!e.cancel&&this._fireChanged(e)):this._changes.push(e)}loadingOperationTypes(){var e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,ne.g0)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var e=this._dataSource;if(e)return e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var i=this._dataSource,r=i&&i.filter();if(0===arguments.length)return r;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!ye.equalFilterParameters(r,e)&&(i&&i.filter(e),this._applyFilter())}clearFilter(e){var i=this._columnsController,r=function(n){for(var a=i.columnCount(),s=0;s<a;s++)i.columnOption(s,n,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":r("filterValues");break;case"row":r("filterValue")}else this.filter(null),this.searchByText(""),r("filterValue"),r("bufferedFilterValue"),r("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var e=this;e.changed.add(function i(){e.changed.remove(i),e.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,i){var n=this._getDataSourceAdapter().create(this.component);return n.init(e,i),n}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof H_.Z}isCustomStore(e){return(e=e||this.store())instanceof OR.Z}_createDataSourceAdapter(e){var i=this.option("remoteOperations"),r=e.store(),n={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,v.Kn)(i)&&i.groupPaging&&(i=(0,O.l)({},n,i)),"auto"===i&&(i=this.isLocalStore(r)||this.isCustomStore(r)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===i&&(i=n),this._createDataSourceAdapterCore(e,i)}setDataSource(e){var i=this._dataSource;!e&&i&&(i.cancelAll(),i.changed.remove(this._dataChangedHandler),i.loadingChanged.remove(this._loadingChangedHandler),i.loadError.remove(this._loadErrorHandler),i.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),i.changing.remove(this._changingHandler),i.pushed.remove(this._dataPushedHandler),i.dispose(this._isSharedDataSource)),e&&(e=this._createDataSourceAdapter(e)),this._dataSource=e,e&&(this._fireDataSourceChanged(),this._isLoading=!e.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),e.changed.add(this._dataChangedHandler),e.loadingChanged.add(this._loadingChangedHandler),e.loadError.add(this._loadErrorHandler),e.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),e.changing.add(this._changingHandler),e.pushed.add(this._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var e=this._dataSource;return e&&e.store()}loadAll(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,n=new Y.BH,a=r._dataSource;if(a)if(e){var s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:i?null:r.getCombinedFilter(),group:a.group(),sort:a.sort()}};a._handleDataLoaded(s),(0,Y.gx)(s.data).done(d=>{var u;d=r._beforeProcessItems(d),n.resolve(r._processItems(d,{changeType:"loadingAll"}),null===(u=s.extra)||void 0===u?void 0:u.summary)}).fail(n.reject)}else if(a.isLoading())n.reject();else{var o=(0,O.l)({},a.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});a.load(o).done((d,u)=>{d=r._beforeProcessItems(d),d=r._processItems(d,{changeType:"loadingAll"}),n.resolve(d,u&&u.summary)}).fail(n.reject)}else n.resolve([]);return n}getKeyByRowIndex(e,i){var r=this.items(i)[e];if(r)return r.key}getRowIndexByKey(e,i){return ye.getIndexByKey(e,this.items(i))}keyOf(e){var i=this.store();if(i)return i.keyOf(e)}byKey(e){var n,i=this.store(),r=this.getRowIndexByKey(e);if(i)return r>=0&&(n=(new Y.BH).resolve(this.items()[r].data)),n||i.byKey(e)}key(){var e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){var i=this,r=new Y.BH,n=[],a=[];return(0,U.S6)(e,(s,o)=>{n.push(i.byKey(o).done(d=>{a[s]=d}))}),Y.gx.apply(C.Z,n).always(()=>{r.resolve(a)}),r}pageIndex(e){return Uw(this,"pageIndex",e)}pageSize(e){return Uw(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});var i=this,r=i.getDataSource(),{changesOnly:n}=e,a=new Y.BH,s=function(){i._repaintChangesOnly=!!n};return(0,Y.gx)(!e.lookup||i._columnsController.refresh()).always(()=>{e.load||e.reload?(r&&r.on("customizeLoadResult",s),(0,Y.gx)(i.reload(e.reload,n)).always(()=>{r&&r.off("customizeLoadResult",s),i._repaintChangesOnly=void 0}).done(a.resolve).fail(a.reject)):(i.updateItems({repaintChangesOnly:e.changesOnly}),a.resolve())}),a.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,i){((e=Array.isArray(e)?e:[e]).length>1||(0,v.$K)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!i})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,i){var r;return null===(r=this._dataSource)||void 0===r?void 0:r.reload(e,i)}push(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.push(...arguments)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}}}},zr=k(3706),T0=zt.Controller.inherit(function(){function t(o,d){if(o&&(o=o.slice(0),d))for(var u=0;u<o.length;u++)o[u]=(0,O.l)({key:o[u].key},o[u]),o[u].items=t(o[u].items,d-1);return o}function e(o,d,u){var c={reload:!0,fullReload:!0};return d&&((c={sorting:!ye.equalSortParameters(o.sort,d.sort),grouping:!ye.equalSortParameters(o.group,d.group,!0),groupExpanding:!ye.equalSortParameters(o.group,d.group)||d.groupExpand,filtering:!ye.equalFilterParameters(o.filter,d.filter),pageIndex:o.pageIndex!==d.pageIndex,skip:o.skip!==d.skip,take:o.take!==d.take,pageSize:o.pageSize!==d.pageSize,fullReload:u,reload:!1,paging:!1}).reload=u||c.sorting||c.grouping||c.filtering,c.paging=c.pageIndex||c.pageSize||c.take),c}function i(o,d){var u=ye.normalizeSortingInfo(o.group||o.storeLoadOptions.group||o.loadOptions.group).length,c=[];if(r(c,o,u))return c;d&&function(f,g,m){var y,w,I=f.length,{storeLoadOptions:P}=g;if(void 0!==P.skip&&P.take&&!m){var $=[];r($,g,m,!0);var se=$.length;(I||se)&&(g.skip=null!==(y=g.skip)&&void 0!==y?y:P.skip,g.take=null!==(w=g.take)&&void 0!==w?w:P.take),I&&(P.skip+=I,P.take-=I,g.cachedDataPartBegin=f),se&&(P.take-=se,g.cachedDataPartEnd=$.reverse())}}(c,o,u)}function r(o,d,u,c){var f,g,m,y,w,{storeLoadOptions:I}=d,P=null!==(g=null!==(f=d.take)&&void 0!==f?f:I.take)&&void 0!==g?g:0,$=null===(m=d.cachedData)||void 0===m?void 0:m.items;if(P&&$){for(var se=null!==(w=null!==(y=d.skip)&&void 0!==y?y:I.skip)&&void 0!==w?w:0,fe=0;fe<P;fe++){var Se=c?P-1-fe:fe,Fe=Se+se,$e=$[Fe];if(void 0===$e&&Fe in $)return!0;var We=n(d,$e,u,Se,P);if(!We)return!1;o.push(We)}return!0}return!1}function n(o,d,u,c,f){return u&&d?function y(w,I,P,$){if(I&&w){var se=(0,je.Z)({},w),fe=P[0]||0,Se=$[0],{items:Fe}=w;if(Fe){if(void 0===Se&&!Fe[fe])return;se.items=[],P.length&&(se.isContinuation=!0),Se&&(se.isContinuationOnNextPage=w.count>Se);for(var $e=0;void 0===Se?Fe[$e+fe]:$e<Se;$e++){var Ze=$e+1===Se,nt=y(Fe[$e+fe],I-1,0===$e?P.slice(1):[],Ze?$.slice(1):[]);if(void 0===nt)return;se.items.push(nt)}}return se}return w}(d,u,0===c&&o.skips||[],c===f-1&&o.takes||[]):d}function a(o,d,u,c){if(u&&d){var f=(0,je.Z)({},d);delete f.isContinuation,delete f.isContinuationOnNextPage;var g=c[0]||0;return d.items&&(f.items=o?.items||{},d.items.forEach((m,y)=>{var w=y+g,I=0===y?c.slice(1):[];f.items[w]=a(f.items[w],m,u-1,I)})),f}return d}var s={init(o,d){var u=this;u._dataSource=o,u._remoteOperations=d||{},u._isLastPage=!o.isLastPage(),u._hasLastPage=!1,u._currentTotalCount=0,u._cachedData={items:{}},u._lastOperationTypes={},u._eventsStrategy=o._eventsStrategy,u._totalCountCorrection=0,u._isLoadingAll=!1,u.changed=(0,fi.Z)(),u.loadingChanged=(0,fi.Z)(),u.loadError=(0,fi.Z)(),u.customizeStoreLoadOptions=(0,fi.Z)(),u.changing=(0,fi.Z)(),u.pushed=(0,fi.Z)(),u._dataChangedHandler=u._handleDataChanged.bind(u),u._customizeStoreLoadOptionsHandler=u._handleCustomizeStoreLoadOptions.bind(u),u._dataLoadedHandler=u._handleDataLoaded.bind(u),u._loadingChangedHandler=u._handleLoadingChanged.bind(u),u._loadErrorHandler=u._handleLoadError.bind(u),u._pushHandler=u._handlePush.bind(u),u._changingHandler=u._handleChanging.bind(u),o.on("changed",u._dataChangedHandler),o.on("customizeStoreLoadOptions",u._customizeStoreLoadOptionsHandler),o.on("customizeLoadResult",u._dataLoadedHandler),o.on("loadingChanged",u._loadingChangedHandler),o.on("loadError",u._loadErrorHandler),o.on("changing",u._changingHandler),o.store().on("beforePush",u._pushHandler),(0,U.S6)(o,(c,f)=>{!u[c]&&(0,v.mf)(f)&&(u[c]=function(){return this._dataSource[c].apply(this._dataSource,arguments)})})},remoteOperations(){return this._remoteOperations},dispose(o){var d=this._dataSource,u=d.store();d.off("changed",this._dataChangedHandler),d.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),d.off("customizeLoadResult",this._dataLoadedHandler),d.off("loadingChanged",this._loadingChangedHandler),d.off("loadError",this._loadErrorHandler),d.off("changing",this._changingHandler),u&&u.off("beforePush",this._pushHandler),o||d.dispose()},refresh(o,d){var u=this._dataSource;d.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!u.paginate(),this._hasLastPage=this._isLastPage)},resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0},resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0},resetPagesCache(){this._cachedData={items:{}}},_needClearStoreDataCache(){var o=this.remoteOperations(),d=e(this._lastLoadOptions||{},{});return!Object.keys(o).every(c=>!d[c]||!o[c])},push(o,d){var u=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,zr.ii)({keyInfo:u,data:this._cachedStoreData,changes:o}),d||this._applyBatch(o),this.pushed.fire(o)},getDataIndexGetter(){if(!this._dataIndexGetter){var o,d,u=this.store();this._dataIndexGetter=c=>{if(!o||d&&d!==this._cachedStoreData){d=this._cachedStoreData||[],o={};for(var g=0;g<d.length;g++)o[(0,ne.k3)(u.keyOf(d[g]))]=g}return o[(0,ne.k3)(u.keyOf(c))]}}return this._dataIndexGetter},_getKeyInfo(){return this.store()},_needToCopyDataObject:()=>!0,_applyBatch(o,d){var u=this._getKeyInfo(),c=this._dataSource,f=ye.normalizeSortingInfo(this.group()).length,g="reshape"===this.option("editing.refreshMode"),m="virtual"===this.option("scrolling.mode");o=o.filter(P=>!c.paginate()||"insert"!==P.type||void 0!==P.index);var y=()=>f?this.itemsCount():this.items().length,w=y();(0,zr.ii)({keyInfo:u,data:this._items,changes:o,groupCount:f,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,zr.ii)({keyInfo:u,data:c.items(),changes:o,groupCount:f,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(d||!g)&&m)&&(this._totalCountCorrection+=y()-w),o.splice(0,o.length)},_handlePush(o){var{changes:d}=o;this.push(d,!0)},_handleChanging(o){this.changing.fire(o),this._applyBatch(o.changes,!0)},_needCleanCacheByOperation(o,d){var u=["filtering","sorting","paging"],c=u.indexOf(o);return(c>=0?u.slice(c):[o]).some(g=>d[g])},_customizeRemoteOperations(o,d){var u=this._cachedStoreData,c=this._cachedPagingData,f=this._cachedData;(o.storeLoadOptions.filter&&!o.remoteOperations.filtering||o.storeLoadOptions.sort&&!o.remoteOperations.sorting)&&(o.remoteOperations={filtering:o.remoteOperations.filtering,summary:o.remoteOperations.summary}),d.fullReload?(u=void 0,c=void 0,f={items:{}}):(d.reload?(c=void 0,f={items:{}}):d.groupExpanding&&(f={items:{}}),(0,U.S6)(d,(g,m)=>{m&&this._needCleanCacheByOperation(g,o.remoteOperations)&&(u=void 0,c=void 0)})),c&&(o.remoteOperations.paging=!1),o.cachedStoreData=u,o.cachedPagingData=c,o.cachedData=f,o.isCustomLoading||(this._cachedStoreData=u,this._cachedPagingData=c,this._cachedData=f)},_handleCustomizeStoreLoadOptions(o){var d;this._handleDataLoading(o),0!==(null===(d=o.data)||void 0===d?void 0:d.length)&&(o.data=i(o,!0)||o.cachedStoreData)},_handleDataLoading(o){var d=this._dataSource,u=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(o),o.delay=this.option("loadingTimeout"),o.originalStoreLoadOptions=o.storeLoadOptions,o.remoteOperations=(0,O.l)({},this.remoteOperations());var c=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(o.delay=void 0);var f=(0,O.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},o.storeLoadOptions),g=e(f,u,c);if(this._customizeRemoteOperations(o,g),!o.isCustomLoading){var m=this._isRefreshing;o.pageIndex=d.pageIndex(),o.lastLoadOptions=f,o.operationTypes=g,this._loadingOperationTypes=g,this._isRefreshing=!0,(0,Y.gx)(m||this._isRefreshed||this.refresh(o,g)).done(()=>{this._lastOperationId===o.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{d.cancel(o.operationId)}).always(()=>{this._isRefreshing=!1}),d.cancel(this._lastOperationId),this._lastOperationId=o.operationId,this._isRefreshing&&d.cancel(this._lastOperationId)}this._handleDataLoadingCore(o)},_handleDataLoadingCore(o){var{remoteOperations:d}=o;o.loadOptions={};var u=o.cachedData.extra,c={filter:!d.filtering,sort:!d.sorting,group:!d.grouping,summary:!d.summary,skip:!d.paging,take:!d.paging,requireTotalCount:u&&"totalCount"in u||!d.paging};(0,U.S6)(o.storeLoadOptions,(f,g)=>{c[f]&&(o.loadOptions[f]=g,delete o.storeLoadOptions[f])}),u&&(o.extra=u)},_handleDataLoaded(o){var d,u,{loadOptions:c}=o,f=o.remoteOperations&&!o.remoteOperations.paging,{cachedData:g}=o,{storeLoadOptions:m}=o,y=!1!==this.option("cacheEnabled")&&m,w=y&&!o.isCustomLoading&&g&&(!f||m.group),I=y&&f,P=I&&!o.isCustomLoading;if(c){f&&(o.skip=c.skip,o.take=c.take,delete c.skip,delete c.take),c.group&&(c.group=o.group||c.group);var $=ye.normalizeSortingInfo(o.group||m.group||c.group).length;o.cachedDataPartBegin&&(o.data=o.cachedDataPartBegin.concat(o.data)),o.cachedDataPartEnd&&(o.data=o.data.concat(o.cachedDataPartEnd)),(!w||!i(o))&&(I&&o.cachedPagingData?o.data=t(o.cachedPagingData,$):(P&&(this._cachedStoreData?o.mergeStoreLoadData&&(o.data=this._cachedStoreData=this._cachedStoreData.concat(o.data)):this._cachedStoreData=t(o.data,ye.normalizeSortingInfo(m.group).length)),new H_.Z(o.data).load(c).done(se=>{o.data=se,P&&(this._cachedPagingData=t(o.data,$))}).fail(se=>{o.data=(new Y.BH).reject(se)})),c.requireTotalCount&&f&&(o.extra=(0,v.PO)(o.extra)?o.extra:{},o.extra.totalCount=o.data.length),o.extra&&o.extra.totalCount>=0&&(!1===m.requireTotalCount||!1===c.requireTotalCount)&&(o.extra.totalCount=-1),!c.data&&(m.requireTotalCount||(null!==(u=null===(d=o.extra)||void 0===d?void 0:d.totalCount)&&void 0!==u?u:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(o),w&&(g.extra=g.extra||(0,O.l)({},o.extra),(0,Y.gx)(o.data).done(se=>{!function(fe,Se,Fe){for(var $e,We,Ze,nt,{storeLoadOptions:mt}=fe,jt=null!==(We=null!==($e=fe.skip)&&void 0!==$e?$e:mt.skip)&&void 0!==We?We:0,$t=null!==(nt=null!==(Ze=fe.take)&&void 0!==Ze?Ze:mt.take)&&void 0!==nt?nt:0,mi=0;mi<$t;mi++){var Oe=mi+jt,rt=fe.cachedData.items;rt[Oe]=a(rt[Oe],Se[mi],Fe,0===mi&&fe.skips||[])}}(o,se,$)}))),(0,Y.gx)(o.data).done(()=>{o.lastLoadOptions&&(this._lastLoadOptions=o.lastLoadOptions,Object.keys(o.operationTypes).forEach(se=>{this._lastOperationTypes[se]=this._lastOperationTypes[se]||o.operationTypes[se]}))}),o.storeLoadOptions=o.originalStoreLoadOptions}else this._dataSource.cancel(o.operationId)},_handleDataLoadedCore(o){o.remoteOperations&&!o.remoteOperations.paging&&Array.isArray(o.data)&&(void 0!==o.skip&&(o.data=o.data.slice(o.skip)),void 0!==o.take&&(o.data=o.data.slice(0,o.take)))},_handleLoadingChanged(o){this.loadingChanged.fire(o)},_handleLoadError(o){this.loadError.fire(o),this.changed.fire({changeType:"loadError",error:o})},_loadPageSize(){return this.pageSize()},_handleDataChanged(o){var d,u=this._dataSource,c=!1,f=!o||(0,v.$K)(o.changeType),g=this.itemsCount();f&&(this._isLastPage=!g||!this._loadPageSize()||g<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),u.totalCount()>=0?u.pageIndex()>=this.pageCount()&&(u.pageIndex(this.pageCount()-1),this.pageIndex(u.pageIndex()),this.resetPagesCache(),u.load(),c=!0):f&&((d=u.pageIndex()*this.pageSize()+g)>this._currentTotalCount&&(this._currentTotalCount=d,(0===u.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===g&&u.pageIndex()>=this.pageCount()&&(u.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(u.load(),c=!0))),c||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(o),this.component._optionCache=void 0)},_scheduleCustomLoadCallbacks(o){var d=this;d._isCustomLoading=!0,o.always(()=>{d._isCustomLoading=!1})},loadingOperationTypes(){return this._loadingOperationTypes},operationTypes(){return this._operationTypes},lastLoadOptions(){return this._lastLoadOptions||{}},isLastPage(){return this._isLastPage},_dataSourceTotalCount(){return this._dataSource.totalCount()},totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)},totalCountCorrection(){return this._totalCountCorrection},itemsCount(){return this._dataSource.items().length},totalItemsCount(){return this.totalCount()},pageSize(){var o=this._dataSource;return arguments.length||o.paginate()?o.pageSize.apply(o,arguments):0},pageCount(){var o=this.totalItemsCount()-this._totalCountCorrection,d=this.pageSize();return d&&o>0?Math.max(1,Math.ceil(o/d)):1},hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0},loadFromStore(o,d){var u=this._dataSource,c=new Y.BH;if(u)return(d=d||u.store()).load(o).done((f,g)=>{f&&!Array.isArray(f)&&Array.isArray(f.data)&&(g=f,f=f.data),c.resolve(f,g)}).fail(c.reject),c},isCustomLoading(){return!!this._isCustomLoading},load(o){var y,w,d=this,u=d._dataSource,c=new Y.BH;if(o){var f=u.store(),g=u.loadOptions(),m={storeLoadOptions:o,isCustomLoading:!0};return(0,U.S6)(f._customLoadOptions()||[],(y,w)=>{w in m.storeLoadOptions||(m.storeLoadOptions[w]=g[w])}),this._isLoadingAll=o.isLoadingAll,d._scheduleCustomLoadCallbacks(c),u._scheduleLoadCallbacks(c),d._handleCustomizeStoreLoadOptions(m),y=()=>{if(!u.store())return c.reject("canceled");(0,Y.gx)(m.data||d.loadFromStore(m.storeLoadOptions)).done((y,w)=>{m.data=y,m.extra=w||{},d._handleDataLoaded(m),o.requireTotalCount&&void 0===m.extra.totalCount&&(m.extra.totalCount=f.totalCount(m.storeLoadOptions)),(0,Y.gx)(m.data,m.extra.totalCount).done((I,P)=>{m.extra.totalCount=P,c.resolve(I,m.extra)}).fail(c.reject)}).fail(c.reject)},w=d.option("loadingTimeout"),(0,v.$K)(w)?(0,ne.Wi)(y,w):y(),c.fail(function(){d._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return u.load()},reload(o){return o?this._dataSource.reload():this._dataSource.load()},getCachedStoreData(){return this._cachedStoreData}};return s}());const lc={extend(t){T0=T0.inherit(t)},create:t=>new T0(t)};var D0,A0,MR=null===(A0=null===(D0=Yw.controllers)||void 0===D0?void 0:D0.data)||void 0===A0?void 0:A0.inherit({_getDataSourceAdapter:()=>lc,_getSpecificDataSourceOption(){var t=this.option("dataSource");return t&&!Array.isArray(t)&&this.option("keyExpr")&&Nt.Z.log("W1011"),this.callBase()}});l.registerModule("data",{defaultOptions:Yw.defaultOptions,controllers:{data:MR}});var qw="dx-sort",jw="dx-sort-none",Xw="dx-sort-index-icon";const Qw={_applyColumnState(t){var e,i,r=this.option("sorting.mode"),{rootElement:n}=t,{column:a}=t,s=this._getIndicatorContainer(n);if("sort"===t.name){n.find(".".concat(qw)).remove(),!s.children().length&&s.remove();var o="none"!==r&&a.allowSorting;return(0,v.$K)(a.groupIndex)||!o&&!(0,v.$K)(a.sortOrder)||(e="asc"===a.sortOrder?"ascending":"descending",i=this.callBase(t).toggleClass("dx-sort-up","asc"===a.sortOrder).toggleClass("dx-sort-down","desc"===a.sortOrder),this.getController&&!!this.getController("columns").columnOption("sortIndex:1")&&this.option("sorting.showSortIndexes")&&a.sortIndex>=0&&((0,C.Z)("<span>").addClass(Xw).text(a.sortIndex+1).appendTo(i),i.addClass("dx-sort-index")),o&&t.rootElement.addClass(this.addWidgetPrefix("action"))),(0,v.$K)(a.sortOrder)?this.setAria("sort",e,n):this.setAria("sort","none",n),i}return this.callBase(t)},_getIndicatorClassName(t){return"sort"===t?qw:"sortIndex"===t?Xw:this.callBase(t)},_renderIndicator(t){var{column:e}=t,i=t.container,r=t.indicator;if("sort"===t.name){var n=this.option("rtlEnabled");if((0,v.$K)(e.sortOrder)||r&&r.addClass(jw),i.children().length&&(!n&&"left"===t.columnAlignment||n&&"right"===t.columnAlignment))return void i.prepend(r)}this.callBase(t)},_updateIndicator(t,e,i){if("sort"!==i||!(0,v.$K)(e.groupIndex))return this.callBase.apply(this,arguments)},_getIndicatorElements(t,e){var i=this.callBase(t);return e?i:i&&i.not(".".concat(jw))}};var zR=(0,O.l)({},Qw,{_createRow(t){var e=this.callBase(t);return"header"===t.rowType&&Z.Z.on(e,(0,be.V4)(ii.u,"dxDataGridColumnHeadersView"),"td",this.createAction(i=>{this._processHeaderAction(i.event,e)})),e},_processHeaderAction(t,e){if((0,C.Z)(t.currentTarget).parent().get(0)===e.get(0)){var i=this,r=null,n=(0,C.Z)(t.currentTarget),a=n.parent().index(),s=-1;[].slice.call(i.getCellElements(a)).some((g,m)=>{if(g===n.get(0))return s=m,!0});var d=i._columnsController.getVisibleColumns(a)[s],u=i.getController("editing"),c=i.option("editing.mode");u&&u.isEditing()&&("batch"===c||"cell"===c)||!i._isSortableElement((0,C.Z)(t.target))||d&&!(0,v.$K)(d.groupIndex)&&!d.command&&(t.shiftKey?r="shift":(0,be.j1)(t)&&(r="ctrl"),setTimeout(()=>{i._columnsController.changeSortOrder(d.index,r)}))}},_renderCellContent(t,e){var{column:i}=e;!i.command&&"header"===e.rowType&&this._applyColumnState({name:"sort",rootElement:t,column:i,showColumnLines:this.option("showColumnLines")}),this.callBase.apply(this,arguments)},_columnOptionChanged(t){var{changeTypes:e}=t;1===e.length&&e.sorting?this._updateIndicators("sort"):this.callBase(t)},optionChanged(t){"sorting"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}}),HR=(0,O.l)({},Qw,{_createGroupPanelItem(t,e){var i=this,r=i.callBase(...arguments);return Z.Z.on(r,(0,be.V4)(ii.u,"dxDataGridHeaderPanel"),i.createAction(()=>{i._processGroupItemAction(e.index)})),i._applyColumnState({name:"sort",rootElement:r,column:{alignment:i.option("rtlEnabled")?"right":"left",allowSorting:e.allowSorting,sortOrder:"desc"===e.sortOrder?"desc":"asc"},showColumnLines:!0}),r},_processGroupItemAction(t){setTimeout(()=>this.getController("columns").changeSortOrder(t))},optionChanged(t){"sorting"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}});l.registerModule("sorting",{defaultOptions:()=>({sorting:{mode:"single",ascendingText:le.Z.format("dxDataGrid-sortingAscendingText"),descendingText:le.Z.format("dxDataGrid-sortingDescendingText"),clearText:le.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:zR,headerPanel:HR}}});var rs=k(2070),R0="dx-group-row",Jw="dx-group-cell",Z_="dx-freespace-row",ex="dx-column-lines",tx="dx-row-alt",ix="dx-last-row-border";function rx(t){return t?Math.round(t.scrollWidth()-t.clientWidth()):0}function nx(t){var{rowType:e,column:i}=t;return"group"===e&&(0,v.$K)(i.groupIndex)&&!i.showWhenGrouped&&!i.command}var XR=function(t,e){var i=(0,tn.xb)(e.text)&&"data"===e.rowType,{text:r}=e,n=t.get(0);i?ye.setEmptyText(t):e.column.encodeHtml?n.textContent=r:n.innerHTML=r},ax={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:le.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:le.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class JR extends nl{_getDefaultTemplate(e){return"empty"===e.command?function(i){i.html("&nbsp;")}:XR}_getDefaultGroupTemplate(e){var i=this.option("summary.texts");return function(r,n){var{data:a}=n,s="".concat(n.column.caption,": ").concat(n.text),o=r.get(0);n.summaryItems&&n.summaryItems.length&&(s+=" ".concat(ye.getGroupRowSummaryText(n.summaryItems,i))),a&&(n.groupContinuedMessage&&n.groupContinuesMessage?s+=" (".concat(n.groupContinuedMessage,". ").concat(n.groupContinuesMessage,")"):n.groupContinuesMessage?s+=" (".concat(n.groupContinuesMessage,")"):n.groupContinuedMessage&&(s+=" (".concat(n.groupContinuedMessage,")"))),e.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(e){}_updateCell(e,i){nx(i)&&e.addClass(Jw),super._updateCell.apply(this,arguments)}_getCellTemplate(e){var{column:i}=e;return nx(e)?i.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(i)}:("data"===e.rowType||i.command)&&i.cellTemplate?i.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(i)}}_createRow(e,i){var r=super._createRow.apply(this,arguments);if(e){var n="group"===e.rowType,a="data"===e.rowType;if(a&&r.addClass("dx-data-row"),a&&this.option("showRowLines")&&r.addClass("dx-row-lines"),this.option("showColumnLines")&&r.addClass(ex),!1===e.visible&&r.hide(),n){r.addClass(R0);var s=e.isExpanded;this.setAria("role","row",r),this.setAria("expanded",(0,v.$K)(s)&&s.toString(),r)}}return r}_rowPrepared(e,i,r){"data"===i.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(r)&&e.addClass(tx),i.watch&&i.watch(()=>this._isAltRow(r),n=>{e.toggleClass(tx,n)})),this._setAriaRowIndex(i,e),i.watch&&i.watch(()=>i.rowIndex,()=>this._setAriaRowIndex(i,e))),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,i){var{component:r}=this,n="standard"===r.option("scrolling.mode")&&!ye.isVirtualRowRendering(r),a=e.rowIndex+1;n?a=r.pageIndex()*r.pageSize()+a:a+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",a,i)}_afterRowPrepared(e){var i=e.args[0],r=this._dataController,n=r.getVisibleRows()[i.rowIndex],a=this.option("integrationOptions.watchMethod");if(i.data&&"data"===i.rowType&&!i.isNewRow&&this.option("twoWayBindingEnabled")&&a&&n){var s=a(()=>r.generateDataValues(i.data,i.columns),()=>{r.repaintRows([n.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});Z.Z.on(i.rowElement,Uo.x,s)}}_renderScrollable(e){var i=this.element();if(i.children().length||i.append("<div>"),(e||!this._loadPanel)&&this._renderLoadPanel(i,i.parent(),this._dataController.isLocalStore()),(e||!this.getScrollable())&&this._dataController.isLoaded()){for(var r=this.getColumns(),n=!0,a=0;a<r.length;a++)if(!r[a].width&&!r[a].minWidth){n=!1;break}(this.option("columnAutoWidth")||this._hasHeight||n||this._columnsController._isColumnFixing())&&this._renderScrollableCore(i)}}_handleScroll(e){var i=this.option("rtlEnabled"),r=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var n=e.scrollOffset.left;i&&(this._scrollRight=rx(e.component)-this._scrollLeft,r&&(n=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,je.Z)((0,je.Z)({},e.scrollOffset),{left:n}),this.name)}_renderScrollableCore(e){var i=this._createScrollableOptions(),r=this._handleScroll.bind(this);i.onScroll=r,this._scrollable=this._createComponent(e,rs.Z,i),this._scrollableContainer=this._scrollable&&(0,C.Z)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return ye.renderLoadPanel.apply(this,arguments)}_renderContent(e,i,r){return e.empty().append(i),this._findContentElement()}_updateContent(e,i,r){return this._contentChanges.push({newTableElement:e,change:i,isFixedTableRendering:r}),this.waitAsyncTemplates().done(()=>{var n=this._contentChanges;this._contentChanges=[],n.forEach(a=>{var{newTableElement:s,change:o,isFixedTableRendering:d}=a,u=this.getTableElement(d),c=this._findContentElement(d),f=o?.changeType,g=[],m=this.option("highlightChanges"),y=this.addWidgetPrefix("row-inserted-animation");"update"===f?((0,U.S6)(o.rowIndices,(w,I)=>{var P,$=this._getRowElements(s).eq(w),se=null===(P=o.changeTypes)||void 0===P?void 0:P[w],fe=o.items&&o.items[w];g.push(()=>{var Se,Fe=this._getRowElements(u),$e=Fe.eq(I);switch(se){case"update":if(fe){var We=null===(Se=o.columnIndices)||void 0===Se?void 0:Se[w];(0,v.$K)(fe.visible)&&fe.visible!==$e.is(":visible")?$e.toggle(fe.visible):We?this._updateCells($e,$,We):$e.replaceWith($)}break;case"insert":if(Fe.length)$e.length?$.insertBefore($e):$.insertAfter(Fe.last());else if(u){var Ze=$.is("tbody")?u:u.children("tbody");$.prependTo(Ze)}m&&o.isLiveUpdate&&$.addClass(y);break;case"remove":$e.remove()}})}),(0,U.S6)(g,function(){this()}),s.remove()):(this.setTableElement(s,d),c.addClass(this.addWidgetPrefix("content")),this._renderContent(c,s,d))})}).fail(()=>{this._contentChanges=[]})}_createEmptyRow(e,i,r){var n,a=this._createRow(),s=i?this.getFixedColumns():this.getColumns();a.addClass(e).toggleClass(ex,this.option("showColumnLines"));for(var o=0;o<s.length;o++)n=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,v.kE)(r)&&n.css("height",r),a.append(n);return this.setAria("role","presentation",a),a}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,i,r){var n=this._getBodies(e),a=!n.length||i.is("tbody"),s=a?e:n;if("top"===r){if(s.first().prepend(i),a){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(i)}_renderFreeSpaceRow(e,i){var r=this._createEmptyRow(Z_);r=this._wrapRowIfNeed(e,r,"refresh"===i?.changeType),this._appendEmptyRow(e,r)}_checkRowKeys(e){var i=this,r=i._getRows(e),n=i._dataController.store()&&i._dataController.store().key();n&&r.some(a=>{if("data"===a.rowType&&void 0===a.key)return i._dataController.fireError("E1046",n),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return(e=e||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(Z_)).toArray().reduce((r,n)=>r+(0,ti.l)(n).height,0)}_updateRowHeight(){var e=this.getTableElement(),i=this._dataController.items().length;if(e&&this._needUpdateRowHeight(i)){var r=this._getRowsHeight(e);this._rowHeight=r/i}}_findContentElement(e){var i=this.element(),r=this.getScrollable();if(i)return r&&(i=(0,C.Z)(r.content())),i.children().first()}_getRowElements(e){var i=super._getRowElements(e);return i&&i.not(".".concat(Z_))}_getFreeSpaceRowElements(e){var i=e||this.getTableElements();return i&&i.children("tbody").children(".".concat(Z_))}_getNoDataText(){return this.option("noDataText")}_rowClick(e){var i=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,O.l)({evaluate:r=>(0,Pt.vb)(r)(i.data)},e,i))}_rowDblClick(e){var i=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,O.l)({},e,i))}_getColumnsCountBeforeGroups(e){for(var i=0;i<e.length;i++)if("groupExpand"===e[i].type)return i;return 0}_getGroupCellOptions(e){var i=this._getColumnsCountBeforeGroups(e.columns),r=(e.row.groupIndex||0)+i;return{columnIndex:r,colspan:e.columns.length-r-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,i){"group"===i.row.rowType?this._renderGroupedCells(e,i):i.row.values&&super._renderCells(e,i)}_renderGroupedCells(e,i){for(var n,o,{row:r}=i,{columns:a}=i,{rowIndex:s}=r,d=this._getGroupCellOptions(i),u=0;u<=d.columnIndex;u++)u===d.columnIndex&&a[u].allowCollapsing&&"infinite"!==i.scrollingMode?(o=!!r.isExpanded,n=a[u]):(o=null,n={command:"expand",cssClass:a[u].cssClass}),this._needRenderCell(u,i.columnIndices)&&this._renderCell(e,{value:o,row:r,rowIndex:s,column:n,columnIndex:u,columnIndices:i.columnIndices,change:i.change});var c=(0,ti.q)(this.option("rtlEnabled")),f=(0,O.l)({},a[d.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:c});d.colspan>1&&(f.colspan=d.colspan),this._needRenderCell(d.columnIndex+1,i.columnIndices)&&this._renderCell(e,{value:r.values[r.groupIndex],row:r,rowIndex:s,column:f,columnIndex:d.columnIndex+1,columnIndices:i.columnIndices,change:i.change})}_renderRows(e,i){var r=this.option("scrolling.mode");super._renderRows(e,(0,O.l)({scrollingMode:r},i)),this._checkRowKeys(i.change),this._renderFreeSpaceRow(e,i.change),this._hasHeight||this.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,i,r){var{row:n}=i,a=(0,O.l)({columns:i.columns},n),s=this._createRow(n,"tbody");s.appendTo(e),this.renderTemplate(s,r,a,!0,i.change),this._rowPrepared(s,a,i.row)}_renderRow(e,i){var{row:r}=i,{rowTemplate:n}=this.option(),a=this.option("dataRowTemplate");"data"===r.rowType&&a?this._renderDataRowByTemplate(e,i,a):"data"!==r.rowType&&"group"!==r.rowType||(0,v.$K)(r.groupIndex)||!n?super._renderRow(e,i):this.renderTemplate(e,n,(0,O.l)({columns:i.columns},r),!0)}_renderTable(e){var i=this,r=super._renderTable(e);return(0,v.$K)(i.getTableElement())?i._renderScrollable():(i.setTableElement(r),i._renderScrollable(!0),i.resizeCompleted.add(function n(){var a=i.getScrollable();a&&i.element().closest((0,qe.Jj)().document).length&&(i.resizeCompleted.remove(n),a._visibilityChanged(!0))})),r}_createTable(){var e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){var i=this.element();i.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),i.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",i);var r=this._renderTable({change:e}),n=this._updateContent(r,e);return super._renderCore(e),this._lastColumnWidths=null,n}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){var{column:i}=e,{row:r}=e,{data:n}=r,a=r&&r.summaryCells,{value:s}=e,o=ye.getDisplayValue(i,s,n,r.rowType),d=super._getCellOptions(e);if(d.value=s,d.oldValue=e.oldValue,d.displayValue=o,d.row=r,d.key=r.key,d.data=n,d.rowType=r.rowType,d.values=r.values,d.text=i.command?"":ye.formatValue(o,i),d.rowIndex=r.rowIndex,d.summaryItems=a&&a[e.columnIndex],d.resized=i.resizedCallbacks,(0,v.$K)(i.groupIndex)&&!i.command){var u=this.option("grouping.texts"),c=this.option("scrolling.mode");"virtual"!==c&&"infinite"!==c&&(d.groupContinuesMessage=n&&n.isContinuationOnNextPage&&u&&u.groupContinuesMessage,d.groupContinuedMessage=n&&n.isContinuation&&u&&u.groupContinuedMessage)}return d}_setRowsOpacityCore(e,i,r,n){var a=this._columnsController,s=a.getColumns(),o=s&&s[r],d=o&&o.isBand&&o.index;(0,U.S6)(e,(u,c)=>{if(!(0,C.Z)(c).hasClass(R0))for(var f=0;f<i.length&&(!((0,v.kE)(d)&&a.isParentBandColumn(i[f].index,d)||i[f].index===r)||(e.eq(u).children().eq(f).css({opacity:n}),(0,v.kE)(d)));f++);})}_getDevicePixelRatio(){return(0,qe.Jj)().devicePixelRatio}renderNoDataText(){return ye.renderNoDataText.apply(this,arguments)}getCellOptions(e,i){var n,a,r=this._dataController.items()[e];return r&&(a=(0,v.HD)(i)?this._columnsController.columnOption(i):this._columnsController.getVisibleColumns()[i])&&(n=this._getCellOptions({value:a.calculateCellValue(r.data),rowIndex:r.rowIndex,row:r,column:a})),n}getRow(e){if(e>=0){var i=this._getRowElements();if(i.length>e)return(0,C.Z)(i[e])}}updateFreeSpaceRowHeight(e){var i=this._dataController,r=i.items(!0).length,n=this._findContentElement(),a=this._getFreeSpaceRowElements(e);if(a&&n&&i.totalCount()>=0){var s=!1;if(r>0)if(this._hasHeight)a.hide(),(0,ne.Su)(()=>{var u=this.getScrollbarWidth(!0),c=(0,Q.Cr)(this.element())-u,g=c-(0,Q.zp)(n)>0,m=this._getRowsHeight(n.children().first()),y=e||this.getTableElements(),P=c-m-Math.ceil(parseFloat(y.css("borderTopWidth")))-this._getHeightCorrection();g&&(0,ne.g0)(()=>{a.css("height",P),s=!0,a.show()}),(0,ne.g0)(()=>this._updateLastRowBorder(s))});else{var o=i.pageSize()-r,d=this.option("scrolling.mode");o>0&&i.pageCount()>1&&"virtual"!==d&&"infinite"!==d&&((0,fn.QQ)(a,o*this._rowHeight),s=!0),!s&&e?(0,fn.QQ)(a,0):a.toggle(s),this._updateLastRowBorder(s)}else a.css("height",0),a.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var e=pi.Z.webkit&&this._getDevicePixelRatio()>=2,i=pi.Z.chrome&&pi.Z.version>=91,r=pi.Z.mozilla&&pi.Z.version>=70&&!this.option("showRowLines");return e||r||i?1:0}_columnOptionChanged(e){var{optionNames:i}=e;e.changeTypes.grouping||(i.width||i.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}init(){var e=this,i=e.getController("data");super.init(),e._editorFactoryController=e.getController("editorFactory"),e._rowHeight=0,e._scrollTop=0,e._scrollLeft=-1,e._scrollRight=0,e._hasHeight=!1,e._contentChanges=[],i.loadingChanged.add((r,n)=>{e.setLoading(r,n)}),i.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_handleDataChanged(e){switch(e.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,e);break;default:this._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,Q.dz)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){var i=this._scrollableContainer&&this._scrollableContainer.get(0),r=0;return i&&(e?(r=i.clientHeight?i.offsetHeight-i.clientHeight:0,r+=function(t){var e=t.getScrollable();return e?Math.ceil(parseFloat((0,C.Z)(e.content()).css("paddingBottom"))):0}(this)):r=i.clientWidth?i.offsetWidth-i.clientWidth:0),r>0?r:0}_fireColumnResizedCallbacks(){for(var e=this._lastColumnWidths||[],i=[],r=this.getColumns(),n=0;n<r.length;n++)i[n]=r[n].visibleWidth,r[n].resizedCallbacks&&!(0,v.$K)(r[n].groupIndex)&&e[n]!==i[n]&&r[n].resizedCallbacks.fire(i[n]);this._lastColumnWidths=i}_updateLastRowBorder(e){this.option("showBorders")&&this.option("showRowLines")&&!e?this.element().addClass(ix):this.element().removeClass(ix)}_updateScrollable(){var e=rs.Z.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!e?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var e=this.getScrollable(),i=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){var n=rx(e);n-i!==this._scrollRight&&(this._scrollLeft=n-this._scrollRight)}this._scrollLeft>=0&&i!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){var e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,ne.g0)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,ne.Su)(()=>{e._updateScrollable()})})}scrollTo(e){var i=this.element(),r=i&&rs.Z.getInstance(i);r&&r.scrollTo(e)}height(e){var i=this.element();if(0===arguments.length)return i?(0,Q.zp)(i,!0):0;(0,v.$K)(e)&&i&&(this.hasHeight("auto"!==e),(0,fn.QQ)(i,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,i){var r=this._loadPanel,n=this._dataController,a=this.option("loadPanel")||{},s=n.isLoaded()?a.animation:null,o=this.element();if((0,qe.Ym)()&&(!r&&void 0!==i&&n.isLocalStore()&&"auto"===a.enabled&&o&&(this._renderLoadPanel(o,o.parent()),r=this._loadPanel),r)){var d={message:i||a.text,animation:s,visible:e};e&&(d.position=ye.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),r.option("visible")&&!e?this._hideLoadingTimeoutID=setTimeout(()=>{r.option(d)},200):r.option(d)}}setRowsOpacity(e,i){var r=this._getRowElements().not(".".concat(R0))||[];this._setRowsOpacityCore(r,this.getColumns(),e,i)}_getCellElementsCore(e){var i=super._getCellElementsCore.apply(this,arguments);if(i){var r=i.filter(".".concat(Jw)).index();if(r>=0&&i.length>r+1)return i.slice(0,r+1)}return i}_getBoundaryVisibleItemIndex(e,i){var r=0,n=0,a=0,s=this._scrollTop,o=this._findContentElement(),d=o&&o.offset().top,c=this.getController("data").items(),f=this.getTableElement();if(c.length&&f){var g=this._getRowElements(f).filter(":visible");for(e||(s+=(0,Q.zp)(this._hasHeight?this.element():(0,qe.Jj)())),r=0;r<c.length;r++){n=a;var y=(0,C.Z)(g).eq(r);if(y.length&&(a=y.offset(),(a=(e?a.top:a.top+(0,Q.zp)(y))-d)>s)){r&&(i||2*s<Math.round(a+n))&&r--;break}}r&&r===c.length&&r--}return r}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){var e=this.getTopVisibleItemIndex(),i=this._dataController.items();if(i[e])return i[e].data}_scrollToElement(e,i){var r=this.getScrollable();r&&r.scrollToElement(e,i)}optionChanged(e){switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),e.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,e.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":this.renderNoDataText(),e.handled=!0}}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(){}_restoreErrorRow(){}}}};l.registerModule("rows",ax);var Hr=k(1760),wa=k(3615),Ni=k(5922),js=k(1924),_t=k(7923),O0=k(2528),eO=k(9664),sx=k(6523);const iO=class tO extends sx.Z{_getPlainItems(){return(0,U.UI)(this._collectionWidget.option("items"),function e(i){return i.items?[i].concat((0,U.UI)(i.items,e)):i})}_stringifyItem(e){return JSON.stringify(e,(i,r)=>"template"===i?this._getTemplateString(r):r)}_getTemplateString(e){return"object"==typeof e?(0,C.Z)(e).text():e.toString()}};var dc=k(9388),uc="dx-menu",rO=uc+"-no-icons",Mn=uc+"-item",aO=Mn+"-content",B0=Mn+"-selected",ox=Mn+"-wrapper",sO=uc+"-items-container",oO=Mn+"-expanded",lO=uc+"-separator",dO=uc+"-last-group-item",uO=Mn+"-has-text",hO=Mn+"-has-icon",cO=Mn+"-has-submenu",lx=Mn+"-popout",pO=lx+"-container",fO=Mn+"-text",gO={show:50,hide:300};const dx=(()=>{class t extends eO.Z{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return Mn}_setAriaSelected(){}_selectedItemClass(){return B0}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,O.l)(super._supportedKeys(),{space:()=>{var i=(0,C.Z)(this.option("focusedElement"));!i.length||!this._isSelectionEnabled()||this.selectItem(i[0])},pageUp:ne.ZT,pageDown:ne.ZT})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(Mn),super._init(),this._renderSelectedItem(),this._initActions()}_getTextContainer(i){var r=i.text,n=(0,C.Z)("<span>").addClass(fO),a=(0,v.PO)(i)?r:String(i);return r&&n.text(a)}_getPopoutContainer(i){var n,r=i.items;if(r&&r.length){var a=(0,C.Z)("<div>").addClass(lx);n=(0,C.Z)("<span>").addClass(pO).append(a)}return n}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(i){if(i){var r=this._dataAdapter.getNodeByItem(i);this._dataAdapter.toggleSelection(r.internalFields.key,!0)}}_renderSelectedItem(){var i=this._dataAdapter.getSelectedNodesKeys(),r=i.length&&i[0],n=this.option("selectedItem");if(r){var a=this._dataAdapter.getNodeByKey(r);if(!1!==a.selectable){if(!n)return void this.option("selectedItem",a.internalFields.item);n!==a.internalFields.item&&(this._dataAdapter.toggleSelection(r,!1),this._selectByItem(n))}}else this._selectByItem(n)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,O0.sY)()}_toggleActiveState(i,r,n){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var a={element:i,event:n};r?this._inkRipple.showWave(a):this._inkRipple.hideWave(a)}}_getShowSubmenuMode(){var i=this.option("showSubmenuMode");return i=(0,v.Kn)(i)?i.name:i,this._isDesktopDevice()?i:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===_t.Z.real().deviceType}_initEditStrategy(){this._editStrategy=new iO(this)}_addCustomCssClass(i){i.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(ox)}_hoverStartHandler(i){var r=this._getItemElementByEventArgs(i);!r||this._isItemDisabled(r)||(i.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,r),this._getSubmenuDelay("show"))))}_getAvailableItems(i){return super._getAvailableItems(i).filter(function(){return"hidden"!==(0,C.Z)(this).css("visibility")})}_isItemDisabled(i){return this._disabledGetter(i.data(this._itemDataKey()))}_showSubmenu(i){this._addExpandedClass(i)}_addExpandedClass(i){(0,C.Z)(i).addClass(oO)}_getSubmenuDelay(i){var{delay:r}=this.option("showSubmenuMode");return(0,v.$K)(r)?(0,v.Kn)(r)?r[i]:r:gO[i]}_getItemElementByEventArgs(i){var r=(0,C.Z)(i.target);if(r.hasClass(this._itemClass())||r.get(0)===i.currentTarget)return r;for(;!r.hasClass(this._itemClass());)if((r=r.parent()).hasClass("dx-submenu"))return null;return r}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(i){return i&&i.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(i,r){if(i.length){this.hasIcons=!1;var n=this._renderContainer(this.$element(),r),a=-1,s=-1;(0,U.S6)(i,(o,d)=>{var u=!1!==d.visible;u&&a<0&&(a=o),a<o&&(d.beginGroup||o===s)&&(s=u?o:o+1),o===s&&a<o&&this._renderSeparator(n),this._renderItem(o,d,n)}),this.hasIcons||n.addClass(rO)}}_renderContainer(i){var r=(0,C.Z)("<ul>");return this.setAria("role","none",r),r.appendTo(i).addClass(sO)}_createDOMElement(i){var r=(0,C.Z)("<li>");return this.setAria("role","none",r),r.appendTo(i).addClass(ox)}_renderItem(i,r,n,a){var s=this.option("items"),o=a||this._createDOMElement(n);s[i+1]&&s[i+1].beginGroup&&o.addClass(dO);var d=super._renderItem(i,r.internalFields.item,o);r.internalFields.item===this.option("selectedItem")&&d.addClass(B0),d.attr("tabIndex",-1),this._hasSubmenu(r)&&this.setAria("haspopup","true",d)}_renderItemFrame(i,r,n){var a=n.children(".".concat(Mn));return a.length?a:super._renderItemFrame.apply(this,arguments)}_refreshItem(i,r){var n=this._dataAdapter.getNodeByItem(r),a=i.data(this._itemIndexKey()),s=i.closest("ul"),o=i.closest("li");this._renderItem(a,n,s,o)}_addContentClasses(i,r){var a=!!i.icon,s=!!i.items&&!!i.items.length;r.toggleClass(uO,!!i.text&&!!i.text.length),r.toggleClass(hO,a),this.hasIcons||(this.hasIcons=a),r.toggleClass(cO,s)}_getItemContent(i){var r=super._getItemContent(i);return r.length||(r=i.children(".".concat(aO))),r}_postprocessRenderItem(i){var r=(0,C.Z)(i.itemElement),n=this._dataAdapter.getSelectedNodesKeys();n.length&&this._selectedGetter(i.itemData)&&this._isItemSelectable(i.itemData)&&this._dataAdapter.getNodeByItem(i.itemData).internalFields.key===n[0]?(r.addClass(this._selectedItemClass()),this._setAriaSelected(r,"true")):this._setAriaSelected(r,"false")}_isItemSelectable(i){return!1!==i.selectable}_renderSeparator(i){(0,C.Z)("<li>").appendTo(i).addClass(lO)}_itemClickHandler(i){if(!i._skipHandling){var r=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(i,"onItemClick",{},{afterExecute:r.bind(this)}),i._skipHandling=!0}}_updateSubmenuVisibilityOnClick(i){this._updateSelectedItemOnClick(i),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(i.args[0].itemElement)}_updateSelectedItemOnClick(i){var r=i.args?i.args[0]:i;if(this._isItemSelectionAllowed(r.itemData)){var n=this._dataAdapter.getSelectedNodesKeys(),a=n.length&&this._dataAdapter.getNodeByKey(n[0]);a&&this._toggleItemSelection(a,!1),a&&a.internalFields.item===r.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(r.itemData)}}_isItemSelectionAllowed(i){var r=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&r&&this._isItemSelectable(i)&&!this._itemsGetter(i)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,ne.C$)()}_optionChanged(i){switch(i.name){case"showSubmenuMode":break;case"selectedItem":var r=this._dataAdapter.getNodeByItem(i.value),n=this._dataAdapter.getSelectedNodesKeys()[0];if(r&&r.internalFields.key!==n){if(!1===r.selectable)break;n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(r,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(i)}}_toggleItemSelection(i,r){var n=this._getElementByItem(i.internalFields.item);n&&(0,C.Z)(n).toggleClass(B0),this._dataAdapter.toggleSelection(i.internalFields.key,r)}_getElementByItem(i){var r;return(0,U.S6)(this._itemElements(),(n,a)=>(0,C.Z)(a).data(this._itemDataKey())!==i||(r=a,!1)),r}_updateSelectedItems(i,r){(i||r)&&this._fireSelectionChangeEvent(r,i)}_fireSelectionChangeEvent(i,r){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[i],removedItems:[r]})}selectItem(i){var r=i.nodeType?this._getItemData(i):i,n=this._dataAdapter.getSelectedNodesKeys()[0],a=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(r);s.internalFields.key!==n&&(n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(a,r),this._setOptionWithoutOptionChange("selectedItem",r))}unselectItem(i){var r=i.nodeType?this._getItemData(i):i,n=this._dataAdapter.getNodeByItem(r),a=this.option("selectedItem");n.internalFields.selected&&(this._toggleItemSelection(n,!1),this._updateSelectedItems(a,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return t.ItemClass=dc.Z,t})();var mO=k(2010),Gd=k(1446),ux="dx-menu",hc=ux+"-item",Ud=hc+"-expanded",$_=ux+"-items-container",hx=hc+"-wrapper",sn="dx-submenu",cx="dx-state-hover",mx=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],IO=["up","down","first","last"],vx="dxcontextmenu",TO=(0,qe.Jj)();class Cx extends dx{getShowEvent(e){var i=null;return(0,v.Kn)(e)?null!==e.name&&(i=e.name||vx):i=e,i}getShowDelay(e){return(0,v.Kn)(e)&&e.delay}_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{showEvent:vx,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,qe.Ym)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,O.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,U.S6)(mx,(e,i)=>{this._actions[i]=this._createActionByOption(i)||ne.ZT})}_setOptionsByReference(){super._setOptionsByReference(),(0,O.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,C.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,O.l)(super._supportedKeys(),{space:()=>{var e=(0,C.Z)(this.option("focusedElement"));this.hide(),e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(){var e=this._getAvailableItems(),i=e.filter(".".concat("dx-state-focused")),r=e.filter(".".concat(cx));return r.closest(".".concat($_)).find(".".concat(hc)).index(i)>=0?i:r.length?r:super._getActiveItem()}_moveFocus(e){var o,i=this._getItemsByLocation(e),r=this._getActiveItem(!0),n=this.itemsContainer().find(".".concat(cx)),s=!(!(0,C.Z)(this.option("focusedElement")).length&&!n.length);switch(e){case"up":o=s?this._prevItem(i):r,this._setFocusedElement(o),r.is(i.first())&&this._actions.onLeftFirstItem(r);break;case"down":o=s?this._nextItem(i):r,this._setFocusedElement(o),r.is(i.last())&&this._actions.onLeftLastItem(r);break;case"right":o=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(i,e),this._setFocusedElement(o);break;case"left":o=this.option("rtlEnabled")?this._expandSubmenuHandler(i,e):this._hideSubmenuHandler(),this._setFocusedElement(o);break;case"first":o=i.first(),this._setFocusedElement(o);break;case"last":o=i.last(),this._setFocusedElement(o);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&this.option("focusedElement",(0,gt.u)(e))}_getItemsByLocation(e){var r,i=this._getActiveItem(!0);return IO.includes(e)&&(r=i.closest(".".concat($_)).children().children()),this._getAvailableItems(r)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,v.$K)(this._overlay)){var e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e=this._getActiveItem(!0),i=e.parents(".".concat(Ud)).first();return i.length?(this._hideSubmenusOnSameLevel(i),this._hideSubmenu(e.closest(".".concat(sn))),i):(this._actions.onCloseRootSubmenu(e),e)}_expandSubmenuHandler(e,i){var r=this._getActiveItem(!0),n=this._getItemData(r),a=this._dataAdapter.getNodeByItem(n),s=this._hasSubmenu(a),o=r.children(".".concat(sn));if(s&&!r.hasClass("dx-state-disabled"))return(!o.length||"hidden"===o.css("visibility"))&&this._showSubmenu(r),this._nextItem(this._getItemsByLocation(i));this._actions.onExpandLastSubmenu(r)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var e=this._getOverlayOptions();this._overlay=this._createComponent((0,C.Z)("<div>").appendTo(this._$element),ts.Z,e);var i=this._overlay.$content();i.addClass("dx-context-menu"),this._addCustomCssClass(i),this._addPlatformDependentClass(i),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var e=this._itemContainer(),i=(0,be.V4)(mO.u,this.NAME);Z.Z.off(e,i,".".concat(sn)),Z.Z.on(e,i,".".concat(sn),(r=>{r.stopPropagation(),r.preventDefault(),Z.Z.off(e,i,".".concat(sn))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){_t.Z.current().phone&&e.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(e){var i=this.getShowEvent(this.option("showEvent"));if(i){var r=(0,be.V4)(i,this.NAME);this._showContextMenuEventHandler?Z.Z.off(tt.Z.getDocument(),r,e,this._showContextMenuEventHandler):Z.Z.off((0,C.Z)(e),r)}}_attachShowContextMenuEvents(){var e=this._getTarget(),i=this.getShowEvent(this.option("showEvent"));if(i){var r=(0,be.V4)(i,this.NAME),n=this._createAction(s=>{var o=this.getShowDelay(this.option("showEvent"));o?setTimeout(()=>this._show(s.event),o):this._show(s.event)},{validatingTargetName:"target"}),a=s=>n({event:s,target:(0,C.Z)(s.currentTarget)});n=this._createAction(n),(0,v.ZU)(e)||e.nodeType||(0,v.FJ)(e)?(this._showContextMenuEventHandler=void 0,Z.Z.on(e,r,a)):(this._showContextMenuEventHandler=a,Z.Z.on(tt.Z.getDocument(),r,e,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,i){var r=i||this._itemContainer();(e=(0,C.Z)("<div>")).appendTo(r).addClass(sn).css("visibility",i?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);var n=super._renderContainer(e);return i?n:this.option("width")?n.css("minWidth",this.option("width")):this.option("height")?n.css("minHeight",this.option("height")):n}_renderSubmenuItems(e,i){this._renderItems(this._getChildNodes(e),i),this._actions.onSubmenuCreated({itemElement:(0,gt.u)(i),itemData:e.internalFields.item,submenuElement:(0,gt.u)(i.children(".".concat(sn)))})}_getOverlayOptions(){var e=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:r=>this._hideOnOutsideClickHandler(r),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:TO}}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick:i,hideOnOutsideClick:r}=this.option();return(0,v.mf)(r)?r(e):(0,v.mf)(i)?i(e):r||i}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(tt.Z.isDocument(e.target))return!0;var i=this._getActiveItemsContainer(e.target),r=this._getItemsContainers(),n=this._searchActiveItem(e.target),a=this.$element().parents(".".concat(hc)),s=n[0]===a[0]&&n.length&&a.length;return!(this._isIncludeOverlay(i,r)&&n.length)&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(n),!1)}_getActiveItemsContainer(e){return(0,C.Z)(e).closest(".".concat($_))}_getItemsContainers(){return this._overlay.$content().find(".".concat($_))}_searchActiveItem(e){return(0,C.Z)(e).closest(".".concat(hc)).eq(0)}_isIncludeOverlay(e,i){var r=!1;return(0,U.S6)(i,(n,a)=>{e.is(a)&&!r&&(r=!0)}),r}_hideAllShownChildSubmenus(e){var i=e.find(".".concat(sn)),r=(0,O.l)([],this._shownSubmenus);i.length>0&&(0,U.S6)(r,(n,a)=>{var s=this._searchActiveItem(a.context).parent();s.parent().is(e.parent().parent())&&!s.is(e.parent())&&this._hideSubmenu(a)})}_showSubmenu(e){var i=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),this._hasSubmenu(i)){var r=e.children(".".concat(sn)),n=r.length;super._showSubmenu(e),n||this._renderSubmenuItems(i,e),this._isSubmenuVisible(r)||this._drawSubmenu(e)}}_hideSubmenusOnSameLevel(e){var i=e.parent(".".concat(hx)).siblings().find(".".concat(Ud));i.length&&(i.removeClass(Ud),this._hideSubmenu(i.find(".".concat(sn))))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){var i=this.option("animation")?this.option("animation").show:{},r=e.children(".".concat(sn)),n=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&((0,v.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(r)||this._shownSubmenus.push(r),i&&Ni.Z.stop(r),js.Z.setup(r,n),i&&((0,v.PO)(i.to)&&(i.to.position=n),this._animate(r,i)),r.css("visibility","visible"))}_animate(e,i){Ni.Z.animate(e,i)}_getSubmenuPosition(e){var i=this.option("submenuDirection").toLowerCase(),n={collision:"flip",of:e.parent(".".concat(hx)),offset:{h:0,v:-1}};switch(i){case"left":n.at="left top",n.my="right top";break;case"right":n.at="right top",n.my="left top";break;default:this.option("rtlEnabled")?(n.at="left top",n.my="right top"):(n.at="right top",n.my="left top")}return n}_updateSubmenuVisibilityOnClick(e){if(e.args.length){var i=e.args[0].itemData,r=this._dataAdapter.getNodeByItem(i);if(r){var n=(0,C.Z)(e.args[0].itemElement),a=n.find(".".concat(sn));if(this._hasSubmenu(r)&&!a.length&&(this._renderSubmenuItems(r,n),a=n.find(".".concat(sn))),(n.context!==a.context||"visible"!==a.css("visibility"))&&(this._updateSelectedItemOnClick(e),i&&!i.disabled&&(!i||!1!==i.closeMenuOnClick)))if(0===a.length){var d=(0,C.Z)(n.parents(".".concat(sn))[0]);this._hideSubmenu(d),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(a)&&this._hideSubmenu(a),this._showSubmenu(n)}}}_hideSubmenu(e){var i=(0,O.l)([],this._shownSubmenus);(0,U.S6)(i,(r,n)=>{(e.is(n)||(0,wa.r3)(e[0],n[0]))&&(n.parent().removeClass(Ud),this._hideSubmenuCore(n))})}_hideSubmenuCore(e){var i=this._shownSubmenus.indexOf(e),r=this.option("animation")?this.option("animation").hide:null;i>=0&&this._shownSubmenus.splice(i,1),this._stopAnimate(e),r&&this._animate(e,r),e.css("visibility","hidden")}_stopAnimate(e){Ni.Z.stop(e,!0)}_hideAllShownSubmenus(){var e=(0,O.l)([],this._shownSubmenus);this._overlay.$content().find(".".concat(Ud)).removeClass(Ud),(0,U.S6)(e,(r,n)=>{this._hideSubmenu(n)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(mx.includes(e.name))this._initActions();else switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var i={jQEvent:e},r=(new Y.BH).reject().promise();if(this._actions.onShowing(i),i.cancel)return r;var a,n=this._positionContextMenu(e);return n&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",n),r=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(null==e||null===(a=e.originalEvent)||void 0===a?void 0:a.type)===Gd.Z.name&&this.preventShowingDefaultContextMenuAboveOverlay()),r}_setAriaAttributes(){this._overlayContentId="dx-".concat(new Hr.Z),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,C.Z)(tt.Z.getDocument())}_getContextMenuPosition(){return(0,O.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){var i=this._getContextMenuPosition(),r=this._isInitialOptionValue("position"),n=this._createActionByOption("onPositioning");e&&e.preventDefault&&r&&(i.of=e);var a={position:i,event:e};return n(a),a.cancel?i=null:a.event&&(a.event.cancel=!0,e.preventDefault()),i}_refresh(){if((0,qe.Ym)())if(this._overlay){var e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){var e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||(new Y.BH).reject().promise()}toggle(e){var i=this.option("visible");return this._renderVisibility(e=void 0===e?!i:e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,kt.Z)("dxContextMenu",Cx);const bx=Cx;var AO={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},RO=["columnHeadersView","rowsView","footerView","headerPanel"],OO=zt.ViewController.inherit({init(){this.createAction("onContextMenuPreparing")},getContextMenuItems(t){if(!t)return!1;var r,n,a,s,e=this,i=(0,C.Z)(t.target);return(0,U.S6)(RO,function(){var o,d,u=e.getView(this);if((r=u&&u.element())&&(r.is(i)||r.find(i).length)){a=i.closest(".dx-row > td, .dx-row > tr"),n=a.parent();var c=u.getRowIndex(n),f=a[0]&&a[0].cellIndex,g=n.data("options"),m={event:t,targetElement:(0,gt.u)(i),target:AO[this],rowIndex:c,row:u._getRows()[c],columnIndex:f,column:null===(d=null===(o=g?.cells)||void 0===o?void 0:o[f])||void 0===d?void 0:d.column};if(m.items=u.getContextMenuItems&&u.getContextMenuItems(m),e.executeAction("onContextMenuPreparing",m),e._contextMenuPrepared(m),s=m.items)return!1}}),s},_contextMenuPrepared:ne.ZT}),BO=zt.View.inherit({_renderCore(){var t=this,e=t.element().addClass("dx-context-menu");this.setAria("role","presentation",e),this._createComponent(e,bx,{onPositioning(i){var{event:r}=i,n=i.component,a=t.getController("contextMenu").getContextMenuItems(r);a?(n.option("items",a),r.stopPropagation()):i.cancel=!0},onItemClick(i){i.itemData.onItemClick&&i.itemData.onItemClick(i)},cssClass:t.getWidgetContainerClass(),target:t.component.$element()})}});l.registerModule("contextMenu",{defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:OO},views:{contextMenuView:BO}});var cc="dx-error-row",yx="dx-error-message",PO=zt.ViewController.inherit({init(){this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")},_createErrorRow(t,e){var r,n,i=this,a=this._renderErrorMessage(t);return e?(r=(0,C.Z)("<tr>").addClass(cc),n=(0,C.Z)("<div>").addClass("dx-closebutton").addClass(i.addWidgetPrefix("action")),Z.Z.on(n,ii.u,i.createAction(s=>{var d,o=s.event,u=(0,C.Z)(o.currentTarget).closest(".".concat(cc)).index();o.stopPropagation(),(0,U.S6)(e,(c,f)=>{d=(0,C.Z)(f).children("tbody").children("tr").eq(u),i.removeErrorRow(d)}),i.getController("resizing")&&i.getController("resizing").fireContentReadyAction()})),(0,C.Z)("<td>").attr({colSpan:i.getController("columns").getVisibleColumns().length,role:"presentation"}).prepend(n).append(a).appendTo(r),r):a},_renderErrorMessage(t){var e=t.url?t.message.replace(t.url,""):t.message||t,i=(0,C.Z)("<div>").addClass(yx).text(e);return t.url&&(0,C.Z)("<a>").attr("href",t.url).text(t.url).appendTo(i),i},renderErrorRow(t,e,i){var n,a,r=this;if(i)return i.find(".".concat(yx)).remove(),n=r._createErrorRow(t),i.prepend(n),n;var s=e>=0||!r._columnHeadersView.isVisible()?r._rowsView:r._columnHeadersView,o=s.getTableElements();(0,U.S6)(o,(u,c)=>{if(n=r._createErrorRow(t,o),a=a||n,e>=0){var f=s._getRowElements((0,C.Z)(c)).eq(e);r.removeErrorRow(f.next()),n.insertAfter(f)}else{var g=(0,C.Z)(c).children("tbody"),m=g.children("tr");r._columnHeadersView.isVisible()?(r.removeErrorRow(m.last()),(0,C.Z)(c).append(n)):(r.removeErrorRow(m.first()),g.first().prepend(n))}});var d=r.getController("resizing");return d&&d.fireContentReadyAction(),a},removeErrorRow(t){if(!t){var e=this._columnHeadersView&&this._columnHeadersView.element();if(!(t=e&&e.find(".".concat(cc)))||!t.length){var i=this._rowsView.element();t=i&&i.find(".".concat(cc))}}t&&t.hasClass(cc)&&t.remove()},optionChanged(t){"errorRowEnabled"===t.name?t.handled=!0:this.callBase(t)}}),FO={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:PO},extenders:{controllers:{data:{init(){var t=this,e=t.getController("errorHandling");t.callBase(),t.dataErrorOccurred.add((i,r)=>{t.option("errorRowEnabled")&&e.renderErrorRow(i,void 0,r)}),t.changed.add(i=>{if(!i||"loadError"!==i.changeType){var r=t.getController("errorHandling"),n=t.getController("editing");n&&!n.hasChanges()&&r&&r.removeErrorRow()}})}}}}};l.registerModule("errorHandling",FO);var wx="borders",xx="dx-gridbase-container",W_="adaptiveHidden",k0=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],pc=function(t){return(0,v.HD)(t)&&t.endsWith("%")},Sx=function(t,e){var i=t._rowsView.contentWidth();return i-t._getTotalWidth(e,i)},WO={_initPostRenderHandlers(){var t=this._dataController;this._refreshSizesHandler||(this._refreshSizesHandler=e=>{t.changed.remove(this._refreshSizesHandler),this._checkSize()&&this._refreshSizes(e)},t.changed.add(()=>{t.changed.add(this._refreshSizesHandler)}))},_refreshSizes(t){var e,i,r=this,n=t&&t.changeType,a=t&&t.isDelayed,s=r._dataController.items();if(t&&"refresh"!==n&&"prepend"!==n&&"append"!==n){if("update"===n){if(0===(null===(e=t.changeTypes)||void 0===e?void 0:e.length))return;!(s.length>1||"insert"!==t.changeTypes[0])||0===s.length&&"remove"===t.changeTypes[0]||t.needUpdateDimensions?i=r.resize():(i=new Y.BH,this._waitAsyncTemplates().done(()=>{(0,ne.Su)(()=>(0,ne.g0)(()=>(0,ne.Su)(()=>{r._setScrollerSpacing(),r._rowsView.resize(),i.resolve()})))}).fail(i.reject))}}else a||(i=r.resize());n&&"updateSelection"!==n&&"updateFocusedRow"!==n&&"pageIndex"!==n&&!a&&(0,Y.gx)(i).done(()=>{r._setAriaLabel(),r.fireContentReadyAction()})},fireContentReadyAction(){this.component._fireContentReadyAction()},_getWidgetAriaLabel:()=>"dxDataGrid-ariaDataGrid",_setAriaLabel(){this.component.setAria("label",le.Z.format(this._getWidgetAriaLabel(),this._dataController.totalItemsCount(),this.component.columnCount()),this.component.$element().children(".".concat(xx)))},_getBestFitWidths(){var t,e=this._rowsView,i=this._columnHeadersView,r=e.getColumnWidths();if(!r?.length){var n=i.getTableElement();i.setTableElement(null===(t=e.getTableElement())||void 0===t?void 0:t.children(".dx-header")),r=i.getColumnWidths(),i.setTableElement(n)}return r},_setVisibleWidths(t,e){var i=this._columnsController;i.beginUpdate(),(0,U.S6)(t,(r,n)=>{var a=i.getColumnId(n);i.columnOption(a,"visibleWidth",e[r])}),i.endUpdate()},_toggleBestFitModeForView(t,e,i){if(t&&t.isVisible()){var r=this._rowsView.getTableElements(),n=t.getTableElements();(0,U.S6)(r,(a,s)=>{var o,d=(0,C.Z)(s),u=n.eq(a);u&&u.length&&((o=i?u.children("tbody").appendTo(d):d.children(".".concat(e)).appendTo(u)).toggleClass(e,i),o.toggleClass(this.addWidgetPrefix("best-fit"),i))})}},_toggleBestFitMode(t){var e=this._rowsView.getTableElement(),i=this._rowsView.getTableElements().eq(1);e&&(e.css("tableLayout",t?"auto":"fixed"),e.children("colgroup").css("display",t?"none":""),(0,U.S6)(i.find("tr.dx-group-row"),(r,n)=>{(0,C.Z)(n).css("display",t?"none":"")}),i.toggleClass(this.addWidgetPrefix("table-fixed"),!t),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",t),this._toggleBestFitModeForView(this._footerView,"dx-footer",t),this._needStretch()&&(e.get(0).style.width=t?"auto":""))},_toggleContentMinHeight(t){var e=this._rowsView.getScrollable(),i=this._rowsView._findContentElement();!1===e?.option("useNative")&&i.css({minHeight:t?ye.getContentHeightLimit(pi.Z):""})},_synchronizeColumns(){var o,c,f,t=this._columnsController,e=t.getVisibleColumns(),i=this.option("columnAutoWidth"),r=this.option("wordWrapEnabled"),n=e.some(m=>!(0,v.$K)(m.width)),a=this._needBestFit(),s=!1,d=!1,u=[];!a&&(0,U.S6)(e,(m,y)=>{if("auto"===y.width)return a=!0,!1}),(0,U.S6)(e,(m,y)=>{if(y.minWidth)return s=!0,!1}),this._setVisibleWidths(e,[]);var g=this.component.$element();a&&(c=tt.Z.getActiveElement(g.get(0)),f=ye.getSelectionRange(c),this._toggleBestFitMode(!0),o=!0),this._toggleContentMinHeight(r),g&&g.get(0)&&this._maxWidth&&(delete this._maxWidth,g[0].style.maxWidth=""),(0,ne.Su)(()=>{var y;a?(u=this._getBestFitWidths(),(0,U.S6)(e,(y,w)=>{var I=t.getColumnId(w);t.columnOption(I,"bestFitWidth",u[y],!0)})):s&&(u=this._getBestFitWidths()),(0,U.S6)(e,function(y){var{width:w}=this;"auto"!==w&&((0,v.$K)(w)?u[y]=(0,v.kE)(w)||function(t){return(0,v.HD)(t)&&t.endsWith("px")}(w)?parseFloat(w):w:i||(u[y]=void 0))}),o&&(this._toggleBestFitMode(!1),o=!1,c&&c!==tt.Z.getActiveElement())&&((0,ti.l)(c).bottom<0||function(t,e){(function Lv(t,e){Sd=!0,t.focus({preventScroll:e}),Sd=!1})(t,!0),ye.setSelectionRange(t,e)}(c,f)),d=this._correctColumnWidths(u,e),i&&((0,U.S6)(e,(w,I)=>{"groupExpand"===I.type&&(y=u[w])}),(0,U.S6)(e,(w,I)=>{"groupExpand"===I.type&&y&&(u[w]=y)}),this._needStretch()&&this._processStretch(u,e)),(0,ne.g0)(()=>{(a||d||n)&&this._setVisibleWidths(e,u),r&&this._toggleContentMinHeight(!1)})})},_needBestFit(){return this.option("columnAutoWidth")},_needStretch(){return this._columnsController.getVisibleColumns().some(t=>"auto"===t.width&&!t.command)},_getAverageColumnsWidth(t){return Sx(this,t)/t.filter(r=>void 0===r).length},_correctColumnWidths(t,e){var r,i=this,n=!1,a=!1,s=!1,o=i.component.$element(),d=i._hasWidth,u=function(){var I=r,P=e[I],$=t[I]===W_,se=t[I],{minWidth:fe}=P;if(fe)if(void 0===se){var Se=i._getAverageColumnsWidth(t);se=Se}else if(pc(se)){var Fe=function(t,e,i,r){return Sx(t,r.map((n,a)=>a===e?i:n))}(i,I,fe,t);Fe<0&&(se=-1)}var $e=i._getRealColumnWidth(I,t.map((We,Ze)=>I===Ze?se:We));fe&&!$&&$e<fe&&(t[I]=fe,s=!0,r=-1),(0,v.$K)(P.width)||(a=!0),pc(P.width)&&(n=!0)};for(r=0;r<e.length;r++)u();if(!a&&t.length){var c=i._rowsView.element(),f=i._rowsView.contentWidth(),g=i._rowsView.getScrollbarWidth(),m=i._getTotalWidth(t,f);if(m<f){var y=ye.getLastResizableColumnIndex(e,t);if(y>=0&&(t[y]="auto",s=!0,!1===d&&!n)){var w=i.option("showBorders")?Math.ceil((0,Q.Y_)(c)-(0,Q.Xt)(c)):0;i._maxWidth=m+g+w,o.css("maxWidth",i._maxWidth)}}}return s},_processStretch(t,e){var i=this._rowsView.contentWidth(),r=this._getTotalWidth(t,i),n={length:0};if(t.length){(0,U.S6)(e,function(u){(this.width||t[u]===W_)&&(n[u]=!0,n.length++)});var a=i-r,s=Math.floor(a/(t.length-n.length)),o=a-s*(t.length-n.length);if(a>=0)for(var d=0;d<t.length;d++)n[d]||(t[d]+=s,o>0&&(o<1?(t[d]+=o,o=0):(t[d]++,o--)))}},_getRealColumnWidth(t,e,i){var r=1,n=e[t];if(!pc(n))return parseFloat(n);var a=e.reduce((u,c,f)=>pc(c)?u+parseFloat(c):u,0),s=e.reduce((u,c)=>!c||c===W_||pc(c)?u:u+parseFloat(c),0),o=(i=i||this._rowsView.contentWidth())-s,d=a*i/100;return s>0&&d+s>=i&&(r=d>o?o/d:1),parseFloat(n)*i*r/100},_getTotalWidth(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r];n&&n!==W_&&(i+=this._getRealColumnWidth(r,t,e))}return Math.ceil(i)},_getGroupElement(){return this.component.$element().children().get(0)},updateSize(t){var e=(0,C.Z)(t),i=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&e&&e.is(":visible")&&(0,Q.dz)(e)){var r=e.children(".".concat(this.getWidgetContainerClass()));r.length&&r.detach(),this._hasHeight=!!(0,Q.Cr)(e);var n=(0,Q.dz)(e);e.addClass(i),this._hasWidth=(0,Q.dz)(e)===n,e.removeClass(i),r.length&&r.appendTo(e)}},publicMethods:()=>["resize","updateDimensions"],_waitAsyncTemplates(){var t,e,i;return(0,Y.gx)(null===(t=this._columnHeadersView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(e=this._rowsView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(i=this._footerView)||void 0===i?void 0:i.waitAsyncTemplates(!0))},resize(){if(!this.component._requireResize){var t=new Y.BH;return this._waitAsyncTemplates().done(()=>{(0,Y.gx)(this.updateDimensions()).done(t.resolve).fail(t.reject)}).fail(t.reject),t.promise()}},updateDimensions(t){var e=this;if(e._initPostRenderHandlers(),e._checkSize(t)){var i=e._resizeDeferred,r=e._resizeDeferred=new Y.BH;return(0,Y.gx)(i).always(()=>{(0,ne.g0)(()=>{e._dataController.isLoaded()&&e._synchronizeColumns(),e._resetGroupElementHeight(),(0,ne.Su)(()=>{(0,ne.g0)(()=>{(0,ne.Su)(()=>{e._updateDimensionsCore()})})})}).done(r.resolve).fail(r.reject)}),r.promise()}},_resetGroupElementHeight(){var t=this._getGroupElement(),e=this._rowsView.getScrollable();t&&t.style.height&&(!e||!e.scrollTop())&&(t.style.height="")},_checkSize(t){var e=this.component.$element(),i=e.is(":visible"),r=this._lastWidth!==(0,Q.dz)(e)||this._lastHeight!==(0,Q.Cr)(e)||this._devicePixelRatio!==(0,qe.Jj)().devicePixelRatio;return i&&(!t||r)},_setScrollerSpacingCore(){var t=this,e=t._rowsView.getScrollbarWidth(),i=t._rowsView.getScrollbarWidth(!0);(0,ne.g0)(()=>{t._columnHeadersView&&t._columnHeadersView.setScrollerSpacing(e),t._footerView&&t._footerView.setScrollerSpacing(e),t._rowsView.setScrollerSpacing(e,i)})},_setScrollerSpacing(){var t=this._rowsView.getScrollable(),e=!0===this.option("scrolling.useNative");!t||e?(0,ne.g0)(()=>{(0,ne.Su)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()},_updateDimensionsCore(){var t=this,e=t._dataController,i=t.getController("editorFactory"),r=t._rowsView,n=t.component.$element(),a=this._getGroupElement(),s=(0,Q.Cr)(n),o=t.option("height")||n.get(0).style.height,d=!!o&&"auto"!==o,u=parseInt(n.css("maxHeight")),c=u&&s>=u,f=a&&a.scrollHeight===a.offsetHeight;t.updateSize(n),(0,ne.g0)(()=>{r.hasHeight(t._hasHeight||!!u||d),c&&!f&&(0,C.Z)(a).css("height",u),e.isLoaded()?(0,ne.Su)(()=>{t._updateLastSizes(n),t._setScrollerSpacing(),(0,U.S6)(k0,(m,y)=>{var w=t.getView(y);w&&w.resize()}),i&&i.resize()}):r.setLoading(e.isLoading())})},_updateLastSizes(t){this._lastWidth=(0,Q.dz)(t),this._lastHeight=(0,Q.Cr)(t),this._devicePixelRatio=(0,qe.Jj)().devicePixelRatio},optionChanged(t){switch(t.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(t.handled=!0);default:this.callBase(t)}},init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}},KO=zt.ViewController.inherit(WO),GO=zt.ViewController.inherit({_scrollChangedHandler(t,e,i){for(var r=0;r<t.length;r++)t[r]&&t[r].name!==i&&t[r].scrollTo({left:e.left,top:e.top})},init(){for(var t=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],e=0;e<t.length;e++){var i=t[e];i&&i.scrollChanged.add(this._scrollChangedHandler.bind(this,t))}}}),UO=zt.View.inherit({_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())},init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")},getView(t){return this.component._views[t]},element(){return this._groupElement},optionChanged(t){(0,v.$K)(this._groupElement)&&"showBorders"===t.name?(this._groupElement.toggleClass(this.addWidgetPrefix(wx),!!t.value),t.handled=!0):this.callBase(t)},_renderViews(t){var e=this;(0,U.S6)(k0,(i,r)=>{var n=e.getView(r);n&&n.render(t)})},_getTableRoleName:()=>"group",render(t){var e=!this._groupElement,i=this._groupElement||(0,C.Z)("<div>").addClass(this.getWidgetContainerClass());i.addClass(xx),i.toggleClass(this.addWidgetPrefix(wx),!!this.option("showBorders")),this.setAria("role","presentation",t),this.component.setAria("role",this._getTableRoleName(),i),this._rootElement=t||this._rootElement,e&&(this._groupElement=i,(0,qe.Ym)()&&this.getController("resizing").updateSize(t),i.appendTo(t)),this._renderViews(i)},update(){var t=this._rootElement,e=this._groupElement,i=this.getController("resizing");t&&e&&(i.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}});l.registerModule("gridView",{defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:KO,synchronizeScrolling:GO},views:{gridView:UO},VIEW_NAMES:k0});var Yd=k(364),qO=Yd.Z.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){var e=new Y.BH,i=new Y.BH;this._deferredItems[t.index]=i;var r=this.callBase.call(this,t);return i.done(()=>{e.resolve(r)}),e.promise()},_onItemTemplateRendered:function(t,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:ne.ZT,_renderItemsAsync(){var t=new Y.BH;return Y.gx.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),t.resolve()}),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}});const jO=qO;var fc=k(8595),Ex="dx-toolbar",M0="dx-toolbar-before",Ix="dx-toolbar-after",_c="dx-toolbar-label",Tx="dx-toolbar-compact";class Ax extends jO{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>"disabled"!==e)}_initTemplates(){super._initTemplates();var e=new fc.c(function(i,r,n){if((0,v.PO)(r)){var d,u,c,f,g,{text:a,html:s,widget:o}=r;if(a&&i.text(a).wrapInner("<div>"),s&&i.html(s),"dxDropDownButton"===o&&(r.options=null!==(d=r.options)&&void 0!==d?d:{},(0,v.$K)(r.options.stylingMode)||(r.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===o)this.option("useFlatButtons")&&(r.options=null!==(u=r.options)&&void 0!==u?u:{},r.options.stylingMode=null!==(c=r.options.stylingMode)&&void 0!==c?c:"text"),this.option("useDefaultButtons")&&(r.options=null!==(f=r.options)&&void 0!==f?f:{},r.options.type=null!==(g=r.options.type)&&void 0!==g?g:"default")}else i.text(String(r));this._getTemplate("dx-polymorph-widget").render({container:i,model:n,parent:this})}.bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,_i.x2)()},options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".".concat(M0),".".concat("dx-toolbar-center"),".".concat(Ix)].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(Ex),this._$toolbarItemsContainer=(0,C.Z)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){var e=this._$toolbarItemsContainer;(0,U.S6)(["before","center","after"],(i,r)=>{var n="dx-toolbar-".concat(r);e.find(".".concat(n)).length||(this["_$".concat(r,"Section")]=(0,C.Z)("<div>").addClass(n).appendTo(e))})}_arrangeItems(e){var i;e=null!==(i=e)&&void 0!==i?i:(0,Q.dz)(this.$element()),this._$centerSection.css({margin:"0 auto",float:"none"});var r=(0,ti.l)(this._$beforeSection.get(0)),n=(0,ti.l)(this._$afterSection.get(0));this._alignCenterSection(r,n,e);var a=this._$toolbarItemsContainer.find(".".concat(_c)).eq(0),s=a.parent();if(a.length){var o=r.width?r.width:a.position().left,d=s.hasClass(M0)?0:o,u=s.hasClass(Ix)?0:n.width,c=0;s.children().not(".".concat(_c)).each(function(){c+=(0,Q.Y_)(this)});var g=Math.max(e-c-d-u,0);if(s.hasClass(M0))this._alignSection(this._$beforeSection,g);else{var m=(0,Q.Y_)(a)-(0,Q.dz)(a);a.css("maxWidth",g-m)}}}_alignCenterSection(e,i,r){this._alignSection(this._$centerSection,r-e.width-i.width);var n=this.option("rtlEnabled"),a=n?i:e,s=n?e:i,o=(0,ti.l)(this._$centerSection.get(0));(a.right>o.left||o.right>s.left)&&this._$centerSection.css({marginLeft:a.width,marginRight:s.width,float:a.width>s.width?"none":"right"})}_alignSection(e,i){var n=e.find(".".concat(_c)).toArray();i-=this._getCurrentLabelsPaddings(n);var a=this._getCurrentLabelsWidth(n),s=Math.abs(a-i);i<a?(n=n.reverse(),this._alignSectionLabels(n,s,!1)):this._alignSectionLabels(n,s,!0)}_alignSectionLabels(e,i,r){for(var n=function(c){return(0,ti.l)(c).width},a=0;a<e.length;a++){var s=(0,C.Z)(e[a]),o=Math.ceil(n(e[a]));r&&s.css("maxWidth","inherit");var u=Math.ceil(r?n(e[a]):o);if(!(u<i)){s.css("maxWidth",r?o+i:o-i);break}i-=u,s.css("maxWidth",r?u:0)}}_applyCompactMode(){var e=this.$element();e.removeClass(Tx),this.option("compactMode")&&this._getSummaryItemsWidth(this.itemElements(),!0)>(0,Q.dz)(e)&&e.addClass(Tx)}_getCurrentLabelsWidth(e){var i=0;return e.forEach(function(r,n){i+=(0,Q.Y_)(r)}),i}_getCurrentLabelsPaddings(e){var i=0;return e.forEach(function(r,n){i+=(0,Q.Y_)(r)-(0,Q.dz)(r)}),i}_renderItem(e,i,r,n){var a,s,o=null!==(a=i.location)&&void 0!==a?a:"center",d=r??this["_$".concat(o,"Section")],u=!!(null!==(s=i.text)&&void 0!==s?s:i.html),c=super._renderItem(e,i,d,n);return c.toggleClass("dx-toolbar-button",!u).toggleClass(_c,u).addClass(i.cssClass),c}_renderGroupedItems(){(0,U.S6)(this.option("items"),(e,i)=>{var r,n=i.items,a=(0,C.Z)("<div>").addClass("dx-toolbar-group"),s=null!==(r=i.location)&&void 0!==r?r:"center";!n||!n.length||((0,U.S6)(n,(o,d)=>{this._renderItem(o,d,a,null)}),this._$toolbarItemsContainer.find(".dx-toolbar-".concat(s)).append(a))})}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){var e;return null!==(e=this.option("items"))&&void 0!==e?e:[]}_renderContentImpl(){var e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===e.length),this._renderItems(this._renderedItemsCount?e.slice(this._renderedItemsCount):e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return(0,Q.dz)(this.$element())>0&&(0,Q.Cr)(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,i,r){super._itemOptionChanged.apply(this,[e,i,r]),this._arrangeItems()}_optionChanged(e){var{name:i}=e;switch(i){case"width":super._optionChanged.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged.apply(this,arguments)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){(0,_i.x2)()&&Promise.all([(()=>new Promise(e=>{var i=()=>{var n=!0;return this.$element().parents().each((a,s)=>{if(Ni.Z.isAnimating((0,C.Z)(s)))return n=!1,!1}),n&&e(),n},r=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>i()||r(),15)};r()}))(),(()=>{var e=this.$element().find(".".concat(_c)),i=[];return e.each((r,n)=>{var a=(0,C.Z)(n).text(),s=(0,C.Z)(n).css("fontWeight");i.push((0,_i.Ih)(a,s))}),Promise.all(i)})()]).then(()=>{this._dimensionChanged()})}}(0,kt.Z)("dxToolbarBase",Ax);const l1=Ax;var d1="dx-buttongroup",u1=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"],h1=function(t){var e=t.data&&t.data(),i=e&&e.dxComponents,r=i&&i[0];return r&&e[r]};function K_(t,e){var i;if(t){var r=t._findItemElementByItem(e);if(r.length){var n=t._getItemData(r),a=!!(null!==(i=n.options)&&void 0!==i&&i.disabled||n.disabled||t.option("disabled")),{widget:s}=n;if(s&&-1!==u1.indexOf(s)){var o=r.find(s.toLowerCase().replace("dx",".dx-"));if(o.length){var d,u,c=h1(o);if(!c)return;var g,f=null===(d=c._focusTarget)||void 0===d?void 0:d.call(c);f="dxDropDownButton"===s?f&&f.find(".".concat(d1)):null!==(g=f)&&void 0!==g?g:(0,C.Z)(c.element());var m=null===(u=n.options)||void 0===u?void 0:u.tabIndex;f.attr("tabIndex",a?-1:m??0)}}}}}class p1{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var e;return null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth(this._toolbar.itemElements(),!0)}_arrangeItems(){var e=this._toolbar._$toolbarItemsContainer.find(".".concat("dx-toolbar-label")).eq(0);if(e.length){var i=(0,Q.dz)(this._toolbar.$element()),r=(0,Q.Y_)(e)-(0,Q.dz)(e);e.css("maxWidth",i-r)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var gn=k(6068),Er=k(3946),ol=k(4667),G_=k(4589),Rx="dx-list-item-badge-container",L0="dx-list-item-chevron-container",m1=dc.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(t){if(this._$element.children("."+Rx).remove(),t){var e=(0,C.Z)("<div>").addClass(Rx).append((0,C.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(t)),i=this._$element.children("."+L0).first();i.length>0?e.insertBefore(i):e.appendTo(this._$element)}},_renderShowChevron:function(t){if(this._$element.children("."+L0).remove(),t){var e=(0,C.Z)("<div>").addClass(L0),i=(0,C.Z)("<div>").addClass("dx-list-item-chevron");e.append(i).appendTo(this._$element)}}});const v1=m1;var gi=k(6885),Ox=k(9337),Bx="dx-scrollview-pull-down-loading",P0="dx-scrollview-pull-down-ready",S1=Ox.Z.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=(0,C.Z)(t.content()),this._$container=(0,C.Z)(t.container()),this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,fi.Z)(),this.releaseCallbacks=(0,fi.Z)(),this.reachBottomCallbacks=(0,fi.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new Vr.Z((0,C.Z)("<div>")).$element(),r=this._$pullDownText=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,C.Z)("<div>").text(this.option("pullingDownText")).appendTo(r),this._$pulledDownText=(0,C.Z)("<div>").text(this.option("pulledDownText")).appendTo(r),this._$refreshingText=(0,C.Z)("<div>").text(this.option("refreshingText")).appendTo(r),this._$pullDown.empty().append(t).append(e.append(i)).append(r)},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this;(0,U.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(i,r){r.element[t._state===r.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},update:function(){this.callBase(),this._setTopPocketOffset()},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset:function(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd:function(){this.callBase(),this._complete()},handleStop:function(){this.callBase(),this._complete()},_complete:function(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(function(){this._pullDownRefreshing()}.bind(this),400))},_setPullDownOffset:function(t){(0,gi.pB)(this._$topPocket,{top:t}),(0,gi.pB)(this._$scrollViewContent,{top:t})},handleScroll:function(t){if(this.callBase(t),2!==this._state){var e=this.location().top,i=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown:function(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady:function(){1!==this._state&&(this._state=1,this._$pullDown.addClass(P0),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(Bx).removeClass(P0),this._releaseState())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(Bx).removeClass(P0),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable:function(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=1},release:function(){var t=new Y.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout(function(){this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),400),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const E1=S1;var kx="dx-scrollview-pull-down-loading",R1=Ox.Z.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=(0,C.Z)(t.content()),this._$container=(0,C.Z)(t.container()),this._initCallbacks(),this._location=0},_initCallbacks:function(){this.pullDownCallbacks=(0,fi.Z)(),this.releaseCallbacks=(0,fi.Z)(),this.reachBottomCallbacks=(0,fi.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new Vr.Z((0,C.Z)("<div>")).$element();this._$icon=(0,C.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState:function(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown:function(){this._$pullDown.css({opacity:0})},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit:function(t){this.callBase(t),0===this._state&&0===this._location&&(this._startClientY=(0,be.a0)(t.originalEvent).y,this._state=4)},handleMove:function(t){this.callBase(t),this._deltaY=(0,be.a0)(t.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(t.preventDefault(),this._movePullDown())},_movePullDown:function(){var t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),i=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<t),(0,gi.pB)(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate("+i+"deg)"})},_isPullDown:function(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight:function(){return Math.round(.05*(0,Q.zp)(this._$element))},_getPullDownStartPosition:function(){return-Math.round(1.5*(0,Q.zp)(this._$pullDown))},handleEnd:function(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop:function(){this._complete()},_complete:function(){(4===this._state||5===this._state)&&this._releaseState()},handleScroll:function(t){if(this.callBase(t),2!==this._state){var e=this.location().top,i=this._location-e;this._location=e,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this.reachBottomCallbacks.fire()},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(kx),this._releaseState())},_pullDownRefreshing:function(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler:function(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown:function(){this._$pullDown.addClass(kx),(0,gi.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable:function(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=1},release:function(){var t=new Y.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(function(){this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),800),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const O1=R1;var Lx=k(3412),B1=Math,Px="dx-scrollview-pull-down-loading",z0="dx-scrollview-pull-down-ready",F1=Lx.T.inherit({ctor:function(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this;(0,U.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(i,r){r.element[t._state===r.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},_initCallbacks:function(){this.pullDownCallbacks=(0,fi.Z)(),this.releaseCallbacks=(0,fi.Z)(),this.reachBottomCallbacks=(0,fi.Z)()},_updateBounds:function(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),i=this._$content.get(0);this._bottomBoundary=Math.max(i.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar:function(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent:function(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar:function(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown:function(){return this._pullDownEnabled&&this._location>=0},_isReachBottom:function(){var t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete:function(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady:function(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset:function(){return-this._topPocketSize},_getMinOffset:function(){return B1.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading:function(){this.reachBottomCallbacks.fire()},_pullDownReady:function(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass(z0),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(Px).removeClass(z0),this.releaseCallbacks.fire())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(Px).removeClass(z0),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler:function(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,ne.Wi)(this._release.bind(this)),this._releaseTask.promise},_release:function(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler:function(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler:function(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange:function(){this._location-=(0,Q.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler:function(){this._state=1},dispose:function(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),V1=Lx.L.inherit({_init:function(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,fi.Z)(),this.releaseCallbacks=(0,fi.Z)(),this.reachBottomCallbacks=(0,fi.Z)()},render:function(){this._renderPullDown(),this.callBase()},_renderPullDown:function(){var t=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new Vr.Z((0,C.Z)("<div>")).$element(),r=this._$pullDownText=(0,C.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,C.Z)("<div>").text(this.option("pullingDownText")).appendTo(r),this._$pulledDownText=(0,C.Z)("<div>").text(this.option("pulledDownText")).appendTo(r),this._$refreshingText=(0,C.Z)("<div>").text(this.option("refreshingText")).appendTo(r),this._$pullDown.empty().append(t).append(e.append(i)).append(r)},pullDownEnable:function(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable:function(t){this._eventHandler("reachBottomEnabling",t)},_createScroller:function(t){var e=this,i=e._scrollers[t]=new F1(e._scrollerOptions(t));i.pullDownCallbacks.add(function(){e.pullDownCallbacks.fire()}),i.releaseCallbacks.add(function(){e.releaseCallbacks.fire()}),i.reachBottomCallbacks.add(function(){e.reachBottomCallbacks.fire()})},_scrollerOptions:function(t){return(0,O.l)(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease:function(){this._eventHandler("pendingRelease")},release:function(){return this._eventHandler("release").done(this._updateAction)},location:function(){var t=this.callBase();return t.top+=(0,Q.Cr)(this._$topPocket),t},dispose:function(){(0,U.S6)(this._scrollers,function(){this.dispose()}),this.callBase()}}),ll="dx-scrollview",z1=ll+"-content",H1=ll+"-top-pocket",Z1=ll+"-bottom-pocket",$1=ll+"-pull-down",$0=ll+"-scrollbottom",W1=$0+"-indicator",K1=$0+"-text",G1=ll+"-loadpanel",U1={pullDown:E1,swipeDown:O1,simulated:V1},Y1=!(0,qe.Ym)(),q1={finishLoading:ne.ZT,release:ne.ZT,refresh:ne.ZT,scrollOffset:()=>({top:0,left:0}),_optionChanged:function(t){if("onUpdated"!==t.name)return this.callBase.apply(this,arguments)}},Fx=rs.Z.inherit(Y1?q1:{_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{pullingDownText:le.Z.format("dxScrollView-pullingDownText"),pulledDownText:le.Z.format("dxScrollView-pulledDownText"),refreshingText:le.Z.format("dxScrollView-refreshingText"),reachBottomText:le.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"android"===_t.Z.real().platform},options:{refreshStrategy:"swipeDown"}},{device:function(){return(0,_i.x2)()},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init:function(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup:function(){this.callBase(),this.$element().addClass(ll),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent:function(){var t=(0,C.Z)("<div>").addClass(z1);this._$content.wrapInner(t)},_initTopPocket:function(){var t=this._$topPocket=(0,C.Z)("<div>").addClass(H1),e=this._$pullDown=(0,C.Z)("<div>").addClass($1);t.append(e),this._$content.prepend(t)},_initBottomPocket:function(){var t=this._$bottomPocket=(0,C.Z)("<div>").addClass(Z1),e=this._$reachBottom=(0,C.Z)("<div>").addClass($0),i=(0,C.Z)("<div>").addClass(W1),r=new Vr.Z((0,C.Z)("<div>")).$element(),n=this._$reachBottomText=(0,C.Z)("<div>").addClass(K1);this._updateReachBottomText(),e.append(i.append(r)).append(n),t.append(e),this._$content.append(t)},_initLoadPanel:function(){var t=(0,C.Z)("<div>").addClass(G1).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,E_,e)},_updateReachBottomText:function(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy:function(){var t=this.option("useNative")?this.option("refreshStrategy"):"simulated";this._strategy=new(0,U1[t])(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions:function(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState:function(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on:function(t){var e=this.callBase.apply(this,arguments);return("pullDown"===t||"reachBottom"===t)&&this._tryRefreshPocketState(),e},_pullDownEnable:function(t){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable:function(t){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler:function(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator:function(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading:function(){this.startLoading(),this._pullDownAction()},_reachBottomHandler:function(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading:function(){this.startLoading(),this._reachBottomAction()},_releaseHandler:function(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged:function(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content:function(){return(0,gt.u)(this._$content.children().eq(1))},release:function(t){return void 0!==t&&this.toggleLoading(!t),this._strategy.release()},toggleLoading:function(t){this._reachBottomEnable(t)},refresh:function(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading:function(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading:function(){this._loadPanel.hide(),this._unlock()},_dispose:function(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,kt.Z)("dxScrollView",Fx);const Vx=Fx;var j1=k(4463),j_="__dx_key__";const W0=Yd.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},null===(t=this._dataController)||void 0===t||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(t){var e=(0,C.Z)(),i=this.key();return this.itemElements().each((r,n)=>{var a=(0,C.Z)(n),s=this._getItemData(a);if(i?(0,On.OI)(i,this.keyOf(s),t):this._isItemEquals(s,t))return e=a,!1}),e},_dataSourceChangedHandler:function(t,e){null!=e&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals:function(t,e){t&&t[j_]&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch{return t===e}},_isItemStrictEquals:function(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup:function(t,e){var i=!1;return this.option("grouped")&&(t.length||(i=!0),(0,U.S6)(t,(r,n)=>{"insert"===n.type&&(i=!0,(0,U.S6)(e,(a,s)=>{if(void 0!==n.data.key&&n.data.key===s.key)return i=!1,!1}))})),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var t=(0,Gw.h)(this._itemsCache,this._editStrategy.itemsGetter(),e=>e&&void 0!==e[j_]?e[j_]:this.keyOf(e),this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length&&!this._shouldAddNewGroup(t,this._itemsCache))return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var t=this._editStrategy.itemsGetter();try{this._itemsCache=(0,O.l)(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map((e,i)=>({[j_]:t[i],data:e})))}catch{this._itemsCache=(0,O.l)([],t)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(t,e,i,r){if(r)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{var n=e[(0,zr.qk)(t,e,i.key)];n&&(0,zr.Vx)(t,e,i.key,i.data).done(()=>{this._renderItem(e.indexOf(n),n,null,this._findItemElementByKey(i.key))})}},_insertByChange:function(t,e,i,r){(0,Y.gx)(r||(0,zr.$T)(t,e,i.data,i.index)).done(()=>{var n;this._beforeItemElementInserted(i);var a=this._getItemContainer(i.data);this._renderItem(null!==(n=i.index)&&void 0!==n?n:e.length,i.data,a),this._afterItemElementInserted(),this._correctionIndex++})},_getItemContainer:function(t){return this._itemContainer()},_updateSelectionAfterRemoveByChange:function(t){var e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(t){var e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:ne.ZT,_removeByChange:function(t,e,i,r){var n=r?i.index:(0,zr.qk)(t,e,i.key);if(r?i.oldItem:e[n]){var s=this._findItemElementByKey(i.key),o=this._extendActionArgs(s);this._waitDeletingPrepare(s).done(()=>{r?(this._updateIndicesAfterIndex(n-1),this._afterItemElementDeleted(s,o),this._updateSelectionAfterRemoveByChange(n)):(this._deleteItemElementByIndex(n),this._afterItemElementDeleted(s,o))}),this._correctionIndex--}},_modifyByChanges:function(t,e){var i=this._editStrategy.itemsGetter(),r={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},n=this._dataController,a=n.paginate(),s=n.group();(a||s)&&(t=t.filter(o=>"insert"!==o.type||void 0!==o.index)),t.forEach(o=>this["_".concat(o.type,"ByChange")](r,i,o,e)),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(t,e,i){var r=t.children(this._itemSelector()).get(i);tt.Z.insertElement(t.get(0),e.get(0),r)},_optionChanged:function(t){switch(t.name){case"items":this._partialRefresh(t.value)||this.callBase(t);break;case"dataSource":(!this.option("repaintChangesOnly")||!t.value)&&this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}}),Nx={_getSpecificDataSourceOption:function(){var t=this.option("dataSource"),e=!1,i={};return this._getGroupedOption()&&(t=>Array.isArray(t)&&t.every(e=>2===Object.keys(e).length&&"key"in e&&"items"in e&&Array.isArray(e.items)))(t)&&(i=t.reduce((r,n)=>{var a=n.items.map(s=>((0,v.Kn)(s)||(s={text:s},e=!0),"key"in s||(s.key=n.key),s));return r.concat(a)},[]),t={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}};function zx(t){return t?Number(t.replace("px","")):0}function Q1(t,e){var i=function Cc(t){var e,i;return t&&(0,qe.Ym)()?null===(e=(i=(0,qe.Jj)()).getComputedStyle)||void 0===e?void 0:e.call(i,t):null}(t);return i?zx(i["margin".concat((0,Cr.MI)(e))]):0}var X_="dx-list-item",eB="."+X_,qd="dx-list-group",K0="dx-list-group-header",Q_="dx-list-group-body",Hx="dx-list-group-collapsed",Zx="dx-wrap-item-text",$x=70,dB=(0,Pt.vb)("items"),G0=W0.inherit({_activeStateUnit:[eB,".dx-list-select-all"].join(","),_supportedKeys:function(){var t=this,e=function(r){var s,o,d,n=i(r);n.is(t.option("focusedElement"))&&(o=r,d=(s=n).position().top,"prev"===o&&(d=s.position().top-(0,Q.Cr)(t.$element())+(0,Q.zp)(s)),t.scrollTo(d),n=i(r)),t.option("focusedElement",(0,gt.u)(n)),t.scrollToItem(n)};function i(r){var n=t.scrollTop(),a=(0,Q.Cr)(t.$element()),s=(0,C.Z)(t.option("focusedElement")),o=!0;if(!s.length)return(0,C.Z)();for(;o;){var d=s[r]();if(!d.length)break;var u=d.position().top+(0,Q.zp)(d)/2;(o=u<a+n&&u>n)&&(s=d)}return s}return(0,O.l)(this.callBase(),{leftArrow:ne.ZT,rightArrow:ne.ZT,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:le.Z.format("dxList-pullingDownText"),pulledDownText:le.Z.format("dxList-pulledDownText"),refreshingText:le.Z.format("dxList-refreshingText"),pageLoadingText:le.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:le.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},_listAttributes:{role:"listbox"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(t){return t?t.showChevron:void 0},badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){var t=(0,_i.Vk)();return this.callBase().concat((0,j1.i)(),[{device:function(){return!ma.nativeScrolling},options:{useNativeScrolling:!1}},{device:function(e){return!ma.nativeScrolling&&!_t.Z.isSimulator()&&"desktop"===_t.Z.real().deviceType&&"generic"===e.platform},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_i.x2)(t)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:"",useInkRipple:!0}}])},_visibilityChanged:function(t){t&&this._updateLoadingState(!0)},_itemClass:function(){return X_},_itemDataKey:function(){return"dxListItemData"},_itemContainer:function(){return this._$container},_saveSelectionChangeEvent:function(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this._itemElementsCache=this.option("grouped")?this._itemContainer().children("."+qd).children("."+Q_).children(this._itemSelector()):this._itemContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(t,e){return this.callBase(t,e).done(function(){this._refreshItemElements()})},deleteItem:function(t){return this.callBase(t).done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(t){if("single"!==this.option("selectionMode")||!this.isItemSelected(t.currentTarget))return this.callBase(t)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._initScrollView(),this._feedbackShowTimeout=$x,this._createGroupRenderAction()},_scrollBottomMode:function(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode:function(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions:function(){var t=this._scrollBottomMode(),e=this._nextButtonMode();return(0,O.l)(this.callBase(),{paginate:(0,ne.IS)(t||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(t){return this._itemContainer().find(".".concat(qd)).eq(t).find(".".concat(Q_))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),i=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),function uB(){return Vx}(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,C.Z)(this._scrollView.content()),this.option("wrapItemText")&&this._$container.addClass(Zx),this._createScrollViewActions()},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(t){this._scrollAction&&this._scrollAction(t)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new fc.c(function(t,e){(0,v.PO)(e)?e.key&&t.text(e.key):t.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(t,e){if(this.callBase(t,e),t.icon){var i=(0,ol.H)(t.icon).addClass("dx-list-item-icon"),r=(0,C.Z)("<div>").addClass("dx-list-item-icon-container");r.append(i),e.prepend(r)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(t){var e=this._dataController,i=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(t){return(0,v.$K)(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var r;!this._itemElements().length&&!this._isDataSourceFirstLoadCompleted()||null===(r=this._scrollView)||void 0===r||r.startLoading()}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&(0,qe.Ym)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull:function(){var t=this._scrollView;return!t||(0,Q.Cr)(t.content())>(0,Q.Cr)(t.container())},_pullDownHandler:function(t){this._pullRefreshAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(t){var e,i,r=(0,Q.Cr)(this._scrollView.content())-(0,Q.Cr)(this._scrollView.container())<(null!==(e=null===(i=this._scrollView.scrollOffset())||void 0===i?void 0:i.top)&&void 0!==e?e:0);return t&&(!this._scrollViewIsFull()||r)},_infiniteDataLoading:function(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(t){this._pageLoadingAction(t),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems:function(t){this.option("grouped")?((0,U.S6)(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,_i.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var t=(0,be.V4)(ii.u,this.NAME),e="."+K0,i=this.$element(),r=this.option("collapsibleGroups");i.toggleClass("dx-list-collapsible-groups",r),Z.Z.off(i,t,e),r&&Z.Z.on(i,t,e,function(n){this._createAction(function(a){var s=(0,C.Z)(a.event.currentTarget).parent();this._collapseGroupHandler(s),this.option("focusStateEnabled")&&this.option("focusedElement",(0,gt.u)(s.find("."+X_).eq(0)))}.bind(this),{validatingTargetName:"element"})({event:n})}.bind(this))},_collapseGroupHandler:function(t,e){var i=new Y.BH;if(t.hasClass(Hx)===e)return i.resolve();var r=t.children("."+Q_),n=(0,Q.zp)(r),a=0;return 0===n&&((0,Q.QQ)(r,"auto"),a=(0,Q.zp)(r)),t.toggleClass(Hx,e),Ni.Z.animate(r,{type:"custom",from:{height:n},to:{height:a},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=(0,C.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria("role",this.option("_listAttributes").role)},_renderInkRipple:function(){this._inkRipple=(0,O0.sY)()},_toggleActiveState:function(t,e,i){this.callBase.apply(this,arguments);var r=this;if(this._inkRipple){var n={element:t,event:i};e?(0,_i.x2)()?this._inkRippleTimer=setTimeout(function(){r._inkRipple.showWave(n)},$x/2):r._inkRipple.showWave(n):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(n))}},_postprocessRenderItem:function(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,C.Z)(t.itemElement))},_attachSwipeEvent:function(t){var e=(0,be.V4)(G_.ut,this.NAME);Z.Z.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(t,e){var i=(0,C.Z)("<div>").addClass(qd).appendTo(this._itemContainer()),r=(0,C.Z)("<div>").addClass(K0).appendTo(i),n=this.option("groupTemplate"),a=this._getTemplate(e.template||n,e,t,r),s={index:t,itemData:e,container:(0,gt.u)(r)};this._createItemByTemplate(a,s),(0,_i.x2)()&&(0,C.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(r),this._renderingGroupIndex=t;var o=(0,C.Z)("<div>").addClass(Q_).appendTo(i);(0,U.S6)(dB(e)||[],function(d,u){this._renderItem({group:t,item:d},u,o)}.bind(this)),this._groupRenderAction({groupElement:(0,gt.u)(i),groupIndex:t,groupData:e})},downInkRippleHandler:function(t){this._toggleActiveState((0,C.Z)(t.currentTarget),!0,t)},upInkRippleHandler:function(t){this._toggleActiveState((0,C.Z)(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var t="."+K0,e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var i=[e,"dxpointerdown",t,this._downInkRippleHandler],r=[e,"dxpointerup dxpointerout",t,this._upInkRippleHandler];Z.Z.off(...i),Z.Z.on(...i),Z.Z.off(...r),Z.Z.on(...r)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton:function(t){var e=this._dataController,i=this._getNextButton();this.$element().toggleClass("dx-has-next",t),t&&e.isLoaded()&&i.appendTo(this._itemContainer()),t||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var t=(0,C.Z)("<div>").addClass("dx-list-next-button"),e=(0,C.Z)("<div>").appendTo(t);return this._createComponent(e,Er.Z,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,_i.x2)()?"default":void 0,integrationOptions:{}}),t},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if((0,qe.Ym)()){var t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}else this.callBase()},_optionChanged:function(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._$container.toggleClass(Zx,t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"_swipeEnabled":case"_listAttributes":break;default:this.callBase(t)}},_extendActionArgs:function(t){if(!this.option("grouped"))return this.callBase(t);var e=t.closest("."+qd),i=e.find("."+X_);return(0,O.l)(this.callBase(t),{itemIndex:{group:e.index(),item:i.index(t)}})},expandGroup:function(t){var e=new Y.BH,i=this._itemContainer().find("."+qd).eq(t);return this._collapseGroupHandler(i,!1).done(function(){e.resolveWith(this)}.bind(this)),e.promise()},collapseGroup:function(t){var e=new Y.BH,i=this._itemContainer().find("."+qd).eq(t);return this._collapseGroupHandler(i,!0).done(function(){e.resolveWith(this)}.bind(this)),e},updateDimensions:function(){var t=this,e=new Y.BH;return t._scrollView?t._scrollView.update().done(function(){!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)}):e.resolveWith(t),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(t){this._scrollView.scrollBy(t)},scrollTo:function(t){this._scrollView.scrollTo(t)},scrollToItem:function(t){var i=this._editStrategy.getItemElement(t)?.get(0);this._scrollView.scrollToElement(i,{bottom:Q1(i,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(Nx);G0.ItemClass=v1;var U0="dx-toolbar-menu-action",Kx="dx-toolbar-hidden-button-group",Gx="dx-toolbar-menu-section",Ux="dx-toolbar-menu-last-section";class fB extends G0{_init(){super._init(),this._activeStateUnit=".".concat(U0,":not(.").concat(Kx,")")}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var e=this._itemContainer();(0,U.S6)(["before","center","after","menu"],(i,r)=>{var n="_$".concat(r,"Section");this[n]||(this[n]=(0,C.Z)("<div>").addClass(Gx)),this[n].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".".concat("dx-scrollview-content")).attr("role","menu")}_updateSections(){var e=this.$element().find(".".concat(Gx));e.removeClass(Ux),e.not(":empty").eq(-1).addClass(Ux)}_renderItem(e,i,r,n){var a,s=null!==(a=i.location)&&void 0!==a?a:"menu",o=this["_$".concat(s,"Section")],d=super._renderItem(e,i,o,n);return this._getItemTemplateName({itemData:i})&&d.addClass("dx-toolbar-menu-custom"),("menu"===s||"dxButton"===i.widget||"dxButtonGroup"===i.widget||i.isAction)&&d.addClass(U0),"dxButton"===i.widget&&d.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===i.widget&&d.addClass(Kx),d.addClass(i.cssClass),d}_getItemTemplateName(e){var i=super._getItemTemplateName(e),r=e.itemData;return r&&r.menuItemTemplate||i}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,i,r){(0,C.Z)(e.target).closest(".".concat(U0)).length&&super._itemClickHandler(e,i,r)}_getAriaTarget(){var e;return null!==(e=this.option("_areaTarget"))&&void 0!==e?e:super._getAriaTarget()}_clean(){this._getSections().empty(),super._clean()}}var Yx=k(8437),J_=k(8817),_B=k(1764),ns=k(1128),hr=k(3429);var tg=k(9699),ig="dxResizable",rg="dx-resizable-handle",ng="dx-resizable-handle-corner",SB=(0,be.V4)(hr.BL,ig),EB=(0,be.V4)(hr.pB,ig),IB=(0,be.V4)(hr.ut,ig),TB={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},qx=tg.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init:function(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){this._handles=[];var t=this.option("handles");if("none"!==t&&t){var e="all"===t?["top","bottom","left","right"]:t.split(" "),i={};(0,U.S6)(e,(r,n)=>{i[n]=!0,this._renderHandle(n)}),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle:function(t){var e=(0,C.Z)("<div>").addClass(rg).addClass(rg+"-"+t).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers:function(){if(!this.option("disabled")){var t={};t[SB]=this._dragStartHandler.bind(this),t[EB]=this._dragHandler.bind(this),t[IB]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{Z.Z.on(e,t,{direction:"both",immediate:!0})})}},_detachEventHandlers:function(){this._handles.forEach(t=>{Z.Z.off(t)})},_toggleEventHandlers:function(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize:function(){var t=this.$element();return"border-box"===t.css("boxSizing")?{width:(0,Q.Y_)(t),height:(0,Q.zp)(t)}:{width:(0,Q.dz)(t),height:(0,Q.Cr)(t)}},_dragStartHandler:function(t){var e=this.$element();e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=(0,gi.jt)(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null)},_toggleResizingClass:function(t){this.$element().toggleClass("dx-resizable-resizing",t)},_renderDragOffsets:function(t){var e=this._getArea();if(e){var i=(0,C.Z)(t.target).closest("."+rg),r=(0,Q.Y_)(i),n=(0,Q.zp)(i),a=i.offset(),s=e.offset,o=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=a.left-s.left-o.scrollX,t.maxRightOffset=this._rightMaxOffset=s.left+e.width-a.left-r+o.scrollX,t.maxTopOffset=this._topMaxOffset=a.top-s.top-o.scrollY,t.maxBottomOffset=this._bottomMaxOffset=s.top+e.height-a.top-n+o.scrollY}},_getBorderWidth:function(t,e){if((0,v.FJ)(t.get(0)))return 0;var i=t.css(TB[e]);return parseInt(i)||0},_proportionate:function(t,e){var i=this._elementSize;return e*("x"===t?i.width/i.height:i.height/i.width)},_getProportionalDelta:function(t){var{x:e,y:i}=t,r=this._proportionate("y",e);if(r>=i)return{x:e,y:r};var n=this._proportionate("x",i);return n>=e?{x:n,y:i}:{x:0,y:0}},_getDirectionName:function(t){var e=this._movingSides;return"x"===t?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea:function(t,e){var i,r=this._getDirectionName(t);return Math.min(e,null!==(i=this["_".concat(r,"MaxOffset")])&&void 0!==i?i:1/0)},_fitDeltaProportionally:function(t){var e=(0,je.Z)({},t),i=this._elementSize,{minWidth:r,minHeight:n,maxWidth:a,maxHeight:s}=this.option(),o=()=>i.width+e.x,d=()=>i.height+e.y,u=y=>e[y]===this._fitIntoArea(y,e[y]),c=()=>(0,Ut.Z2)(o(),r,a)&&u("x"),f=()=>(0,Ut.Z2)(d(),n,s)&&u("y");if(!c()){var g=this._fitIntoArea("x",(0,Ut.n$)(o(),r,a)-i.width);e={x:g,y:this._proportionate("y",g)}}if(!f()){var m=this._fitIntoArea("y",(0,Ut.n$)(d(),n,s)-i.height);e={x:this._proportionate("x",m),y:m}}return c()&&f()?e:{x:0,y:0}},_fitDelta:function(t){var{x:e,y:i}=t,r=this._elementSize,{minWidth:n,minHeight:a,maxWidth:s,maxHeight:o}=this.option();return{x:(0,Ut.n$)(r.width+e,n,s)-r.width,y:(0,Ut.n$)(r.height+i,a,o)-r.height}},_getDeltaByOffset:function(t){var e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio"),r={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){var n=this._getProportionalDelta(r);r=this._fitDeltaProportionally(n)}else{var s=this._fitDelta(r);r=this._roundByStep(s)}return r},_updatePosition:function(t,e){var{width:i,height:r}=e,n=this._elementLocation,a=this._movingSides,s=this.$element(),o=this._getElementSize();(0,gi.pB)(s,{top:n.top+(a.top?t.y*(a.top?-1:1)-((o.height||r)-r):0),left:n.left+(a.left?t.x*(a.left?-1:1)-((o.width||i)-i):0)})},_dragHandler:function(t){var e=this._getOffset(t),i=this._getDeltaByOffset(e),r=this._updateDimensions(i);this._updatePosition(i,r),this._triggerResizeAction(t,r)},_updateDimensions:function(t){var e=u=>"px"===u.substring(u.length-2),i="strict"===this.option("stepPrecision"),r=this._elementSize,n=r.width+t.x,a=r.height+t.y,s=this.$element().get(0).style,o=t.x||i||e(s.width),d=t.y||i||e(s.height);return o&&this.option({width:n}),d&&this.option({height:a}),{width:o?n:r.width,height:d?a:r.height}},_triggerResizeAction:function(t,e){var{width:i,height:r}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||r,handles:this._movingSides}),(0,ns.U_)(this.$element())},_isCornerHandler:t=>0===Object.values(t).reduce((e,i)=>e^i,0),_getOffset:function(t){var e=t.offset,i=this._movingSides;return!i.left&&!i.right&&(e.x=0),!i.top&&!i.bottom&&(e.y=0),e},_roundByStep:function(t){return"strict"===this.option("stepPrecision")?this._roundStrict(t):this._roundNotStrict(t)},_getSteps:function(){return(0,ne.TG)(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict:function(t){var e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict:function(t){var e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},r=this._getSteps(),n=this._elementLocation,a=this._elementSize,d=((e.left?n.left:n.left+a.width)+i.x)%r.h,u=((e.top?n.top:n.top+a.height)+i.y)%r.v,c=Math.sign||(P=>0==(P=+P)||isNaN(P)?P:P>0?1:-1),f=(P,$)=>(1+.2*c($))%1*P,g=(P,$)=>Math.abs(P)<.2*$,m=i.x-d,y=i.y-u;d>f(r.h,i.x)&&(m+=r.h),u>f(r.v,i.y)&&(y+=r.v);var w=!e.left&&!e.right||g(i.x,r.h)?0:m,I=!e.top&&!e.bottom||g(i.y,r.v)?0:y;return{x:w*(e.left?-1:1),y:I*(e.top?-1:1)}},_getMovingSides:function(t){var e=(0,C.Z)(t.target),i=e.hasClass(ng+"-top-left"),r=e.hasClass(ng+"-top-right"),n=e.hasClass(ng+"-bottom-left"),a=e.hasClass(ng+"-bottom-right");return{top:e.hasClass("dx-resizable-handle-top")||i||r,left:e.hasClass("dx-resizable-handle-left")||i||n,bottom:e.hasClass("dx-resizable-handle-bottom")||n||a,right:e.hasClass("dx-resizable-handle-right")||r||a}},_getArea:function(){var t=this.option("area");return(0,v.mf)(t)&&(t=t.call(this)),(0,v.PO)(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset:function(){var t=this.option("area"),i={scrollY:0,scrollX:0};if(!(0,v.mf)(t)&&!(0,v.PO)(t)){var r=(0,C.Z)(t)[0];(0,v.FJ)(r)&&(i.scrollX=r.pageXOffset,i.scrollY=r.pageYOffset)}return i},_getAreaFromObject:function(t){var e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement:function(t){var i,e=(0,C.Z)(t);return e.length&&(i={width:(0,Q.Xt)(e),height:(0,Q.fA)(e),offset:(0,O.l)({top:0,left:0},(0,v.FJ)(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry:function(t,e){var i=e?this._getBorderWidth(e,"left"):0,r=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=r+this._getBorderWidth(this.$element(),"top"),t.width-=(0,Q.Y_)(this.$element())-(0,Q.Xt)(this.$element()),t.height-=(0,Q.zp)(this.$element())-(0,Q.fA)(this.$element())},_dragEndHandler:function(t){var e=this.$element();this._resizeEndAction({event:t,width:(0,Q.Y_)(e),height:(0,Q.zp)(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(t){this.option("width",(0,Ut.n$)(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(t){this.option("height",(0,Ut.n$)(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":(0,qe.Ym)()&&this._renderWidth((0,Q.Y_)(this.$element()));break;case"minHeight":case"maxHeight":(0,qe.Ym)()&&this._renderHeight((0,Q.zp)(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean:function(){this.$element().find("."+rg).remove()},_useTemplates:function(){return!1}});(0,kt.Z)(ig,qx);const DB=qx;var bc=k(6896),Y0=k(7064),Ir=k(3366),q0=k(663),AB=k(2418),RB=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],j0=(0,qe.Jj)();class OB extends AB.H{constructor(e){var{fullScreen:i,forceApplyBindings:r,dragOutsideBoundary:n,dragAndResizeArea:a,outsideDragFactor:s}=e;super((0,Ir.Z)(e,RB)),this._props=(0,je.Z)({},this._props,{fullScreen:i,forceApplyBindings:r,dragOutsideBoundary:n,dragAndResizeArea:a,outsideDragFactor:s}),this._$dragResizeContainer=void 0,this._outsideDragFactor=void 0,this._lastPositionBeforeFullScreen=void 0,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set outsideDragFactor(e){this._props.outsideDragFactor=e,this._updateOutsideDragFactor()}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var e,i;this._props.fullScreen?((0,gi.pB)(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(e=(i=this._props).forceApplyBindings)||void 0===e||e.call(i),!this._shouldRenderContentInitialPosition&&this._lastPositionBeforeFullScreen?((0,gi.pB)(this._$content,this._lastPositionBeforeFullScreen),this._lastPositionBeforeFullScreen=void 0,this.detectVisualPositionChange()):super.positionContent())}_updateOutsideDragFactor(){this._outsideDragFactor=this._getOutsideDragFactor()}_getOutsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?(0,C.Z)(j0):this._props.dragAndResizeArea?(0,C.Z)(this._props.dragAndResizeArea):(0,q0.In)().get(0)||this._props.container?this._$markupContainer:(0,C.Z)(j0)}_getVisualContainer(){return this._props.fullScreen?(0,C.Z)(j0):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1),this._lastPositionBeforeFullScreen=this._visualPosition}_fullScreenDisabled(){this.restorePositionOnNextRender(!1)}}var BB=(0,qe.Jj)(),X0="dx-popup",jx="dx-popup-wrapper",FB="dx-state-disabled",Xx="dx-popup-title",Qx="dx-popup-bottom",Jx=["cancel","clear","done"],YB=pi.Z.safari&&(0,_B.q)(pi.Z.version,[11])<0,Xs={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},eS=ts.Z.inherit({_supportedKeys:function(){return(0,O.l)(this.callBase(),{upArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveUp(t)},downArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveDown(t)},leftArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveLeft(t)},rightArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveRight(t)}})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){var t=(0,_i.Vk)();return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(e){return"desktop"===_t.Z.real().deviceType&&"generic"===e.platform},options:{dragEnabled:!0}},{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_i.x2)(t)},options:{useDefaultToolbarButtons:!0,useFlatToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){var t=this.option("_wrapperClassExternal"),e=t?"".concat(jx," ").concat(t):jx;this.callBase(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(X0),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner((0,C.Z)("<div>").addClass("dx-popup-content")).children().eq(0)},_render:function(){var t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass("dx-popup-fullscreen",t).toggleClass("dx-popup-normal",!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new J_.s,bottom:new J_.s})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){var t=this.option("animation");return["to","from"].some(e=>{var i,r=null==t||null===(i=t.show)||void 0===i?void 0:i[e];return(0,v.Kn)(r)&&("width"in r||"height"in r)})},_updateResizeCallbackSkipCondition(){var t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(this.option("useResizeObserver")){var e=this._$content.get(0);t?bc.Z.observe(e,i=>{this._contentResizeHandler(i)}):bc.Z.unobserve(e)}},_areContentDimensionsRendered:function(t){var e,i,r,a,s,n=null===(e=t.contentBoxSize)||void 0===e?void 0:e[0];if(n)return parseInt(n.inlineSize,10)===(null===(a=this._renderedDimensions)||void 0===a?void 0:a.width)&&parseInt(n.blockSize,10)===(null===(s=this._renderedDimensions)||void 0===s?void 0:s.height);var o=t.contentRect;return parseInt(o.width,10)===(null===(i=this._renderedDimensions)||void 0===i?void 0:i.width)&&parseInt(o.height,10)===(null===(r=this._renderedDimensions)||void 0===r?void 0:r.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){var t=this._getToolbarItems("top"),e=this.option("title"),i=this.option("showTitle");if(i&&e&&t.unshift({location:_t.Z.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();var r=(0,C.Z)("<div>").addClass(Xx).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,r).addClass(Xx),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach()},_renderTemplateByType:function(t,e,i,r){var{rtlEnabled:n,useDefaultToolbarButtons:a,useFlatToolbarButtons:s,disabled:o}=this.option(),d=this._getTemplateByOption(t);if(d instanceof J_.s){var c=(0,O.l)({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),f=(0,O.l)(r,{items:e,rtlEnabled:n,useDefaultButtons:a,useFlatButtons:s,disabled:o,integrationOptions:c});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:f}});var g=i.children("div");return i.replaceWith(g),g}var m=(0,C.Z)(d.render({container:(0,gt.u)(i)}));return m.hasClass("dx-template-wrapper")&&(i.replaceWith(m),i=m),i},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this.callBase(t)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:(0,gt.u)(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{var r=(0,C.Z)("<div>").addClass("dx-closebutton");this._createComponent(r,Er.Z,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),(0,C.Z)(i).append(r)}},_getToolbarItems:function(t){var e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];var r=_t.Z.current().platform,n=0;return(0,U.S6)(e,(a,s)=>{var o=(0,v.$K)(s.shortcut),d=o?(t=>{var i=_t.Z.current().platform,r="bottom",n="before";if("ios"===i)switch(t){case"cancel":r="top";break;case"clear":r="top",n="after";break;case"done":n="after"}else if("android"===i)switch(t){case"cancel":case"done":n="after"}return{toolbar:r,location:n}})(s.shortcut):s;if(o&&"ios"===r&&n<2&&(d.toolbar="top",n++),d.toolbar=s.toolbar||d.toolbar||"top",d&&d.toolbar===t){o&&(0,O.l)(d,{location:s.location},this._getToolbarItemByAlias(s));var u="generic"===r;"done"===s.shortcut&&u||"cancel"===s.shortcut&&!u?i.unshift(d):i.push(d)}}),"top"===t&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>"done"===t.toLowerCase()?"OK":(0,Cr._A)(t,!0),_getToolbarItemByAlias:function(t){var e=this,i=t.shortcut;if(!Jx.includes(i))return!1;var r=(0,O.l)({text:le.Z.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:e.option("useDefaultToolbarButtons")?"default":"normal",stylingMode:e.option("useFlatToolbarButtons")?"text":"contained"},t.options||{}),n=X0+"-"+i;return this._toolbarItemClasses.push(n),{template:function(a,s,o){var d=(0,C.Z)("<div>").addClass(n).appendTo(o);e._createComponent(d,Er.Z,r)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(e){e.component.hide()}})},_renderBottom:function(){var t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();var e=(0,C.Z)("<div>").addClass(Qx).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass(Qx),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass(FB,Boolean(t))},_toggleClasses:function(){(0,U.S6)(Jx,(e,i)=>{var r=X0+"-"+i;this._toolbarItemClasses.includes(r)?(this.$wrapper().addClass(r+"-visible"),this._$bottom.addClass(r)):(this.$wrapper().removeClass(r+"-visible"),this._$bottom.removeClass(r))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!Y0.Ao(this._zIndex)){var i=Y0.Ue(this._zIndexInitValue());Y0.Od(this._zIndex),this._zIndex=i,this._$wrapper.css("zIndex",i),this._$content.css("zIndex",i)}},_getPositionControllerConfig(){var{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:r,outsideDragFactor:n}=this.option();return(0,O.l)({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:r,outsideDragFactor:n})},_initPositionController(){this._positionController=new OB(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){var{visible:e,useResizeObserver:i}=this.option();if(e&&(0,qe.Ym)()){var n=this._showAnimationProcessing&&!(null!=t&&t.forceStopAnimation)&&i;this._isAnimationPaused=n||void 0,this._stopAnimation(),null!=t&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t?.isDimensionChange),n&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt((0,Q.dz)(this._$content),10),height:parseInt((0,Q.Cr)(this._$content),10)})},_renderGeometryImpl:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){var t=this._getDragTarget(),e=this.option("dragEnabled");if(t){var i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new class gB{constructor(e){this.init(e)}init(e){var{dragEnabled:i,handle:r,draggableElement:n,positionController:a}=e;this._positionController=a,this._draggableElement=n,this._handle=r,this._dragEnabled=i,this.unsubscribe(),i&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){var e=this._getEventNames();Z.Z.on(this._handle,e.startEventName,i=>{this._dragStartHandler(i)}),Z.Z.on(this._handle,e.updateEventName,i=>{this._dragUpdateHandler(i)}),Z.Z.on(this._handle,e.endEventName,i=>{this._dragEndHandler(i)})}unsubscribe(){var e=this._getEventNames();Z.Z.off(this._handle,e.startEventName),Z.Z.off(this._handle,e.updateEventName),Z.Z.off(this._handle,e.endEventName)}_getEventNames(){return{startEventName:(0,be.V4)(hr.BL,"overlayDrag"),updateEventName:(0,be.V4)(hr.pB,"overlayDrag"),endEventName:(0,be.V4)(hr.ut,"overlayDrag")}}_dragStartHandler(e){var i=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=i.top,e.maxBottomOffset=i.bottom,e.maxLeftOffset=i.left,e.maxRightOffset=i.right}_dragUpdateHandler(e){this._moveByOffset({top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x}),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,i,r){if(this._dragEnabled){r.preventDefault(),r.stopPropagation();var n=this._fitOffsetIntoAllowedRange(e,i);this._moveByOffset(n),this._dragEndHandler(r)}}_fitOffsetIntoAllowedRange(e,i){var r=this._getAllowedOffsets();return{top:(0,Ut.n$)(e,-r.top,r.bottom),left:(0,Ut.n$)(i,-r.left,r.right)}}_getContainerDimensions(){var e=tt.Z.getDocument(),i=this._positionController.$dragResizeContainer.get(0),r=(0,Q.Y_)(i),n=(0,Q.zp)(i);return(0,v.FJ)(i)&&(n=Math.max(e.body.clientHeight,n),r=Math.max(e.body.clientWidth,r)),{width:r,height:n}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return(0,v.FJ)(e)?{top:0,left:0}:(0,Q.os)(e)}_getElementPosition(){return(0,Q.os)(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),i=this._getElementDimensions();return{x:e.width-i.width,y:e.height-i.height}}_getOuterDelta(){var{width:e,height:i}=this._getElementDimensions(),r=this._positionController.outsideDragFactor;return{x:e*r,y:i*r}}_getFullDelta(){var e=this._getInnerDelta(),i=this._getOuterDelta();return{x:e.x+i.x,y:e.y+i.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};var r=this._getElementPosition(),n=this._getContainerPosition(),a=this._getOuterDelta();return{top:r.top-n.top+a.y,bottom:-r.top+n.top+e.y,left:r.left-n.left+a.x,right:-r.left+n.left+e.x}}_moveByOffset(e){var i=(0,gi.jt)(this._draggableElement);(0,gi.pB)(this._draggableElement,{left:i.left+e.left,top:i.top+e.top})}}(i),this.$overlayContent().toggleClass("dx-popup-draggable",e)}},_renderResize:function(){this._resizable=this._createComponent(this._$content,DB,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){var e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||ne.ZT)();var t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===Xs.flex?-e:0},_chooseHeightStrategy:function(t){var e="auto"===t.style.width||""===t.style.width,i=Xs.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(i=e||YB?Xs.inherit:Xs.flex),i},_getHeightCssStyles:function(t,e){var i={},r=this._getOptionValue("maxHeight",e),n=this._getOptionValue("minHeight",e),a=this._splitPopupHeight(),s=a.header+a.footer+a.contentVerticalOffsets+a.popupVerticalOffsets+this._heightStrategyChangeOffset(t,a.popupVerticalPaddings);if(t===Xs.static){if(!this._isAutoHeight()||r||n){var o=this.option("fullScreen")?Math.min((0,ti.l)(e).height,(0,qe.Jj)().innerHeight):(0,ti.l)(e).height;i={height:Math.max(0,o-s),minHeight:"auto",maxHeight:"auto"}}}else{var u=(0,C.Z)(this._positionController.$visualContainer).get(0),c=(0,Q.n2)(r,-s,u);i={height:"auto",minHeight:(0,Q.eK)(n,-s,u),maxHeight:c}}return i},_setHeightClasses:function(t,e){var i="";for(var r in Xs)Xs[r]!==e&&(i+=" "+Xs[r]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight:function(){var t=this.topToolbar(),e=this.bottomToolbar();return{header:(0,Q.$D)(t&&t.get(0)),footer:(0,Q.$D)(e&&e.get(0)),contentVerticalOffsets:(0,Q.sQ)(this.$overlayContent().get(0),!0),popupVerticalOffsets:(0,Q.sQ)(this.$content().get(0),!0),popupVerticalPaddings:(0,Q.sQ)(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),(0,qe.Ym)()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",(0,Q.Y_)(this.$overlayContent())===(0,Q.dz)(BB))},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e,i=t.value;switch(t.name){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),(0,ns.U_)(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),(0,ns.U_)(this.$overlayContent());break;case"container":var r;this.callBase(t),this.option("resizeEnabled")&&(null===(r=this._resizable)||void 0===r||r.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(t),null===(e=this._resizable)||void 0===e||e.option(t.name,t.value);break;case"onTitleRendered":this._createTitleRenderAction(t.value);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var n=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),n&&(this._renderGeometry(),(0,ns.U_)(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),(0,ns.U_)(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=t.value,this._toggleFullScreenClass(t.value),this._toggleSafariScrolling(),this._renderGeometry(),(0,ns.U_)(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return(0,gt.u)(this.$content())},$overlayContent:function(){return this._$content}});(0,kt.Z)("dxPopup",eS);const xa=eS;let jB=(()=>{class t extends xa{_getToolbarName(){return"dxToolbar"}}return t.defaultOptions=function(e){xa.defaultOptions(e)},t})();(0,kt.Z)("dxPopup",jB);class rk extends gn.Z{_supportedKeys(){var e={};return(!this.option("opened")||!this._list.option("focusedElement"))&&(e=this._button._supportedKeys()),(0,O.l)(super._supportedKeys(),e,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_i.x2)()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Yx.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,Er.Z,{icon:"overflow",template:"content",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:i=>{this.option("opened",!this.option("opened")),this._buttonClickAction(i)}})}_toggleActiveState(e,i,r){this._button._toggleActiveState(e,i,r)}_toggleMenuVisibility(e){var i=e??!this._popup.option("visible");e&&this._renderPopup(),this._popup.toggle(i),this.setAria("expanded",i)}_renderPopup(){if(!this._$popup){this._$popup=(0,C.Z)("<div>").appendTo(this.$element());var{rtlEnabled:e,container:i,animation:r}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(n){var{component:a}=n;a.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,contentTemplate:n=>this._renderList(n),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(e?"left":"right"),at:"bottom ".concat(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:r,onOptionChanged:n=>{var{name:a,value:s}=n;"visible"===a&&this.option("opened",s)},container:i,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:n=>this._closeOutsideDropDownHandler(n),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var e=this.$element(),i=e.offset().top,r=(0,Q.zp)((0,qe.Jj)()),n=Math.max(i,r-i-(0,Q.zp)(e));return Math.min(r,n-3-10)}_closeOutsideDropDownHandler(e){return!(0,C.Z)(e.target).closest(this.$element()).length}_renderList(e){var i=(0,C.Z)(e);i.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(i,fB,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:r=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(r)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_areaTarget:this.$element(),_itemAttributes:{role:"menuitem"},_listAttributes:{role:"button"}})}_itemOptionChanged(e,i,r){var n;null===(n=this._list)||void 0===n||n._itemOptionChanged(e,i,r),K_(this._list,e)}_getListDataSource(){var e;return null!==(e=this.option("dataSource"))&&void 0!==e?e:this.option("items")}_setListDataSource(){var e;null===(e=this._list)||void 0===e||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){super._toggleVisibility(e),this._button.option("visible",e)}_optionChanged(e){var i,r,n,{name:a,value:s}=e;switch(a){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(i=this._list)||void 0===i||i.option(a,this._getTemplate(s));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(r=this._list)||void 0===r||r.option(a,s),super._optionChanged(e);break;case"onItemRendered":null===(n=this._list)||void 0===n||n.option(a,s);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(s),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(a,s);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>K_(this._list,e))}}var iS="dx-state-invisible",ag="dx-toolbar-item-auto-hide",Q0="dx-toolbar-item-invisible";class sk{constructor(e){this._toolbar=e}_initMarkup(){(0,ne.g0)(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var e=(0,C.Z)("<div>").appendTo(this._overflowMenuContainer()),i=this._toolbar._createActionByOption("onItemClick"),r=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,rk,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>r,onItemClick:n=>{i(n)},container:this._toolbar.option("menuContainer"),onOptionChanged:n=>{var{name:a,value:s}=n;"opened"===a&&this._toolbar.option("overflowMenuVisible",s),"items"===a&&this._updateMenuVisibility(s)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,C.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){var i=e??this._getMenuItems(),r=i.length&&this._hasVisibleMenuItems(i);this._toggleMenuVisibility(r)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass(iS,!e)}_renderMenuItems(){(0,ne.g0)(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var e;return(0,ne.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],i=>!this._toolbar._isMenuItem(i))}_getHiddenItems(){return this._toolbar._itemContainer().children(".".concat(ag,".").concat(Q0)).not(".".concat(iS))}_getMenuItems(){var e,i,r=(0,ne.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],s=>this._toolbar._isMenuItem(s)),n=this._getHiddenItems();return this._restoreItems=null!==(i=this._restoreItems)&&void 0!==i?i:[],[...[].slice.call(n).map(s=>{var o=this._toolbar._getItemData(s),d=(0,C.Z)(s),u=d.children();return(0,O.l)({menuItemTemplate:()=>(this._restoreItems.push({container:d,item:u}),(0,C.Z)("<div>").addClass(ag).append(u))},o)}),...r]}_hasVisibleMenuItems(e){var i=e??this._toolbar.option("items"),r=!1,n=(0,Pt.vb)("visible"),a=(0,Pt.vb)("locateInMenu");return(0,U.S6)(i,function(s,o){var d=n(o,{functionsAsIs:!0}),u=a(o,{functionsAsIs:!0});(!1!==d&&("auto"===u||"always"===u)||"menu"===o.location)&&(r=!0)}),r}_arrangeItems(){var e;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,U.S6)(null!==(e=this._restoreItems)&&void 0!==e?e:[],function(r,n){(0,C.Z)(n.container).append(n.item)}),this._restoreItems=[];var i=(0,Q.dz)(this._toolbar.$element());return this._hideOverflowItems(i),i}_hideOverflowItems(e){var i,r=this._toolbar.$element().find(".".concat(ag));if(r.length){e=null!==(i=e)&&void 0!==i?i:(0,Q.dz)(this._toolbar.$element()),(0,C.Z)(r).removeClass(Q0);for(var n=this._getItemsWidth();r.length&&e<n;){var a=r.eq(-1);n-=(0,Q.Y_)(a),a.addClass(Q0),r.splice(-1,1)}}}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth([this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,i,r){var n;"disabled"!==i&&"options.disabled"!==i||!this._toolbar._isMenuItem(e)?this.renderMenuItems():null===(n=this._menu)||void 0===n||n._itemOptionChanged(e,i,r)}_renderItem(e,i){"auto"===e.locateInMenu&&i.addClass(ag)}_optionChanged(e,i){var r,n,a,s,o;switch(e){case"disabled":null===(r=this._menu)||void 0===r||r.option(e,i);break;case"overflowMenuVisible":null===(n=this._menu)||void 0===n||n.option("opened",i);break;case"onItemClick":null===(a=this._menu)||void 0===a||a.option(e,i);break;case"menuContainer":null===(s=this._menu)||void 0===s||s.option("container",i);break;case"menuItemTemplate":null===(o=this._menu)||void 0===o||o.option("itemTemplate",i)}}}class rS extends l1{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){"height"!==e&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new p1(this):new sk(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,i,r,n){var a=super._renderItem(e,i,r,n);this._layoutStrategy._renderItem(i,a);var{widget:s,showText:o}=i;return"dxButton"===s&&"inMenu"===o&&a.toggleClass("dx-toolbar-text-auto-hide"),a}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}}_itemOptionChanged(e,i,r){this._isMenuItem(e)||super._itemOptionChanged(e,i,r),this._layoutStrategy._itemOptionChanged(e,i,r),("disabled"===i||"options.disabled"===i)&&K_(this,e),"location"===i&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>K_(this,e))}_isMenuItem(e){return"menu"===e.location||"always"===e.locateInMenu}_isToolbarItem(e){return void 0===e.location||"never"===e.locateInMenu}_optionChanged(e){var{name:i,value:r}=e;switch(this._layoutStrategy._optionChanged(i,r),i){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}(0,kt.Z)("dxToolbar",rS);const dk=rS;var nS="toolbar-button",aS=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],ck={_getToolbarItems:()=>[],_getButtonContainer(){return(0,C.Z)("<div>").addClass(this.addWidgetPrefix(nS))},_getToolbarButtonClass(t){var e=t?" ".concat(t):"";return this.addWidgetPrefix(nS)+e},_getToolbarOptions(){var t=this.option("toolbar"),e={toolbarOptions:{items:this._getToolbarItems(),visible:t?.visible,disabled:t?.disabled,onItemRendered(n){var a=n.itemData.onItemRendered;a&&a(n)}}},i=t?.items;return e.toolbarOptions.items=this._normalizeToolbarItems(e.toolbarOptions.items,i),this.executeAction("onToolbarPreparing",e),e.toolbarOptions&&!(0,v.$K)(e.toolbarOptions.visible)&&(e.toolbarOptions.visible=!!e.toolbarOptions.items?.length),e.toolbarOptions},_normalizeToolbarItems(t,e){t.forEach(s=>{if(!aS.includes(s.name))throw new Error("Default toolbar item '".concat(s.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var i={location:"after"},r=Array.isArray(e);if(!(0,v.$K)(e))return t;r||(e=[e]);var n={};t.forEach(s=>{n[s.name]=s});var a=e.map(s=>((0,v.HD)(s)&&(s={name:s}),(0,v.$K)(s.name)&&((0,v.$K)(n[s.name])?s=(0,O.l)(!0,{},n[s.name],s):aS.includes(s.name)&&(s=(0,je.Z)((0,je.Z)({},s),{visible:!1}))),(0,O.l)(!0,{},i,s)));return r?a:a[0]},_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var t=this.element();t.addClass(this.addWidgetPrefix("header-panel"));var e=le.Z.format(this.component.NAME+"-ariaToolbar"),i=(0,C.Z)("<div>").attr("aria-label",e).appendTo(t);this._toolbar=this._createComponent(i,dk,this._toolbarOptions)}},_columnOptionChanged:ne.ZT,_handleDataChanged(){this._requireReady&&this.render()},init(){this.callBase(),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})},render(){this._toolbarOptions=this._getToolbarOptions(),this.callBase.apply(this,arguments)},setToolbarItemDisabled(t,e){var i=this._toolbar;if(i){var n=(i.option("items")||[]).findIndex(s=>s.name===t);if(!(n<0)){var a=i.option("items[".concat(n,"]"));i.option("items[".concat(n,"].disabled"),e),a.options&&i.option("items[".concat(n,"].options.disabled"),e)}}},updateToolbarDimensions(){var t;null===(t=this._toolbar)||void 0===t||t.updateDimensions()},getHeaderPanel(){return this.element()},getHeight(){return this.getElementHeight()},optionChanged(t){if("onToolbarPreparing"===t.name&&(this._invalidate(),t.handled=!0),"toolbar"===t.name&&(t.handled=!0,this._toolbar)){var e=(0,Pt.Zw)(t.fullName),i=t.fullName.replace(/^toolbar\./,"");if(1===e.length){var r=this._getToolbarOptions();this._toolbar.option(r)}else if("items"===e[1])if(2===e.length){var n=this._getToolbarOptions();this._toolbar.option("items",n.items)}else if(3===e.length){var a=this._normalizeToolbarItems(this._getToolbarItems(),t.value);this._toolbar.option(i,a)}else e.length>=4&&this._toolbar.option(i,t.value);else this._toolbar.option(i,t.value)}this.callBase(t)},isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)},allowDragging:ne.ZT},sS={defaultOptions:()=>({}),views:{headerPanel:nl.inherit(ck)},extenders:{controllers:{resizing:{_updateDimensionsCore(){this.callBase.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};l.registerModule("headerPanel",sS),l.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var J0=gn.Z.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var t=this.callBase();return(0,U.S6)(l.modules,function(){(0,v.mf)(this.defaultOptions)&&(0,O.l)(!0,t,this.defaultOptions())}),t},_setDeprecatedOptions(){this.callBase(),(0,O.l)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,_i.x2)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>pi.Z.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:t=>"desktop"!==t.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),l.processModules(this,l),l.callModuleItemsMethod(this,"init")},_clean:ne.ZT,_optionChanged(t){l.callModuleItemsMethod(this,"optionChanged",[t]),t.handled||this.callBase(t)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(t){t&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var t=this;(0,ne.g0)(()=>{t._renderContentImpl()})},_getTemplate(t){var e=t;return(0,v.HD)(e)&&e.startsWith("#")&&(e=(0,C.Z)(t),ba.k.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(e)},_dispose(){this.callBase(),l.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),l.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){l.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(t){return this._controllers[t]},getView(t){return this._views[t]},focus(t){this.getController("keyboardNavigation").focus(t)}});J0.registerModule=l.registerModule.bind(l),(0,kt.Z)("dxDataGrid",J0);var mk=k(4018),vk=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,Ck=function t(e){e&&(0,U.S6)(e,(i,r)=>{if((0,v.PO)(r)||Array.isArray(r))t(r);else if("string"==typeof r){var n=vk.exec(r);n&&(e[i]=new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])))}})},bk=zt.ViewController.inherit(function(){var t=function(i){var r="sessionStorage"===i.type?(0,mk.y)():(0,qe.Jj)().localStorage;if(!r)throw new Error("E1007");return r},e=function(i){return(0,v.$K)(i.storageKey)?i.storageKey:"storage"};return{_loadState(){var i=this.option("stateStoring");if("custom"===i.type)return i.customLoad&&i.customLoad();try{return JSON.parse(t(i).getItem(e(i)))}catch(r){Nt.Z.log("W1022","State storing",r.message)}},_saveState(i){var r=this.option("stateStoring");if("custom"!==r.type)try{t(r).setItem(e(r),JSON.stringify(i))}catch(n){Nt.Z.log(n.message)}else r.customSave&&r.customSave(i)},publicMethods:()=>["state"],isEnabled(){return this.option("stateStoring.enabled")},init(){var i=this;return i._state={},i._isLoaded=!1,i._isLoading=!1,i._windowUnloadHandler=function(){void 0!==i._savingTimeoutID&&i._saveState(i.state())},Z.Z.on((0,qe.Jj)(),"unload",i._windowUnloadHandler),i},isLoaded(){return this._isLoaded},isLoading(){return this._isLoading},load(){this._isLoading=!0;var i=(0,Y.p4)(this._loadState());return i.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(r=>{null!==r&&!(0,v.Qr)(r)&&this.state(r)}),i},state(i){if(!arguments.length)return(0,O.l)(!0,{},this._state);this._state=(0,O.l)({},i),Ck(this._state)},save(){var i=this;clearTimeout(i._savingTimeoutID),i._savingTimeoutID=setTimeout(()=>{i._saveState(i.state()),i._savingTimeoutID=void 0},i.option("stateStoring.savingTimeout"))},optionChanged(i){"stateStoring"===i.name?(this.isEnabled()&&!this.isLoading()&&this.load(),i.handled=!0):this.callBase(i)},dispose(){clearTimeout(this._savingTimeoutID),Z.Z.off((0,qe.Jj)(),"unload",this._windowUnloadHandler)}}}()),Ik={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:bk},extenders:{views:{rowsView:{init(){var t=this,e=t.getController("data");t.callBase(),e.stateLoaded.add(()=>{if(e.isLoaded()&&!e.getDataSource()){t.setLoading(!1),t.renderNoDataText();var i=t.component.getView("columnHeadersView");i&&i.render(),t.component._fireContentReadyAction()}})}}},controllers:{stateStoring:{init(){this.callBase.apply(this,arguments),(t=>{var e=t.getController("columns"),i=t.getController("selection"),r=t.getController("export"),n=t.getController("data");e&&e.columnsChanged.add(()=>{t.updateState({columns:e.getUserState()})}),i&&i.selectionChanged.add(a=>{t.updateState({selectedRowKeys:a.selectedRowKeys,selectionFilter:a.selectionFilter})}),n&&(t._initialPageSize=t.option("paging.pageSize"),t._initialFilterValue=t.option("filterValue"),n.changed.add(()=>{var a=(t=>{var e=t.getView("pagerView"),i=t.getController("data"),r={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:t.option("filterPanel.filterEnabled")},filterValue:t.option("filterValue"),focusedRowKey:t.option("focusedRowEnabled")?t.option("focusedRowKey"):void 0};return(0,O.l)(r,i.getUserState())})(t);t.updateState(a)})),r&&r.selectionOnlyChanged.add(()=>{t.updateState({exportSelectionOnly:r.selectionOnly()})})})(this)},isLoading(){return this.callBase()||this.getController("data").isStateLoading()},state(t){var e=this.callBase.apply(this,arguments);return void 0!==t&&this.applyState((0,O.l)(!0,{},t)),e},updateState(t){if(this.isEnabled()){var e=this.state(),i=(0,O.l)({},e,t),r=(0,ne.k3)(e),n=(0,ne.k3)(i);(0,ne.bY)(r,n)||(t=(0,O.l)(!0,{},t),(0,O.l)(this._state,t),this.save())}else(0,O.l)(this._state,t)},applyState(t){var e,{allowedPageSizes:i}=t,{searchText:r}=t,{selectedRowKeys:n}=t,{selectionFilter:a}=t,s=this.getController("export"),o=this.getController("columns"),d=this.getController("data"),u=this.option("scrolling.mode"),c="virtual"===u||"infinite"===u,f=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),g=null===(e=this.getView("rowsView"))||void 0===e?void 0:e.hasHeight();this.component.beginUpdate(),o&&o.setUserState(t.columns),s&&s.selectionOnly(t.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",n||[]),this.option("selectionFilter",a),i&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=i),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",t.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",r||""),this.option("filterValue",((t,e)=>{var i=t.getController("filterSync"),r=t.getController("columns");return i?e.columns||void 0!==e.filterValue?e.filterValue||i.getFilterValueFromColumns(e.columns):t._initialFilterValue||i.getFilterValueFromColumns(r.getColumns()):null})(this,t)),this.option("filterPanel.filterEnabled",!t.filterPanel||t.filterPanel.filterEnabled),this.option("paging.pageIndex",(!c||g)&&t.pageIndex||0),this.option("paging.pageSize",c&&!f||!(0,v.$K)(t.pageSize)?this._initialPageSize:t.pageSize),d&&d.reset()}},columns:{_shouldReturnVisibleColumns(){var t=this.callBase.apply(this,arguments),e=this.getController("stateStoring");return t&&(!e.isEnabled()||e.isLoaded())}},data:{callbackNames(){return this.callBase().concat(["stateLoaded"])},_refreshDataSource(){var{callBase:t}=this,e=this.getController("stateStoring");if(e.isEnabled()&&!e.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var i=new Y.BH;return this._restoreStateTimeoutID=setTimeout(()=>{e.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{t.call(this),this.stateLoaded.fire(),i.resolve()}).fail(r=>{this.stateLoaded.fire(),this._handleLoadError(r||"Unknown error"),i.reject()})}),i.promise()}this.isStateLoading()||t.call(this)},isLoading(){var t=this.getController("stateStoring");return this.callBase()||t.isLoading()},isStateLoading(){return(0,v.$K)(this._restoreStateTimeoutID)},isLoaded(){return this.callBase()&&!this.isStateLoading()},dispose(){clearTimeout(this._restoreStateTimeoutID),this.callBase()}},selection:{_fireSelectionChanged(t){var e=this.getController("stateStoring"),i=this.option("selection.deferred");e.isLoading()&&i||this.callBase.apply(this,arguments)}}}}};l.registerModule("stateStoring",Ik);var Tk=k(9348),oS="dx-editor-cell",lS="dx-selection",dl="dx-select-checkbox",dS="dx-command-select",uS="dx-data-row",Sa="selection.showCheckBoxesMode",yc="selection.mode",hS=function(t,e){var i=t.getController("selection"),r=t.getView("rowsView"),n=(0,C.Z)(e.target).closest(".".concat(uS)),a=r.getRowIndex(n);a<0||("onLongTap"===t.option(Sa)?i.isSelectionWithCheckboxes()?i.stopSelectionWithCheckboxes():i.startSelectionWithCheckboxes():("onClick"===t.option(Sa)&&i.startSelectionWithCheckboxes(),"always"!==t.option(Sa)&&i.changeItemSelection(a,{control:!0})))},Bk=(t,e)=>{var{component:i}=e,r=i.getView("rowsView");i.option("renderAsync")&&!i.option("selection.deferred")&&(e.value=i.isRowSelected(e.row.key)),r.renderSelectCheckBoxContainer((0,C.Z)(t),e)},kk=(t,e)=>{var{column:i}=e,r=(0,C.Z)(t),n=e.component.getView("columnHeadersView");r.addClass(oS),n._renderSelectAllCheckBox(r,i),n._attachSelectAllCheckBoxClickEvent(r)},Lk={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",maxFilterLengthInRequest:1500,deferred:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class Mk extends zt.Controller{init(){var e,{deferred:i,selectAllMode:r,mode:n}=null!==(e=this.option("selection"))&&void 0!==e?e:{};"infinite"===this.option("scrolling.mode")&&!i&&"multiple"===n&&"allPages"===r&&Nt.Z.log("W1018"),this._dataController=this.getController("data"),this._selectionMode=n,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){var i=this.option("selection.deferred"),r=e.filter(a=>"remove"===a.type).map(a=>a.key);if(i){var n=this._dataController.items().filter(a=>a.isSelected).map(a=>a.key);r=r.filter(a=>n.find(s=>(0,ne.bY)(s,a)))}r.length&&this.deselectRows(r)}_updateSelectedOnPush(e){if(!this.option("selection.deferred")){var r=e.filter(a=>"update"===a.type),n=this.getSelectedRowsData();(0,zr.ii)({keyInfo:this._selection.options,data:n,changes:r})}}_getSelectionConfig(){var e,i=this._dataController,r=this.getController("columns"),n=null!==(e=this.option("selection"))&&void 0!==e?e:{},{deferred:a}=n,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,d=this.option("selection.allowSelectAll"),u=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:a,maxFilterLengthInRequest:n.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,allowLoadByRange(){var c=r.getGroupColumns().length>0;return o&&!u&&!c&&d&&!a},key:()=>i?.key(),keyOf:c=>i?.keyOf(c),dataFields(){var c;return null===(c=i.dataSource())||void 0===c?void 0:c.select()},load(c){var f;return(null===(f=i.dataSource())||void 0===f?void 0:f.load(c))||(new Y.BH).resolve([])},plainItems:()=>i.items(!0),isItemSelected:c=>c.selected,isSelectableItem:c=>"data"===c?.rowType&&!c.isNewRow,getItemData:c=>(0,v.$K)(c?.rowType)?c?.oldData||c?.data:c,filter:()=>i.getCombinedFilter(a),totalCount:()=>i.totalCount(),getLoadOptions(c,f,g){var m,y,{sort:w,filter:I}=null!==(y=null===(m=i.dataSource())||void 0===m?void 0:m.lastLoadOptions())&&void 0!==y?y:{},P=Math.min(c,f),$=Math.max(c,f);return(0,v.$K)(g)&&(P=Math.min(g,P),$=Math.max(g,$)),{skip:P,take:$-P+1,filter:I,sort:w}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var e=this.getController("columns"),i=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:i,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:dS,width:"auto",cellTemplate:Bk,headerCellTemplate:kk}),e.columnOption("command:select","visible",i)}_createSelection(){var e=this._getSelectionConfig();return new Tk.Z(e)}_fireSelectionChanged(e){var i=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(i),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){var{isDeferredMode:i}=e,{selectionFilter:r}=e,{selectedItemKeys:n}=e,{removedItemKeys:a}=e;"onClick"===this.option(Sa)&&((i?r&&function(t,e){var i=0,r=t._dataController.store(),n=r&&r.key(),a=Array.isArray(n);if(!e.length)return!1;if(a&&Array.isArray(e[0])&&"and"===e[1]){for(var s=0;s<e.length;s++)if(Array.isArray(e[s])){if(e[s][0]!==n[i]||"="!==e[s][1])return!0;i++}return!1}return n!==e[0]}(this,r):n.length>1)?this.startSelectionWithCheckboxes():(i?r&&!r.length:0===n.length&&a.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){var i,r=this.option("selection.deferred"),n=this._selection.selectionFilter(),a=this._dataController,s=a.items(!0),o=a.items();if(s){var d=this.isSelectionWithCheckboxes(),u=this.getChangedItemIndexes(s),c=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:n,isDeferredMode:r}),(u.length||d!==this.isSelectionWithCheckboxes())&&a.updateItems({changeType:"updateSelection",itemIndexes:c}),r?(this.option("selectionFilter",n),i={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",e.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,i={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),this._fireSelectionChanged(i)}}getChangedItemIndexes(e){for(var i=[],r=this.option("selection.deferred"),n=0,{length:a}=e;n<a;n++){var s=e[n],o=this.isRowSelected(r?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&i.push(n)}return i}callbackNames(){return["selectionChanged"]}optionChanged(e){switch(super.optionChanged(e),e.name){case"selection":var i=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==e.fullName){var r=this._selectionMode,n=this.option("selectedRowKeys");i!==r&&("single"===r?n.length>1&&(n=[n[0]]):"multiple"!==r&&(n=[])),this.selectRows(n).always(()=>{this._fireSelectionChanged()})}this.getController("columns").updateColumns(),e.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":var a=e.value||[];Array.isArray(a)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!a.length)&&this.selectRows(a),e.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(yc)&&("always"===this.option(Sa)||"onClick"===this.option(Sa)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(Sa)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var e,i=null!==(e=this.option("selectedRowKeys"))&&void 0!==e?e:[];return!this.option("selection.deferred")&&i.length?this.selectedItemKeys(i):(new Y.BH).resolve().promise()}selectedItemKeys(e,i,r,n){return this._selection.selectedItemKeys(e,i,r,n)}getSelectedRowKeys(){return this._selection.getSelectedItemKeys()}selectRows(e,i){return this.selectedItemKeys(e,i)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){var i=this._dataController.items(),r=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,U.S6)(e,function(){var n=i[this];n&&"data"===n.rowType&&r.push(n.key)}),this.selectRows(r)}getSelectedRowsData(){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,i,r){i=i||{},this.isSelectionWithCheckboxes()&&(i.control=!0);var n=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(n,i,r)}focusedItemIndex(e){if(!(0,v.$K)(e))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(yc)&&("always"===this.option(Sa)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(yc)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:{init(){var t=this.getController("selection"),e=this.option("selection.deferred");this.callBase.apply(this,arguments),e&&t._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})},_loadDataSource(){var t=this;return t.callBase().always(()=>{t.getController("selection").refresh()})},_processDataItem(t,e){var i=this.getController("selection"),r=i.isSelectColumnVisible(),n=e.isDeferredSelection=void 0===e.isDeferredSelection?this.option("selection.deferred"):e.isDeferredSelection,a=this.callBase.apply(this,arguments);if(a.isSelected=i.isRowSelected(n?a.data:a.key),r&&a.values)for(var s=0;s<e.visibleColumns.length;s++)if("select"===e.visibleColumns[s].command){a.values[s]=a.isSelected;break}return a},refresh(t){var e=this,i=new Y.BH;return this.callBase.apply(this,arguments).done(()=>{!t||t.selection?e.getController("selection").refresh().done(i.resolve).fail(i.reject):i.resolve()}).fail(i.reject),i.promise()},_handleDataChanged(t){this.callBase.apply(this,arguments),(!t||"refresh"===t.changeType)&&!this._repaintChangesOnly&&this.getController("selection").focusedItemIndex(-1)},_applyChange(t){if(!t||"updateSelection"!==t.changeType)return this.callBase.apply(this,arguments);t.items.forEach((e,i)=>{var r=this._items[i];r&&(r.isSelected=e.isSelected,r.values=e.values)})},_endUpdateCore(){var t=this._changes;if(t.length>1&&t.every(r=>"updateSelection"===r.changeType)){var i=t.map(r=>r.itemIndexes||[]).reduce((r,n)=>r.concat(n));this._changes=[{changeType:"updateSelection",itemIndexes:i}]}this.callBase.apply(this,arguments)}},contextMenu:{_contextMenuPrepared(t){var e=t.event;e.originalEvent&&"dxhold"!==e.originalEvent.type||t.items&&t.items.length>0||hS(this,e)}}},views:{columnHeadersView:{init(){this.callBase(),this.getController("selection").selectionChanged.add(this._updateSelectAllValue.bind(this))},_updateSelectAllValue(){var t=this.element(),e=t&&t.find(".".concat(dl));if(t&&e.length&&"multiple"===this.option("selection.mode")){var i=this.getController("selection").isSelectAll(),r=!1!==i,n=this.option("selection.allowSelectAll")?!this.getController("data").isEmpty():r;e.dxCheckBox("instance").option({visible:n,value:i})}},_handleDataChanged(t){this.callBase(t),(!t||"refresh"===t.changeType||t.repaintChangesOnly&&"update"===t.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})},_renderSelectAllCheckBox(t,e){var i=this,r=i.getController("selection"),n=i.getController("data").isEmpty(),a=(0,C.Z)("<div>").appendTo(t).addClass(dl);return i.setAria("label",le.Z.format("dxDataGrid-ariaSelectAll"),a),i.getController("editorFactory").createEditor(a,(0,O.l)({},e,{parentType:"headerRow",dataType:"boolean",value:r.isSelectAll(),editorOptions:{visible:!n&&(i.option("selection.allowSelectAll")||!1!==r.isSelectAll())},tabIndex:i.option("useLegacyKeyboardNavigation")?-1:i.option("tabIndex")||0,setValue(s,o){var d=i.option("selection.allowSelectAll");o.component.option("visible",d||!1!==o.component.option("value")),o.event&&r.isSelectAll()!==s&&(o.value&&!d?o.component.option("value",!1):o.value?r.selectAll():r.deselectAll(),o.event.preventDefault())}})),a},_attachSelectAllCheckBoxClickEvent(t){Z.Z.on(t,ii.u,this.createAction(e=>{var{event:i}=e;(0,C.Z)(i.target).closest(".".concat(dl)).length||Z.Z.trigger((0,C.Z)(i.currentTarget).children(".".concat(dl)),ii.u),i.preventDefault()}))}},rowsView:{renderSelectCheckBoxContainer(t,e){"data"!==e.rowType||e.row.isNewRow?ye.setEmptyText(t):(t.addClass(oS),this._attachCheckBoxClickEvent(t),this._renderSelectCheckBox(t,e))},_renderSelectCheckBox(t,e){var i=(0,C.Z)("<div>").addClass(dl).appendTo(t);return this.setAria("label",le.Z.format("dxDataGrid-ariaSelectRow"),i),this.getController("editorFactory").createEditor(i,(0,O.l)({},e.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:e.value,setValue(r,n){var a;"keydown"===(null===(a=n?.event)||void 0===a?void 0:a.type)&&Z.Z.trigger(n.element,ii.u,n)},row:e.row})),i},_attachCheckBoxClickEvent(t){Z.Z.on(t,ii.u,this.createAction(function(e){var i=this.getController("selection"),{event:r}=e,n=this.getRowIndex((0,C.Z)(r.currentTarget).closest(".".concat("dx-row")));n>=0&&(i.startSelectionWithCheckboxes(),i.changeItemSelection(n,{shift:r.shiftKey}),(0,C.Z)(r.target).closest(".".concat(dl)).length&&this.getController("data").updateItems({changeType:"updateSelection",itemIndexes:[n]}))}))},_update(t){var e=this,i=e.getTableElements();"updateSelection"===t.changeType?i.length>0&&((0,U.S6)(i,(r,n)=>{(0,U.S6)(t.itemIndexes||[],(a,s)=>{var o;if(t.items[s]&&(o=e._getRowElements((0,C.Z)(n)).eq(s)).length){var{isSelected:d}=t.items[s];o.toggleClass(lS,void 0!==d&&d).find(".".concat(dl)).dxCheckBox("option","value",d),e.setAria("selected",d,o)}})}),e._updateCheckboxesClass()):e.callBase(t)},_createTable(){var t=this,e=t.option("selection.mode"),i=t.callBase.apply(t,arguments);return"none"!==e&&(("onLongTap"===t.option(Sa)||!ma.touch)&&Z.Z.on(i,(0,be.V4)(Gd.Z.name,"dxDataGridRowsView"),".".concat(uS),t.createAction(r=>{hS(t.component,r.event),r.event.stopPropagation()})),Z.Z.on(i,"mousedown selectstart",t.createAction(r=>{var{event:n}=r;n.shiftKey&&n.preventDefault()}))),i},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var{isSelected:i}=t;i&&e.addClass(lS),"none"!==this.option(yc)&&this.setAria("selected",i,e)}return e},_rowClick(t){var e=t.event,i=(0,C.Z)(e.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,C.Z)(e.target))||(!i&&("multiple"!==this.option(yc)||"always"!==this.option(Sa))&&this.getController("selection").changeItemSelection(t.rowIndex,{control:(0,be.j1)(e),shift:e.shiftKey})&&(e.preventDefault(),t.handled=!0),this.callBase(t))},isClickableElement:t=>!!t.closest(".".concat(dS)).length,_renderCore(t){var e=this.callBase(t);return this._updateCheckboxesClass(),e},_updateCheckboxesClass(){var t=this.getTableElements(),e=this.getController("selection"),i=e.isSelectColumnVisible()&&!e.isSelectionWithCheckboxes();(0,U.S6)(t,(r,n)=>{(0,C.Z)(n).toggleClass("dx-select-checkboxes-hidden",i)})}}}}};l.registerModule("selection",Lk);var sg=k(1846),cS="column-chooser-button",pS="column-chooser",fS="dx-column-chooser-item",_S=function(t,e){var i=[],r="select"===t.option("columnChooser.mode");return e.length&&(0,U.S6)(e,(n,a)=>{var s={text:a.caption,cssClass:a.cssClass,allowHiding:a.allowHiding,expanded:!0,id:a.index,disabled:!1,disableCheckBox:!1===a.allowHiding,parentId:(0,v.$K)(a.ownerBand)?a.ownerBand:null};r&&(s.selected=a.visible),i.push(s)}),i},Wk={renderShowColumnChooserButton(t){var a,e=this,i=e.addWidgetPrefix(cS),r=e.option("columnChooser.enabled"),n=t.find(".".concat(i));r?n.length?n.show():(a=(0,C.Z)("<div>").addClass(i).appendTo(t),e._createComponent(a,Er.Z,{icon:pS,onClick(){e.getView("columnChooserView").showColumnChooser()},hint:e.option("columnChooser.title"),integrationOptions:{}})):n.hide()},getPosition(){var t=this.getView("rowsView");return{my:"right bottom",at:"right bottom",of:t&&t.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}},Kk=zt.ViewController.inherit(Wk),Gk={_resizeCore:ne.ZT,_updateList(t){var e,i=this._popupContainer.$content(),r="select"===this.option("columnChooser.mode"),n=this._columnChooserList,a=this._columnsController.getChooserColumns(r);if(this._popupContainer.setAria({role:"dialog",label:le.Z.format("dxDataGrid-columnChooserTitle")}),r&&n&&t&&"selection"===t.changeType){e=_S(this,a);for(var s=0;s<e.length;s++){var{selected:o}=e[s],{id:d}=e[s];d===t.columnIndex&&(o?n.selectItem(d,o):n.unselectItem(d,o))}}else(!r||!n||"full"===t)&&(this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!r).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),r),e=_S(this,a),this._renderTreeView(i,e))},_initializePopupContainer(){var t=this,e=t.addWidgetPrefix("column-chooser"),i=t.element().addClass(e),r=t.option("columnChooser"),n=(0,_i.Vk)(),a=(0,_i.OD)(n),s=(0,_i.x2)(n),o={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:e},toolbarItems:[{text:r.title,toolbar:"top",location:a||s?"before":"center"}],position:t.getController("columnChooser").getPosition(),width:r.width,height:r.height,rtlEnabled:t.option("rtlEnabled"),container:r.container};a||s?(0,O.l)(o,{showCloseButton:!0}):o.toolbarItems[o.toolbarItems.length]={shortcut:"cancel"},(0,v.$K)(this._popupContainer)?this._popupContainer.option(o):(t._popupContainer=t._createComponent(i,xa,o),t._popupContainer.on("optionChanged",d=>{"visible"===d.name&&t.renderCompleted.fire()}))},_renderCore(t){this._popupContainer&&this._updateList(t)},_renderTreeView(t,e){var i=this,r=this.option("columnChooser"),n="select"===r.mode,a={items:e,dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:r.allowSearch,searchTimeout:r.searchTimeout,onItemRendered(d){if(d.itemData.disableCheckBox){var c,u=(0,C.Z)(d.itemElement).closest(".dx-treeview-node");if(u.length&&(c=u.find(".dx-checkbox")).length){var f=c.data("dxCheckBox");f&&f.option("disabled",!0)}}}},s=t.find(".dx-scrollable").data("dxScrollable"),o=s&&s.scrollTop();n&&!this._columnsController.isBandColumnsUsed()&&t.addClass(this.addWidgetPrefix("column-chooser-plain")),a.onContentReady=function(d){(0,ne.Su)(()=>{if(o){var u=(0,C.Z)(d.element).find(".dx-scrollable").data("dxScrollable");u&&u.scrollTo({y:o})}i.renderCompleted.fire()})},(0,O.l)(a,n?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList?(a.searchEnabled||(a.searchValue=""),this._columnChooserList.option(a)):(this._columnChooserList=this._createComponent(t,sg.Z,a),t.addClass(this.addWidgetPrefix("column-chooser-list")))},_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(e,i,r){(0,C.Z)(r).text(e.text).parent().addClass(e.cssClass).addClass(fS)}}},_prepareSelectModeConfig(){var t=this;return{selectNodesRecursive:!1,showCheckBoxesMode:"normal",onItemSelectionChanged:function(e){1!==t._columnsController.getVisibleColumns().filter(n=>!n.command).length||e.itemData.selected?setTimeout(()=>{t._columnsController.columnOption(e.itemData.id,"visible",e.itemData.selected)},300):e.component.selectItem(e.itemElement)}}},_columnOptionChanged(t){var{changeTypes:e}=t,{optionNames:i}=t,r="select"===this.option("columnChooser.mode");if(this.callBase(t),r){var a=i.showInColumnChooser||i.caption||i.visible||e.columns&&i.all;i.visible&&1===i.length&&void 0!==t.columnIndex?this.render(null,{changeType:"selection",columnIndex:t.columnIndex}):a&&this.render(null,"full")}},optionChanged(t){"columnChooser"===t.name?(this._initializePopupContainer(),this.render(null,"full")):this.callBase(t)},getColumnElements(){var e,t=[],i="select"===this.option("columnChooser.mode"),r=this._columnsController.getChooserColumns(i),n=this._popupContainer&&this._popupContainer.$content(),a=n&&n.find(".dx-treeview-node");return a&&r.forEach(s=>{var o=(e=a.filter("[data-item-id = '".concat(s.index,"']"))).length?e.children(".".concat(fS)).get(0):null;t.push(o)}),(0,C.Z)(t)},getName:()=>"columnChooser",getColumns(){return this._columnsController.getChooserColumns()},allowDragging(t,e){var i=t&&t.allowHiding&&("columnChooser"!==e||!t.visible&&this._columnsController.isParentColumnVisible(t.index));return this.isColumnChooserVisible()&&i},getBoundingRect(){var t=this._popupContainer&&this._popupContainer.$overlayContent();if(t&&t.is(":visible")){var e=t.offset();return{left:e.left,top:e.top,right:e.left+(0,Q.Y_)(t),bottom:e.top+(0,Q.zp)(t)}}return null},showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show()},hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible(){var t=this._popupContainer;return t&&t.option("visible")},publicMethods:()=>["showColumnChooser","hideColumnChooser"]},eb={defaultOptions:()=>({columnChooser:{enabled:!1,allowSearch:!1,searchTimeout:500,mode:"dragAndDrop",width:250,height:260,title:le.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:le.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:Kk},views:{columnChooserView:nl.inherit(Gk)},extenders:{views:{headerPanel:{_getToolbarItems(){var t=this.callBase();return this._appendColumnChooserItem(t)},_appendColumnChooserItem(t){var e=this;if(e.option("columnChooser.enabled")){var r=e.option("columnChooser.title");t.push({widget:"dxButton",options:{icon:pS,onClick:function(){e.component.getView("columnChooserView").showColumnChooser()},hint:r,text:r,onInitialized:function(a){(0,C.Z)(a.element).addClass(e._getToolbarButtonClass(e.addWidgetPrefix(cS)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return t},optionChanged(t){"columnChooser"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)},isVisible(){var t=this.option("columnChooser.enabled");return this.callBase()||t}}},controllers:{columns:{allowMoveColumn(t,e,i,r){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===r)&&this.callBase(t,e,i,r)}}}}};l.registerModule("columnChooser",eb);var og=k(389);function ul(t,e){for(var i=(0,On.G5)(e.group),r=[],n=0;n<t.length;n++)r.push([i[n].selector,"=",t[n]]);return e.filter&&r.push(e.filter),ye.combineFilters(r)}function gS(t,e,i){for(var r=(0,On.G5)(e.group),n=[],a=i?t.length-1:0;a<t.length;a++){for(var s=[],o=0;o<=a;o++){var{selector:d}=r[o];if(a!==o||null!==t[o]&&!1!==t[o]&&!0!==t[o]){var u=[d,a===o?r[o].desc?">":"<":"=",t[o]];s.push("<"===u[1]?[u,"or",[d,"=",null]]:u)}else!1===t[o]?s.push([d,"=",!!r[o].desc||null]):(t[o]?!r[o].desc:r[o].desc)?s.push([d,"<>",t[o]]):(s.push([d,"<>",null]),s.push([d,"=",null]))}n.push(l.combineFilters(s))}return n=l.combineFilters(n,"or"),l.combineFilters([n,e.filter])}var mS=en.Z.inherit(function(){var t=function(i,r){var{hash:n}=i;return n&&n[JSON.stringify(r)]},e=function(i,r){var o,n=0,a=i.length-1;if(!i.length)return 0;do{var s=a+n>>1;i[s].offset>r?a=s:n=s}while(a-n>1);for(o=n;o<=a&&!(i[o].offset>r);o++);return o};return{ctor(i){this._dataSource=i,this.reset()},reset(){this._groupsInfo=[],this._totalCountCorrection=0},totalCountCorrection(){return this._totalCountCorrection},updateTotalItemsCount(i){this._totalCountCorrection=i||0},isGroupItemCountable(i){return!this._isVirtualPaging()||!i.isContinuation},_isVirtualPaging(){var i=this._dataSource.option("scrolling.mode");return"virtual"===i||"infinite"===i},itemsCount(){var r=this._dataSource._dataSource,n=l.normalizeSortingInfo(r.group()||[]).length;return function s(o,d,u){var c=0;if(d)if(u)for(var f=0;f<d.length;f++)o.isGroupItemCountable(d[f])&&c++,c+=s(o,d[f].items,u-1);else c=d.length;return c}(this,r.items(),n)},foreachGroups(i,r,n,a,s){var o=this;return function d(u,c,f,g){var m=[];function y(se,fe,Se,Fe){var $e=fe&&se(fe,Se);return $e&&Fe.push($e),$e}for(var w=0;w<u.length;w++){if(g.push(u[w].data),!f&&!1===y(c,u[w].data,g,m))return!1;if(!u[w].data||u[w].data.isExpanded||n){var{children:I}=u[w],P=I.length&&d(I,c,f,g);if(P&&m.push(P),!1===P)return!1}if(f&&!1===y(c,u[w].data,g,m))return!1;(!u[w].data||u[w].data.offset!==u[w].offset)&&(a=!0),g.pop()}var $=s&&g.slice(0);return a&&Y.gx.apply(C.Z,m).always(()=>{o._updateGroupInfoOffsets(u,$)})}(o._groupsInfo,i,r,[])},_updateGroupInfoOffsets(i,r){r=r||[];for(var n=0;n<i.length;n++){var a=i[n];if(a.data&&a.data.offset!==a.offset){a.offset=a.data.offset;for(var s=0;s<r.length;s++)r[s].offset=a.offset}}i.sort((o,d)=>o.offset-d.offset)},findGroupInfo(i){for(var r,n=this._groupsInfo,a=0;n&&a<i.length;a++)n=(r=t(n,i[a]))&&r.children;return r&&r.data},addGroupInfo(i){for(var r,{path:n}=i,a=this._groupsInfo,s=0;s<n.length;s++){if(!(r=t(a,n[s]))){r={key:n[s],offset:i.offset,data:{offset:i.offset,isExpanded:!0,path:n.slice(0,s+1)},children:[]};var o=e(a,i.offset);a.splice(o,0,r),a.hash=a.hash||{},a.hash[JSON.stringify(r.key)]=r}s===n.length-1&&(r.data=i,r.offset!==i.offset&&this._updateGroupInfoOffsets(a)),a=r.children}},allowCollapseAll:()=>!0,refresh(i){var{storeLoadOptions:r}=i,n=(0,On.G5)(r.group||[]),a="_group"in this?(0,On.G5)(this._group||[]):n,s=Math.min(a.length,n.length);this._group=r.group;for(var o=0;o<s;o++)if(a[o].selector!==n[o].selector){s=o;break}s?function d(u,c,f){for(var g=0;g<u.length;g++)c+1>=f?u[g].children=[]:d(u[g].children,c+1,f)}(this._groupsInfo,0,s):this.reset()},handleDataLoading(){},handleDataLoaded(i,r){r(i)},handleDataLoadedCore(i,r){r(i)}}}());function tb(t,e,i,r){if(r=r||0,e>1&&i>0){var n=t-Math.floor(t/e)*e||e;return(n+=i-r-2)<0&&(n+=e),Math.floor(n/(e-r-1))}return 0}var vS=mS.inherit(function(){var t=function(f,g,m){return f.foreachGroups((y,w)=>{if(y.isExpanded)return g(y,w)},!0,!1,m,m)},e=function f(g,m,y,w,I,P,$){var se;if(w.items=w.items||[],w.paths=w.paths||[],w.count=w.count||0,w.lastCount=w.lastCount||0,y)for(var fe=0;fe<m.length;fe++){var Se=m[fe];if(void 0!==Se.items){if(I.push(Se.key),P)se=!0;else{var Fe=g.findGroupInfo(I);se=Fe&&Fe.isExpanded}se?Se.items?f(g,Se.items,y-1,w,I,P,$):1===y&&Se.count&&(!P||$)&&(w.items.push(Se),w.paths.push(I.slice(0)),w.count+=w.lastCount,w.lastCount=Se.count):(Se.collapsedItems=Se.items,Se.items=null),I.pop()}}},i=function(f,g,m,y,w){var P,I=f.findGroupInfo(y);I?(m?I.count=g.count>0?g.count:g.items&&g.items.length||0:g.count=I.count||g.count,I.offset=w):(m&&(P=g.count>0?g.count:g.items.length),f.addGroupInfo({isExpanded:f._isGroupExpanded(y.length-1),path:y.slice(0),offset:w,count:P||0}))},r=function f(g,m,y,w,I,P,$){var We,fe=(m.group?m.group.length:0)===w,Fe=0,$e=0;if(I=I||0,P=P||[],m.remoteOperations.paging&&!$&&(Fe=0===I?m.skip||0:m.skips[I-1]||0),I>=w)return y.length;for(var Ze=0;Ze<y.length;Ze++){var nt=y[Ze];if(nt){if(P.push(nt.key),!nt.count&&!nt.items||void 0===nt.items||(i(g,nt,fe,P,Fe+Ze),(We=nt.items?f(g,m,nt.items,w,I+1,P,Ze):nt.count||-1)<0))return-1;$e+=We,P.pop()}}return $e},n=function(f,g){return f&&f.length&&f[g]&&!!f[g].isExpanded},a=function(f,g,m){for(var y,w=m,I=0;I<f.length;I++)y=f[I].offset+1,I>0&&(y+=f[I-1].childrenTotalCount,g&&(y+=tb(w,g,y,I-1)*I)),w+=y;return w};function s(f,g,m,y){var w=g.items[y],I=f.skips&&f.skips[m],P=f.takes&&f.takes[m],$=y===g.items.length-1,se=0===y,Se=w.count>P+(se&&I||0);se&&void 0!==I&&(w.isContinuation=!0),$&&void 0!==P&&Se&&(w.isContinuationOnNextPage=!0)}function o(f){return!Array.isArray(f)}function d(f){o(f.data)||(f.data=new Y.BH)}function u(f,g,m,y,w,I){var $,se,fe,Se,Fe;g.isCustomLoading||(e(f,I,m,y={},[]),Se=(fe=m)-1,Fe=($=g).group?$.group.length:0,(se=y).skip=$.skips&&$.skips[Se],$.takes&&void 0!==$.takes[Se]&&(se.take=Fe===fe&&se.count?se.count-(se.skip||0):0,se.take+=$.takes[Se])),y.paths.length&&(g.group?g.group.length:0)-m>0?(d(g),function($,se,fe,Se,Fe,$e){var We=se.group||[],Ze=We[Fe+1],nt=[];(0,U.S6)(fe.paths,mt=>{var jt={requireTotalCount:!1,requireGroupCount:!0,group:[Ze],groupSummary:se.storeLoadOptions.groupSummary,filter:ul(fe.paths[mt],{filter:se.storeLoadOptions.filter,group:We}),select:se.storeLoadOptions.select};0===mt&&(jt.skip=fe.skip||0),mt===fe.paths.length-1&&(jt.take=fe.take);var $t=0===jt.take?[]:$._dataSource.loadFromStore(jt);(0,Y.gx)($t).done(mi=>{var Oe=fe.items[mt];s(se,fe,Fe,mt),Oe.items=mi}),nt.push($t)}),Y.gx.apply(null,nt).done(()=>{r($,se,$e,Se+1),u($,se,Se+1,fe,Fe+1,$e)})}(f,g,y,m,w,I)):y.paths.length&&g.storeLoadOptions.group?(d(g),function($,se,fe,Se){var Fe=[],$e=se.group||[];(0,U.S6)(fe.paths,(mt,jt)=>{Fe.push(ul(jt,{group:se.isCustomLoading?se.storeLoadOptions.group:$e}))});var{filter:We}=se.storeLoadOptions;se.storeLoadOptions.isLoadingAll||(We=l.combineFilters([We,l.combineFilters(Fe,"or")]));var Ze=(0,O.l)({},se.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:$e.concat(l.normalizeSortingInfo(se.storeLoadOptions.sort||[])),filter:We}),nt=$._dataSource.isLastLevelGroupItemsPagingLocal();nt||(Ze.skip=fe.skip,Ze.take=fe.take),(0,Y.gx)(0===fe.take?[]:$._dataSource.loadFromStore(Ze)).done(mt=>{nt&&(mt=$._dataSource.sortLastLevelGroupItems(mt,$e,fe.paths),mt=fe.skip?mt.slice(fe.skip):mt,mt=fe.take?mt.slice(0,fe.take):mt),(0,U.S6)(fe.items,(jt,$t)=>{var Oe=mt.splice(0,$t.count-(0===jt&&fe.skip||0));s(se,fe,$e.length-1,jt),$t.items=Oe}),se.data.resolve(Se)}).fail(se.data.reject)}(f,g,y,I)):o(g.data)&&g.data.resolve(I)}var c=function(f,g){var m=new Y.BH,y=!(!g.group||!g.group.length),w=(0,O.l)({skip:0,take:1,requireGroupCount:y,requireTotalCount:!y},g,{group:y?g.group:null});return f.load(w).done((I,P)=>{var $=P&&(y?P.groupCount:P.totalCount);isFinite($)?m.resolve($):m.reject(og.R0.Error(y?"E4022":"E4021"))}).fail(m.reject.bind(m)),m};return{updateTotalItemsCount(f){var g=0,m=f.extra&&f.extra.totalCount||0,y=f.extra&&f.extra.groupCount||0,w=this._dataSource.pageSize(),I=this._isVirtualPaging();t(this,P=>{P.childrenTotalCount=0}),t(this,(P,$)=>{var se=a($,I?0:w,g),fe=P.count+P.childrenTotalCount;I||(fe+=tb(se,w,fe,$.length-1)),$[$.length-2]?$[$.length-2].childrenTotalCount+=fe:g+=fe}),this.callBase(g-m+y)},_isGroupExpanded(f){var g=this._dataSource.group();return n(g,f)},_updatePagingOptions(f,g){var m=this._isVirtualPaging(),y=this._dataSource.pageSize(),w=[],I=[],P=0,$=0;f.take&&(t(this,se=>{se.childrenTotalCount=0,se.skipChildrenTotalCount=0}),t(this,(se,fe)=>{var Se,Fe=0,$e=0,We=a(fe,m?0:y,$),Ze=0,nt=0,mt=se.count+se.childrenTotalCount,jt=mt;g&&g(se,We);var $t=f.skip-We;We<=f.skip+f.take&&mt&&(Se=f.take,m||(mt+=(Ze=tb(We,y,mt,fe.length-1))*fe.length,jt+=Ze,y&&$t>=0&&(Fe=fe.length,$e=fe.length-1,nt=Math.floor($t/y))),$t>=0?(We+mt>f.skip&&w.unshift($t-nt*Fe-se.skipChildrenTotalCount),We+mt>=f.skip+Se&&I.unshift(Se-Fe-se.childrenTotalCount+se.skipChildrenTotalCount)):We+mt>=f.skip+Se&&I.unshift(Se+$t-se.childrenTotalCount)),We<=f.skip&&(fe[fe.length-2]?fe[fe.length-2].skipChildrenTotalCount+=Math.min(jt,$t+1-nt*$e):P+=Math.min(jt,$t+1)),We<=f.skip+Se&&(mt=Math.min(jt,$t+Se-(nt+1)*$e),fe[fe.length-2]?fe[fe.length-2].childrenTotalCount+=mt:$+=mt)}),f.skip-=P,f.take-=$-P),f.skips=w,f.takes=I},changeRowExpand(f){var g=this.findGroupInfo(f),m=this._dataSource,y=m.remoteOperations().groupPaging,w=l.normalizeSortingInfo(m.group());return g?(g.isExpanded=!g.isExpanded,y&&g.isExpanded&&f.length<w.length?c(m,{filter:ul(f,{filter:m.lastLoadOptions().filter,group:m.group()}),group:[w[f.length]],select:m.select()}).done(I=>{g.count=I}):(new Y.BH).resolve()):(new Y.BH).reject()},handleDataLoading(f){var{storeLoadOptions:g}=f,m=l.normalizeSortingInfo(g.group||f.loadOptions.group);if(!f.isCustomLoading&&m.length){if(f.remoteOperations.grouping){var y=this._dataSource.remoteOperations().paging;g.group=l.normalizeSortingInfo(g.group),g.group.forEach((w,I)=>{w.isExpanded=!(y&&I===g.group.length-1)})}f.group=f.group||m,f.remoteOperations.paging?(f.skip=g.skip,f.take=g.take,g.requireGroupCount=!0,g.group=m.slice(0,1),this._updatePagingOptions(f),g.skip=f.skip,g.take=f.take):(f.skip=f.loadOptions.skip,f.take=f.loadOptions.take,this._updatePagingOptions(f))}},handleDataLoadedCore(f,g){var w,m=l.normalizeSortingInfo(f.storeLoadOptions.group||f.loadOptions.group).length,y=f.group?f.group.length:0,I={};if(f.isCustomLoading)g(f),e(this,f.data,m,I,[],f.isCustomLoading,f.storeLoadOptions.isLoadingAll);else{if(f.remoteOperations.paging||this.foreachGroups(P=>{P.count=0}),(w=r(this,f,f.data,m))<0)return void(f.data=(new Y.BH).reject(Nt.Z.Error("E1037")));if(f.remoteOperations.paging||m&&f.extra&&f.loadOptions.requireTotalCount&&(f.extra.totalCount=w,f.extra.groupCount=f.data.length),y&&f.storeLoadOptions.requireGroupCount&&!isFinite(f.extra.groupCount))return void(f.data=(new Y.BH).reject(og.R0.Error("E4022")));this.updateTotalItemsCount(f),f.remoteOperations.paging||this._updatePagingOptions(f),g(f),f.remoteOperations.paging||this._processPaging(f,m)}u(this,f,m,I,0,f.data)},_processSkips(f,g,m){if(m){var y=f[0],w=g[0],I=y&&y.items;void 0!==w&&(y.isContinuation=!0,I&&(y.items=I.slice(w),this._processSkips(y.items,g.slice(1),m-1)))}},_processTakes(f,g,m,y,w){if(y&&f){w=w||[];var I=f[f.length-1],P=I&&I.items,$=m[0];I&&(void 0!==$&&(I.count-(I.isContinuation&&g[0]||0)||P.length)>$&&(I.isContinuationOnNextPage=!0,w.forEach(Se=>{Se.isContinuationOnNextPage=!0}),P&&(P=P.slice(0,$),I.items=P)),w.push(I),this._processTakes(P,g.slice(1),m.slice(1),y-1,w))}},_processPaging(f,g){this._processSkips(f.data,f.skips,g),this._processTakes(f.data,f.skips,f.takes,g)},isLastLevelGroupItemsPagingLocal:()=>!1,sortLastLevelGroupItems:f=>f,refresh(f,g){var $,se,m=this,y=m._dataSource,{storeLoadOptions:w}=f,I=f.group||f.storeLoadOptions.group,P=l.normalizeSortingInfo(m._group);function fe(Se,Fe){Fe.length===se+1&&(Se.isExpanded=$)}for(se=0;se<P.length;se++)$=n(I,se),n(m._group,se)!==$&&m.foreachGroups(fe);if(m.callBase.apply(this,arguments),I&&f.remoteOperations.paging&&g.reload)return t(m,Se=>{var Fe=c(y,{filter:ul(Se.path,{filter:w.filter,group:I}),group:I.slice(Se.path.length),select:w.select}),$e=c(y,{filter:gS(Se.path,{filter:w.filter,group:I},!0),group:I.slice(Se.path.length-1,Se.path.length),select:w.select});return(0,Y.gx)($e,Fe).done((We,Ze)=>{We=parseInt(We.length?We[0]:We),Ze=parseInt(Ze.length?Ze[0]:Ze),Se.offset=We,Se.count!==Ze&&(Se.count=Ze,m.updateTotalItemsCount(f))})},!0)}}}()),hl=k(2510),wc=k(2030),ib=function(t,e){var i=new Y.BH,r=(0,O.l)({skip:0,take:1,requireTotalCount:!0},e);return t.load(r).done((n,a)=>{i.resolve(a&&a.totalCount)}).fail(i.reject.bind(i)),i},CS=mS.inherit(function(){var t=function(a,s,o){return a.foreachGroups(d=>{if(!d.isExpanded)return s(d)},!1,!1,o,!0)},e=function(a,s){var o=0,d=s||0;return s&&(t(a,u=>{if(u.offset-o>=s)return!1;o+=u.count-1}),d+=o),d},i=function(a,s){if(a.length!==s.length)return!1;for(var o=0;o<a.length;o++)if(!(0,On.OI)(null,a[o],s[o]))return!1;return!0},r=function a(s,o,d,u,c){if(o){for(var f=0;f<o.length;f++){var g=o[f];if("key"in g&&void 0!==g.items){d.push(g.key),c&&i(c.path,d)&&!g.isContinuation&&(c.offset=u);var m=s.findGroupInfo(d);m&&!g.isContinuation&&(m.offset=u),m&&!m.isExpanded?u+=m.count:u=a(s,g.items,d,u,c),d.pop()}else u++}return u}},n=function a(s,o){var d=s.count||s.items.length;if(!s.count&&o>1){d=0;for(var u=0;u<s.items.length;u++)d+=a(s.items[u],o-1)}return d};return{handleDataLoading(a){var c,{storeLoadOptions:s}=a,o=[],d=0,u=!1,{group:f}=a.loadOptions,g=0;if(function(y,w){if(w.group){var I=l.normalizeSortingInfo(w.group),P=l.normalizeSortingInfo(y.sort);y.sort=wc.Z.arrangeSortingInfo(I,P),delete w.group}}(s,a.loadOptions),a.group=a.group||f,!a.isCustomLoading){var m=(0,O.l)({},s);m.skip=e(this,s.skip),m.skip&&m.take&&f&&(m.skip--,m.take++,u=!0),m.take&&f&&(c=m.take,m.take++),t(this,y=>{if(y.offset>=m.skip+m.take+g)return!1;y.offset>=m.skip+g&&y.count&&(g+=y.count-1,o.push(y),d+=y.count)}),(0,U.S6)(o,function(){m.filter=function(y,w,I){for(var P=l.normalizeSortingInfo(I||w.group),$=[],se=0;se<y.length;se++){for(var fe=[],Se=0;Se<=se;Se++)fe.push([P[Se].selector,se===Se?"<>":"=",y[Se]]);$.push(l.combineFilters(fe))}return $=l.combineFilters($,"or"),l.combineFilters([$,w.filter])}(this.path,m,f)}),a.storeLoadOptions=m,a.collapsedGroups=o,a.collapsedItemsCount=d,a.skip=m.skip||0,a.skipFirstItem=u,a.take=c}},handleDataLoaded(a,s){var{collapsedGroups:o}=a,d=l.normalizeSortingInfo(a.group),u=d.length;function c(y,w,I,P,$){if(y&&w.length&&I.length){var se,fe,Se=(0,Pt.Ex)(w[0],!0);for(fe=0;fe<y.length&&(se=(0,Pt.Ex)(y[fe].key,!0),!($>=P.offset||Se===se));fe++)$+=n(y[fe],I.length);(!y.length||Se!==se)&&y.splice(fe,0,{key:w[0],items:[],count:1===w.length?P.count:void 0}),c(y[fe].items,w.slice(1),I.slice(1),P,$)}}if(a.collapsedItemsCount&&a.extra&&a.extra.totalCount>=0&&(a.extra._totalCountWasIncreasedByCollapsedItems||(a.extra.totalCount+=a.collapsedItemsCount,a.extra._totalCountWasIncreasedByCollapsedItems=!0)),s(a),u){var{data:f}=a,g=(0,hl.Z)(f);if(wc.Z.multiLevelGroup(g,d).enumerate().done(y=>{f=y}),o)for(var m=0;m<o.length;m++)c(f,o[m].path,d,o[m],a.skip);a.isCustomLoading||function y(w,I,P,$,se,fe){for(var Se=0,Fe=!1,$e=0;$e<I.length;$e++){var We=I[$e];if(void 0!==We.items){P.push(We.key);var Ze=w.findGroupInfo(P);if(Ze&&!Ze.isExpanded)We.collapsedItems=We.items,We.items=null,$+=Ze.count,--fe<0&&Se++,se&&(Fe=!0);else if(We.items){var nt=y(w,We.items,P,$,se,fe);se&&(nt.offset-$>1?We.isContinuation=!0:Fe=!0),$=nt.offset,(fe=nt.take)<0&&(We.items.length?We.isContinuationOnNextPage=!0:Se++)}P.pop()}else se&&(Fe=!0),$++,--fe<0&&Se++;se=!1}return Fe&&I.splice(0,1),Se&&I.splice(-Se,Se),{offset:$,take:fe}}(this,f,[],a.skip,a.skipFirstItem,a.take),a.data=f}},isGroupItemCountable:a=>null===a.items,updateTotalItemsCount(){var a=0;t(this,s=>{s.count&&(a-=s.count-1)}),this.callBase(a)},changeRowExpand(a){var g,s=this,o=s._dataSource,d=o.beginPageIndex?o.beginPageIndex():o.pageIndex(),u=o.items(),c=e(s,d*o.pageSize()),f=s.findGroupInfo(a);return g=f&&!f.isExpanded?(new Y.BH).resolve(f.count):ib(o,{filter:ul(a,{filter:o.filter(),group:o.group()})}),(0,Y.gx)(g).done(m=>{m=parseInt(m.length?m[0]:m),f?(r(s,u,[],c),f.isExpanded=!f.isExpanded,f.count=m):(r(s,u,[],c,f={offset:-1,count:m,path:a,isExpanded:!1}),f.offset>=0&&s.addGroupInfo(f)),s.updateTotalItemsCount()}).fail(function(){o._eventsStrategy.fireEvent("loadError",arguments)})},allowCollapseAll:()=>!1,refresh(a,s){var o=this,{storeLoadOptions:d}=a,u=o._dataSource;if(this.callBase.apply(this,arguments),s.reload)return t(o,c=>{var f=ib(u,{filter:ul(c.path,d)}),g=ib(u,{filter:gS(c.path,d)});return(0,Y.gx)(g,f).done((m,y)=>{m=parseInt(m.length?m[0]:m),y=parseInt(y.length?y[0]:y),c.offset=m,c.count!==y&&(c.count=y,o.updateTotalItemsCount())})},!0)}}}()),rb="dx-datagrid-group-panel",lg="dx-group-panel-item",bS="dx-toolbar-label",Jk={init(){this.callBase.apply(this,arguments),this._initGroupingHelper()},_initGroupingHelper(t){var e=this._grouping,i=this.option("grouping.autoExpandAll"),r=this.option("focusedRowEnabled"),n=t?t.remoteOperations:this.remoteOperations();!(n.filtering&&n.sorting&&n.paging)||n.grouping||!i&&r?(!e||e instanceof CS)&&(this._grouping=new vS(this)):(!e||e instanceof vS)&&(this._grouping=new CS(this))},totalItemsCount(){var t=this.callBase();return t>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?t+this._grouping.totalCountCorrection():t},itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:this.callBase.apply(this,arguments)},allowCollapseAll(){return this._grouping.allowCollapseAll()},isGroupItemCountable(t){return this._grouping.isGroupItemCountable(t)},isRowExpanded(t){var e=this._grouping.findGroupInfo(t);return e?e.isExpanded:!this._grouping.allowCollapseAll()},collapseAll(t){return this._collapseExpandAll(t,!1)},expandAll(t){return this._collapseExpandAll(t,!0)},_collapseExpandAll(t,e){var i=this._dataSource,r=i.group(),n=l.normalizeSortingInfo(r||[]);if(n.length){for(var a=0;a<n.length;a++)void 0===t||t===a?n[a].isExpanded=e:r&&r[a]&&(n[a].isExpanded=r[a].isExpanded);i.group(n),this._grouping.foreachGroups((s,o)=>{(void 0===t||t===o.length-1)&&(s.isExpanded=e)},!1,!0),this.resetPagesCache()}return!0},refresh(){return this.callBase.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)},changeRowExpand(t){var e=this._dataSource;if(e.group())return e.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(t).always(()=>{e.endLoading()})},_changeRowExpandCore(t){return this._grouping.changeRowExpand(t)},_hasGroupLevelsExpandState(t,e){if(t&&Array.isArray(t))for(var i=0;i<t.length;i++)if(t[i].isExpanded===e)return!0},_customizeRemoteOperations(t,e){var{remoteOperations:i}=t;t.storeLoadOptions.group?(i.grouping&&!t.isCustomLoading&&(!i.groupPaging||this._hasGroupLevelsExpandState(t.storeLoadOptions.group,!0))&&(i.paging=!1),!i.grouping&&(!i.sorting||!i.filtering||t.isCustomLoading||this._hasGroupLevelsExpandState(t.storeLoadOptions.group,!1))&&(i.paging=!1)):!t.isCustomLoading&&i.paging&&e.grouping&&this.resetCache(),this.callBase.apply(this,arguments)},_handleDataLoading(t){return this.callBase(t),this._initGroupingHelper(t),this._grouping.handleDataLoading(t)},_handleDataLoaded(t){return this._grouping.handleDataLoaded(t,this.callBase.bind(this))},_handleDataLoadedCore(t){return this._grouping.handleDataLoadedCore(t,this.callBase.bind(this))}};lc.extend(Jk);var eM={init(){this.callBase(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")},_beforeProcessItems(t){var e=this._columnsController.getGroupColumns();return(t=this.callBase(t)).length&&e.length&&(t=this._processGroupItems(t,e.length)),t},_processItem(t,e){return(0,v.$K)(t.groupIndex)&&(0,v.HD)(t.rowType)&&0===t.rowType.indexOf("group")?(t=this._processGroupItem(t,e),e.dataIndex=0):t=this.callBase.apply(this,arguments),t},_processGroupItem:t=>t,_processGroupItems(t,e,i){var r=this._columnsController.getGroupColumns(),n=r[r.length-e];if(!i){var a=this.option("scrolling.mode");i={collectContinuationItems:"virtual"!==a&&"infinite"!==a,resultItems:[],path:[],values:[]}}var{resultItems:s}=i;if(i.data&&(i.collectContinuationItems||!i.data.isContinuation)&&s.push({rowType:"group",data:i.data,groupIndex:i.path.length-1,isExpanded:!!i.data.items,key:i.path.slice(0),values:i.values.slice(0)}),t)if(0===e)s.push.apply(s,t);else for(var o=0;o<t.length;o++){var d=t[o];d&&"items"in d?(i.data=d,i.path.push(d.key),i.values.push(n&&n.deserializeValue&&!n.calculateDisplayValue?n.deserializeValue(d.key):d.key),this._processGroupItems(d.items,e-1,i),i.data=void 0,i.path.pop(),i.values.pop()):s.push(d)}return s},publicMethods(){return this.callBase().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])},collapseAll(t){var e=this._dataSource;e&&e.collapseAll(t)&&(e.pageIndex(0),e.reload())},expandAll(t){var e=this._dataSource;e&&e.expandAll(t)&&(e.pageIndex(0),e.reload())},changeRowExpand(t){var e=this,i=e.isRowExpanded(t),r={key:t,expanded:i};return e.executeAction(i?"onRowCollapsing":"onRowExpanding",r),r.cancel?(new Y.BH).resolve():(0,Y.gx)(e._changeRowExpandCore(t)).done(()=>{r.expanded=!i,e.executeAction(i?"onRowCollapsed":"onRowExpanded",r)})},_changeRowExpandCore(t){var e=this,i=this._dataSource,r=new Y.BH;return i?(0,Y.gx)(i.changeRowExpand(t)).done(()=>{e.load().done(r.resolve).fail(r.reject)}).fail(r.reject):r.resolve(),r},isRowExpanded(t){var e=this._dataSource;return e&&e.isRowExpanded(t)},expandRow(t){return this.isRowExpanded(t)?(new Y.BH).resolve():this.changeRowExpand(t)},collapseRow(t){return this.isRowExpanded(t)?this.changeRowExpand(t):(new Y.BH).resolve()},optionChanged(t){"grouping"===t.name&&(t.name="dataSource"),this.callBase(t)}},nb=function(t,e){var i=this._columnsController;switch(e.itemData.value){case"group":var r=i._dataSource.group()||[];i.columnOption(t.dataField,"groupIndex",r.length);break;case"ungroup":i.columnOption(t.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},tM={_getToolbarItems(){var t=this.callBase();return this._appendGroupingItem(t)},_appendGroupingItem(t){if(this._isGroupPanelVisible()){var e=!1;t.push({template:()=>{var r=(0,C.Z)("<div>").addClass(rb);return this._updateGroupPanelContent(r),Go("groupPanel",this,r,void 0,this._handleActionKeyDown.bind(this)),r},name:"groupPanel",onItemRendered:()=>{e&&this.renderCompleted.fire(),e=!0},location:"before",locateInMenu:"never",sortIndex:1}),this.updateToolbarDimensions()}return t},_handleActionKeyDown(t){var{event:e}=t,i=(0,C.Z)(e.target),r=i.closest(".".concat(lg)).index(),n=this._columnsController.getGroupColumns()[r],a=n&&n.index;i.is(".dx-header-filter")?this.getController("headerFilter").showHeaderFilterMenu(a,!0):this._processGroupItemAction(a),e.preventDefault()},_isGroupPanelVisible(){var e,t=this.option("groupPanel");return t&&"auto"===(e=t.visible)&&(e="desktop"===_t.Z.current().deviceType),e},_renderGroupPanelItems(t,e){var i=this;t.empty(),(0,U.S6)(e,(r,n)=>{i._createGroupPanelItem(t,n)}),Dh(this)},_createGroupPanelItem(t,e){var i=(0,C.Z)("<div>").addClass(e.cssClass).addClass(lg).data("columnData",e).appendTo(t).text(e.caption);return function Pv(t,e){t.option("useLegacyKeyboardnavigation")||e.attr("tabindex",t.option("tabindex")||0)}(this,i),i},_columnOptionChanged(t){if(!this._requireReady&&!l.checkChanges(t.optionNames,["width","visibleWidth"])){var e=this.element(),i=e&&e.find(".".concat(rb));i&&i.length&&(this._updateGroupPanelContent(i),this.updateToolbarDimensions(),this.renderCompleted.fire())}this.callBase()},_updateGroupPanelContent(t){var e=this.getController("columns").getGroupColumns(),i=this.option("groupPanel");this._renderGroupPanelItems(t,e),i.allowColumnDragging&&!e.length&&((0,C.Z)("<div>").addClass("dx-group-panel-message").text(i.emptyPanelText).appendTo(t),t.closest(".".concat("dx-toolbar-item")).addClass(bS),t.closest(".".concat(bS)).css("maxWidth","none"))},allowDragging(t){var e=this.option("groupPanel");return this._isGroupPanelVisible()&&e.allowColumnDragging&&t&&t.allowGrouping},getColumnElements(){var t=this.element();return t&&t.find(".".concat(lg))},getColumns(){return this.getController("columns").getGroupColumns()},getBoundingRect(){var t=this.element();if(t&&t.find(".".concat(rb)).length){var e=t.offset();return{top:e.top,bottom:e.top+(0,Q.Cr)(t)}}return null},getName:()=>"group",getContextMenuItems(t){var r,e=this.option("grouping.contextMenuEnabled"),i=(0,C.Z)(t.targetElement).closest(".".concat(lg));if(i.length&&(t.column=i.data("columnData")),e&&t.column){var{column:n}=t;if(!(0,v.$K)(n.allowGrouping)||n.allowGrouping){var s=(0,v.$K)(n.groupIndex)&&n.groupIndex>-1,o=this.option("grouping.texts"),d=nb.bind(this,n);r=[{text:o.ungroup,value:"ungroup",disabled:!s,onItemClick:d},{text:o.ungroupAll,value:"ungroupAll",onItemClick:d}]}}return r},isVisible(){return this.callBase()||this._isGroupPanelVisible()},optionChanged(t){"groupPanel"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}},iM={getContextMenuItems(t){var i;if(this.option("grouping.contextMenuEnabled")&&t.row&&"group"===t.row.rowType){var n=this._columnsController.columnOption("groupIndex:".concat(t.row.groupIndex));if(n&&n.allowGrouping){var a=this.option("grouping.texts"),s=nb.bind(this,n);(i=[]).push({text:a.ungroup,value:"ungroup",onItemClick:s},{text:a.ungroupAll,value:"ungroupAll",onItemClick:s})}}return i},_rowClick(t){var e=this.option("grouping.expandMode"),r="infinite"!==this.option("scrolling.mode")&&"rowClick"===e&&(0,C.Z)(t.event.target).closest(".".concat("dx-group-row")).length,n=(0,C.Z)(t.event.target).closest(".".concat("dx-datagrid-expand")).length;(r||n)&&this._changeGroupRowState(t),this.callBase(t)},_changeGroupRowState(t){var e=this.getController("data"),i=e.items()[t.rowIndex],r=this._columnsController.columnOption("groupIndex:".concat(i.groupIndex),"allowCollapsing");("data"===i.rowType||"group"===i.rowType&&!1!==r)&&(e.changeRowExpand(i.key,!0),t.event.preventDefault(),t.handled=!0)}},rM={getContextMenuItems(t){var e=this.option("grouping.contextMenuEnabled"),i=this.callBase(t);if(e&&t.row&&("header"===t.row.rowType||"detailAdaptive"===t.row.rowType)){var{column:r}=t;if(!r.command&&(!(0,v.$K)(r.allowGrouping)||r.allowGrouping)){var n=this.option("grouping.texts"),a=(0,v.$K)(r.groupIndex)&&r.groupIndex>-1,s=nb.bind(this,r);(i=i||[]).push({text:n.groupByThisColumn,value:"group",beginGroup:!0,disabled:a,onItemClick:s}),r.showWhenGrouped&&i.push({text:n.ungroup,value:"ungroup",disabled:!a,onItemClick:s}),i.push({text:n.ungroupAll,value:"ungroupAll",onItemClick:s})}}return i}};l.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:le.Z.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:le.Z.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:le.Z.format("dxDataGrid-groupHeaderText"),ungroup:le.Z.format("dxDataGrid-ungroupHeaderText"),ungroupAll:le.Z.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:le.Z.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:eM,columns:{_getExpandColumnOptions(){var t=this.callBase.apply(this,arguments);return t.cellTemplate=l.getExpandCellTemplate(),t}},editing:{_isProcessedItem:t=>(0,v.$K)(t.groupIndex)&&(0,v.HD)(t.rowType)&&0===t.rowType.indexOf("group")}},views:{headerPanel:tM,rowsView:iM,columnHeadersView:rM}}});var yS="dx-master-detail-row",oM={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:{_getExpandColumnsCore(){var t=this.callBase();return this.option("masterDetail.enabled")&&t.push({type:"detailExpand",cellTemplate:ye.getExpandCellTemplate()}),t}},data:function(){var t=function(e){e._expandedItems=[],e._isExpandAll=e.option("masterDetail.autoExpandAll")};return{init(){t(this),this.callBase()},expandAll(e){e<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},collapseAll(e){e<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},isRowExpanded(e){var i=ye.getIndexByKey(e,this._expandedItems);return Array.isArray(e)?this.callBase.apply(this,arguments):!!(this._isExpandAll^(i>=0&&this._expandedItems[i].visible))},_getRowIndicesForExpand(e){var i=this.getRowIndexByKey(e);return[i,i+1]},_changeRowExpandCore(e){var i;if(Array.isArray(e))i=this.callBase.apply(this,arguments);else{var r=ye.getIndexByKey(e,this._expandedItems);if(r>=0){var{visible:n}=this._expandedItems[r];this._expandedItems[r].visible=!n}else this._expandedItems.push({key:e,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(e)}),i=(new Y.BH).resolve()}return i},_processDataItem(e,i){var r=this.callBase.apply(this,arguments);return r.isExpanded=this.isRowExpanded(r.key),void 0===i.detailColumnIndex&&(i.detailColumnIndex=-1,(0,U.S6)(i.visibleColumns,(n,a)=>{if("expand"===a.command&&!(0,v.$K)(a.groupIndex))return i.detailColumnIndex=n,!1})),i.detailColumnIndex>=0&&(r.values[i.detailColumnIndex]=r.isExpanded),r},_processItems(e,i){var r=this,{changeType:n}=i,a=[];return e=r.callBase.apply(r,arguments),"loadingAll"===n?e:("refresh"===n&&(r._expandedItems=(0,ne.h3)(r._expandedItems,s=>s.visible)),(0,U.S6)(e,(s,o)=>{a.push(o);var d=ye.getIndexByKey(o.key,r._expandedItems);"data"===o.rowType&&(o.isExpanded||d>=0)&&!o.isNewRow&&a.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),a)},optionChanged(e){var i,r;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var n=e.value||{},a=e.previousValue||{};i=n.enabled!==a.enabled,r=n.autoExpandAll!==a.autoExpandAll;break;case"masterDetail.template":t(this);break;case"masterDetail.enabled":i=!0;break;case"masterDetail.autoExpandAll":r=!0}(i||r)&&t(this)}this.callBase(e)}}}(),resizing:{fireContentReadyAction(){this.callBase.apply(this,arguments),this._updateParentDataGrids(this.component.$element())},_updateParentDataGrids(t){var e=t.closest(".".concat(yS));e.length&&(0,Y.gx)(this._updateMasterDataGrid(e,t)).done(()=>{this._updateParentDataGrids(e.parent())})},_updateMasterDataGrid(t,e){var i=(0,C.Z)(t).data("options"),r=(0,C.Z)(t).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(i&&r)return this._updateMasterDataGridCore(r,i)},_updateMasterDataGridCore(t,e){var i=(0,Y.BH)();if(t.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(t,e.rowIndex,(0,C.Z)(e.rowElement)).done(i.resolve);else{if(!0===t.option("scrolling.useNative"))return void t.updateDimensions().done(()=>i.resolve(!0));var r=t.getScrollable();r?r?.update().done(()=>i.resolve()):i.resolve()}return i.promise()},_updateFixedMasterDetailGrids(t,e,i){var r=(0,Y.BH)(),n=(0,C.Z)(t.getRowElement(e)),a=(0,C.Z)(t.getView("rowsView").getTableElements()),s=2===n?.length&&(0,Q.Cr)(n.eq(0))!==(0,Q.Cr)(n.eq(1)),o=2===a?.length&&(0,Q.Cr)(a.eq(0))!==(0,Q.Cr)(a.eq(1));if(s||o){var d=(0,Q.dz)(i);return t.updateDimensions().done(()=>{var u=this.option("columnAutoWidth")&&!0===t.option("scrolling.useNative"),c=u&&d!==(0,Q.dz)(i);u&&c?this.updateDimensions().done(()=>r.resolve(!0)):r.resolve(!0)}),r.promise()}return(0,Y.BH)().resolve()},_toggleBestFitMode(t){if(this.callBase.apply(this,arguments),this.option("masterDetail.template")){var e=this._rowsView.getTableElement();e&&e.find(".dx-master-detail-cell").css("maxWidth",t?0:"")}}}},views:{rowsView:{_getCellTemplate(t){var{column:e}=t,i=this.getController("editing"),r=i&&i.isEditRow(t.rowIndex);return"detail"!==e.command||r?this.callBase.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(e)}},_isDetailRow:t=>t&&t.rowType&&0===t.rowType.indexOf("detail"),_createRow(t){var e=this.callBase.apply(this,arguments);return t&&this._isDetailRow(t)&&(this.option("showRowLines")&&e.addClass("dx-row-lines"),e.addClass(yS),(0,v.$K)(t.visible)&&e.toggle(t.visible)),e},_renderCells(t,e){var{row:i}=e,n=this._columnsController.getVisibleColumns();i.rowType&&this._isDetailRow(i)?this._needRenderCell(0,e.columnIndices)&&this._renderCell(t,{value:null,row:i,rowIndex:i.rowIndex,column:{command:"detail"},columnIndex:0,change:e.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",n.length):this.callBase.apply(this,arguments)}}}}};l.registerModule("masterDetail",oM);var wS=k(6536),dg=function(t){for(var e=0,i=0,r=0;r<t.length;++r)if("'"===t[r]&&e++,"."===t[r]&&(++i,e%2==0))return{occurrence:i,index:r};return{occurrence:1,index:-1}},ab=function(t,e,i){for(var r=-1;i--&&r++<t.length;)r=t.indexOf(e,r);return r},sb=function(t,e){return-1===e?[t]:[t.slice(0,e),t.slice(e+1)]},ug=function(t,e){if("string"==typeof e){var i=e.split(";"),r=Kt.Z.getSign(t,e);i[1]=i[1]||"-"+i[0],e=(e=i[r<0?1:0]).replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2));var n=/^[^#0.,]*/.exec(e)[0].length,a=/[^#0.,]*$/.exec(e)[0].length;return{start:n,end:t.length-a}}return{start:0,end:t.length}},xS=function(t,e){var i=Kt.Z.getDecimalSeparator(),r=new RegExp("[^0-9"+(0,ne.hr)(i)+"]","g");return e.slice(0,t).replace(r,"").length},SS=function(t){return t.split("").reverse().join("")},ES=function(t,e){if(!t)return-1;for(var i=/[0-9]/g,r=1,n=null,a=i.exec(e);a;){if(n=a.index,r>=t)return n;r++,a=i.exec(e)}return null===n?e.length:n},cl=function(t,e){return void 0===t.start&&(t={start:t,end:t}),{start:t.start+e,end:t.end+e}};function Qs(t,e,i){t=cl(t,0);var r=ug(e,i);return{start:(0,Ut.n$)(t.start,r.start,r.end),end:(0,Ut.n$)(t.end,r.start,r.end)}}var fM=k(7242),_M=k(3871),IS=k(1799),gM=k(6463),TS="dxNumberBox",DS=(0,be.V4)(qt.Z.up,TS),AS=(0,be.V4)(qt.Z.cancel,TS),bM=gn.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var t="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(t),this._spinIcon=(0,C.Z)("<div>").addClass(t+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var t=(0,be.V4)(qt.Z.down,this.NAME),e=this.$element();Z.Z.off(e,t),Z.Z.on(e,t,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(t){t.preventDefault(),this._clearTimer(),Z.Z.on(this.$element(),Gd.Z.name,function(){this._feedBackDeferred=new Y.BH,(0,gM.dR)(this._feedBackDeferred),this._spinChangeHandler({event:t}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:t})}.bind(this));var e=tt.Z.getDocument();Z.Z.on(e,DS,this._clearTimer.bind(this)),Z.Z.on(e,AS,this._clearTimer.bind(this)),this._spinChangeHandler({event:t})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){Z.Z.off(this.$element(),Gd.Z.name);var t=tt.Z.getDocument();Z.Z.off(t,DS),Z.Z.off(t,AS),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(t){switch(t.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(t)}}});const jd=bM;class SM extends IS.Z{_attachEvents(e,i){var{editor:r}=this,n=(0,be.V4)(qt.Z.down,r.NAME),a=i.children(),s=r._createAction(o=>r._spinButtonsPointerDownHandler(o));Z.Z.off(i,n),Z.Z.on(i,n,o=>s({event:o})),jd.getInstance(a.eq(0)).option("onChange",o=>r._spinUpChangeHandler(o)),jd.getInstance(a.eq(1)).option("onChange",o=>r._spinDownChangeHandler(o))}_create(){var{editor:e}=this,i=(0,C.Z)("<div>").addClass("dx-numberbox-spin-container"),r=(0,C.Z)("<div>").appendTo(i),n=(0,C.Z)("<div>").appendTo(i),a=this._getOptions();return this._addToContainer(i),e._createComponent(r,jd,(0,O.l)({direction:"up"},a)),e._createComponent(n,jd,(0,O.l)({direction:"down"},a)),this._legacyRender(e.$element(),this._isTouchFriendly(),a.visible),{instance:i,$element:i}}_getOptions(){var{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){var{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,i,r){e.toggleClass("dx-numberbox-spin-touch-friendly",i),e.toggleClass("dx-numberbox-spin",r)}update(){if(super.update()){var{editor:i,instance:r}=this,n=i.$element(),a=this._isVisible(),s=this._isTouchFriendly(),o=r.children(),d=jd.getInstance(o.eq(0)),u=jd.getInstance(o.eq(1)),c=this._getOptions();d.option(c),u.option(c),this._legacyRender(n,s,a)}}}var EM=Math,TM=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],AM=_M.Z.inherit({_supportedKeys:function(){return(0,O.l)(this.callBase(),{upArrow:function(t){(0,be.j1)(t)||(t.preventDefault(),t.stopPropagation(),this._spinUpChangeHandler(t))},downArrow:function(t){(0,be.j1)(t)||(t.preventDefault(),t.stopPropagation(),this._spinDownChangeHandler(t))},enter:function(){}})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:le.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:SM}])},_isSupportInputMode:function(){var t=parseFloat(pi.Z.version);return pi.Z.chrome&&t>=66||pi.Z.safari&&t>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return _t.Z.real().generic&&!_t.Z.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==_t.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){var t=this.callBase();return t.inputmode="decimal",t},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,C.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){this._getSubmitElement().val((0,ne.FH)(t))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(t){this.callBase(t);var e=(0,be.qK)(t);if(!/[\d.,eE\-+]/.test(e)){var r=(0,be.EV)(t);return(0,be.j1)(t)||r&&TM.includes(r)?void 0:(t.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel:function(t){this._spinValueChange(t.delta>0?1:-1,t)},_renderValue:function(){var t=this._input().val(),e=this.option("value");(!t.length||Number(t)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var i=(0,v.$K)(e)?null:le.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,ne.IS)(e,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),(new Y.BH).resolve()},_forceValueRender:function(){var t=this.option("value"),e=Number(t),i=isNaN(e)?"":this._applyDisplayValueFormatter(t);this._renderDisplayText(i)},_applyDisplayValueFormatter:function(t){return this.option("displayValueFormatter")(t)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,ne.IS)(this.option("min"),""),valuemax:(0,ne.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var t=this._input();!this.option("useLargeSpinButtons")&&tt.Z.getActiveElement()!==t[0]&&Z.Z.trigger(t,"focus")},_spinUpChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(1,t.event||t)},_spinDownChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(-1,t.event||t)},_spinValueChange:function(t,e){var i=parseFloat(this.option("step"));if(0!==i){var r=parseFloat(this._normalizeInputValue())||0;r=this._correctRounding(r,i*t);var n=this.option("min"),a=this.option("max");(0,v.$K)(n)&&(r=Math.max(n,r)),(0,v.$K)(a)&&(r=Math.min(a,r)),this._saveValueChangeEvent(e),this.option("value",r)}},_correctRounding:function(t,e){var i=/[,.](.*)/,r=i.test(t),n=i.test(e);if(r||n){var a=r?i.exec(t)[0].length:0,s=n?i.exec(e)[0].length:0,o=EM.max(a,s);return this._round(t+e,o)}return t+e},_round:function(t,e){e=e||0;var i=Math.pow(10,e);return t*=i,Math.round(t)/i},_renderValueChangeEvent:function(){this.callBase();var t=(0,be.V4)("focusout","NumberBoxForceValueChange");Z.Z.off(this.element(),t),Z.Z.on(this.element(),t,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"!==this.option("mode")){var t=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));t.val(null),t.val(e)}},_valueChangeEventHandler:function(t){var e=this._input(),i=this._normalizeText(),r=this._parseValue(i),n="."!==i&&"-"!==i;!this._isValueValid()||this._validateValue(r)?(n&&this.callBase(t,isNaN(r)?null:r),this._applyValueBoundaries(i,r),this.validationRequest.fire({value:r,editor:this})):e.val(this._applyDisplayValueFormatter(r))},_applyValueBoundaries:function(t,e){var i=this._isValueIncomplete(t),r=this._isValueInRange(t);!i&&!r&&null!==e&&Number(t)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:function(t){return t.replace(",",".")},_inputIsInvalid:function(){var t="number"===this.option("mode"),e=this._input().get(0).validity;return t&&e&&e.badInput},_renderDisplayText:function(t){this._inputIsInvalid()||this.callBase(t)},_isValueIncomplete:function(t){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(t)},_isValueInRange:function(t){return(0,Ut.Z2)(t,this.option("min"),this.option("max"))},_isNumber:function(t){return null!==this._parseValue(t)},_validateValue:function(t){var e=this._normalizeText(),i=this._isValueValid(),r=!0,n=this._isNumber(e);return isNaN(Number(t))&&(r=!1),!t&&i?r=!0:!n&&!i&&(r=!1),this.option({isValid:r,validationError:r?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),r},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var t=this._input().val().trim();return this._replaceCommaWithPoint(t)},_parseValue:function(t){var e=parseFloat(t);return isNaN(e)?null:(0,Ut.n$)(e,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},reset:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(t){switch(t.name){case"value":this._validateValue(t.value),this._setSubmitValue(t.value),this.callBase(t),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(t)}}}),ob="dxNumberFormatter",xc="minus",BM=AM.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(t){return"del"===t},_supportedKeys:function(){return this._useMaskBehavior()?(0,O.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(t){var e=Kt.Z.getDecimalSeparator(),i=dg(this.option("format")).occurrence;return ab(t,e,i)},_focusInHandler:function(t){this._preventNestedFocusEvent(t)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;var e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){var i=this._getInputVal(),r=this._getTextSeparatorIndex(i);r>=0?this._caret({start:r,end:r}):this._moveCaretToBoundaryEventHandler(-1,t)}}.bind(this),0)),this.callBase(t)},_focusOutHandler:function(t){var e=!this._preventNestedFocusEvent(t);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(t),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(t){var e=this._getFormatPattern(),i=this.option("value");return(this._format(i,e)||"")!==t},_updateFormattedValue:function(){var t=this._getInputVal();this._hasValueBeenChanged(t)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&Z.Z.trigger(this._input(),"change"))},_arrowHandler:function(t,e){if(this._useMaskBehavior()){var i=this._getInputVal(),r=this._getFormatPattern(),n=cl(this._caret(),t);(function(t,e,i){var r=Qs(t=cl(t,0),e,i);return t.start>=r.start&&t.end<=r.end})(n,i,r)||(n=1===t?n.end:n.start,e.preventDefault(),this._caret(Qs(n,i,r)))}},_moveCaretToBoundary:function(t){var e=ug(this._getInputVal(),this._getFormatPattern()),i=cl(1===t?e.start:e.end,0);this._caret(i)},_moveCaretToBoundaryEventHandler:function(t,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(t),e&&e.preventDefault())},_shouldMoveCaret:function(t,e){var i=Kt.Z.getDecimalSeparator(),r=t.charAt(e.end)===i;return(this._lastKey===i||"."===this._lastKey||","===this._lastKey)&&r},_getInputVal:function(){return Kt.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(t){if(this.clearCaretTimeout(),this._lastKey=Kt.Z.convertDigits((0,be.qK)(t),!0),this._lastKeyName=(0,be.EV)(t),!this._shouldHandleKey(t.originalEvent))return this.callBase(t);var e=this._getInputVal(),i=this._caret(),n=this._tryParse(e,i,this._lastKeyName===xc?"":this._lastKey);return this._shouldMoveCaret(e,i)&&(this._moveCaret(1),t.originalEvent.preventDefault()),void 0===n?this._lastKeyName!==xc&&t.originalEvent.preventDefault():this._parsedValue=n,this.callBase(t)},_keyPressHandler:function(t){this._useMaskBehavior()||this.callBase(t)},_removeHandler:function(t){var e=this._caret(),i=this._getInputVal(),r=e.start,n=e.end;this._lastKey=(0,be.qK)(t),this._lastKeyName=(0,be.EV)(t);var a=this._isDeleteKey(this._lastKeyName),s=!a;if(r===n){if(!(s&&r>0||a&&r<i.length))return void t.preventDefault();a&&n++,s&&r--}var u=i.slice(r,n);if(this._isStub(u))this._moveCaret(a?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(t),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&Z.Z.trigger(this._input(),"input")),t.preventDefault();else{var f=Kt.Z.getDecimalSeparator();if(u!==f){if(n-r<i.length&&this._replaceSelectedText(i,{start:r,end:n},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var w=this._tryParse(i,{start:r,end:n},"");void 0===w?t.preventDefault():this._parsedValue=w}else{var g=i.indexOf(f);this._isNonStubAfter(g+1)&&(this._moveCaret(a?1:-1),t.preventDefault())}}},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(t,e){var i=this.option("format"),r=(0,v.mf)(i.parser),n=r?i.parser:Kt.Z.parse,a=0;if(!r){var s=dg(e).index,o=this._getTextSeparatorIndex(t),d=-1!==s?s:e.length,u=-1!==o?o:t.length;u>d&&-1===e.indexOf("#")&&(a=u-d)}return n(t=t.substr(a),e)},_format:function(t,e){var i=this.option("format"),r=i?.formatter||i,n=(0,v.mf)(r)?r:Kt.Z.format;return null===t?"":n(t,e)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var t=this.option("format"),e=(0,v.mf)(t?.parser),i=(0,v.HD)(t)&&(t.indexOf("0")>=0||t.indexOf("#")>=0);this._currentFormat=e||i||"exponential"===t||"exponential"===t?.type?t:(0,fM.y)(a=>{var s=this._format(a,t);return Kt.Z.convertDigits(s,!0)})},_getFormatForSign:function(t){var e=this._getFormatPattern();if((0,v.HD)(e)){var i=e.split(";"),r=Kt.Z.getSign(t,e);return i[1]=i[1]||"-"+i[0],r<0?i[1]:i[0]}return Kt.Z.getSign(t)<0?"-":""},_removeStubs:function(t,e){var i=this._getFormatForSign(t),r=Kt.Z.getThousandsSeparator(),n=this._getStubs(i),a=t;if(n.length){var s=n[0],o=new RegExp("("+(0,ne.hr)(n[1]||"")+")$","g"),d=new RegExp("[-"+(0,ne.hr)(e?"":r)+"]","g");a=a.replace(s,"").replace(o,"").replace(d,"")}return a},_getStubs:function(t){var e=/[^']([#0.,]+)/g.exec(t),i=e&&e[0].trim();return t.split(i).map(function(r){return r.replace(/'/g,"")})},_truncateToPrecision:function(t,e){if((0,v.$K)(t)){var i=t.toString(),r=i.indexOf(".");if(i&&r>-1){var n=parseFloat(i.substr(0,r+e+1));return isNaN(n)?t:n}}return t},_tryParse:function(t,e,i){var r=this._replaceSelectedText(t,e,i),n=this._getFormatPattern(),a=e.start!==e.end,s=this._getParsedValue(r,n),o=!n.parser&&this._getPrecisionLimits(r).max,d=s!==this._parsedValue,c=i===Kt.Z.getDecimalSeparator()&&0===o,f=!a&&!d&&"-"!==i&&!this._isValueIncomplete(r)&&this._isStub(i);if(!c&&!f&&(""===this._removeStubs(r)&&(s=Math.abs(0*this._parsedValue)),!isNaN(s)))return s=o?this._truncateToPrecision(null===s?this._parsedValue:s,o):s,!n.parser&&this._isPercentFormat()?function(t,e){return t&&(0,Ut.zB)(t/100,e)}(s,o):s},_getParsedValue:function(t,e){var i=Kt.Z.getSign(t,e?.formatter||e),r=this._removeStubs(t,!0),n=this._parse(r,e),a=n<0?-1:1;return(0,v.kE)(n)&&i!==a?i*n:n},_isValueIncomplete:function(t){if(!this._useMaskBehavior())return this.callBase(t);var e=this._caret(),i=Kt.Z.getDecimalSeparator(),r=this._getTextSeparatorIndex(t),n=r>=0&&r<e.start,a=this._removeStubs(t,!0).split(i);if(!n||2!==a.length)return!1;var s=a[1].length,d=!!this._getFormatPattern().parser,u=!d&&this._getPrecisionLimits(this._getFormatPattern(),t),c=!!d||(0,Ut.Z2)(s,u.min,u.max),f="0"===a[1].charAt(s-1);return c&&(f||!s)},_isValueInRange:function(t){var e=(0,ne.IS)(this.option("min"),-1/0),i=(0,ne.IS)(this.option("max"),1/0);return(0,Ut.Z2)(t,e,i)},_setInputText:function(t){var e=Kt.Z.convertDigits(t,!0),i=function(t,e,i,r){i=cl(i,0);var n=Kt.Z.getDecimalSeparator(),a=function hM(t){return 1===t.length&&!!t.match(/^[,.][0-9]*$/g)}(t),s=dg(r).occurrence,o=a?0:ab(t,n,s),d=ab(e,n,s),u=sb(t,o),c=sb(e,d);if(-1!==o&&i.start>o){var m=xS(i.start-o-1,u[1]);return Qs(c[1]?d+1+ES(m,c[1])+1:e.length,e,r)}var w=function(t){return t.replace(/[^0-9e]+$/,"")}(c[0]),P=xS(u[0].length-i.start,SS(u[0])),$=ES(P,SS(w));return Qs(w.length-($+1),e,r)}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(t),this._toggleEmptinessEventHandler(),this._formattedValue=t,this._focusOutOccurs||this._caret(i)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var t="number"===this.option("mode"),e="desktop"===_t.Z.real().deviceType;this._useMaskBehavior()&&t?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(t){return(0,v.HD)(t)&&1===t.length},_moveCaret:function(t){if(t){var i=Qs(cl(this._caret(),t),this._getInputVal(),this._getFormatPattern());this._caret(i)}},_shouldHandleKey:function(t){var e=(0,be.EV)(t),i=(0,be.j1)(t)||t.altKey||t.shiftKey||!this._isChar(e),r=e===xc;return this._useMaskBehavior()&&!i&&!r},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){Z.Z.off(this._input(),"."+ob)},_isInputFromPaste:function(t){var e=t.originalEvent&&t.originalEvent.inputType;return(0,v.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents:function(){var t=this._input();Z.Z.on(t,(0,be.V4)("input",ob),function(e){this._formatValue(e),this._isValuePasted=!1}.bind(this)),Z.Z.on(t,(0,be.V4)("dxclick",ob),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(Qs(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),Z.Z.on(t,"dxdblclick",function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(t){var e=this._getInputVal().slice(t);return e&&!this._isStub(e,!0)},_isStub:function(t,e){var i=(0,ne.hr)(Kt.Z.getDecimalSeparator());return new RegExp("^[^0-9"+i+"]+$","g").test(t)&&(e||this._isChar(t))},_parseValue:function(t){return this._useMaskBehavior()?this._parsedValue:this.callBase(t)},_getPrecisionLimits:function(t){var e=this._getFormatForSign(t),i=dg(e).index,r=(sb(e,i)[1]||"").replace(/[^#0]/g,"");return{min:r.replace(/^(0*)#*/,"$1").length,max:r.length}},_revertSign:function(t){if(this._useMaskBehavior()){var e=this._caret();if(e.start!==e.end){if((0,be.EV)(t)===xc)return void this._applyRevertedSign(t,e,!0);this._caret(Qs(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(t,e)}},_applyRevertedSign:function(t,e,i){var r=-1*(0,ne.IS)(this._parsedValue,null);if((this._isValueInRange(r)||0===r)&&(this._parsedValue=r,i)){var n=this._getFormatPattern(),a=this._getInputVal();this._setTextByParsedValue(),t.preventDefault();var s=this._getInputVal(),o=function(t,e,i){var r=ug(t,i);return ug(e,i).start-r.start}(a,s,n),d=Qs(e=cl(e,o),s,n);this._caret(d)}},_removeMinusFromText:function(t,e){return this._lastKeyName===xc&&"-"===t.charAt(e.start-1)?this._replaceSelectedText(t,{start:e.start-1,end:e.start},""):t},_setTextByParsedValue:function(){var t=this._getFormatPattern(),e=this._parseValue(),i=this._format(e,t)||"";this._setInputText(i)},_formatValue:function(t){var e=this._getInputVal(),i=this._caret(),r=this._removeMinusFromText(e,i),n=r!==e;if(e=r,!this._isInputFromPaste(t)&&this._isValueIncomplete(r))return this._formattedValue=e,void(n&&this._setTextByParsedValue());if(Kt.Z.convertDigits(this._formattedValue,!0)!==e){var s=this._tryParse(e,i,"");(0,v.$K)(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var t=this._getInputVal();this._parsedValue=this._tryParse(t,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!(0,v.kE)(e))return void(this._parsedValue=e);this._parsedValue=(0,Ut.n$)(e,this.option("min"),this.option("max"))}},_valueChangeEventHandler:function(t){if(!this._useMaskBehavior())return this.callBase(t);var e=this._caret();this._saveValueChangeEvent(t),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged:function(t){switch(t.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(t);break;default:this.callBase(t)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});const BS=BM;(0,kt.Z)("dxNumberBox",BS);const db=BS;var ub=k(4136),cg=k(8360);class PM extends IS.Z{constructor(e,i,r){super(e,i,r),this.currentTemplate=null}_attachEvents(e){var{editor:i}=this;e.option("onClick",r=>{!i.option("openOnFieldClick")&&i._openHandler(r)}),Z.Z.on(e.$element(),"mousedown",r=>{i.$element().is(".dx-state-focused")&&r.preventDefault()})}_create(){var{editor:e}=this,i=(0,C.Z)("<div>"),r=this._getOptions();this._addToContainer(i);var n=e._createComponent(i,Er.Z,(0,O.l)({},r,{elementAttr:{"aria-label":le.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),i,r.visible),{$element:i,instance:n}}_getOptions(){var{editor:e}=this,i=this._isVisible(),n={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:i};return this._addTemplate(n),n}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,i,r){e.toggleClass("dx-dropdowneditor-button-visible",r),i&&i.removeClass("dx-button").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor:i,instance:r}=this,n=i.$element(),a=this._getOptions();r?.option(a),this._legacyRender(n,r?.$element(),a.visible)}}}var hb=k(4609),pg=function(t){if((0,qe.Ym)())return(0,Q.Y_)(t)},cb=function(t){return null===t&&(t=void 0),"function"==typeof t&&(t=t()),t},kS="dx-dropdowneditor-input-wrapper",fg="dx-dropdowneditor-overlay",MS="ios"===_t.Z.current().platform,LS=wS.Z.inherit({_supportedKeys:function(){return(0,O.l)({},this.callBase(),{tab:function(t){if(this.option("opened")){if("instantly"===this.option("applyValueMode"))return void this.close();var e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(Z.Z.trigger(e,"focus"),e.select()),t.preventDefault()}},escape:function(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow:function(t){return!(!(0,be.j1)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this.close(),1))},downArrow:function(t){return!(!(0,be.j1)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this._validatedOpening(),1))},enter:function(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:PM}])},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:le.Z.format("OK"),cancelButtonText:le.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(t){var e=(0,ti.q)(t);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"generic"===t.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+kS).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(t){var{my:e,at:i}=this._getDefaultPopupPosition(t),r=this.option("popupPosition");this.option("popupPosition",(0,O.l)({},r,{my:e,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,C.Z)("<div>").addClass(kS)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder:function(){this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_renderTemplatedField:function(t,e){var i;this._fieldRenderQueueLength=(null!==(i=this._fieldRenderQueueLength)&&void 0!==i?i:0)+1;var r=(0,cg.si)(this._input()),n=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),n.empty();var a=(0,C.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").appendTo(n);t.render({model:e,container:(0,gt.u)(a),onRendered:()=>{if(this._fieldRenderQueueLength--,0===this._fieldRenderQueueLength){var s=this._input();if(!s.length)throw Nt.Z.Error("E1010");this._integrateInput(),r&&Z.Z.trigger(s,"focus")}}}),this._attachWrapperContent(n)},_detachWrapperContent(){var t,e,i;this.option("useHiddenSubmitElement")&&(null===(t=this._$submitElement)||void 0===t||t.detach());var n=null===(e=this._$beforeButtonsContainer)||void 0===e?void 0:e[0].parentNode,a=null===(i=this._$afterButtonsContainer)||void 0===i?void 0:i[0].parentNode;n?.removeChild(this._$beforeButtonsContainer[0]),a?.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(t){var e,i=this.option("useHiddenSubmitElement");t.prepend(this._$beforeButtonsContainer),i&&(null===(e=this._$submitElement)||void 0===e||e.appendTo(t)),t.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){Z.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new hb.k(function(t){var e=(0,C.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,C.Z)(t.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var t=this._inputWrapper(),e=(0,be.V4)(ii.u,this.NAME),i=this.option("openOnFieldClick");Z.Z.off(t,e),Z.Z.on(t,e,this._getInputClickHandler(i)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){MS&&(this._detachFocusOutEvents(),Z.Z.on(this._inputWrapper(),(0,be.V4)("focusout",this.NAME),t=>{var e=t.relatedTarget,i=this.content?(0,C.Z)(this.content()).closest("."+fg):this._$popup;e&&this.option("opened")&&0===(0,C.Z)(e).closest("."+fg,i).length&&this.close()}))},_detachFocusOutEvents:function(){MS&&Z.Z.off(this._inputWrapper(),(0,be.V4)("focusout",this.NAME))},_getInputClickHandler:function(t){return t?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,cg.si)(this._input())&&(this._resetCaretPosition(),Z.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._input().get(0);if(e){var{value:i}=e,r=(0,v.$K)(i)&&(t||this._isEditable())?i.length:0;this._caret({start:r,end:r},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(t){this._focusInput()&&(this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",t),this._setPopupOption("visible",t);var e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,C.Z)("<div>").addClass(fg).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:ne.ZT,_renderPopup:function(){var t=(0,O.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete t.closeOnOutsideClick,t.elementAttr&&!Object.keys(t.elementAttr).length&&delete t.elementAttr,this._popup=this._createComponent(this._$popup,xa,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(t){this._popupContentId="dx-"+new Hr.Z,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:ne.ZT,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:(0,O.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>pg(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:fg}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?t=>{this._popupInitializedAction({popup:t.component})}:null},_dimensionChanged:function(){!(0,qe.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===cb(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>pg(this.$element()))},_popupPositionedHandler:function(t){var e,i,{labelMode:r,stylingMode:n}=this.option();if(this._popup){var a=this._popup.$overlayContent(),s=null===(e=t.position)||void 0===e||null===(i=e.v)||void 0===i?void 0:i.flip,o="hidden"!==r&&"outlined"===n;if(t.position&&a.toggleClass("dx-dropdowneditor-overlay-flipped",s),s&&o&&this._label.isVisible()){var d=this._label.$element();(0,gi.pB)(a,{top:(0,gi.jt)(a).top-parseInt(d.css("fontSize"))})}}},_popupShowingHandler:ne.ZT,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var t;this._openAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var t;this._closeAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var t=this.option("validationMessagePosition");if("auto"!==t)return t;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:i}=js.Z.setup(this.$element()),{top:r}=js.Z.setup(this._popup.$content());e=i+this.option("popupPosition").offset.v>r?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(t){var{target:e}=t,i=(0,C.Z)(e),r=this.getButton("dropDown"),n=r&&r.$element(),a=!!i.closest(this.$element()).length,s=!!i.closest(n).length;return!a&&!s},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(t){var e=(0,C.Z)(t.currentTarget);(t.shiftKey&&e.is(this._getFirstPopupElement())||!t.shiftKey&&e.is(this._getLastPopupElement()))&&(Z.Z.trigger(this._input(),"focus"),t.preventDefault())},_popupElementEscHandler:function(){Z.Z.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(t){t.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),t.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(t)},_applyButtonsLocation:function(t){var e=this.option("buttonsLocation"),i=t;if("default"!==e){var r=(0,ne.Um)(e);(0,U.S6)(i,function(n,a){(0,O.l)(a,{toolbar:r[0],location:r[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(t){var e=gn.Z.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(-1!==i.indexOf("width")||-1!==i.indexOf("height"))&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,C.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(t){var e;switch(t.name){case"width":case"height":this.callBase(t),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":(0,v.$K)(t.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,qe.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,gt.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,kt.Z)("dxDropDownEditor",LS);const PS=LS;var FS="dx-list-group",VS=function(t){return(t.group<<20)+t.item},pl=function(t){return{group:t>>20,item:1048575&t}},KM=sx.Z.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+FS)},_groupItemElements:function(t){return t.find(".dx-list-item")},getIndexByItemData:function(t){var e=this._collectionWidget.option("items"),i=!1;return!!t&&(t.items&&t.items.length&&(t=t.items[0]),(0,U.S6)(e,function(r,n){if(!n.items||((0,U.S6)(n.items,function(a,s){return s!==t||(i={group:r,item:a},!1)}),i))return!1}),i)},getItemDataByIndex:function(t){var e=this._collectionWidget.option("items");return(0,v.kE)(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter:function(){for(var t=[],e=this._collectionWidget.option("items"),i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},deleteItemAtIndex:function(t){var e=pl(t);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(t){var i,e=[];for(i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);var r=[];for(i=0;i<e.length;i++)r.push(this._collectionWidget.keyOf(e[i]));return r},getIndexByKey:function(t,e){var i=e||this._collectionWidget.option("items"),r=-1,n=this;return(0,U.S6)(i,function(a,s){if(s.items&&((0,U.S6)(s.items,function(o,d){var u=n._collectionWidget.keyOf(d);if(n._equalKeys(u,t))return r={group:a,item:o},!1}),-1!==r))return!1}),r},_getGroups:function(t){var i=this._collectionWidget._dataController.group();return i?wc.Z.queryByOptions((0,hl.Z)(t),{group:i}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(t,e){var i=[],r=this._getGroups(e),n={},a=s=>{var o=this.getIndexByKey(s,r),d=o&&r[o.group];if(d)return{groupKey:d.key,item:d.items[o.item]}};return(0,U.S6)(t,function(s,o){var d=a(o);if(d){var u=d.groupKey,c=d.item,f=n[u];f||(n[u]=f={key:u,items:[]},i.push(f)),f.items.push(c)}}),i},moveItemAtIndexToIndex:function(t,e){var i=this._collectionWidget.option("items"),r=pl(t),n=pl(e),a=i[r.group].items,s=i[n.group].items,o=a[r.item];a.splice(r.item,1),s.splice(n.item,0,o)},_isItemIndex:function(t){return t&&(0,v.kE)(t.group)&&(0,v.kE)(t.item)},_getNormalizedItemIndex:function(t){var e=(0,C.Z)(t),i=e.closest("."+FS);return i.length?VS({group:this._groupElements().index(i),item:this._groupItemElements(i).index(e)}):-1},_normalizeItemIndex:function(t){return VS(t)},_denormalizeItemIndex:function(t){return pl(t)},_getItemByNormalizedIndex:function(t){var e=pl(t),i=this._groupElements().eq(e.group);return this._groupItemElements(i).eq(e.item)},_itemsFromSameParent:function(t,e){return pl(t).group===pl(e).group}});const GM=KM;var NS={},zS=[],_g=function(t,e,i){zS.push({enabled:t,decoratorType:e,decoratorSubType:i})};_g(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")}),_g(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var t=this.option("itemDeleteMode");return"toggle"===t||"slideButton"===t||"swipe"===t||"static"===t?"delete":"menu"},function(){var t=this.option("itemDeleteMode");return"slideItem"===t&&(t="slide"),t}),_g(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"}),_g(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var tL=en.Z.inherit({ctor:function(t){this._list=t,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&(0,U.S6)(this._decorators,function(t,e){e.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],(0,U.S6)(zS,function(t,e){if(e.enabled.call(this._list)){var r=e.decoratorType.call(this._list),n=e.decoratorSubType.call(this._list),a=this._createDecorator(r,n);this._decorators.push(a)}}.bind(this))},_createDecorator:function(t,e){return new(this._findDecorator(t,e))(this._list)},_findDecorator:function(t,e){var i,r=null===(i=NS[t])||void 0===i?void 0:i[e];if(!r)throw Nt.Z.Error("E1012",t,e);return r},modifyItemElement:function(t){var e=(0,C.Z)(t.itemElement),i={$itemElement:e};this._prependBeforeBags(e,i),this._appendAfterBags(e,i),this._applyDecorators("modifyElement",i)},afterItemsRendered:function(){this._applyDecorators("afterRender")},_prependBeforeBags:function(t,e){var i=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");t.prepend(i)},_appendAfterBags:function(t,e){var i=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");t.append(i)},_collectDecoratorsMarkup:function(t,e,i){var r=(0,C.Z)("<div>");return(0,U.S6)(this._decorators,function(){var n=(0,C.Z)("<div>").addClass(i);this[t]((0,O.l)({$container:n},e)),n.children().length&&r.append(n)}),r.children()},_applyDecorators:function(t,e){(0,U.S6)(this._decorators,function(){this[t](e)})},_handlerExists:function(t){if(!this._decorators)return!1;for(var e=this._decorators,i=e.length,r=0;r<i;r++)if(e[r][t]!==ne.ZT)return!0;return!1},_eventHandler:function(t,e,i){if(!this._decorators)return!1;for(var r=!1,n=this._decorators,a=n.length,s=0;s<a&&!(r=n[s][t](e,i));s++);return r},handleClick:function(t,e){return this._eventHandler("handleClick",t,e)},handleKeyboardEvents:function(t,e){return this._eventHandler("handleKeyboardEvents",t,e)},handleEnterPressing:function(t){return this._eventHandler("handleEnterPressing",t)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(t,e){return this._eventHandler("handleContextMenu",t,e)},getExcludedItemSelectors:function(){var t=[];return this._applyDecorators("getExcludedSelectors",t),t.join(",")}});const iL=tL;var aL=G0.inherit({_supportedKeys(){var t=this,e=this.callBase(),i=(r,n)=>{var a=this._editStrategy,s=this.option("focusedElement"),o=a.getNormalizedIndex(s);if(o!==this._getLastItemIndex()||!this._dataController.isLoading())if(r.shiftKey&&t.option("itemDragging.allowReordering")){var c=a.getItemElement(o+(n?-1:1));this.reorderItem(s,c),this.scrollToItem(s),r.preventDefault()}else this._editProvider.handleKeyboardEvents(o,n)||(n?e.upArrow(r):e.downArrow(r))};return(0,O.l)({},e,{del:r=>{t.option("allowItemDeleting")&&(r.preventDefault(),t.deleteItem(t.option("focusedElement")))},upArrow:r=>i(r,!0),downArrow:r=>i(r),enter:function(r){this._editProvider.handleEnterPressing(r)||e.enter.apply(this,arguments)},space:function(r){this._editProvider.handleEnterPressing(r)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var t=this._editProvider.getExcludedItemSelectors();t.length&&(this._itemElementsCache=this._itemElementsCache.not(t))},_isItemStrictEquals:function(t,e){var i=t&&t.__dx_key__;return!(i&&!this.key()&&this._selection.isItemSelected(i))&&this.callBase(t,e)},_getDefaultOptions(){return(0,O.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:le.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>"ios"===t.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new iL(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new GM(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(t){var e=(0,C.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,t)||(this._saveSelectionChangeEvent(t),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(t){var e=(0,C.Z)(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if((0,be.z6)(t)&&this._editProvider.handleContextMenu(e,t))return void(t.handledByEditProvider=!0);this.callBase(...arguments)}},_getItemContainer:function(t){if(this.option("grouped")){var e,i=null===(e=this._editStrategy.getIndexByItemData(t))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(i)}return this.callBase(t)},_itemContextMenuHandler(t){var e=(0,C.Z)(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if(!t.handledByEditProvider&&this._editProvider.handleContextMenu(e,t))return void t.preventDefault();this.callBase(...arguments)}},_postprocessRenderItem(t){this.callBase(...arguments),this._editProvider.modifyItemElement(t)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(t){var e=this._editStrategy.getItemElement(t);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(t){switch(t.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(t);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(t)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(t){return this._itemElements().index(t)},getItemElementByFlatIndex(t){var e=this._itemElements();return t<0||t>=e.length?(0,C.Z)():e.eq(t)},getItemByIndex(t){return this._editStrategy.getItemDataByIndex(t)}});const sL=aL;var fb=k(5477),oL=sL.inherit(fb.Z).inherit({_addWidgetPrefix:function(t){return"dx-list-"+t},_getCombinedFilter:function(){var t=this._dataController,e={filter:t.filter()};return t.addSearchFilter(e),e.filter},_initDataSource:function(){var t=this.option("searchValue"),e=this.option("searchExpr"),i=this.option("searchMode");this.callBase();var r=this._dataController;t&&t.length&&r.searchValue(t),i.length&&r.searchOperation(fb.Z.getOperationBySearchMode(i)),e&&r.searchExpr(e)}});const HS=oL;(0,kt.Z)("dxList",HS);const Sc=HS;var lL=(0,O.l)({},I0.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new Ys.o({store:new H_.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,Pt.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,Pt.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(t){var e=new Y.BH;return t=this._unwrappedValue(t),(0,v.$K)(t)?(this._loadSingle(this._valueGetterExpr(),t).done(function(i){this._isValueEquals(this._valueGetter(i),t)?e.resolve(i):e.reject()}.bind(this)).fail(function(){e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var t;null===(t=this._loadValueDeferred)||void 0===t||t.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(t){var e;return(t=null!==(e=t)&&void 0!==e?e:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(t=this._getItemKey(t)),_n.Z.unwrap(t)},_getItemKey:function(t){var e=this._dataSource.key();if(Array.isArray(e)){for(var i={},r=0,n=e.length;r<n;r++)i[e[r]]=t[e[r]];return i}return e&&"object"==typeof t&&(t=t[e]),t},_isValueEquals:function(t,e){var i=this._dataSource&&this._dataSource.key(),r=this._compareValues(t,e);return!r&&i&&(0,v.$K)(t)&&(0,v.$K)(e)&&(r=Array.isArray(i)?this._compareByCompositeKey(t,e,i):this._compareByKey(t,e,i)),r},_compareByCompositeKey:function(t,e,i){var r=v.Kn;if(!r(t)||!r(e))return!1;for(var n=0,a=i.length;n<a;n++)if(t[i[n]]!==e[i[n]])return!1;return!0},_compareByKey:function(t,e,i){var r=_n.Z.unwrap,n=(0,ne.IS)(r(t[i]),t),a=(0,ne.IS)(r(e[i]),e);return this._compareValues(n,a)},_compareValues:function(t,e){return(0,Pt.Ex)(t,!0)===(0,Pt.Ex)(e,!0)},_initDynamicTemplates:ne.ZT,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var t=this.option("valueExpr");return(0,v.HD)(t)&&"this"!==t||(0,v.mf)(t)?t:null},_dataExpressionOptionChanged:function(t){switch(t.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const ZS=lL;var $S=(0,qe.Jj)(),pL=["startswith","contains","endwith","notcontains"],WS="android"!==_t.Z.real().platform,KS=PS.inherit({_supportedKeys:function(){var t=this.callBase();return(0,O.l)({},t,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var i=(0,C.Z)(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}t.tab.apply(this,arguments)},space:ne.ZT,home:ne.ZT,end:ne.ZT})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function(t){var e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue:function(t){this.option("value",t)},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),(0,O.l)(ZS._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:le.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:ne.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,O.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var t=this.option().items;t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Yx.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(t){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(t,e,i){return t>i?e:t<e?i:t},_items:function(){var t=this._getPlainItems(!this._list&&this._dataSource.items());return new hl.Z(t).filter("disabled","<>",!0).toArray()},_calcNextItem:function(t){var e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1)]},_getSelectedIndex:function(){var t=this._items(),e=this.option("selectedItem"),i=-1;return(0,U.S6)(t,function(r,n){if(this._isValueEquals(n,e))return i=r,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var t=this._popup.$content();Z.Z.off(t,"mouseup"),Z.Z.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var t=this.option("dropDownOptions.container"),e=t&&(0,C.Z)(t);if(e&&e.length&&!(0,v.FJ)(e.get(0))){var i=[].slice.call(e.parents());i.unshift(e.get(0)),(0,U.S6)(i,function(r,n){return n!==(0,C.Z)("body").get(0)&&("hidden"===$S.getComputedStyle(n).overflowY?(this._$customBoundaryContainer=(0,C.Z)(n),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){var t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue:function(t,e){return this._loadItem(t).always(e)},_getItemFromPlain:function(t,e){var i,r;return e&&"object"!=typeof t&&(e.itemByValue||(e.itemByValue={},(i=this._getPlainItems()).forEach(function(n){e.itemByValue[this._valueGetter(n)]=n},this)),r=e.itemByValue[t]),r||(i=this._getPlainItems(),r=(0,ne.h3)(i,function(n){return this._isValueEquals(this._valueGetter(n),t)}.bind(this))[0]),r},_loadItem:function(t,e){var i=this._getItemFromPlain(t,e);return void 0!==i?(new Y.BH).resolve(i).promise():this._loadValue(t)},_getPlainItems:function(t){var e=[];t=t||this.option("items")||this._dataSource.items()||[];for(var i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},_updateActiveDescendant(){var t,e=this.option("opened"),i=null===(t=this._list)||void 0===t?void 0:t.getFocusedItemId(),r=(0,C.Z)("#".concat(i)).length>0;this.setAria({activedescendant:e&&r&&i||null})},_setSelectedItem:function(t){var e=this._displayValue(t);this.option("selectedItem",(0,ne.IS)(t,null)),this.option("displayValue",e)},_displayValue:function(t){return this._displayGetter(t)},_refreshSelected:function(){var t={};this._listItemElements().each(function(e,i){var r=(0,C.Z)(i),n=this._valueGetter(r.data("dxListItemData"));this._isSelectedValue(n,t)?this._list.selectItem(r):this._list.unselectItem(r)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode:function(){var t=this.option("searchMode"),e=t.toLowerCase();if(!pL.includes(e))throw Nt.Z.Error("E1019",t)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,C.Z)()},_popupConfig:function(){return(0,O.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_setAriaTargetForList:function(){this._list._getAriaTarget=this._getAriaTarget.bind(this)},_renderList:function(){this._listId="dx-"+(new Hr.Z)._value;var t=this._$list=(0,C.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._list=this._createComponent(t,Sc,this._listConfig()),this._refreshList(),this._setAriaTargetForList(),this._list.option("_listAttributes",{role:"combobox"}),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var t=(0,be.V4)("mousedown","dxDropDownList");Z.Z.off(this._$list,t),Z.Z.on(this._$list,t,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===_t.Z.real().deviceType},_listConfig:function(){var t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:ne.ZT,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){var t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,be.V4)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,be.V4)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,be.V4)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,be.V4)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),Z.Z.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(Z.Z.on(this._input(),this._getSearchEvent(),t=>{this._searchHandler(t)}),WS&&(Z.Z.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),Z.Z.on(this._input(),this._getCompositionEndEvent(),t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){Z.Z.off(this._input(),this._getSearchEvent()),Z.Z.off(this._input(),this._getSetFocusPolicyEvent()),WS&&(Z.Z.off(this._input(),this._getCompositionStartEvent()),Z.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(t){if(!arguments.length)return this._isTextComposition;this._isTextComposition=t},_searchHandler:function(t,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},i)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource:function(t){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter:function(){var t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!this.option("readOnly")&&this._searchValue()){var t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(t){0===this._dataController.pageIndex()?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow:function(){var i=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!i)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var t=this._dataController,e=t.pageIndex(),i=(0,v.$K)(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,i},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var t=this.$element(),e=this._$customBoundaryContainer,i=t.offset().top-(e?e.offset().top:0),r=(0,Q.zp)($S),n=e?Math.min((0,Q.zp)(e),r):r,a=Math.max(i,n-i-(0,Q.zp)(t));return Math.min(.5*n,a)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(t){return"this"===this.option("valueExpr")&&(0,v.Kn)(t)},_optionChanged:function(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(ZS,Nx);(0,kt.Z)("dxDropDownList",KS);const fL=KS;var Xd=k(2598),GS="dx-radiobutton-icon",US=Xd.Z.inherit({_supportedKeys:function(){return(0,O.l)(this.callBase(),{space:function(t){t.preventDefault(),this._clickAction({event:t})}})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=(0,C.Z)("<div>").addClass(GS),(0,C.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(t){this.$element().toggleClass("dx-radiobutton-checked",t).find("."+GS).toggleClass("dx-radiobutton-icon-checked",t),this.setAria("checked",t)},_renderClick:function(){var t=(0,be.V4)(ii.u,this.NAME);this._clickAction=this._createAction(function(e){this._clickHandler(e.event)}.bind(this)),Z.Z.off(this.$element(),t),Z.Z.on(this.$element(),t,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(t){this._saveValueChangeEvent(t),this.option("value",!0)},_optionChanged:function(t){"value"===t.name?(this._renderCheckedState(t.value),this.callBase(t)):this.callBase(t)}});(0,kt.Z)("dxRadioButton",US);const CL=US;var _b="dxListEditDecorator",bL=(0,be.V4)(G_.BL,_b),yL=(0,be.V4)(G_.aq,_b),wL=(0,be.V4)(G_.ut,_b),xL=en.Z.inherit({ctor:function(t){this._list=t,this._init()},_init:ne.ZT,_shouldHandleSwipe:!1,_attachSwipeEvent:function(t){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,Q.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};Z.Z.on(t.$itemElement,bL,e,this._itemSwipeStartHandler.bind(this)),Z.Z.on(t.$itemElement,yL,this._itemSwipeUpdateHandler.bind(this)),Z.Z.on(t.$itemElement,wL,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(t){var e=(0,C.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,t))},_itemSwipeUpdateHandler:function(t){var e=(0,C.Z)(t.currentTarget);this._swipeUpdateHandler(e,t)},_itemSwipeEndHandler:function(t){var e=(0,C.Z)(t.currentTarget);this._swipeEndHandler(e,t),this._clearSwipeCache=!0},beforeBag:ne.ZT,afterBag:ne.ZT,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(t){this._shouldHandleSwipe&&(this._attachSwipeEvent(t),this._clearSwipeCache=!0)},afterRender:ne.ZT,handleClick:ne.ZT,handleKeyboardEvents:ne.ZT,handleEnterPressing:ne.ZT,handleContextMenu:ne.ZT,_swipeStartHandler:ne.ZT,_swipeUpdateHandler:ne.ZT,_swipeEndHandler:ne.ZT,visibilityChange:ne.ZT,getExcludedSelectors:ne.ZT,dispose:ne.ZT});const SL=xL;var YS="dx-list-select-decorator-enabled",DL="dx-list-select-checkbox-container",AL="dx-list-select-checkbox",RL="dx-list-select-radiobutton-container",OL="dx-list-select-radiobutton",qS=(0,be.V4)(ii.u,"dxListEditDecorator");!function UM(t,e,i){var r=NS,n={};n[t]=r[t]?r[t]:{},n[t][e]=i,(0,O.l)(r,n)}("selection","default",SL.inherit({_init:function(){this.callBase.apply(this,arguments);var t=this._list.option("selectionMode");this._singleStrategy="single"===t,this._containerClass=this._singleStrategy?RL:DL,this._controlClass=this._singleStrategy?OL:AL,this._controlWidget=this._singleStrategy?CL:ub.Z,this._list.$element().addClass(YS)},beforeBag:function(t){var e=t.$itemElement,i=t.$container.addClass(this._containerClass),r=(0,C.Z)("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(r,(0,O.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(n){n.event&&this._list._saveSelectionChangeEvent(n.event),this._processCheckedState(e,n.value),n.event&&n.event.stopPropagation()}.bind(this)}))},modifyElement:function(t){this.callBase.apply(this,arguments);var e=t.$itemElement,i=this._controlWidget.getInstance(e.find("."+this._controlClass));Z.Z.on(e,"stateChanged",function(r,n){i.option("value",n)}.bind(this))},_updateSelectAllState:function(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(t,e){var i=!e,r=this._list,n=this._$selectAll,a=r._getLastItemIndex();return!(!n||!(e&&0===t||i&&t===a)||(r.option("focusedElement",n),r.scrollToItem(r.option("focusedElement")),0))},handleEnterPressing:function(t){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return t.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var t=this._$selectAll=(0,C.Z)("<div>").addClass("dx-list-select-all"),e=this._list,i=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent((0,C.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(t),ub.Z,{elementAttr:{"aria-label":"Select All"},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",i),(0,C.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(t),this._list.itemsContainer().prepend(t),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),Z.Z.off(this._$selectAll,qS),Z.Z.on(this._$selectAll,qS,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(t){t.event&&t.event.stopPropagation();var e=this._selectAllCheckBox.option("value");t.event&&this._list._saveSelectionChangeEvent(t.event),!0===e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){var t=this._list,e=t._dataController;return!("allPages"===t.option("selectAllMode")&&t.option("grouped")&&!e.group()&&(Nt.Z.log("W1010"),1))},_selectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler:function(t){this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(t){return this._list.isItemSelected(t)},_processCheckedState:function(t,e){e?this._list.selectItem(t):this._list.unselectItem(t)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(YS),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var jS="dx-selectbox-popup-wrapper",XS=fL.inherit({_supportedKeys:function(){var t=this,e=this.callBase(),i=function(n){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(n.preventDefault(),this.reset()),this._savedTextRemoveEvent=n,this._preventSubstitution=!0},r=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return(0,O.l)({},e,{tab:function(){this.option("opened")&&"instantly"===this.option("applyValueMode")&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(n){if(e.upArrow&&e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(n),!0},downArrow:function(n){if(e.downArrow&&e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(n),!0},leftArrow:function(){r(),e.leftArrow&&e.leftArrow.apply(this,arguments)},rightArrow:function(){r(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home:function(){r(),e.home&&e.home.apply(this,arguments)},end:function(){r(),e.end&&e.end.apply(this,arguments)},escape:function(){var n=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),n??!0},enter:function(n){var a=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,v.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(n),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return n.preventDefault(),o&&(a&&this._toggleOpenState(),this._valueChangeEventHandler(n)),a;if(e.enter&&e.enter.apply(this,arguments))return a}},space:function(n){var a=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(a&&!s&&!o)return n.preventDefault(),this._valueChangeEventHandler(n),!0},backspace:i,del:i})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{placeholder:le.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(t){(0,v.$K)(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup:function(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+jS},_setDeprecatedOptions(){this.callBase(),(0,O.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var t;if(this._searchValue()){var{items:i,selectedItem:r}=this.option(),n=this._list._itemElements(),a=null!==(t=i?.indexOf(r))&&void 0!==t?t:-1,s=-1===a||this._isCustomItemSelected()?null:n.eq(a);this._focusListElement(s)}else this._focusListElement(null)},_renderFocusedElement:function(){if(this._list){if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);var i=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(i)}},_focusListElement:function(t){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,gt.u)(t)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),(new Y.BH).resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),(new Y.BH).resolve()},_setNextItem:function(t){var e=this._calcNextItem(t),i=this._valueGetter(e);this._setValue(i)},_setNextValue:function(t){(this._dataController.isLoaded()?(new Y.BH).resolve():this._dataController.load()).done(function(){var i=this._getSelectedIndex(),r=this._dataController.pageSize(),n=this._dataController.isLastPage(),a=i===this._items().length-1;this._saveValueChangeEvent(t);var s="downArrow"===(0,be.EV)(t)?1:-1;r&&!n&&a&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)}.bind(this))},_setSelectedItem:function(t){var e=!this._isCustomValueAllowed()&&void 0===t;this.callBase(e?null:t),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(t){return t=!(0,v.$K)(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig:function(){var t=(0,O.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,O.l)(t,{showSelectionControls:!0,selectionByClick:!0}),t},_listFocusedItemChangeHandler:function(t){if(!this._preventInputValueRender){var e=t.component,i=(0,C.Z)(e.option("focusedElement")),r=e._getItemData(i);this._updateField(r)}},_updateField:function(t){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var i=this._displayGetter(t);return this.option("text",i),void this._renderDisplayText(i)}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):ne.ZT},_selectionChangeHandler:function(t){(0,U.S6)(t.addedItems||[],function(e,i){this._setValue(this._valueGetter(i))}.bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(t){if(!this.option("disabled")){if(!(t=arguments.length?t:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&t)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[]);t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText:function(){var t=this.option("selectedItem");if(null===t)return!1;var e=this._displayGetter(t);return(e?String(e):"")===this._searchValue()},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{acceptCustomValue:e,text:i,selectedItem:r}=this.option();e?!t&&!this._isValueChanging&&(this._updateField(r??this._createCustomItem(i)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(function(n){var a=(0,ne.IS)(n,r);this._setSelectedItem(a),this._updateField(a),this._clearFilter()}.bind(this))}.bind(this))},_valueChangeEventIncludesBlur:function(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent:function(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(t){this._isPreventedFocusOutEvent(t)||(this._isOverlayNestedTarget(t.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)),t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed:function(t){var{searchEnabled:e}=this.option(),i=this._isOverlayNestedTarget(t?.relatedTarget);if(this._wasSearch()&&e&&!i){var n,a=null===(n=this._popup)||void 0===n?void 0:n._hideAnimationProcessing;this._clearSearchTimer(),a?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:function(t){return!!(0,C.Z)(t).closest(".".concat(jS)).length},_clearTextValue:function(){var t=this.option("selectedItem"),e=this._displayGetter(t);t&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var t=tt.Z.getActiveElement(this.element());return this.callBase()&&(0,C.Z)(t).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var t=this._list&&this.option("opened")&&(0,C.Z)(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler:function(t){var e=this._getCurrentValue();this._focusListElement((0,C.Z)(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(t){this._setValue(t)},_loadItem:function(t,e){var i=this,r=new Y.BH;return this.callBase(t,e).done(function(n){r.resolve(n)}.bind(this)).fail(function(n){if(null==n||!n.shouldSkipCallback){var a=i.option("selectedItem");i.option("acceptCustomValue")&&t===i._valueGetter(a)?r.resolve(a):r.reject()}}.bind(this)),r.promise()},_loadInputValue:function(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected:function(){var t=this.option("selectedItem"),e=this._searchValue(),i=this._displayGetter(t);return!i||e!==i.toString()},_valueChangeEventHandler:function(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(t){var e={text:t},i=this._customItemCreatingAction(e),r=(0,ne.IS)(i,e.customItem);return(0,v.$K)(i)&&Ld.Z.log("W0015","onCustomItemCreating","customItem"),r},_customItemAddedHandler:function(t){var e=this._searchValue(),i=this._createCustomItem(e);if(this._saveValueChangeEvent(t),void 0===i)throw this._renderValue(),Ld.Z.Error("E0121");(0,v.tI)(i)?(0,Y.p4)(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(t){this._disposed||(this.option("selectedItem",t=t||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler:function(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch:function(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler:function(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered:function(t){this.callBase(),null!==t&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var t=this._input().get(0),e=this._searchValue().length,i=0===t.selectionStart&&t.selectionEnd===e,r=t.selectionStart!==t.selectionEnd,n=e===t.selectionEnd;return this._wasSearch()&&r&&!i&&n&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution:function(){if(this._shouldSubstitutionBeRendered()){var t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(t){var e=this._input(),i=e.val().length;if(0!==i){var r=e.get(0),n=this._displayGetter(t).toString();r.value=n,this._caret({start:i,end:n.length})}}}else delete this._preventSubstitution},_dispose:function(){this._renderInputValueAsync=ne.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});(0,kt.Z)("dxSelectBox",XS);const QS=XS;var JS=t=>t.getMonth()+1,eE=(t,e)=>{var i=t.getDate(),r=Ec("M",t),n=(0,Ut.n$)(parseInt(e),r.min,r.max);t.setMonth(n-1,1);var{min:a,max:s}=Ec("dM",t),o=(0,Ut.n$)(i,a,s);t.setDate(o)},FL={a:t=>t.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:JS,L:JS,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},VL=(0,O.l)({},Fd,{a:(t,e)=>{var i=t.getHours();i>=12!=!!parseInt(e)&&t.setHours((i+12)%24)},d:(t,e)=>{e>Ec("dM",t).max&&t.setMonth(t.getMonth()+1),t.setDate(e)},h:(t,e)=>{var i=t.getHours()>=12;t.setHours(+e%12+(i?12:0))},M:eE,L:eE,E:(t,e)=>{e<0||t.setDate(t.getDate()-t.getDay()+parseInt(e))},y:(t,e)=>{var i=t.getFullYear(),r=String(e).length,n=String(Ec("y",t).max).length,a=parseInt(String(i).substr(0,n-r)+e);t.setFullYear(a)}}),Ec=(t,e,i)=>{var r={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:0,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return r[i||t]||r.getAmPm},gb=["year","day","month","day"],tE=["hours","minutes","seconds","milliseconds"],Ea={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var t=new Date;return new Date(t.getFullYear()+50,t.getMonth(),t.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:gb},time:{getStandardPattern:function(){return"HH:mm"},components:tE},datetime:{getStandardPattern:function(){var t,e;return(e=(0,C.Z)("<input>").attr("type","datetime")).val("2000-01-01T01:01Z"),e.val()&&(t="yyyy-MM-ddTHH:mmZ"),t||(t="yyyy-MM-ddTHH:mm:ssZ"),Ea.FORMATS_INFO.datetime.getStandardPattern=function(){return t},t},components:[...gb,...tE]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...gb,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(t,e){var i=Ea.FORMATS_INFO[e].getStandardPattern();return Oi.serializeDate(t,i)},fromStandardDateFormat:function(t){var e=Oi.dateParser(t);return(0,v.J_)(e)?e:void 0},getMaxMonthDay:function(t,e){return new Date(t,e+1,0).getDate()},mergeDates:function(t,e,i){if(!e)return e||null;if(!t||isNaN(t.getTime())){var r=new Date(null);t=new Date(r.getFullYear(),r.getMonth(),r.getDate())}var n=new Date(t.valueOf());return(0,U.S6)(Ea.FORMATS_INFO[i].components,function(){var s=Ea.DATE_COMPONENTS_INFO[this];n[s.setter](e[s.getter]())}),n},getLongestCaptionIndex:function(t){var r,e=0,i=0;for(r=0;r<t.length;++r)t[r].length>i&&(e=r,i=t[r].length);return e},formatUsesMonthName:function(t){return ct.formatUsesMonthName(t)},formatUsesDayName:function(t){return ct.formatUsesDayName(t)},getLongestDate:function(t,e,i){var r=function(t){var e=typeof t;return"string"===e?"format":"object"===e&&void 0!==t.type?t.type:null}(t),n=9;(!r||Ea.formatUsesMonthName(r))&&(n=Ea.getLongestCaptionIndex(e));var a=new Date(1888,n,21,23,59,59,999);if(!r||Ea.formatUsesDayName(r)){var s=a.getDate()-a.getDay()+Ea.getLongestCaptionIndex(i);a.setDate(s)}return a},normalizeTime:function(t){t.setSeconds(0),t.setMilliseconds(0)}};Ea.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(t,e){var i=new Date(e.getTime());return i.setFullYear(t),ct.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(t,e){var i=new Date(e.getTime());return i.setDate(t),ct.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(t){return ct.getMonthNames()[t]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(t){return ct.format(new Date(0,0,0,t),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(t){return ct.format(new Date(0,0,0,0,t),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(t){return ct.format(new Date(0,0,0,0,0,t),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(t){return ct.format(new Date(0,0,0,0,0,0,t),"millisecond")},startValue:0,endValue:999}};const oi=Ea;var mb=k(3813),XL=gn.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{onClick:null,onCaptionClick:null,text:""})},_init:function(){this.callBase(),this._initActions()},_initActions:function(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")},_initMarkup:function(){this.callBase(),this.$element().addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()},_renderButtons:function(){var t=this,e=this.option("rtlEnabled")?-1:1;this._prevButton=this._createComponent((0,C.Z)("<a>"),Er.Z,{focusStateEnabled:!1,icon:"chevronleft",onClick:function(a){t._clickAction({direction:-e,event:a})},integrationOptions:{}});var i=this._prevButton.$element().addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,C.Z)("<a>"),Er.Z,{focusStateEnabled:!1,icon:"chevronright",onClick:function(a){t._clickAction({direction:e,event:a})},integrationOptions:{}});var r=this._nextButton.$element().addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,C.Z)("<a>").addClass("dx-calendar-caption-button"),Er.Z,{focusStateEnabled:!1,onClick:function(a){t._captionClickAction({event:a})},integrationOptions:{}});var n=this._caption.$element();this.$element().append(i,n,r)},_renderCaption:function(){this._caption.option("text",this.option("text"))},toggleButton:function(t,e){var r=this["_"+t+"Button"];r&&(r.option("disabled",e),r.$element().toggleClass("dx-calendar-disabled-navigator-link",e))},_optionChanged:function(t){"text"===t.name?this._renderCaption():this.callBase(t)}});const QL=XL;var{abstract:Js}=gn.Z,nE="dx-calendar-empty-cell",aE="dx-calendar-selected-date",vb="dx-calendar-contoured-date",sE=(0,be.V4)(ii.u,"dxCalendar"),oE="dxDateValueKey",rP=gn.Z.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderEvents()},_createTable:function(){this._$table=(0,C.Z)("<table>");var t=le.Z.format("dxCalendar-ariaWidgetName"),e=le.Z.format("dxCalendar-ariaHotKeysInfo");return this.setAria({label:"".concat(t,". ").concat(e),role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=(0,C.Z)("<tbody>").appendTo(this._$table);for(var t={cellDate:this._getFirstCellData(),prevCellDate:null},e=0,i=this.option("rowCount");e<i;e++){t.row=this._createRow();for(var r=0,n=this.option("colCount");r<n;r++)this._renderCell(t,r);this._renderWeekNumberCell(t)}},_createRow:function(){var t=tt.Z.createElement("tr");return this.setAria("role","row",(0,C.Z)(t)),this.$body.get(0).appendChild(t),t},_appendCell:function(t,e){this._appendMethodName||this._cacheAppendMethodName(),(0,C.Z)(t)[this._appendMethodName](e)},_cacheAppendMethodName:function(t){this._appendMethodName=t??this.option("rtlEnabled")?"prepend":"append"},_createCell:function(t){var e=tt.Z.createElement("td"),i=(0,C.Z)(e);return e.className=this._getClassNameByDate(t),e.setAttribute("data-value",Oi.serializeDate(t,Xe.getShortDateFormat())),(0,Ed.aT)(e,oE,t),this.setAria({role:"gridcell",label:this.getCellAriaLabel(t)},i),{cell:e,$cell:i}},_renderCell:function(t,e){var{cellDate:i,prevCellDate:r,row:n}=t;r&&Xe.fixTimezoneGap(r,i),t.prevCellDate=i;var{cell:a,$cell:s}=this._createCell(i),o=this.option("cellTemplate");this._appendCell(n,a),o?o.render(this._prepareCellTemplateData(i,e,s)):a.innerHTML=this._getCellText(i),t.cellDate=this._getNextCellData(i)},_getClassNameByDate:function(t){var e="dx-calendar-cell";return this._isTodayCell(t)&&(e+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(t)||this.isDateDisabled(t))&&(e+=" ".concat(nE)),this._isOtherView(t)&&(e+=" ".concat("dx-calendar-other-view")),e},_prepareCellTemplateData:function(t,e,i){var r=t instanceof Date;return{model:{text:r?this._getCellText(t):t,date:r?t:void 0,view:this._getViewName()},container:(0,gt.u)(i),index:e}},_renderEvents:function(){this._createCellClickAction(),Z.Z.off(this._$table,sE),Z.Z.on(this._$table,sE,"td:not(.".concat("dx-calendar-week-number-cell",")"),t=>{(0,C.Z)(t.currentTarget).hasClass(nE)||this._cellClickAction({event:t,value:(0,C.Z)(t.currentTarget).data(oE)})})},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createDisabledDatesHandler:function(){var t=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(t)?this._getDefaultDisabledDatesHandler(t):t||ne.ZT},_getDefaultDisabledDatesHandler:function(t){return ne.ZT},_isTodayCell:Js,_isDateOutOfRange:Js,isDateDisabled:function(t){var e={date:t,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:Js,_getCellText:Js,_getFirstCellData:Js,_getNextCellData:Js,_renderContouredDate:function(t){if(this.option("focusStateEnabled")){t=t||this.option("contouredDate");var e=this._getContouredCell(),i=this._getCellByDate(t);e.removeClass(vb),t&&i.addClass(vb)}},_getContouredCell:function(){return this._$table.find(".".concat(vb))},_changeValue:function(t){if(t){var e=this.option("value"),i=e?new Date(e):new Date;i.setDate(t.getDate()),i.setMonth(t.getMonth()),i.setFullYear(t.getFullYear()),i.setDate(t.getDate()),this.option("value",i)}else this.option("value",null)},_renderValue:function(){if(this.option("allowValueSelection")){var t=this.option("value"),e=this._getCellByDate(t);this._selectedCell&&this._selectedCell.removeClass(aE),e.addClass(aE),this._selectedCell=e}},getCellAriaLabel:function(t){return this._getCellText(t)},_getFirstAvailableDate:function(){var t=this.option("date"),e=this.option("min");return t=Xe.getFirstDateView(this._getViewName(),t),new Date(e&&t<e?e:t)},_getCellByDate:Js,isBoundary:Js,_optionChanged:function(t){var{name:e,value:i}=t;switch(e){case"value":this._renderValue();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"disabledDates":case"cellTemplate":this._invalidate();break;case"rtlEnabled":this._cacheAppendMethodName(i),this.callBase(t);break;case"_todayDate":this._renderBody();break;default:this.callBase(t)}}});const gg=rP;var oP={month:gg.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:ne.ZT,getCellAriaLabel:function(t){return ct.format(t,"longdate")},_renderHeader:function(){var t=(0,C.Z)("<tr>"),e=(0,C.Z)("<thead>").append(t);this._$table.prepend(e);for(var i=0,r=this.option("colCount");i<r;i++)this._renderHeaderCell(i,t);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(t)},_renderHeaderCell:function(t,e){var{firstDayOfWeek:i}=this.option(),{full:r,abbreviated:n}=this._getDayCaption(i+t),a=(0,C.Z)("<th>").attr({scope:"col",abbr:r}).text(n);this._appendCell(e,a)},_renderWeekHeaderCell:function(t){var e=(0,C.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"}).text("#");this.option("rtlEnabled")?t.append(e):t.prepend(e)},_renderWeekNumberCell:function(t){var{showWeekNumbers:e,rtlEnabled:i,cellTemplate:r}=this.option();if(e){var n=this._getWeekNumber(t.prevCellDate),a=tt.Z.createElement("td"),s=(0,C.Z)(a);a.className="dx-calendar-week-number-cell",r?r.render(this._prepareCellTemplateData(n,-1,s)):a.innerHTML=n,i?t.row.append(a):t.row.prepend(a),this.setAria({role:"gridcell",label:"Week ".concat(n)},s)}},_getWeekNumber:function(t){var{weekNumberRule:e,firstDayOfWeek:i}=this.option();return Xe.getWeekNumber(t,i,"auto"===e?1===i?"firstFourDays":"firstDay":e)},getNavigatorCaption:function(){return ct.format(this.option("date"),"monthandyear")},_isTodayCell:function(t){var e=this.option("_todayDate")();return Xe.sameDate(t,e)},_isDateOutOfRange:function(t){var e=this.option("min"),i=this.option("max");return!Xe.dateInRange(t,e,i,"date")},_isOtherView:function(t){return t.getMonth()!==this.option("date").getMonth()},_getCellText:function(t){return ct.format(t,"d")},_getDayCaption:function(t){var i=t%this.option("colCount");return{full:ct.getDayNames()[i],abbreviated:ct.getDayNames("abbreviated")[i]}},_getFirstCellData:function(){var{firstDayOfWeek:t}=this.option(),e=Xe.getFirstMonthDate(this.option("date")),i=t-e.getDay(),r=this.option("colCount");return i>=0&&(i-=r),e.setDate(e.getDate()+i),e},_getNextCellData:function(t){return(t=new Date(t)).setDate(t.getDate()+1),t},_getCellByDate:function(t){return this._$table.find("td[data-value='".concat(Oi.serializeDate(t,Xe.getShortDateFormat()),"']"))},isBoundary:function(t){return Xe.sameMonthAndYear(t,this.option("min"))||Xe.sameMonthAndYear(t,this.option("max"))},_getDefaultDisabledDatesHandler:function(t){return function(e){if(t.some(function(r){return Xe.sameDate(r,e.date)}))return!0}}}),year:gg.inherit({_getViewName:function(){return"year"},_isTodayCell:function(t){var e=this.option("_todayDate")();return Xe.sameMonthAndYear(t,e)},_isDateOutOfRange:function(t){return!Xe.dateInRange(t,Xe.getFirstMonthDate(this.option("min")),Xe.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_getCellText:function(t){return ct.getMonthNames("abbreviated")[t.getMonth()]},_getFirstCellData:function(){var t=this.option("date"),e=new Date(t);return e.setDate(1),e.setMonth(0),e},_getNextCellData:function(t){return(t=new Date(t)).setMonth(t.getMonth()+1),t},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),this._$table.find("td[data-value='".concat(Oi.serializeDate(e,Xe.getShortDateFormat()),"']"))},getCellAriaLabel:function(t){return ct.format(t,"monthandyear")},getNavigatorCaption:function(){return ct.format(this.option("date"),"yyyy")},isBoundary:function(t){return Xe.sameYear(t,this.option("min"))||Xe.sameYear(t,this.option("max"))},_renderWeekNumberCell:ne.ZT}),decade:gg.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(t){var e=this.option("_todayDate")();return Xe.sameYear(t,e)},_isDateOutOfRange:function(t){var e=this.option("min"),i=this.option("max");return!Xe.dateInRange(t.getFullYear(),e&&e.getFullYear(),i&&i.getFullYear())},_isOtherView:function(t){var e=new Date(t);return e.setMonth(1),!Xe.sameDecade(e,this.option("date"))},_getCellText:function(t){return ct.format(t,"yyyy")},_getFirstCellData:function(){var t=Xe.getFirstYearInDecade(this.option("date"))-1;return Xe.createDateWithFullYear(t,0,1)},_getNextCellData:function(t){return(t=new Date(t)).setFullYear(t.getFullYear()+1),t},getNavigatorCaption:function(){var t=this.option("date"),e=Xe.getFirstYearInDecade(t),i=new Date(t),r=new Date(t);return i.setFullYear(e),r.setFullYear(e+9),ct.format(i,"yyyy")+"-"+ct.format(r,"yyyy")},_isValueOnCurrentView:function(t,e){return Xe.sameDecade(t,e)},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),e.setMonth(0),this._$table.find("td[data-value='".concat(Oi.serializeDate(e,Xe.getShortDateFormat()),"']"))},isBoundary:function(t){return Xe.sameDecade(t,this.option("min"))||Xe.sameDecade(t,this.option("max"))},_renderWeekNumberCell:ne.ZT}),century:gg.inherit({_getViewName:function(){return"century"},_isTodayCell:function(t){var e=this.option("_todayDate")();return Xe.sameDecade(t,e)},_isDateOutOfRange:function(t){var e=Xe.getFirstYearInDecade(t),i=Xe.getFirstYearInDecade(this.option("min")),r=Xe.getFirstYearInDecade(this.option("max"));return!Xe.dateInRange(e,i,r)},_isOtherView:function(t){var e=new Date(t);return e.setMonth(1),!Xe.sameCentury(e,this.option("date"))},_getCellText:function(t){var e=ct.format(t,"yyyy"),i=new Date(t);return i.setFullYear(i.getFullYear()+9),e+" - "+ct.format(i,"yyyy")},_getFirstCellData:function(){var t=Xe.getFirstDecadeInCentury(this.option("date"))-10;return Xe.createDateWithFullYear(t,0,1)},_getNextCellData:function(t){return(t=new Date(t)).setFullYear(t.getFullYear()+10),t},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),e.setMonth(0),e.setFullYear(Xe.getFirstYearInDecade(e)),this._$table.find("td[data-value='".concat(Oi.serializeDate(e,Xe.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var t=this.option("date"),e=Xe.getFirstDecadeInCentury(t),i=new Date(t),r=new Date(t);return i.setFullYear(e),r.setFullYear(e+99),ct.format(i,"yyyy")+"-"+ct.format(r,"yyyy")},isBoundary:function(t){return Xe.sameCentury(t,this.option("min"))||Xe.sameCentury(t,this.option("max"))},_renderWeekNumberCell:ne.ZT})};const lP=oP;var lE="dx-calendar-view",Qd={month:3,year:2,decade:1,century:0},dE=Xd.Z.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,zoomLevel:"month",maxZoomLevel:"month",minZoomLevel:"century",showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return(0,O.l)(this.callBase(),{rightArrow:function(t){t.preventDefault(),(0,be.j1)(t)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(t){t.preventDefault(),(0,be.j1)(t)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(t){if(t.preventDefault(),(0,be.j1)(t))this._navigateUp();else{if(Ni.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(t){if(t.preventDefault(),(0,be.j1)(t))this._navigateDown();else{if(Ni.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(t){t.preventDefault();var e=this.option("zoomLevel"),i=this.option("currentDate"),r=this._dateOption("min");if(!this._view.isDateDisabled(i)){var n=Xe.sameView(e,i,r)?r:Xe.getViewFirstCellDate(e,i);this._moveToClosestAvailableDate(n)}},end:function(t){t.preventDefault();var e=this.option("zoomLevel"),i=this.option("currentDate"),r=this._dateOption("max");if(!this._view.isDateDisabled(i)){var n=Xe.sameView(e,i,r)?r:Xe.getViewLastCellDate(e,i);this._moveToClosestAvailableDate(n)}},pageUp:function(t){t.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(t){t.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:ne.ZT,enter:function(t){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var e=this._updateTimeComponent(this.option("currentDate"));this._dateValue(e,t)}}else this._navigateDown()}})},_getSerializationFormat:function(t){var e=this.option(t||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,v.kE)(e)?"number":(0,v.HD)(e)?Oi.getDateSerializationFormat(e):void 0},_convertToDate:function(t,e){return Oi.deserializeDate(t)},_dateValue:function(t,e){if(e){if("keydown"===e.type){var i=this._view._getContouredCell().get(0);e.target=i}this._saveValueChangeEvent(e)}this._dateOption("value",t)},_dateOption:function(t,e){if(1===arguments.length)return this._convertToDate(this.option(t),t);var i=this._getSerializationFormat(t);this.option(t,Oi.serializeDate(e,i))},_shiftDate:function(t,e,i,r){switch(t){case"month":e.setDate(e.getDate()+i*r);break;case"year":e.setMonth(e.getMonth()+i*r);break;case"decade":e.setFullYear(e.getFullYear()+i*r);break;case"century":e.setFullYear(e.getFullYear()+10*i*r)}},_moveCurrentDateByOffset:function(t){var e=this.option("currentDate"),i=new Date(e),r=this.option("zoomLevel");this._shiftDate(r,i,t,1);for(var n=this._getMaxDate(),a=this._getMinDate(),s=this._areDatesInNeighborView(r,i,e),o=(0,Ut.Z2)(i,a,n)&&s,d=new Date(i);o;){if(!this._view.isDateDisabled(d)){i=d;break}this._shiftDate(r,d,t,1),s=this._areDatesInNeighborView(r,d,e),o=(0,Ut.Z2)(d,a,n)&&s}this._view.isDateDisabled(e)||this._view.isDateDisabled(i)?this._waitRenderView(t>0?1:-1):this.option("currentDate",i)},_areDatesInSameView(t,e,i){switch(t){case"month":return e.getMonth()===i.getMonth();case"year":return e.getYear()===i.getYear();case"decade":return parseInt(e.getYear()/10)===parseInt(i.getYear()/10);case"century":return parseInt(e.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(t,e,i){switch(t){case"month":return r=e.getMonth(),n=i.getMonth(),a=Math.abs(r-n),Math.min(a,12-a)<=1;case"year":return Math.abs(e.getYear()-i.getYear())<=1;case"decade":return Math.abs(e.getYear()-i.getYear())<=10;case"century":return Math.abs(e.getYear()-i.getYear())<=100}var r,n,a},_moveToClosestAvailableDate:function(){var s,o,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(t),i=this.option("zoomLevel"),r=!this._isDateNotAvailable(e),n=r,a=r,d=new Date(e),u=new Date(e);do{if(n){e=d;break}if(a){e=u;break}this._shiftDate(i,d,1,1),this._shiftDate(i,u,1,-1),s=this._areDatesInSameView(i,d,t),o=this._areDatesInSameView(i,u,t),n=s&&!this._isDateNotAvailable(d),a=o&&!this._isDateNotAvailable(u)}while(s||o);this.option("currentDate",e)},_isDateNotAvailable:function(t){var e=this._getMaxDate(),i=this._getMinDate();return!(0,Ut.Z2)(t,i,e)||this._view.isDateDisabled(t)},_init:function(){this.callBase(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_correctZoomLevel:function(){var t=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),i=this.option("zoomLevel");Qd[e]<Qd[t]||(Qd[i]>Qd[e]?this.option("zoomLevel",e):Qd[i]<Qd[t]&&this.option("zoomLevel",t))},_initCurrentDate:function(){var t=this._getNormalizedDate(this._dateOption("value"))||this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",t)},_getNormalizedDate:function(t){return t=Xe.normalizeDate(t,this._getMinDate(),this._getMaxDate()),(0,v.$K)(t)?this._getDate(t):t},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new hb.k(function(t){var e=t.model;(0,C.Z)(t.container).append((0,C.Z)("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate:function(t){if(Ni.Z.isAnimating(this._$viewsWrapper)&&Ni.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var r=this._getNormalizedDate(t);if(t.getTime()===r.getTime()){var n=this._getViewsOffset(this._view.option("date"),r);0!==n&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(n=0),this._view&&0!==n&&!this._suppressNavigation?this._navigate(n,r):(this._renderNavigator(),this._setViewContoured(r),this._updateAriaId(r))}else this.option("currentDate",new Date(r))}},_setViewContoured:function(t){(this.option("skipFocusCheck")||function yP(t){return t.hasClass("dx-state-focused")}(this._focusTarget()))&&this._view.option("contouredDate",t)},_getMinDate:function(){return this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min},_getMaxDate:function(){return this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max},_getViewsOffset:function(t,e){var r,i=this.option("zoomLevel");if("month"===i)return this._getMonthsOffset(t,e);switch(i){case"century":r=100;break;case"decade":r=10;break;default:r=1}return parseInt(e.getFullYear()/r)-parseInt(t.getFullYear()/r)},_getMonthsOffset:function(t,e){return 12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth())},_waitRenderView:function(t){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var e=this._getDateByOffset(t*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(t,e){var i,r=(e=this._getDate(null!==(i=e)&&void 0!==i?i:this.option("currentDate"))).getDate(),n=Xe.getDifferenceInMonth(this.option("zoomLevel"))*t;e.setDate(1),e.setMonth(e.getMonth()+n);var a=Xe.getLastMonthDate(e).getDate();return e.setDate(r>a?a:r),e},_focusTarget:function(){return this.$element()},_initMarkup:function(){this._renderSubmitElement(),this.callBase();var t=this.$element();t.addClass("dx-calendar"),this._renderBody(),t.append(this.$body),this._renderViews(),this._renderNavigator(),t.append(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._updateAriaSelected(),this._updateAriaId(),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=(0,C.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,C.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(lE+"-"+this.option("zoomLevel"));var t=this.option("currentDate");if(this._view=this._renderSpecificView(t),(0,qe.Ym)()){var e=this._getDateByOffset(-1,t);this._beforeView=this._isViewAvailable(e)?this._renderSpecificView(e):null;var i=this._getDateByOffset(1,t);i.setDate(1),this._afterView=this._isViewAvailable(i)?this._renderSpecificView(i):null}this._translateViews()},_renderSpecificView:function(t){var e=lP[this.option("zoomLevel")],i=(0,C.Z)("<div>").appendTo(this._$viewsWrapper),r=this._viewConfig(t);return this._createComponent(i,e,r)},_viewConfig:function(t){var e,i=this.option("disabledDates");return i=(0,v.mf)(i)?this._injectComponent(i.bind(this)):i,{date:t,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(e=this.option("firstDayOfWeek"))&&void 0!==e?e:ct.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),value:this._dateOption("value"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:i,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")}},_injectComponent:function(t){var e=this;return function(i){return(0,O.l)(i,{component:e}),t(i)}},_isViewAvailable:function(t){var e=this.option("zoomLevel"),i=Xe.getViewMinBoundaryDate(e,this._getMinDate()),r=Xe.getViewMaxBoundaryDate(e,this._getMaxDate());return Xe.dateInRange(t,i,r)},_translateViews:function(){(0,gi.pB)(this._view.$element(),{left:0,top:0}),this._beforeView&&(0,gi.pB)(this._beforeView.$element(),{left:this._getViewPosition(-1),top:0}),this._afterView&&(0,gi.pB)(this._afterView.$element(),{left:this._getViewPosition(1),top:0})},_getViewPosition:function(t){return 100*t*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler:function(t){var e=this.option("zoomLevel"),i=Xe.getViewDown(e),r=this._isMaxZoomLevel();if(i&&!r)this._navigateDown(t.event.currentTarget);else{var n=this._updateTimeComponent(t.value);this._dateValue(n,t.event),this._cellClickAction(t)}},_updateTimeComponent:function(t){var e=new Date(t),i=this._dateOption("value");return i&&(e.setHours(i.getHours()),e.setMinutes(i.getMinutes()),e.setSeconds(i.getSeconds()),e.setMilliseconds(i.getMilliseconds())),e},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(t){var e=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var i=Xe.getViewDown(e);if(i){var r=this._view.option("contouredDate")||this._view.option("date");t&&(r=(0,C.Z)(t).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",r),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new QL((0,C.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._view.getNavigatorCaption()),this._updateButtonsVisibility()},_navigatorConfig:function(){return{text:this._view.getNavigatorCaption(),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),rtlEnabled:this.option("rtlEnabled")}},_navigatorClickHandler:function(t){var e=this._getDateByOffset(t.direction,this.option("currentDate"));this._moveToClosestAvailableDate(e)},_navigateUp:function(){var t=this.option("zoomLevel"),e=Xe.getViewUp(t);!e||this._isMinZoomLevel(t)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(t){var e=this._getMinDate(),i=this._getMaxDate();return Xe.sameView(t,e,i)||this.option("minZoomLevel")===t},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!(0,v.$K)(this._getRequiredView("next"))),this._navigator.toggleButton("prev",!(0,v.$K)(this._getRequiredView("prev")))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),mb.Z,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(t){Ni.Z.stop(this._$viewsWrapper,!0),t.event.maxLeftOffset=this._getRequiredView("next")?1:0,t.event.maxRightOffset=this._getRequiredView("prev")?1:0},_getRequiredView:function(t){var e,i=this.option("rtlEnabled");return"next"===t?e=i?this._beforeView:this._afterView:"prev"===t&&(e=i?this._afterView:this._beforeView),e},_swipeUpdateHandler:function(t){var e=t.event.offset;(0,gi.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler:function(t){var e=t.event.targetOffset,i=e?e/Math.abs(e):0;if(0!==i){var r=this._getDateByOffset(-i*this._getRtlCorrection());this._isDateInInvalidRange(r)&&(r=i>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",r)}else this._animateWrapper(0,250)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=(0,Q.dz)(this.$element())),this._viewWidthValue},_updateNavigatorCaption:function(t){t*=this._getRtlCorrection();var e=this._view;t>.5&&this._beforeView?e=this._beforeView:t<-.5&&this._afterView&&(e=this._afterView),this._navigator.option("text",e.getNavigatorCaption())},_isDateInInvalidRange:function(t){if(!this._view.isBoundary(t)){var e=this._getMinDate(),i=this._getMaxDate(),r=Xe.normalizeDate(t,e,i);return r===e||r===i}},_renderFooter:function(){var t=this.option("showTodayButton");if(t){var e=this._createComponent((0,C.Z)("<a>"),Er.Z,{focusStateEnabled:!1,text:le.Z.format("dxCalendar-todayButtonText"),onClick:function(i){this._toTodayView(i)}.bind(this),integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,C.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",t)},_renderSubmitElement:function(){this._$submitElement=(0,C.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){var e=this._convertToDate(t);this._getSubmitElement().val(Oi.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){return Ni.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250).promise()},_popAnimationView:function(t,e,i,r){return Ni.Z.animate(t.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:i,opacity:i},duration:r})},_navigate:function(t,e){if(0!==t&&1!==Math.abs(t)&&this._isViewAvailable(e)){var i=this._renderSpecificView(e);t>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}var a=-this._getRtlCorrection()*(t>0?1:t<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==a&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(t,e):this._animateWrapper(a,250).done(this._wrapperAnimationEndHandler.bind(this,t,e)))},_animateWrapper:function(t,e){return Ni.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:t},duration:e})},_getDate:t=>new Date(t),_toTodayView:function(t){this._saveValueChangeEvent(t.event);var e=new Date;this._isMaxZoomLevel()?this._dateOption("value",e):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._dateOption("value",e),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler:function(t,e){this._rearrangeViews(t),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._updateAriaSelected()},_rearrangeViews:function(t){var e,i,r;if(0!==t&&(t<0?(e=1,i="_beforeView",r="_afterView"):(e=-1,i="_afterView",r="_beforeView"),this[i])){var n=this[i].option("date");this[r]&&this[r].$element().remove(),t===e?this[r]=this._view:(this[r]=this._renderSpecificView(this._getDateByOffset(e,n)),this._view.$element().remove()),this._view=this[i];var a=this._getDateByOffset(-e,n);this[i]=this._isViewAvailable(a)?this._renderSpecificView(a):null}},_resetLocation:function(){(0,gi.pB)(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._beforeView,delete this._afterView},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_focusInHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",this.option("currentDate"))},_focusOutHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",null)},_updateViewsValue:function(t){var e=t?new Date(t):null;this._view.option("value",e),this._beforeView&&this._beforeView.option("value",e),this._afterView&&this._afterView.option("value",e)},_updateAriaSelected:function(t,e){var i;t=null!==(i=t)&&void 0!==i?i:this._dateOption("value");var r=this._view._getCellByDate(e),n=this._view._getCellByDate(t);this.setAria("selected",void 0,r),this.setAria("selected",!0,n),t&&this.option("currentDate").getTime()===t.getTime()&&this._updateAriaId(t)},_updateAriaId:function(t){var e;t=null!==(e=t)&&void 0!==e?e:this.option("currentDate");var i="dx-"+new Hr.Z,r=this._view._getCellByDate(t);this.setAria("id",i,r),this.setAria("activedescendant",i),this._onContouredChanged(i)},_suppressingNavigation:function(t,e){this._suppressNavigation=!0,t.apply(this,e),delete this._suppressNavigation},_optionChanged:function(t){var e=t.value,i=t.previousValue;switch(t.name){case"width":this.callBase(t),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(lE+"-"+i),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":e=this._convertToDate(e),i=this._convertToDate(i),this._updateAriaSelected(e,i),this.option("currentDate",(0,v.$K)(e)?new Date(e):new Date),this._updateViewsValue(e),this._setSubmitValue(e),this.callBase(t);break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"skipFocusCheck":break;case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;default:this.callBase(t)}},getContouredDate:function(){return this._view.option("contouredDate")}});(0,kt.Z)("dxCalendar",dE);const wP=dE;var mg=en.Z.abstract,xP=en.Z.inherit({ctor:function(t){this.dateBox=t},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(t){t=t||(0,C.Z)("<div>"),this._widget=this._createWidget(t),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(t){var e=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(t,e,i)},_getWidgetOptions:mg,_getWidgetName:mg,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:mg,supportedKeys:ne.ZT,getKeyboardListener:ne.ZT,customizeButtons:ne.ZT,getParsedText:function(t,e){return ct.parse(t,e)||ct.parse(t)},renderInputMinMax:ne.ZT,renderOpenedState:function(){this._updateValue()},popupConfig:mg,_dimensionChanged:function(){var t;null===(t=this._getPopup())||void 0===t||t.repaint()},renderPopupContent:function(){var t=this._getPopup();this._renderWidget();var e=t.$content().parent();Z.Z.off(e,"mousedown"),Z.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},getFirstPopupElement:ne.ZT,getLastPopupElement:ne.ZT,_preventFocusOnPopup:function(t){t.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:ne.ZT,popupHiddenHandler:ne.ZT,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:ne.ZT,getDefaultDate:function(){return new Date},textChangedHandler:ne.ZT,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var t=this._getPopup();t&&t.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});const vg=xP;var SP=vg.inherit({NAME:"Calendar",getDefaultOptions:function(){return(0,O.l)(this.callBase(),{todayButtonText:le.Z.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var t=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var i=this._getContouredValue(),r=this._lastActionElement,n=this._closeDropDownByEnter();return n&&i&&"calendar"===r&&this.dateBoxValue(i,e),n&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!n}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:t,end:t}},getDisplayFormat:function(t){return t||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return wP},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var t=this.dateBox.option("disabledDates");return(0,O.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),tabIndex:null,disabledDates:(0,v.mf)(t)?this._injectComponent(t.bind(this.dateBox)):t,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(t){var e=this;return function(i){return(0,O.l)(i,{component:e.dateBox}),t(i)}},_refreshActiveDescendant:function(t){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",t.actionValue)},_getTodayButtonConfig(){var t=this.dateBox.option("buttonsLocation"),i="default"===t?["bottom","center"]:(0,ne.Um)(t);return{widget:"dxButton",toolbar:i[0],location:"after"===i[1]?"before":i[1],options:{onInitialized:function(r){r.component.registerKeyHandler("escape",this._escapeHandler.bind(this))}.bind(this),onClick:r=>{this._widget._toTodayView(r)},text:this.dateBox.option("todayButtonText"),type:"today"}}},_isCalendarVisible:function(){var{calendarOptions:t}=this.dateBox.option();return(0,v.Qr)(t)||!1!==t.visible},_getPopupToolbarItems(t){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...t]:t},popupConfig:function(t){return(0,O.l)(!0,t,{position:{collision:"flipfit flip"},width:"auto"})},_escapeHandler:function(){this.dateBox.close(),this.dateBox.focus()},_valueChangedHandler:function(t){var e=t.value,i=t.previousValue;Xe.sameDate(e,i)&&Xe.sameHoursAndMinutes(e,i)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),t.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(t){var e=this.dateBox;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),t.event))}});const uE=SP;var EP=k(7596),Jd=k(7118);class IP{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??Jd.Et}get isHorizontal(){return this.direction===Jd.Xv||this.direction===Jd.b$}get isVertical(){return this.direction===Jd.Et||this.direction===Jd.b$}get isBoth(){return this.direction===Jd.b$}}var hE="dx-dateview-item";class cE extends EP.Z{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){Z.Z.on((0,C.Z)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var e=(0,be.V4)(ii.u,this.NAME),i=this._createActionByOption("onClick");Z.Z.off((0,C.Z)(this.container()),e),Z.Z.on((0,C.Z)(this.container()),e,function(r){i({event:r})})}}_renderItems(){var e=this.option("items")||[],i=(0,C.Z)();(0,C.Z)(this.content()).empty(),e.forEach(function(r){i=i.add((0,C.Z)("<div>").addClass(hE).append(r))}),(0,C.Z)(this.content()).append(i),this._$items=i,this.update()}_renderSelectedItemFrame(){(0,C.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,C.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,C.Z)(this.container()))}_renderSelectedValue(e){var i=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(i)}),this._renderActiveStateItem()}_fitIndex(e){var r=(this.option("items")||[]).length;return e>=r?r-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){var e=this._getItemSelector(),i=(0,be.V4)(ii.u,this.NAME);Z.Z.off(this.$element(),i,e),Z.Z.on(this.$element(),i,e,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+hE}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var e=this.option("selectedIndex");(0,U.S6)(this._$items,function(i){(0,C.Z)(this).toggleClass("dx-dateview-item-selected",e===i)})}_shouldScrollToNeighborItem(){return"desktop"===_t.Z.real().deviceType&&this._isWheelScrolled}_moveTo(e){var{top:i,left:r}=function TP(t,e){if((0,v.PO)(t)){var i=(0,ne.IS)(t.left,t.x),r=(0,ne.IS)(t.top,t.y);return{left:(0,v.$K)(i)?i:void 0,top:(0,v.$K)(r)?r:void 0}}var{isHorizontal:n,isVertical:a}=new IP(e);return{left:n&&(0,v.$K)(t)?t:void 0,top:a&&(0,v.$K)(t)?t:void 0}}(e),n=this.scrollOffset(),a={x:n.left-r,y:n.top-i};if(this._isVisible()&&(a.x||a.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;Ni.Z.stop((0,C.Z)(this.content())),Ni.Z.animate((0,C.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(a.y)},complete(){(0,gi.Kx)((0,C.Z)(s.content())),s.handleMove({delta:a})}}),delete this._animation}else this.handleMove({delta:a})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){var i=this.option("items").length;return Math.max(Math.min(e,i-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){var n=this.scrollOffset().top-e*this._itemHeight();return this._isInNullNeighborhood(n)?e:this._fitSelectedIndexInRange(e+(n>0?1:-1))}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;var i=this.scrollOffset().top/this._itemHeight();return Math.round(i)}_endActionHandler(){var e=this.option("selectedIndex"),i=this._getNewSelectedIndex(e);i===e?this._renderSelectedValue(i):this.option("selectedIndex",i),this._isWheelScrolled=!1}_itemHeight(){var e=this._$items.first();return(0,Q.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,C.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,i){this._selectedIndexChanged({value:e,previousValue:i,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){var e=this.option("selectedIndex"),i=this._fitIndex(e);i===e?this._renderActiveStateItem():this.option("selectedIndex",i)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,kt.Z)("dxDateViewRoller",cE);const MP=cE;var bb="dx-dateview",fE=Xd.Z.inherit({_valueOption:function(){var t=this.option("value"),e=new Date(t);return!t||isNaN(e)?this._getDefaultDate():e},_getDefaultDate:function(){var t=new Date;return"date"===this.option("type")?new Date(t.getFullYear(),t.getMonth(),t.getDate()):t},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{minDate:oi.MIN_DATEVIEW_DEFAULT_DATE,maxDate:oi.MAX_DATEVIEW_DEFAULT_DATE,type:"date",value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"desktop"!==t.deviceType},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(bb),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(t,e){this.$element().addClass(bb+"-"+t),e&&this.$element().removeClass(bb+"-"+e)},_toggleCompactClass:function(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=(0,C.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=(0,C.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var t=this;(0,U.S6)(t._rollerConfigs,function(e){var i=(0,C.Z)("<div>").appendTo(t._$rollersContainer).addClass("dx-dateviewroller-"+t._rollerConfigs[e].type);t._rollers[t._rollerConfigs[e].type]=t._createComponent(i,MP,{items:t._rollerConfigs[e].displayItems,selectedIndex:t._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(r){var n=r.component;n._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],n.option("selectedIndex"))},onEnd:function(r){r.component._toggleActive(!1)},onClick:function(r){var n=r.component;n._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],n.option("selectedIndex")),t._setRollerState(t._rollerConfigs[e],n.option("selectedIndex")),n._toggleActive(!1)},onSelectedIndexChanged:function(r){t._setRollerState(t._rollerConfigs[e],r.component.option("selectedIndex"))}})}),t._$rollersContainer.appendTo(t._wrapper())},_createRollerConfigs:function(t){var e=this;t=t||e.option("type"),e._rollerConfigs={},ct.getFormatParts(oi.FORMATS_MAP[t]).forEach(function(i){e._createRollerConfig(i)})},_createRollerConfig:function(t){for(var e=oi.DATE_COMPONENTS_INFO[t],i=this._calculateRollerConfigValueRange(t),r=i.startValue,n=i.endValue,a=e.formatter,s=this._getCurrentDate(),o={type:t,setValue:e.setter,valueItems:[],displayItems:[],getIndex:function(u){return u[e.getter]()-r}},d=r;d<=n;d++)o.valueItems.push(d),o.displayItems.push(a(d,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[t]=o},_setActiveRoller:function(t){var e=t&&this._rollers[t.type];(0,U.S6)(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition:function(){var t=this;(0,U.S6)(this._rollers,function(e){var i=t._rollerConfigs[e].getIndex(t._getCurrentDate());this.option("selectedIndex",i)})},_setRollerState:function(t,e){if(e!==t.selectedIndex){var i=t.valueItems[e],r=t.setValue,n=new Date(this._getCurrentDate()),a=n.getDate(),s=this.option("minDate"),o=this.option("maxDate");"month"===t.type?a=Math.min(a,oi.getMaxMonthDay(n.getFullYear(),i)):"year"===t.type&&(a=Math.min(a,oi.getMaxMonthDay(i,n.getMonth()))),n.setDate(a),n[r](i);var d=Xe.normalizeDate(n,s,o);n=oi.mergeDates(d,n,"time"),n=Xe.normalizeDate(n,s,o),this.option("value",n),t.selectedIndex=e}"year"===t.type&&this._refreshRollers(),"month"===t.type&&(this._refreshRoller("day"),this._refreshRoller("hours"))},_refreshRoller:function(t){var e=this._rollers[t];if(e){this._createRollerConfig(t);var i=this._rollerConfigs[t];("day"===t||i.displayItems.toString()!==e.option("items").toString())&&e.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate:function(){var t=this._valueOption(),e=this.option("minDate"),i=this.option("maxDate");return Xe.normalizeDate(t,e,i)},_calculateRollerConfigValueRange:function(t){var e=this._getCurrentDate(),i=this.option("minDate"),r=this.option("maxDate"),n=Xe.sameYear(e,i),a=n&&e.getMonth()===i.getMonth(),s=Xe.sameYear(e,r),o=s&&e.getMonth()===r.getMonth(),d=a&&e.getDate()===i.getDate(),u=o&&e.getDate()===r.getDate(),c=oi.DATE_COMPONENTS_INFO[t],f=c.startValue,g=c.endValue;return"year"===t&&(f=i.getFullYear(),g=r.getFullYear()),"month"===t&&(n&&(f=i.getMonth()),s&&(g=r.getMonth())),"day"===t&&(g=oi.getMaxMonthDay(e.getFullYear(),e.getMonth()),n&&a&&(f=i.getDate()),s&&o&&(g=r.getDate())),"hours"===t&&(f=d?i.getHours():f,g=u?r.getHours():g),{startValue:f,endValue:g}},_refreshRollers:function(){this._refreshRoller("month"),this._refreshRoller("day"),this._refreshRoller("hours")},_optionChanged:function(t){switch(t.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(t.value,t.previousValue);break;case"visible":this.callBase(t),t.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(t)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});(0,kt.Z)("dxDateView",fE);const NP=fE;var zP=(0,qe.Jj)(),HP=vg.inherit({NAME:"DateView",getDefaultOptions:function(){return(0,O.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:le.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(t){return t||oi.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(t){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:t.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(e){var i=e.platform;return"generic"===i||"ios"===i},options:{width:"auto",height:"auto"}},{device:function(e){return"generic"===e.platform&&e.phone},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:zP}}}]}},_renderWidget:function(){if((0,ma.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var t=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var e=(0,C.Z)("<div>").appendTo(t.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:function(){return NP},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*oi.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const ZP=HP;var $P=vg.inherit({NAME:"Native",popupConfig:function(t){return(0,O.l)({},t,{width:"auto"})},getParsedText:function(t){return t?"datetime"===this.dateBox.option("type")?new Date(t.replace(/-/g,"/").replace("T"," ").split(".")[0]):oi.fromStandardDateFormat(t):null},renderPopupContent:ne.ZT,_getWidgetName:ne.ZT,_getWidgetOptions:ne.ZT,_getDateBoxType:function(){var t=this.dateBox.option("type");return oi.SUPPORTED_FORMATS.includes(t)?"datetime"===t&&!(0,ma.inputType)(t)&&(t="datetime-local"):t="date",t},customizeButtons:function(){var t=this.dateBox.getButton("dropDown");_t.Z.real().android&&t&&t.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(t){var e=this._getDateBoxType();return t||oi.FORMATS_MAP[e]},renderInputMinMax:function(t){t.attr({min:Oi.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:Oi.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});const WP=$P;var _E="dxBoxItemData",qP={row:"minWidth",col:"minHeight"},jP={row:"maxWidth",col:"maxHeight"},gE={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},mE={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},XP={row:"row",col:"column"},eu=(t,e,i)=>{if(i=(0,fn.bh)(e,i),t.style[(0,fn.Hj)(e)]=i,!(0,qe.Ym)()){if(""===i||!(0,v.$K)(i))return;var n=(0,Cr.H0)(e)+": "+i+";";t.attributes.style?t.attributes.style.value.indexOf(n)<0&&(t.attributes.style.value+=" "+n):t.setAttribute("style",n)}};class QP extends dc.Z{_renderVisible(e,i){super._renderVisible(e),(0,v.$K)(i)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:i})}}class JP{constructor(e,i){this._$element=e,this._option=i}renderBox(){this._$element.css({display:(0,fn.gC)("flexDirection")+"flex"}),eu(this._$element.get(0),"flexDirection",XP[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var e=this._option("align");return e in gE?gE[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var e=this._option("crossAlign");return e in mE?mE[e]:e}renderItems(e){var i=(0,fn.gC)("flexDirection"),r=this._option("direction");(0,U.S6)(e,function(){var n=(0,C.Z)(this),a=n.data(_E);n.css({display:i+"flex"}).css(jP[r],a.maxSize||"none").css(qP[r],a.minSize||"0"),eu(n.get(0),"flexBasis",a.baseSize||0),eu(n.get(0),"flexGrow",a.ratio),eu(n.get(0),"flexShrink",(0,v.$K)(a.shrink)?a.shrink:1),n.children().each((s,o)=>{(0,C.Z)(o).css({width:"auto",height:"auto",display:(0,fn.gC)("flexDirection")+"flex",flexBasis:0}),eu(o,"flexGrow",1),eu(o,"flexDirection",(0,C.Z)(o)[0].style.flexDirection||"column")})})}}let vE=(()=>{class t extends Yd.Z{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return _E}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new JP(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(i,r){this._queue.push({$item:i,config:r})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(i){for(super._renderItems(i);this._queueIsNotEmpty();){var r=this._shiftItemFromQueue();this._createComponent(r.$item,t,(0,O.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},r.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(i){var r=i.itemData&&i.itemData.node;return r?this._renderItemContentByNode(i,r):super._renderItemContent(i)}_postprocessRenderItem(i){var r=i.itemData.box;r&&this._pushItemToQueue(i.itemContent,r)}_createItemByTemplate(i,r){return r.itemData.box?i.source?i.source():(0,C.Z)():super._createItemByTemplate(i,r)}_itemOptionChanged(i,r,n,a){"visible"===r&&this._onItemStateChanged({name:r,state:n,oldState:!1!==a}),super._itemOptionChanged(i,r,n)}_optionChanged(i){switch(i.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(i)}}_itemOptions(){var i=super._itemOptions();return i.fireItemStateChangedAction=r=>{this._onItemStateChanged(r)},i}}return t.ItemClass=QP,t})();(0,kt.Z)("dxBox",vE);const Cg=vE;var CE=function(t,e,i){oF(t,e,i)},oF=function(t,e,i){t.css("transform","rotate("+e+"deg) translate(0,"+i+"px)")},bE=Xd.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass("dx-timeview")},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var t=(0,C.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(t,Cg,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock:function(t,e,i){this._$hourArrow=(0,C.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,C.Z)("<div>").addClass("dx-timeview-minutearrow");var r=(0,C.Z)(i);r.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",r)},_updateClock:function(){var t=this._getValue(),e=t.getHours()/12*360+t.getMinutes()/60*30,i=t.getMinutes()/60*360;CE(this._$hourArrow,e,this.option("_arrowOffset")),CE(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems:function(t){var e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,C.Z)("<div>").addClass("dx-timeview-time-separator").text(ct.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return t&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField:function(){var t=!this.option("use24HourFormat");return this._createHourBox(t),this._createMinuteBox(),t&&this._createFormat12Box(),this._createComponent((0,C.Z)("<div>").addClass("dx-timeview-field"),Cg,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(t)}).$element()},_createHourBox:function(t){(this._hourBox=this._createComponent((0,C.Z)("<div>"),db,(0,O.l)({min:-1,max:t?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:i=>this._keyboardHandler(i)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged:function(t){var{value:e,component:i}=t,r=this._getValue(),n=new Date(r),a=this._convertMaxHourToMin(e);i.option("value",a),this._isPM()&&(a+=12),n.setHours(a),oi.normalizeTime(n),this.option("value",n)},_convertMaxHourToMin:function(t){var e=this.option("use24HourFormat")?24:12;return(e+t)%e},_createMinuteBox:function(){(this._minuteBox=this._createComponent((0,C.Z)("<div>"),db,(0,O.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{var{value:i,component:r}=e,n=(60+i)%60;r.option("value",n);var a=new Date(this._getValue());a.setMinutes(n),oi.normalizeTime(a),this.option("value",a)}},this._getNumberBoxConfig()))).setAria("label","minutes")},_createFormat12Box:function(){var t=ct.getPeriodNames();(this._format12=this._createComponent((0,C.Z)("<div>").addClass("dx-timeview-format12"),QS,{items:[{value:-1,text:t[0]},{value:1,text:t[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:i=>this._keyboardHandler(i),onValueChanged:i=>{var{value:r}=i,n=this._getValue().getHours(),a=new Date(this._getValue());a.setHours((n+12*r)%24),this.option("value",a)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue().getHours();this._silentEditorValueUpdate(this._format12,e>=12?1:-1)}},_silentEditorValueUpdate:function(t,e){t&&(t._suppressValueChangeAction(),t.option("value",e),t._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(t){return(t<10?"0":"")+t},stylingMode:this.option("stylingMode")}},_normalizeHours:function(t){return this.option("use24HourFormat")?t:t%12||12},_updateField:function(){var t=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,t),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(t){t&&this._updateTime()},_optionChanged:function(t){switch(t.name){case"value":this._updateTime(),this.callBase(t);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(t)}}});(0,kt.Z)("dxTimeView",bE);const lF=bE;var dF=(0,qe.Jj)(),yE="dx-datebox-datetime-time-side",cF=uE.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return(0,O.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return Xe.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(t){return t||"shortdateshorttime"},_is24HourFormat:function(){return ct.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var t=this.callBase();return this._updateDateTime(t)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent((0,C.Z)("<div>"),lF,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")}),this._timeView.registerKeyHandler("escape",this._escapeHandler.bind(this))},renderOpenedState:function(){this.callBase();var t=this._getPopup();t&&t.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var t=this._isShrinkView(),e=this._currentAdaptiveMode;return t!==e?(this._currentAdaptiveMode=t,void 0!==e):this.callBase()},_updateValue:function(t){var e=this.dateBoxValue();!e&&!t&&oi.normalizeTime(e=new Date),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return(0,Q.dz)(dF)<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var t=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||t.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),t},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var t=this._getPopup().$content();this._box=this.dateBox._createComponent((0,C.Z)("<div>").appendTo(t),Cg,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,i,r){var n=(0,C.Z)("<div>");switch(e.name){case"calendar":n.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(yE),n.append(this._timeView.$element()));break;case"time":n.append(this._timeView.$element()),(0,C.Z)(r).addClass(yE)}return n}.bind(this)}),this._attachTabHandler()},popupConfig:function(t){var e=this.callBase(t);return(0,O.l)(e,{width:"auto"})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var t=this.dateBox;this._timeView._hourBox.registerKeyHandler("tab",function(e){e.shiftKey&&(e.preventDefault(),t.focus())})},_preventFocusOnPopup:function(t){(0,C.Z)(t.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(t){var e=this._timeView.option("value");return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},getValue:function(){var t,e=null!==(t=this._widget.option("value"))&&void 0!==t?t:this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const pF=cF;var fF=(0,qe.Jj)(),gF={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},mF=vg.inherit({NAME:"List",supportedKeys:function(){return{tab:function(){var{opened:t,applyValueMode:e}=this.option();t&&"instantly"===e&&this.close()},space:ne.ZT,home:ne.ZT,end:ne.ZT}},getDefaultOptions:function(){return(0,O.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(t){return t||"shorttime"},popupConfig:function(t){return t},getValue:function(){var t=this._widget.option("selectedIndex");return-1===t?this.dateBox.option("value"):this._getDateByItemData(this._widgetItems[t])},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return Sc},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(t){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",t.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var t=this.dateBoxValue(),e=this._getDateIndex(t);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(t){for(var e=-1,i=0,r=this._widgetItems.length;i<r;i++)if(this._areDatesEqual(t,this._widgetItems[i])){e=i;break}return e},_areDatesEqual:function(t,e){return(0,v.J_)(t)&&(0,v.J_)(e)&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()},_getTimeListItems:function(){var t=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null,r=e-t,n=t.getMinutes()%this.dateBox.option("interval");return r<0?[]:(r>oi.ONE_DAY&&(r=oi.ONE_DAY),i-t<oi.ONE_DAY||((t=this._getBoundaryDate("min")).setMinutes(n),i&&Math.abs(i-e)<oi.ONE_DAY&&(r=(60*e.getHours()+Math.abs(e.getMinutes()-n))*oi.ONE_MINUTE)),this._getRangeItems(t,new Date(t),r))},_getRangeItems:function(t,e,i){for(var r=[],n=this.dateBox.option("interval");e-t<=i;)r.push(new Date(e)),e.setMinutes(e.getMinutes()+n);return r},_getBoundaryDate:function(t){var e=gF[t],i=new Date((0,ne.IS)(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate:function(t){var e=this.dateBox.option("displayFormat");return ct.format(t,this.getDisplayFormat(e))},_listItemClickHandler:function(t){if("useButtons"!==this.dateBox.option("applyValueMode")){var e=this._getDateByItemData(t.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,t.event)}},_getDateByItemData:function(t){var e=this.dateBox.option("value"),i=t.getHours(),r=t.getMinutes(),n=t.getSeconds(),a=t.getFullYear(),s=t.getMonth(),o=t.getDate();return e?((e=this.dateBox.option("dateSerializationFormat")?Oi.deserializeDate(e):new Date(e)).setHours(i),e.setMinutes(r),e.setSeconds(n),e.setFullYear(a),e.setMonth(s),e.setDate(o)):e=new Date(a,s,o,i,r,0,0),e},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var t=cb(this.dateBox.option("dropDownOptions.height"));if(void 0===t||"auto"===t){this.dateBox._setPopupOption("height","auto");var e=(0,Q.zp)(this._widget.$element()),i=.45*(0,Q.Cr)(fF);this.dateBox._setPopupOption("height",Math.min(e,i))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(t,e){var i=this.callBase(t,e);return i&&(i=oi.mergeDates(i,new Date(null),"date")),i}});const vF=mF;var Ic=(0,qe.Jj)(),Tc="dx-datebox",bg="dx-datebox-wrapper",mn={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Ln={date:"date",datetime:"datetime",time:"time"},xF={Calendar:uE,DateView:ZP,Native:WP,CalendarWithTime:pF,List:vF},SF=PS.inherit({_supportedKeys:function(){return(0,O.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:mn.calendar,invalidDateMessage:le.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:le.Z.format("validation-range"),applyButtonText:le.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=_t.Z.real().platform;return"ios"===e||"android"===e},options:{pickerType:mn.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(t){this._userOptions=(0,O.l)({},t),this.callBase(t),this._updatePickerOptions()},_updatePickerOptions:function(){var t=this.option("pickerType"),e=this.option("type");t===mn.list&&(e===Ln.datetime||e===Ln.date)&&(t=mn.calendar),e===Ln.time&&t===mn.calendar&&(t=mn.list),this.option("showDropDownButton","generic"!==_t.Z.real().platform||t!==mn.native),this._pickerType=t},_init:function(){this._initStrategy(),this.option((0,O.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(t){return t.charAt(0).toLowerCase()+t.substr(1)},_initStrategy:function(){var t=this._getStrategyName(this._getFormatType());this._strategy&&this._strategy.NAME===t||(this._strategy=new(0,xF[t])(this))},_getFormatType:function(){var t=this.option("type"),e=/h|m|s/g.test(t),r="";return/d|M|Y/g.test(t)&&(r+=Ln.date),e&&(r+=Ln.time),r},_getStrategyName:function(t){var e=this._pickerType;return e===mn.rollers?"DateView":e===mn.native?"Native":t===Ln.date?"Calendar":t===Ln.datetime?"CalendarWithTime":"List"},_initMarkup:function(){this.$element().addClass(Tc),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){var t,e;this._popup&&(null===(t=(e=this._strategy)._updatePopupHeight)||void 0===t||t.call(e))},_refreshFormatClass:function(){var t=this.$element();(0,U.S6)(Ln,function(e,i){t.removeClass(Tc+"-"+i)}),t.addClass(Tc+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var t=this.$element();(0,U.S6)(mn,function(e,i){t.removeClass(Tc+"-"+i)}),t.addClass(Tc+"-"+this._pickerType)},_formatValidationIcon:function(){if((0,qe.Ym)()){var t=this._input().get(0),e=this.option("rtlEnabled"),i=this._getClearButtonWidth(),r=this._getLongestElementDimensions(),n=parseFloat(Ic.getComputedStyle(t).width)-i,a=r.width>n,s=t.style;this.$element().toggleClass("dx-show-invalid-badge",!a),a?(void 0===this._storedPadding&&(this._storedPadding=e?r.leftPadding:r.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var t=0;if(this._isClearButtonVisible()&&""===this._input().val()){var e=this.$element().find(".dx-clear-button-area").get(0);t=parseFloat(Ic.getComputedStyle(e).width)}return t},_getLongestElementDimensions:function(){var t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=ct.format(oi.getLongestDate(t,ct.getMonthNames(),ct.getDayNames()),t),i=this._input(),r=i.get(0),n=(0,wa.l5)(i,e),s=void 0!==this._storedPadding?this._storedPadding:0;n.appendTo(this.$element());var o=parseFloat(Ic.getComputedStyle(n.get(0)).width),d=parseFloat(Ic.getComputedStyle(r).paddingRight),u=parseFloat(Ic.getComputedStyle(r).paddingLeft),c=o+u+d+s;return n.remove(),{width:c,leftPadding:u,rightPadding:d}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(bg),this._renderPopupWrapper()},_getPopupToolbarItems(){var t,e,i,r=this.callBase();return null!==(t=null===(e=(i=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(i,r))&&void 0!==t?t:r},_popupConfig:function(){var t=this.callBase();return(0,O.l)(this._strategy.popupConfig(t),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var t=this.$element(),e=(0,O.l)({},Ln,mn);(0,U.S6)(e,function(i,r){t.removeClass(bg+"-"+r)}.bind(this)),this._popup.$wrapper().addClass(bg+"-"+this.option("type")).addClass(bg+"-"+this._pickerType).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_getFirstPopupElement:function(){return this._strategy.getFirstPopupElement()||this.callBase()},_getLastPopupElement:function(){return this._strategy.getLastPopupElement()||this.callBase()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(t){t&&this._formatValidationIcon()},_clearValueHandler:function(t){this.option("text",""),this.callBase(t)},_readOnlyPropValue:function(){if(this._pickerType===mn.rollers)return!0;var t=_t.Z.real().platform;return!this._isNativeType()||"ios"!==t&&"android"!==t?this.callBase():this.option("readOnly")},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var t=this.dateOption("value");return this.option("text",this._getDisplayedText(t)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var t=this.dateOption("value"),e=this.option("dateSerializationFormat"),i=oi.SUBMIT_FORMATS_MAP[this.option("type")],r=e?Oi.serializeDate(t,e):oi.toStandardDateFormat(t,i);this._getSubmitElement().val(r)},_getDisplayedText:function(t){var i,e=this.option("mode");if("text"===e){var r=this._strategy.getDisplayFormat(this.option("displayFormat"));i=ct.format(t,r)}else{var n=this._getFormatByMode(e);i=n?ct.format(t,n):oi.toStandardDateFormat(t,e)}return i},_getFormatByMode:function(t){return(0,ma.inputType)(t)?null:oi.FORMATS_MAP[t]},_valueChangeEventHandler:function(t){var{text:e,type:i,validationError:r}=this.option(),n=this.dateOption("value");if(e!==this._getDisplayedText(n)){var a=this._getParsedDate(e),s=n??this._getDateByDefault(),o=oi.mergeDates(s,a,i);if(this._applyInternalValidation(a&&"time"===i?o:a).isValid){var u=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&u!==e?this._renderValue():this.dateValue(o,t)}}else(!r||r.editorSpecific)&&(this._applyInternalValidation(n),this._applyCustomValidation(n))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(t){var e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(t,e)??void 0},_applyInternalValidation(t){var i=!!this.option("text")&&null!==t,r=!!t&&(0,v.J_)(t)&&!isNaN(t.getTime()),n=r&&Xe.dateInRange(t,this.dateOption("min"),this.dateOption("max"),this.option("type")),a=!i&&!t||n,s="";return r?n||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this.option({isValid:a,validationError:a?null:{editorSpecific:!0,message:s}}),{isValid:a,isDate:r}},_applyCustomValidation:function(t){this.validationRequest.fire({editor:this,value:this._serializeDate(t)})},_isValueChanged:function(t){var e=this.dateOption("value");return(e&&e.getTime())!==(t&&t.getTime())},_isTextChanged:function(t){return this.option("text")!==(t&&this._getDisplayedText(t)||"")},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var t=this.option("placeholder");if(t)return t;var e=this.option("type");return e===Ln.time?le.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===Ln.date||e===Ln.datetime?le.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(t){var e=this._strategy.getValue();this.dateValue(e,t.event),this.callBase()},_dispose:function(){var t;this.callBase(),null===(t=this._strategy)||void 0===t||t.dispose()},_isNativeType:function(){return this._pickerType===mn.native},_updatePopupTitle:function(){var t;null===(t=this._popup)||void 0===t||t.option("title",this._getPopupTitle())},_optionChanged:function(t){switch(t.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:t.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:t.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(t.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var t=this.option("value");return this.option("dateSerializationFormat")&&(0,_.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,v.kE)(t)?"number":(0,v.HD)(t)?Oi.getDateSerializationFormat(t):void 0},_updateValue:function(t){this.callBase(),this._applyInternalValidation(t??this.dateOption("value"))},dateValue:function(t,e){var i=this._isValueChanged(t);return i&&e&&this._saveValueChangeEvent(e),i||(this._isTextChanged(t)?this._updateValue(t):""===this.option("text")&&this._applyCustomValidation(t)),this.dateOption("value",t)},dateOption:function(t,e){if(1===arguments.length)return Oi.deserializeDate(this.option(t));this.option(t,this._serializeDate(e))},_serializeDate:function(t){var e=this._getSerializationFormat();return Oi.serializeDate(t,e)},_clearValue:function(){var t=this.option("value");this.callBase(),null===t&&this._applyCustomValidation(null)},reset:function(){var t=this.option("value");this.callBase(),null===t&&this._applyInternalValidation(null)}}),tu="dateBoxMask",IF=SF.inherit({_supportedKeys(t){var e=this.callBase(t),i=n=>{var a=e[(0,be.EV)(n)];return a&&a.apply(this,[n])},r=(n,a)=>this._shouldUseOriginalHandler(n)?i.apply(this,[n]):a.apply(this,[n]);return(0,O.l)({},e,{del:n=>r(n,a=>{this._revertPart(1),this._isAllSelected()||a.preventDefault()}),backspace:n=>r(n,a=>{this._revertPart(-1),this._isAllSelected()||a.preventDefault()}),home:n=>r(n,a=>{this._selectFirstPart(),a.preventDefault()}),end:n=>r(n,a=>{this._selectLastPart(),a.preventDefault()}),escape:n=>r(n,a=>{this._revertChanges(a)}),enter:n=>r(n,()=>{this._enterHandler()}),leftArrow:n=>r(n,a=>{this._selectNextPart(-1),a.preventDefault()}),rightArrow:n=>r(n,a=>{this._selectNextPart(1),a.preventDefault()}),upArrow:n=>r(n,a=>{this._upDownArrowHandler(1),a.preventDefault()}),downArrow:n=>r(n,a=>{this._upDownArrowHandler(-1),a.preventDefault()})})},_shouldUseOriginalHandler(t){var e=this.option("opened")&&t&&-1===["backspace","del"].indexOf((0,be.EV)(t));return!this._useMaskBehavior()||e||t&&t.altKey},_upDownArrowHandler(t){this._setNewDateIfEmpty();var e=this._getActivePartValue(this._initialMaskValue),r=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._partIncrease(r+t,!0)},_getDefaultOptions(){return(0,O.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(t){var{originalEvent:e,alt:i}=t,r=e.data||e.key;return"string"==typeof r&&1===r.length&&!i&&!(0,be.j1)(e)},_isSingleDigitKey(t){var e,i=null===(e=t.originalEvent)||void 0===e?void 0:e.data;return 1===i?.length&&parseInt(i,10)},_useBeforeInputEvent:function(){return _t.Z.real().android},_keyInputHandler(t,e){var i=this._input().val();this._processInputKey(e),t.preventDefault(),i!==this._input().val()&&Z.Z.trigger(this._input(),"input")},_keyboardHandler(t){var e=t.originalEvent.key,i=this.callBase(t);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(pi.Z.chrome&&"Process"===t.key&&0===t.code.indexOf("Digit")?(e=t.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(t)&&this._keyInputHandler(t.originalEvent,e)),i},_maskBeforeInputHandler(t){this._maskInputHandler=null;var{inputType:e}=t.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var i="deleteContentBackward"===e;if(i||"deleteContentForward"===e){var n=i?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(n)}}if(this._useMaskBehavior()&&this._isSingleCharKey(t))return this._keyInputHandler(t,t.originalEvent.data),!0},_keyPressHandler(t){var{originalEvent:e}=t;"insertCompositionText"===e?.inputType&&this._isSingleDigitKey(t)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(t),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(t){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(t))?this._searchString(t):this._searchNumber(t)},_isAllSelected(){var t=this._caret();return t.end-t.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,v.HD)(t)&&!ct._getPatternByFormat(t);return this._formatPattern=e?t:ur(function(i){return ct.format(i,t)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var t="time"===this.option("type")?new Date(null):new Date;this._maskValue=t,this._initialMaskValue=t,this._renderDateParts()}},_partLimitsReached(t){var e=String(t).length,i=this._getActivePartProp("pattern").length,n=1===i?e:Math.min(i,e),a=this._searchValue.length===n,s=parseInt(this._searchValue+"0")>t;return a||s},_searchNumber(t){var{max:e}=this._getActivePartLimits(),i=String(e).length;this._searchValue=(this._searchValue+t).substr(-i),isNaN(this._searchValue)&&(this._searchValue=t),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(t){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var e=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+t.toLowerCase(),r=e.max-e.min,n=0;n<=r;n++)if(this._loadMaskValue(this._initialMaskValue),this._partIncrease(n+1),0===this._getActivePartProp("text").toLowerCase().indexOf(i))return void(this._searchValue=i);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(t))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(t){if(!this._isAllSelected()){var e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(t)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=f_(this._getFormatPattern(),ct);var t=this._regExpInfo.regexp,e=t.source,i=t.flags,r=new RegExp(/(\{[0-9]+,?[0-9]*\})/),n=e.split(r).map(a=>r.test(a)?a:Kt.Z.convertDigits(a,!1)).join("");this._regExpInfo.regexp=new RegExp(n,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var t=this.option("text")||this._getDisplayedText(this._maskValue);t&&(this._dateParts=((t,e)=>{for(var i=e.regexp.exec(t),r=0,n=0,a=[],s=function(){n=(r=n)+i[o].length;var d=e.patterns[o-1].replace(/^'|'$/g,""),u=(t=>FL[t]||(()=>t))(d[0]);a.push({index:o-1,isStub:d===i[o],caret:{start:r,end:n},pattern:d,text:i[o],limits:function(){for(var c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return Ec(d[0],...f)},setter:VL[d[0]]||ne.ZT,getter:u})},o=1;o<i.length;o++)s();return a})(t,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){Z.Z.off(this._input(),"."+tu)},_attachMaskEvents(){Z.Z.on(this._input(),(0,be.V4)("dxclick",tu),this._maskClickHandler.bind(this)),Z.Z.on(this._input(),(0,be.V4)("paste",tu),this._maskPasteHandler.bind(this)),Z.Z.on(this._input(),(0,be.V4)("drop",tu),()=>{this._renderSelectedPart()}),Z.Z.on(this._input(),(0,be.V4)("compositionend",tu),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&Z.Z.on(this._input(),(0,be.V4)("beforeinput",tu),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(t){this._useMaskBehavior()&&this._partIncrease(t.delta>0?1:-1,t)},_selectNextPart(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){t&&(this._initialMaskValue=new Date(this._maskValue));var e=(0,Ut.n$)(this._activePartIndex+t,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&t<0||e===this._dateParts.length-1&&t>0))return void this._selectNextPart(t>=0?t+1:t-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(t){return this._getActivePartProp("limits")(this._maskValue,t&&this._getRealLimitsPattern())},_getActivePartValue(t){t=t||this._maskValue;var e=this._getActivePartProp("getter");return(0,v.mf)(e)?e(t):t[e]()},_addLeadingZeroes(t){var e=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),r=String(i.max).length;return((e&&e[0]||"")+String(t)).substr(-r)},_setActivePartValue(t,e){e=e||this._maskValue;var i=this._getActivePartProp("setter"),r=this._getActivePartLimits();t=(0,Ut.Z2)(t,r.min,r.max)?t:t%10,t=this._addLeadingZeroes((0,Ut.n$)(t,r.min,r.max)),(0,v.mf)(i)?i(e,t):e[i](t),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(t){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][t]},_loadMaskValue(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=t&&new Date(t),this._initialMaskValue=t&&new Date(t)},_saveMaskValue(){var t=this._maskValue&&new Date(this._maskValue);t&&"date"===this.option("type")&&t.setHours(0,0,0,0),this._initialMaskValue=new Date(t),this.dateOption("value",t)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(t){this.callBase(t),this._useMaskBehavior()&&this.option("text",t)},_partIncrease(t,e){this._setNewDateIfEmpty();var{max:i,min:r}=this._getActivePartLimits(e),n=i-r;1===n&&n++;var a=t+this._getActivePartValue();a>i?a=this._applyLimits(a,{limitBase:r,limitClosest:i,limitDelta:n}):a<r&&(a=this._applyLimits(a,{limitBase:i,limitClosest:r,limitDelta:n})),this._setActivePartValue(a)},_applyLimits(t,e){var{limitBase:i,limitClosest:r,limitDelta:n}=e,a=(t-r)%n;return a?i+a-1*(0,Ut.Xx)(a):r},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((t,e)=>{for(var i=0;i<t.length;i++)if(!t[i].isStub&&t[i].caret.end>=e)return i;return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,v.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(t){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(t){var e=this._replaceSelectedText(this.option("text"),this._caret(),(0,wa.Zx)(t)),i=ct.parse(e,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),t.preventDefault()},_isDateValid:t=>(0,v.J_)(t)&&!isNaN(t),_isValueDirty(){var t=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(t&&t.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&Z.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(t){this._useMaskBehavior()&&!t.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(t),this._selectFirstPart(t)):this.callBase(t)},_valueChangeEventHandler(t){var e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(t),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(t)},_optionChanged(t){switch(t.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(t),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(t),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(t)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},reset(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});(0,kt.Z)("dxDateBox",IF);var{isWrapped:DF}=_n.Z,OF=function(){var t=function(c,f){return(0,O.l)(c,{readOnly:f.readOnly,placeholder:f.placeholder,inputAttr:{id:f.id,"aria-labelledby":f["aria-labelledby"]},tabIndex:f.tabIndex},f.editorOptions)},e=function(){return pi.Z.mozilla||_t.Z.real().ios},i=function(c){var f={},g=e(),m=c.sharedData||f;return t({placeholder:c.placeholder,width:c.width,value:c.value,onValueChanged:function(y){var w="filterRow"===c.parentType||"searchPanel"===c.parentType,I=y.event&&("input"===y.event.type||"keyup"===y.event.type),P=function($,se){c&&c.setValue($.value,se)};clearTimeout(f.valueChangeTimeout),I&&w?m.valueChangeTimeout=f.valueChangeTimeout=setTimeout(function(){P(y,f.valueChangeTimeout!==m.valueChangeTimeout)},(0,v.$K)(c.updateValueTimeout)?c.updateValueTimeout:0):P(y)},onKeyDown:function(y){g&&"enter"===(0,be.EV)(y.event)&&Z.Z.trigger((0,C.Z)(y.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===c.parentType?" keyup input":"")},c)},r=function(c){c.editorName="dxDateBox",c.editorOptions=t({value:c.value,onValueChanged:function(f){c.setValue(f.value)},onKeyDown:function(f){var{component:g,event:m}=f,y=g.option("useMaskBehavior");(e()||y)&&"enter"===(0,be.EV)(m)&&(g.blur(),g.focus())},displayFormat:c.format,type:c.dataType,dateSerializationFormat:null,width:"filterBuilder"===c.parentType?void 0:"auto"},c)},n=function(c){var m,f=i(c),g="searchPanel"===c.parentType;f.value=c.editorType&&"dxTextBox"!==c.editorType?c.value:(0,v.$K)(m=c.value)?m.toString():"",f.valueChangeEvent+=g?" keyup input search":"",f.mode=f.mode||(g?"search":"text"),c.editorName="dxTextBox",c.editorOptions=f},a=function(c){var f=i(c);f.value=(0,v.$K)(c.value)?c.value:null,c.editorName="dxNumberBox",c.editorOptions=f};function s(c){var g,m,y,f=c.lookup,w="filterRow"===c.parentType;if(f){var I;g=(0,Pt.vb)(f.displayExpr),(0,v.mf)(m=f.dataSource)&&!DF(m)&&(m=m(c.row||{}),function($){if($.row&&$.row.watch&&"dataRow"===$.parentType){var se=$.editorOptions||{};$.editorOptions=se;var fe,Se=se.onInitialized;se.onInitialized=function(We){Se&&Se.apply(this,arguments),(fe=We.component).on("disposing",$e)};var Fe,$e=$.row.watch(()=>(Fe=$.lookup.dataSource($.row))&&Fe.filter,()=>{fe.option("dataSource",Fe)},We=>{$.row=We})}}(c)),((0,v.Kn)(m)||Array.isArray(m))&&(m=(0,Td.aN)(m),w&&(y=m.postProcess,m.postProcess=function($){return 0===this.pageIndex()&&($=$.slice(0)).unshift(null),y?y.call(this,$):$}));var P=Boolean(f.allowClearing&&!w);c.editorName=null!==(I=c.editorType)&&void 0!==I?I:"dxSelectBox",c.editorOptions=t({searchEnabled:!0,value:c.value,valueExpr:c.lookup.valueExpr,searchExpr:c.lookup.searchExpr||c.lookup.displayExpr,allowClearing:P,showClearButton:P,displayExpr:function($){return null===$?c.showAllText:g($)},dataSource:m,onValueChanged:function($){var se=[$.value];!w&&se.push($.component.option("text")),c.setValue.apply(this,se)}},c)}}function o(c){c.editorName="dxCheckBox",c.editorOptions=t({elementAttr:{id:c.id},value:(0,v.$K)(c.value)?c.value:void 0,hoverStateEnabled:!c.readOnly,focusStateEnabled:!c.readOnly,activeStateEnabled:!1,onValueChanged:function(f){c.setValue&&c.setValue(f.value,f)}},c)}var d=c=>{c.editorName=c.editorType,c.editorOptions=t({value:c.value,onValueChanged:function(f){c.setValue(f.value)}},c)},u=c=>{var m,f={dxDateBox:r,dxCheckBox:o,dxNumberBox:a,dxTextBox:n};if(c.lookup)s(c);else if(c.editorType){var g;(null!==(g=f[c.editorType])&&void 0!==g?g:d)(c)}else switch(c.dataType){case"date":case"datetime":r(c);break;case"boolean":"filterRow"===(m=c).parentType||"filterBuilder"===m.parentType?s((0,O.l)(m,{lookup:{displayExpr:function(y){return!0===y?m.trueText||"true":!1===y?m.falseText||"false":void 0},dataSource:[!0,!1]}})):o(m);break;case"number":a(c);break;default:n(c)}};return{createEditor:function(c,f){f.cancel=!1,f.editorElement=(0,gt.u)(c),(0,v.$K)(f.tabIndex)||(f.tabIndex=this.option("tabIndex")),u(f),this.executeAction("onEditorPreparing",f),!f.cancel&&("dataRow"===f.parentType&&!f.isOnForm&&!(0,v.$K)(f.editorOptions.showValidationMark)&&(f.editorOptions.showValidationMark=!1),function(g,m){var y=(0,C.Z)(m.editorElement);if(m.editorName&&m.editorOptions&&y[m.editorName]){if(("dxCheckBox"===m.editorName||"dxSwitch"===m.editorName)&&(m.isOnForm||(y.addClass(g.addWidgetPrefix("checkbox-size")),y.parent().addClass("dx-editor-inline-block"))),g._createComponent(y,m.editorName,m.editorOptions),"dxDateBox"===m.editorName){var w=y.dxDateBox("instance"),I=w._supportedKeys().enter;w.registerKeyHandler("enter",P=>(w.option("opened")&&I(P),!0))}"dxTextArea"===m.editorName&&y.dxTextArea("instance").registerKeyHandler("enter",function(P){"enter"===(0,be.EV)(P)&&!P.ctrlKey&&!P.shiftKey&&P.stopPropagation()})}}(this,f),this.executeAction("onEditorPrepared",f))}}}();const wE=OF;var xb="dx-cell-focus-disabled",xE="focus-overlay",Sb="dx-focused",SE="dxDataGridEditorFactory",EE=(0,be.V4)([qt.Z.down,"focusin",ii.u].join(" "),SE),Eb="dx-hidden",LF=zt.ViewController.inherit(wE);l.registerModule("editorFactory",{defaultOptions:()=>({}),controllers:{editorFactory:class PF extends LF{_getFocusedElement(e){var i=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",r="td[tabindex]:focus, ".concat(i,", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus, .dx-switch:focus, .dx-dropdownbutton .dx-buttongroup:focus, .dx-adaptive-item-text:focus"),n=e.find(r);return this.elementIsInsideGrid(n)&&n}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var e=this.component&&this.component.$element();if(e){var i=this._getFocusedElement(e);if(i&&i.length){var r;if(!i.hasClass(xb)&&!i.hasClass("dx-row")){var n=i.closest("".concat(this._getFocusCellSelector(),", .").concat(xb));n.get(0)!==i.get(0)&&(r=this._needHideBorder(n),i=n)}if(i.length&&!i.hasClass(xb))return void this.focus(i,r)}}this.loseFocus()}_needHideBorder(e){return e.hasClass("dx-editor-inline-block")}_updateFocus(e){var i=this,r=e&&e.event&&(0,C.Z)(e.event.target).hasClass(i.addWidgetPrefix(xE));i._isFocusOverlay=i._isFocusOverlay||r,clearTimeout(i._updateFocusTimeoutID),i._updateFocusTimeoutID=setTimeout(()=>{delete i._updateFocusTimeoutID,i._isFocusOverlay||i._updateFocusCore(),i._isFocusOverlay=!1})}_updateFocusOverlaySize(e,i){e.hide();var r=js.Z.calculate(e,(0,O.l)({collision:"fit"},i));r.h.oversize>0&&(0,Q.Ns)(e,(0,Q.Y_)(e)-r.h.oversize),r.v.oversize>0&&(0,Q.qt)(e,(0,Q.zp)(e)-r.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,i){var r=this;if(void 0===e)return r._$focusedElement;e&&(e.is(r._$focusedElement)||r._$focusedElement&&r._$focusedElement.removeClass(Sb),r._$focusedElement=e,clearTimeout(r._focusTimeoutID),r._focusTimeoutID=setTimeout(()=>{delete r._focusTimeoutID,r.renderFocusOverlay(e,i),e.addClass(Sb),r.focused.fire(e)}))}refocus(){var e=this.focus();this.focus(e)}renderFocusOverlay(e,i){if(ye.isElementInCurrentGrid(this,e))if(this._$focusOverlay||(this._$focusOverlay=(0,C.Z)("<div>").addClass(this.addWidgetPrefix(xE))),i)this._$focusOverlay.addClass(Eb);else if(e.length){var r=pi.Z.mozilla?"right bottom":"left top",n=e.closest(".".concat(this.addWidgetPrefix("content"))),a=(0,ti.l)(e.get(0));this._$focusOverlay.removeClass(Eb).appendTo(n),(0,Q.qt)(this._$focusOverlay,a.bottom-a.top+1),(0,Q.Ns)(this._$focusOverlay,a.right-a.left+1);var s={precise:!0,my:r,at:r,of:e,boundary:n.length&&n};this._updateFocusOverlaySize(this._$focusOverlay,s),js.Z.setup(this._$focusOverlay,s),this._$focusOverlay.css("visibility","visible")}}resize(){var e=this._$focusedElement;e&&this.focus(e)}loseFocus(){this._$focusedElement&&this._$focusedElement.removeClass(Sb),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(Eb)}init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),Z.Z.on(this._subscribedContainerRoot,EE,this._updateFocusHandler),this._attachContainerEventHandlers()}_getContainerRoot(){var e,i=null===(e=this.component)||void 0===e?void 0:e.$element(),r=tt.Z.getRootNode(i?.get(0));return r.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||r.host?r:tt.Z.getDocument()}_attachContainerEventHandlers(){var e=this,i=e.component&&e.component.$element();i&&Z.Z.on(i,(0,be.V4)("keydown",SE),r=>{"tab"===(0,be.EV)(r)&&e._updateFocusHandler(r)})}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),Z.Z.off(this._subscribedContainerRoot,EE,this._updateFocusHandler)}}}});var VF=k(3972),NF=k(4388),yg=(0,qe.Jj)(),zF={text:"OK",onClick:function(){return!0}},fl="dx-dialog",HF="".concat(fl,"-wrapper"),ZF="".concat(fl,"-root"),$F="".concat(fl,"-content"),WF="".concat(fl,"-message"),KF="".concat(fl,"-buttons"),GF="".concat(fl,"-button"),IE="dx-button",UF=VF.w.inherit({ctor:function(t,e){this.callBase(e)},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{width:276}}])}}),TE=function(t){var e,i=new Y.BH,r=(new UF).option();t=(0,O.l)(r,t);var n=(0,C.Z)("<div>").addClass(fl).appendTo((0,q0.S3)()),s="messageHtml"in t;"message"in t&&Nt.Z.log("W1013");var o=String(s?t.messageHtml:t.message),d=(0,C.Z)("<div>").addClass(WF).html(o),u=[];(0,U.S6)(t.buttons||[zF],function(){var g=new NF.Z(this.onClick,{context:c});u.push({toolbar:"bottom",location:_t.Z.current().android?"after":"center",widget:"dxButton",options:(0,O.l)({},this,{onClick:function(){f(g.execute(...arguments))}})})});var c=new xa(n,(0,O.l)({title:null!==(e=t.title)&&void 0!==e?e:"",showTitle:(0,ne.IS)(t.showTitle,!0),dragEnabled:(0,ne.IS)(t.dragEnabled,!0),height:"auto",width:t.width,showCloseButton:t.showCloseButton||!1,ignoreChildEvents:!1,container:n,visualContainer:yg,dragAndResizeArea:yg,onContentReady:function(g){g.component.$content().addClass($F).append(d)},onShowing:function(g){g.component.bottomToolbar().addClass(KF).find(".".concat(IE)).addClass(GF),(0,wa.M3)()},onShown:function(g){var m=g.component.bottomToolbar().find(".".concat(IE)).first();Z.Z.trigger(m,"focus")},onHiding:function(){i.reject()},onHidden:function(g){var{element:m}=g;(0,C.Z)(m).remove()},toolbarItems:u,animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,_.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},t.popupOptions));function f(g){i.resolve(g),c.hide()}return c.$wrapper().addClass(HF),t.position&&c.option("position",t.position),c.$wrapper().addClass(ZF),{show:function(){if("android"===_t.Z.real().platform){var g=(0,Q.Cr)(yg)>(0,Q.dz)(yg);c.option({width:g?"80%":"60%"})}return c.show(),i.promise()},hide:f}},wg="dx-editor-cell",to="dx-row",DE="dx-selection",xg="edit-form",Ia="insert",as="remove",Sg="editing.popup",Ib="editing.form",vn="editing.editRowKey",_l="editing.editColumnName",AE="targetComponent",RE="input:not([type='hidden'])",Tb="[tabindex]:not([disabled]), ".concat(RE,":not([disabled])"),ru="batch",io="row",Ac="cell",nu="form",Db="popup",Eg="last",BE="pageBottom",Ab="pageTop",kE="viewportBottom",ME="viewportTop",jF=[ru,io,Ac,nu,Db],XF=[io,nu,Db],QF=[ru,io,Ac],JF=[io,nu],LE="dx-command-edit",PE="".concat(LE,"-with-icons"),ro="__DX_INSERT_INDEX__",FE="dx-cell-modified",Rc="update",uV={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},hV={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},cV={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},pV={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},fV=["edit","save","cancel","delete","undelete"],ss="editing.changes",mV="dx-dropdowneditor-overlay",VE="edit-form-item",xV=rs.Z.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",NE="dx-edit-row",Rb="_DX_KEY_",Oc=function(t){return function(e){var i=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");t.reject(i)}},zE=function(t,e){return e.isEditing||t&&e.column.allowEditing},HE=function(t,e){var i=!!e.column.command,r=zE(t,e);return"data"===e.rowType&&!i&&(r||e.column.showEditorAlways)},au=(t,e)=>{var i=-1;return t.some((r,n)=>{if(ZE(r)===e)return i=n,!0}),i};function ZE(t){return(0,v.Kn)(t)?t.name:t}var $E=(t,e)=>{t.forEach(i=>{i.items||i.tabs?$E(i.items||i.tabs,e):e(i)})},kV={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:ME,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:le.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:le.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:le.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:le.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:le.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:le.Z.format("dxDataGrid-editingAddRow"),deleteRow:le.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:le.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:le.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class BV extends zt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._rowsView=this.getView("rowsView"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>e.reject("cancel")),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[vn]=!0,this.component._optionsByReference[ss]=!0}getEditMode(){var e=this.option("editing.mode");return jF.includes(e)?e:io}_getDefaultEditorTemplate(){return(e,i)=>{var r=(0,C.Z)("<div>").appendTo(e),n=(0,O.l)({},i.column,{value:i.value,setValue:i.setValue,row:i.row,parentType:"dataRow",width:null,readOnly:!i.setValue,isOnForm:i.isOnForm,id:i.id});QF.includes(this.getEditMode())&&(n["aria-labelledby"]=i.column.headerId),this.getController("editorFactory").createEditor(r,n)}}_getNewRowPosition(){var e=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(e){case Ab:return ME;case BE:return kE;default:return e}return e}getChanges(){return this.option(ss)}getInsertRowCount(){return this.option(ss).filter(i=>"insert"===i.type).length}resetChanges(){var i=this.getChanges()?.length;i&&this._silentOption(ss,[])}_getInternalData(e){return this._internalState.filter(i=>(0,ne.bY)(i.key,e))[0]}_addInternalData(e){var i=this._getInternalData(e.key);return i?(0,O.l)(i,e):(this._internalState.push(e),e)}_getOldData(e){var i;return null===(i=this._getInternalData(e))||void 0===i?void 0:i.oldData}getUpdatedData(e){var i=this._dataController.keyOf(e),r=this.getChanges(),n=ye.getIndexByKey(i,r);return r[n]?(0,zr.FL)(e,r[n].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===Ia).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===as).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"!==e){var i=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,i)}}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,i){var r=!0;switch(e.name){case"delete":r=this.allowDeleting(i);break;case"undelete":r=!1}return r}_isButtonVisible(e,i){var{visible:r}=e;return(0,v.$K)(r)?(0,v.mf)(r)?r.call(e,{component:i.component,row:i.row,column:i.column}):r:this._isDefaultButtonVisible(e,i)}_isButtonDisabled(e,i){var{disabled:r}=e;return(0,v.mf)(r)?r.call(e,{component:i.component,row:i.row,column:i.column}):!!r}_getButtonConfig(e,i){var r=(0,v.Kn)(e)?e:{},n=ZE(e),a=(t=>{var e=t.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}})(i),s=cV[n],o=this.option("editing"),d=pV[n],u=!d||o[d];return(0,O.l)({name:n,text:a[n],cssClass:uV[n]},{onClick:s&&(c=>{var{event:f}=c;f.stopPropagation(),f.preventDefault(),setTimeout(()=>{i.row&&u&&this[s]&&this[s](i.row.rowIndex)})})},r)}_getEditingButtons(e){var i,r=!!e.column.buttons,n=(e.column.buttons||[]).slice();return r?((i=au(n,"edit"))>=0&&(au(n,"save")<0&&n.splice(i+1,0,"save"),au(n,"cancel")<0&&n.splice(au(n,"save")+1,0,"cancel")),(i=au(n,"delete"))>=0&&au(n,"undelete")<0&&n.splice(i+1,0,"undelete")):n=fV.slice(),n.map(a=>this._getButtonConfig(a,e))}_renderEditingButtons(e,i,r,n){i.forEach(a=>{this._isButtonVisible(a,r)&&this._createButton(e,a,r,n)})}_getEditCommandCellTemplate(){return(e,i,r)=>{var n=(0,C.Z)(e);if("data"===i.rowType){var a=this._getEditingButtons(i);this._renderEditingButtons(n,a,i,r),i.watch&&i.watch(()=>a.map(s=>({visible:this._isButtonVisible(s,i),disabled:this._isButtonDisabled(s,i)})),()=>{n.empty(),this._renderEditingButtons(n,a,i)})}else ye.setEmptyText(n)}}isRowBasedEditMode(){var e=this.getEditMode();return XF.includes(e)}getFirstEditableColumnIndex(){var i,r=this.getController("columns").getVisibleColumns();return(0,U.S6)(r,(n,a)=>{if(a.allowEditing)return i=n,!1}),i}getFirstEditableCellInRow(e){var i=this.getView("rowsView"),r=this.getFirstEditableColumnIndex();return i?._getCellElement(e||0,r)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,i){return ye.getIndexByKey(e,i)}hasChanges(e){for(var i=this.getChanges(),r=!1,n=0;n<i?.length;n++)if(i[n].type&&(!(0,v.$K)(e)||this._dataController.getRowIndexByKey(i[n].key)===e)){r=!0;break}return r}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),Z.Z.off(tt.Z.getDocument(),qt.Z.up,this._pointerUpEditorHandler),Z.Z.off(tt.Z.getDocument(),qt.Z.down,this._pointerDownEditorHandler),Z.Z.off(tt.Z.getDocument(),ii.u,this._saveEditorHandler)}_silentOption(e,i){"editing.changes"===e&&(this._changes=(0,b.HR)([],i)),super._silentOption(e,i)}optionChanged(e){if("editing"===e.name){var{fullName:i}=e;i===vn?this._handleEditRowKeyChange(e):i===ss?(0,ne.bY)(e.value,this._changes,{maxDepth:4})||(this._changes=(0,b.HR)([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){var i=this._dataController.getRowIndexByKey(e.value),r=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+r;(0,v.$K)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(i,n):this.cancelEditData()}_handleChangesChange(e){var i=this._dataController;!e.value.length&&!e.previousValue.length||(e.value.forEach(n=>{var a;if("insert"===n.type)this._addInsertInfo(n);else{var s=i.getCachedStoreData()||(null===(a=i.items())||void 0===a?void 0:a.map(d=>d.data)),o=ye.getIndexByKey(n.key,s,i.key());this._addInternalData({key:n.key,oldData:s[o]})}}),i.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,v.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return(0,v.$K)(this.option(vn))}isEditRow(e){return!1}_setEditRowKey(e,i){i?this._silentOption(vn,e):this.option(vn,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,i){var r=this._dataController.getKeyByRowIndex(e);void 0!==r?this._setEditRowKey(r,i):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){var i=this._dataController.getKeyByRowIndex(e);return(0,v.$K)(i)&&(0,ne.bY)(this.option(vn),i)&&this._getVisibleEditRowIndex()===e}isEditCell(e,i){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===i}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,i,r){var n=-1,a=this._dataController,s=this._getInsertAfterOrBeforeKey(i);return(0,v.$K)(s)||0!==e.length?(0,v.$K)(s)&&e.some((o,d)=>{var u=r||this._isProcessedItem(o);if((0,v.Kn)(o)&&(u||(0,v.$K)(o[ro])?(0,ne.bY)(o.key,s)&&(n=d):(0,ne.bY)(a.keyOf(o),s)&&(n=d)),n>=0){var c=e[n+1];return c&&("detail"===c.rowType||"detailAdaptive"===c.rowType)&&(0,v.$K)(i.insertAfterKey)?void 0:((0,v.$K)(i.insertAfterKey)&&(n+=1),!0)}}):n=0,n}_generateNewItem(e){var i,r={key:e},n=null===(i=this._getInternalData(e))||void 0===i?void 0:i.insertInfo;return n?.[ro]&&(r[ro]=n[ro]),r}_getLoadedRowIndex(e,i,r){var n=this._getInsertRowIndex(e,i,r),a=this._dataController;if(n<0){var s=this._getNewRowPosition(),o=a.pageIndex(),d=this._getInsertAfterOrBeforeKey(i);s===Eg||0!==o||(0,v.$K)(d)?s===Eg&&a.isLastPageLoaded()&&(n=e.length):n=0}return n}processItems(e,i){var{changeType:r}=i;return this.update(r),this.getChanges().forEach(a=>{var s;if(a.type===Ia){var{key:d}=a,u=null===(s=this._getInternalData(d))||void 0===s?void 0:s.insertInfo;(!(0,v.$K)(d)||!(0,v.$K)(u))&&(d=(u=this._addInsertInfo(a)).key);var c=this._getLoadedRowIndex(e,a),f=this._generateNewItem(d);c>=0&&e.splice(c,0,f)}}),e}processDataItem(e,i,r){var n=i.visibleColumns,a=e.data[ro]?e.data.key:e.key,s=this.getChanges(),o=ye.getIndexByKey(a,s);e.isEditing=!1,o>=0&&this._processDataItemCore(e,s[o],a,n,r)}_processDataItemCore(e,i,r,n,a){var{data:s,type:o}=i;switch(o){case Ia:e.isNewRow=!0,e.key=r,e.data=s;break;case Rc:e.modified=!0,e.oldData=e.data,e.data=(0,zr.FL)(e.data,s),e.modifiedValues=a(s,n,!0);break;case as:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){var i=new Y.BH;return(0,Y.gx)((0,Y.p4)(e.promise)).done(i.resolve).fail(Oc(i)).fail(r=>this._fireDataErrorOccurred(r)),i}}_createInsertInfo(){var e={};return e[ro]=this._getInsertIndex(),e}_addInsertInfo(e,i){var r,n;e.key=this.getChangeKeyValue(e);var{key:a}=e;if(n=null===(r=this._getInternalData(a))||void 0===r?void 0:r.insertInfo,!(0,v.$K)(n)){var s=this._getInsertAfterOrBeforeKey(e);n=this._createInsertInfo(),(0,v.$K)(s)||this._setInsertAfterOrBeforeKey(e,i)}return this._addInternalData({insertInfo:n,key:a}),{insertInfo:n,key:a}}getChangeKeyValue(e){if((0,v.$K)(e.key))return e.key;var r,i=this._dataController.key();return e.data&&i&&!Array.isArray(i)&&(r=e.data[i]),(0,v.$K)(r)||(r="".concat(Rb).concat(new Hr.Z)),r}_setInsertAfterOrBeforeKey(e,i){var r=this._dataController,n=r.items(!0),a=this.getView("rowsView"),s=this._getNewRowPosition();switch(s){case"first":case Eg:break;case Ab:case BE:if(n.length){var o=s===Ab?0:n.length-1;e[0===o?"insertBeforeKey":"insertAfterKey"]=n[o].key}break;default:var u=s===kE?a?.getBottomVisibleItemIndex():a?.getTopVisibleItemIndex(),c=r.getVisibleRows()[u];c&&(!c.isEditing&&"detail"===c.rowType||"detailAdaptive"===c.rowType)&&u++;var f=r.getKeyByRowIndex(u);(0,v.$K)(f)&&(e.insertBeforeKey=f)}}_getInsertIndex(){var e=0;return this.getChanges().forEach(i=>{var r,n=null===(r=this._getInternalData(i.key))||void 0===r?void 0:r.insertInfo;(0,v.$K)(n)&&i.type===Ia&&n[ro]>e&&(e=n[ro])}),e+1}_getInsertAfterOrBeforeKey(e){var i;return null!==(i=e.insertAfterKey)&&void 0!==i?i:e.insertBeforeKey}_getPageIndexToInsertRow(){var e=this._getNewRowPosition(),i=this._dataController,r=i.pageIndex(),n=i.pageCount()-1;return"first"===e&&0!==r?0:e===Eg&&r!==n?n:-1}addRow(e){var i=this._dataController;return i.store()?this._addRow(e):(i.fireError("E1052",this.component.NAME),(new Y.BH).reject())}_addRow(e){var r=this._dataController.store(),n=r&&r.key(),a={data:{}},s=this._getVisibleEditRowIndex(),o=new Y.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(n||(a.data.__KEY__=String(new Hr.Z)),(0,Y.gx)(this._initNewRow(a,e)).done(()=>{this._allowRowAdding()?(0,Y.gx)(this._addRowCore(a.data,e,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,Y.gx)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,i,r){var n={data:e,type:Ia},a=this._getVisibleEditRowIndex(),s=this._addInsertInfo(n,i),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(n),this._navigateToNewRow(r,n,a)}_navigateToNewRow(e,i,r){var n=new Y.BH,a=this._dataController,s=this.getController("focus");if(r=r??-1,!(i=i??this.getChanges().filter(f=>f.type===Ia)[0]))return n.reject("cancel").promise();var o=this._getPageIndexToInsertRow(),d=this._getLoadedRowIndex(a.items(),i,!0),u=f=>{(0,Y.gx)(s?.navigateToRow(f)).done(()=>{d=a.getRowIndexByKey(i.key),n.resolve()})},c=this._getInsertAfterOrBeforeKey(i);return o>=0?a.pageIndex(o).done(()=>{u(i.key)}).fail(n.reject):d<0&&(0,v.$K)(c)?u(c):(a.updateItems({changeType:"update",rowIndices:[e,r,d]}),(d=a.getRowIndexByKey(i.key))<0?u(i.key):n.resolve()),n.done(()=>{var f;null===(f=this._rowsView)||void 0===f||f.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(d),this._afterInsertRow(i.key)})}),n.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var i=this._dataController,r=this.getController("keyboardNavigation"),n=i.getKeyByRowIndex(e),a=this.getFirstEditableCellInRow(e);r?.focus(a),this.option("focusedRowKey",n),this._editCellInProgress=!0,this._delayedInputFocus(a,()=>{e=i.getRowIndexByKey(n),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(){}_getVisibleEditColumnIndex(){var e=this.option(_l);return(0,v.$K)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,i){var r,n=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(r=n[e])||void 0===r?void 0:r.name,i)}_setEditColumnName(e,i){i?this._silentOption(_l,e):this.option(_l,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var e=this.option(_l);return this._getColumnByName(e)}_getColumnByName(e){var r,i=this._columnsController.getVisibleColumns();return(0,v.$K)(e)&&i.some(n=>{if(n.name===e)return r=n,!0}),r}_getVisibleEditRowIndex(e){var i=this._dataController,r=this.option(vn),n=i.getRowIndexByKey(r);return-1===n?n:n+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){return"adaptiveHidden"===(e?this._getColumnByName(e):this._getEditColumn())?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){var i,r=this._dataController,a=r.items()[e],s={data:a&&a.data,cancel:!1},o=this._getVisibleEditRowIndex();if(a){if(e===o)return!0;if(void 0===a.key)return void this._dataController.fireError("E1043");a.isNewRow||(s.key=a.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=r.pageIndex(),this._addInternalData({key:a.key,oldData:null!==(i=a.oldData)&&void 0!==i?i:a.data}),this._setEditRowKey(a.key))}}_editRowFromOptionChanged(e,i){var r=[i,e];this._beforeUpdateItems(r,e,i),this._editRowFromOptionChangedCore(r,e)}_editRowFromOptionChangedCore(e,i,r){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:r})}_focusEditorIfNeed(){}_showEditPopup(e,i){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){return{text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)}}_getCancelButtonConfig(){return{text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)}}_removeInternalData(e){var i=this._getInternalData(e),r=this._internalState.indexOf(i);r>-1&&this._internalState.splice(r,1)}_updateInsertAfterOrBeforeKeys(e,i){var r=e[i];e.forEach(n=>{var a=this._getInsertAfterOrBeforeKey(n);(0,ne.bY)(a,r.key)&&(n[(0,v.$K)(n.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(r))})}_removeChange(e){if(e>=0){var i=[...this.getChanges()],{key:r}=i[e];this._removeInternalData(r),this._updateInsertAfterOrBeforeKeys(i,e),i.splice(e,1),this._silentOption(ss,i),(0,ne.bY)(this.option(vn),r)&&this._resetEditIndices()}}executeOperation(e,i){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(i(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,Y.gx)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,i,r){this._needFocusEditor=!0,!e||!e.showEditorAlways||i&&!i.showEditorAlways?(this._editCellInProgress=!0,this.getController("editorFactory").loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[r,this._getVisibleEditRowIndex()]})):e!==i&&this._dataController.updateItems({changeType:"update",rowIndices:[]})}_delayedInputFocus(e,i,r){var n=()=>{if(i&&i(),e){var a=e.find(Tb).first();ye.focusAndSelectElement(this,a)}this._beforeFocusCallback=null};_t.Z.real().ios||_t.Z.real().android?n():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),r&&(this._beforeFocusCallback=i),this._inputFocusTimeoutID=setTimeout(n))}_focusEditingCell(e,i,r){var n=this.getView("rowsView"),a=this._getVisibleEditColumnIndex();(i=i||n&&n._getCellElement(this._getVisibleEditRowIndex(),a))&&this._delayedInputFocus(i,e,r)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){var i=this.option("editing"),r=i?.texts,n=i?.confirmDelete,a=r?.confirmDeleteMessage,s=this._dataController.items()[e],o=!this.isEditing()||s.isNewRow;if(s&&o)if(n&&a){var d=r&&r.confirmDeleteTitle;(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=(0,v.PO)(t)?t:{title:e,messageHtml:t,showTitle:i,buttons:[{text:le.Z.format("Yes"),onClick:function(){return!0}},{text:le.Z.format("No"),onClick:function(){return!1}}],dragEnabled:i};return TE(r).show()})(a,d,(0,v.$K)(d)&&d.length>0).done(c=>{c&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){var r=this._dataController.items()[e],n=r&&r.key,a=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=ye.getIndexByKey(n,s);return o>=0?s[o].type===Ia?this._removeChange(o):this._addChange({key:n,type:as}):this._addChange({key:n,oldData:r.data,type:as}),this._afterDeleteRow(e,a)}_afterDeleteRow(e,i){return this.saveEditData()}undeleteRow(e){var i=this._dataController,r=i.items()[e],n=this._getVisibleEditRowIndex(),a=r&&r.key,s=this.getChanges();if(r){var o=ye.getIndexByKey(a,s);if(o>=0){var{data:d}=s[o];(0,v.Qr)(d)?this._removeChange(o):this._addChange({key:a,type:Rc}),i.updateItems({changeType:"update",rowIndices:[n,e]})}}}_fireOnSaving(){var e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);var i=new Y.BH;return(0,Y.gx)((0,Y.p4)(e.promise)).done(()=>{i.resolve(e)}).fail(r=>{Oc(i),this._fireDataErrorOccurred(r),i.resolve({cancel:!0})}),i}_executeEditingAction(e,i,r){if(this.component._disposed)return null;var n=new Y.BH;return this.executeAction(e,i),(0,Y.gx)((0,Y.p4)(i.cancel)).done(a=>{a?setTimeout(()=>{n.resolve("cancel")}):r(i).done(n.resolve).fail(Oc(n))}).fail(Oc(n)),n}_processChanges(e,i,r,n){var a=this._dataController.store();(0,U.S6)(n,(s,o)=>{var g,m,d=this._getOldData(o.key),{data:u,type:c}=o,f=(0,je.Z)({},o);if(!this._beforeSaveEditData(o,s)){switch(c){case as:g=this._executeEditingAction("onRowRemoving",m={data:d,key:o.key,cancel:!1},()=>a.remove(o.key).done(w=>{r.push({type:"remove",key:w})}));break;case Ia:g=this._executeEditingAction("onRowInserting",m={data:u,cancel:!1},()=>a.insert(m.data).done((w,I)=>{(0,v.$K)(I)&&(f.key=I),w&&(0,v.Kn)(w)&&w!==m.data&&(f.data=w),r.push({type:"insert",data:w,index:0})}));break;case Rc:g=this._executeEditingAction("onRowUpdating",m={newData:u,oldData:d,key:o.key,cancel:!1},()=>a.update(o.key,m.newData).done((w,I)=>{w&&(0,v.Kn)(w)&&w!==m.newData&&(f.data=w),r.push({type:"update",key:I,data:w})}))}if(n[s]=f,g){var y=new Y.BH;g.always(w=>{i.push({key:o.key,result:w})}).always(y.resolve),e.push(y.promise())}}})}_processRemoveIfError(e,i){return e[i]?.type===as&&i>=0&&e.splice(i,1),!0}_processRemove(e,i,r){var n=e[i];if(!r||!n||n.type===as)return this._processRemoveCore(e,i,!r||!n)}_processRemoveCore(e,i,r){return i>=0&&e.splice(i,1),!0}_processSaveEditDataResult(e){for(var i=!1,r=[...this.getChanges()],n=r.length,a=0;a<e.length;a++){var s=e[a].result,o="cancel"===s,d=ye.getIndexByKey(e[a].key,r),u=r[d];if(s&&s instanceof Error){if(u&&this._addInternalData({key:u.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(r,d))break}else this._processRemove(r,d,o)&&(i=!o)}return r.length<n&&this._silentOption(ss,r),i}_fireSaveEditDataEvents(e){(0,U.S6)(e,(i,r)=>{var{data:n,key:a,type:s}=r,o=this._addInternalData({key:a}),d={key:a,data:n};switch(o.error&&(d.error=o.error),s){case as:this.executeAction("onRowRemoved",(0,O.l)({},d,{data:o.oldData}));break;case Ia:this.executeAction("onRowInserted",d);break;case Rc:this.executeAction("onRowUpdated",d)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){var e=new Y.BH;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,Y.gx)(this._beforeSaveEditData()).done(i=>{i?this._resolveAfterSave(e,{cancel:i}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){var{cancel:i,error:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Y.gx)(this._afterSaveEditData(i)).done(()=>{e.resolve(r)}).fail(e.reject)}_saveEditDataInner(){var e=new Y.BH,i=[],r=[],n=[],a=this._dataController.dataSource();return(0,Y.gx)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:d}=s;return o?e.resolve().promise():(this._processChanges(r,i,n,d),r.length?(this._refocusEditCell=!0,a?.beginLoading(),(0,Y.gx)(...r).done(()=>{this._processSaveEditDataResult(i)?this._endSaving(n,d,e):(a?.endLoading(),e.resolve())}).fail(u=>{a?.endLoading(),e.resolve(u)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,i,r){var n=this._dataController.dataSource();this._beforeEndSaving(i),n?.endLoading(),this._refreshDataAfterSave(e,i,r)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,i,r){var n=this._dataController,a=this.option("editing.refreshMode"),s="reshape"!==a&&"repaint"!==a;s||n.push(e),(0,Y.gx)(n.refresh({selection:s,reload:s,load:"reshape"===a,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(i)}).done(()=>{this._resolveAfterSave(r)}).fail(o=>{this._resolveAfterSave(r,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var e=this._isEditColumnVisible(),i=this.option("editing.useIcons"),r=LE+(i?" ".concat(PE):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:r,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:r})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var e=this.hasChanges();return!((0,v.$K)(this.option("editing.editRowKey"))||e)}_updateEditButtons(){var e=this.getView("headerPanel"),i=this._isEditButtonDisabled();e&&(e.setToolbarItemDisabled("saveButton",i),e.setToolbarItemDisabled("revertButton",i))}_applyModified(e,i){e&&e.addClass(FE)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){var e=this.getChanges(),i={cancel:!1,changes:e};this.executeAction("onEditCanceling",i),i.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){var e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){var i=this._dataController;i&&this._pageIndex!==i.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=i.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,i){return i?[]:[e.rowIndex]}addDeferred(e){this._deferreds.indexOf(e)<0&&(this._deferreds.push(e),e.always(()=>{var i=this._deferreds.indexOf(e);i>=0&&this._deferreds.splice(i,1)}))}_prepareChange(e,i,r){var n,a={},s=null===(n=e.row)||void 0===n?void 0:n.data,o=e.key,d=new Y.BH;return void 0!==o&&(e.value=i,(0,Y.p4)(e.column.setCellValue(a,i,(0,O.l)(!0,{},s),r)).done(()=>{d.resolve({data:a,key:o,oldData:s,type:Rc})}).fail(Oc(d)).fail(c=>this._fireDataErrorOccurred(c)),(0,v.$K)(r)&&e.column.displayValueMap&&(e.column.displayValueMap[i]=r),this._updateRowValues(e),this.addDeferred(d)),d}_updateRowValues(e){if(e.values){var i=this._dataController,r=i.getRowIndexByKey(e.key),n=i.getVisibleRows()[r];n&&(e.row.values=n.values,e.values=n.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,i,r,n){var a=e.key,s=new Y.BH;return void 0===a&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,i,r).done(o=>{(0,Y.gx)(this._applyChange(e,o,n)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){var i=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());var r=e&&e.setCellValue!==e.defaultSetCellValue,n=i.some(a=>a.calculateCellValue!==a.defaultCalculateCellValue);return r||n}_applyChange(e,i,r){var n=(0,je.Z)((0,je.Z)({},e),{forceUpdateRow:r});return this._addChange(i,n),this._updateEditButtons(),this._applyChangeCore(e,n.forceUpdateRow)}_applyChangeCore(e,i){var r=e.column.setCellValue!==e.column.defaultSetCellValue,{row:n}=e;n&&(i||r?this._updateEditRow(n,i,r):n.update&&n.update())}_updateEditRowCore(e,i,r){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,i)})}_updateEditRow(e,i,r){i?this._updateRowImmediately(e,i,r):this._updateRowWithDelay(e,r)}_updateRowImmediately(e,i,r){this._updateEditRowCore(e,!i,r),this._validateEditFormAfterUpdate(e,r),i||this._focusEditingCell()}_updateRowWithDelay(e,i){var r=new Y.BH;this.addDeferred(r),setTimeout(()=>{var n,a=(null===(n=this._editForm)||void 0===n?void 0:n.element())||this.component.$element().get(0),s=(0,C.Z)(tt.Z.getActiveElement(a)),o=this._rowsView.getCellIndex(s,e.rowIndex),d=s.get(0),u=ye.getSelectionRange(d);if(this._updateEditRowCore(e,!1,i),this._validateEditFormAfterUpdate(e,i),o>=0){var c=this._rowsView._getCellElement(e.rowIndex,o);this._delayedInputFocus(c,()=>{setTimeout(()=>{var f;d=tt.Z.getActiveElement(null===(f=this.component.$element())||void 0===f?void 0:f.get(0)),u.selectionStart>=0&&ye.setSelectionRange(d,u)})})}r.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,i){var r,n=i?.row,a=[...this.getChanges()],s=ye.getIndexByKey(e.key,a);s<0&&(s=a.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,a.push(e));var o=(0,je.Z)({},a[s]);return o&&(e.data&&(o.data=(0,zr.FL)(o.data,e.data)),(!o.type||!e.data)&&e.type&&(o.type=e.type),n&&(n.oldData=this._getOldData(n.key),n.data=(0,zr.FL)(n.data,e.data))),a[s]=o,this._silentOption(ss,a),i&&o!==(null===(r=this.getChanges())||void 0===r?void 0:r[s])&&(i.forceUpdateRow=!0),o}_getFormEditItemTemplate(e,i){return i.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){var n,d,{column:i}=e,r=e.row&&e.row.rowIndex,a=this.isRowBasedEditMode(),s=this.isEditRow(r),o=this.isEditCell(r,e.columnIndex);return!(i.showEditorAlways||i.setCellValue&&(s&&i.allowEditing||o))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||i.command?"detail"===i.command&&"detail"===e.rowType&&s&&(n=null==this?void 0:this.getEditFormTemplate(e)):(((this.allowUpdating(e)||s)&&i.allowEditing||o)&&(s||!a)&&(i.showEditorAlways&&!a&&this._isEditingStart(d={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:i}),(!d||!d.cancel)&&(e.setValue=(c,f)=>{this.updateFieldValue(e,c,f)})),n=i.editCellTemplate||this._getDefaultEditorTemplate()),n}_createButton(e,i,r,n){var a=hV[i.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),d=(0,C.Z)("<a>").attr("href","#").addClass("dx-link").addClass(i.cssClass);if(i.template&&o)this._rowsView.renderTemplate(e,i.template,r,!0);else{if(i.template)d=(0,C.Z)("<span>").addClass(i.cssClass);else if(s&&a||i.icon){var u=ol.P(a=i.icon||a);"image"===u||"svg"===u?d=ol.H(a).addClass(i.cssClass):d.addClass("dx-icon".concat("dxIcon"===u?"-":" ").concat(a)).attr("title",i.text),d.addClass("dx-link-icon"),e.addClass(PE);var c=this.getButtonLocalizationNames()[i.name];c&&d.attr("aria-label",le.Z.format(c))}else d.text(i.text);(0,v.$K)(i.hint)&&d.attr("title",i.hint),this._isButtonDisabled(i,r)?d.addClass("dx-state-disabled"):(!i.template||i.onClick)&&Z.Z.on(d,(0,be.V4)("click","dxDataGridEditing"),this.createAction(f=>{var g;null===(g=i.onClick)||void 0===g||g.call(i,(0,O.l)({},f,{row:r.row,column:r.column})),f.event.preventDefault(),f.event.stopPropagation()})),e.append(d,"&nbsp;"),i.template&&(r.renderAsync=!1,this._rowsView.renderTemplate(d,i.template,r,!0,n))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,i,r,n){var a,s=null!==(a=this.option("editing.texts"))&&void 0!==a?a:{},d={revert:"cancel",save:"save",addRow:"addrow"}[i],u={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[i],c=("save"===d||"cancel"===d)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:f=>{(0,C.Z)(f.element).addClass(e._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(d),"-button")))},icon:"edit-button-".concat(d),disabled:c,onClick:()=>{setTimeout(()=>{this[r]()})},text:u,hint:u},showText:"inMenu",name:"".concat(i,"Button"),location:"after",locateInMenu:"auto",sortIndex:n}}prepareEditButtons(e){var i,n=[];return(null!==(i=this.option("editing"))&&void 0!==i?i:{}).allowAdding&&n.push(this.prepareButtonItem(e,"addRow","addRow",20)),n}highlightDataCell(e,i){this.shouldHighlightCell(i)&&e.addClass(FE)}_afterInsertRow(){}_beforeSaveEditData(e){if(e&&!(0,v.$K)(e.key)&&(0,v.$K)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,i){var r=this.option("editing.".concat(e));return(0,v.mf)(r)&&(r=r({component:this.component,row:i.row})),r}allowUpdating(e,i){var r,n=null!==(r=this.option("editing.startEditAction"))&&void 0!==r?r:"click";return(!(arguments.length>1)||n===i||"down"===i)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var{columnIndex:i}=e,r=e.row&&(e.row.isNewRow?e.row.values:e.row.modifiedValues);return!!r&&void 0!==r[i]}isNewRowInEditMode(){var e=this._getVisibleEditRowIndex(),i=this._dataController.items();return e>=0&&i[e].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==io||!e.row.isEditing)}}},extenders:{controllers:{data:{init(){this._editingController=this.getController("editing"),this.callBase()},reload(t,e){return!e&&this._editingController.refresh(),this.callBase.apply(this,arguments)},repaintRows(){if(!this.getController("editing").isSaving())return this.callBase.apply(this,arguments)},_updateEditRow(t){var e,i=this.option(vn),n=t[ye.getIndexByKey(i,t)];n&&(n.isEditing=!0,null===(e=this._updateEditItem)||void 0===e||e.call(this,n))},_updateItemsCore(t){this.callBase(t),this._updateEditRow(this.items(!0))},_applyChangeUpdate(t){this._updateEditRow(t.items),this.callBase(t)},_applyChangesOnly(t){this._updateEditRow(t.items),this.callBase(t)},_processItems(t,e){return t=this._editingController.processItems(t,e),this.callBase(t,e)},_processDataItem(t,e){return this._editingController.processDataItem(t,e,this.generateDataValues),this.callBase(t,e)},_processItem(t,e){return(t=this.callBase(t,e)).isNewRow&&(e.dataIndex--,delete t.dataIndex),t},_getChangedColumnIndices(t,e,i,r){if(t.isNewRow===e.isNewRow&&t.removed===e.removed)return this.callBase.apply(this,arguments)},_isCellChanged(t,e,i,r,n){var a=this.getController("editing"),s=t.cells&&t.cells[r],o=a&&a.isEditCell(i,r);return(!n||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||this.callBase.apply(this,arguments))},needToRefreshOnDataSourceChange(t){var e=this.getController("editing");return!(Array.isArray(t.value)&&t.value===t.previousValue&&e.isSaving())},_handleDataSourceChange(t){var e=this.callBase(t),i=this.option("editing.changes"),r=t.value;if(Array.isArray(r)&&i.length){var n=r.map(d=>this.keyOf(d)),a=i.filter(d=>"insert"===d.type||n.some(u=>(0,ne.bY)(d.key,u)));a.length!==i.length&&this.option("editing.changes",a);var s=this.option("editing.editRowKey");!a.some(d=>"insert"===d.type&&(0,ne.bY)(s,d.key))&&n.every(d=>!(0,ne.bY)(s,d))&&this.option("editing.editRowKey",null)}return e}}},views:{rowsView:{init(){this.callBase(),this._editingController=this.getController("editing")},getCellIndex(t,e){if(!t.is("td")&&e>=0){var i=this.getCellElements(e),r=-1;return(0,U.S6)(i,(n,a)=>{(0,C.Z)(a).find(t).length&&(r=n)}),r}return this.callBase.apply(this,arguments)},publicMethods(){return this.callBase().concat(["cellValue"])},_getCellTemplate(t){return this._editingController.getColumnTemplate(t)||this.callBase(t)},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var i=!!t.removed,r=!!t.isNewRow,n=!!t.modified;r&&e.addClass("dx-row-inserted"),n&&e.addClass("dx-row-modified"),(r||i)&&e.removeClass("dx-selection")}return e},_getColumnIndexByElement(t){for(var e=t.closest("table"),i=this.getTableElements();e.length&&!i.filter(e).length;)t=e.closest("td"),e=t.closest("table");return this._getColumnIndexByElementCore(t)},_getColumnIndexByElementCore(t){var e=t.closest(".".concat(to,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(e)},_editCellByClick(t,e){var i=this._editingController,r=(0,C.Z)(t.event.target),n=this._getColumnIndexByElement(r),a=this._dataController.items()[t.rowIndex],s=i.allowUpdating({row:a},e)||a&&a.isNewRow,o=this._columnsController.getVisibleColumns()[n],d=i.isEditCell(t.rowIndex,n),u=s&&o&&(o.allowEditing||d),c=this.option("editing.startEditAction")||"click",f=o&&o.showEditorAlways;if(d)return!0;if("down"===e)return(_t.Z.real().ios||_t.Z.real().android)&&(0,wa.M3)(),f&&u&&i.editCell(t.rowIndex,n);if("click"===e&&"dblClick"===c){var g=a?.isNewRow;i.closeEditCell(!1,g)}return u&&e===c?i.editCell(t.rowIndex,n)||i.isEditRow(t.rowIndex):void 0},_rowPointerDown(t){this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(t,"down")})},_rowClick(t){var e=(0,C.Z)(t.rowElement).hasClass(this.addWidgetPrefix(xg));t.event[AE]=this.component,!this._editCellByClick(t,"click")&&!e&&this.callBase.apply(this,arguments)},_rowDblClick(t){this._editCellByClick(t,"dblClick")||this.callBase.apply(this,arguments)},_cellPrepared(t,e){var i,r=this._editingController,n=!!e.column.command,a=e.setValue,s=r.isEditRow(e.rowIndex),o=zE(s,e);if(HE(s,e)){var{alignment:d}=e.column;t.toggleClass(this.addWidgetPrefix("readonly"),!a).toggleClass("dx-cell-focus-disabled",!a),d&&t.find(RE).first().css("textAlign",d)}o&&this._editCellPrepared(t);var u=!(null===(i=e.column)||void 0===i||!i.cellTemplate);e.column&&!n&&(!u||r.shouldHighlightCell(e))&&r.highlightDataCell(t,e),this.callBase.apply(this,arguments)},_editCellPrepared:ne.ZT,_formItemPrepared:ne.ZT,_getCellOptions(t){var e=this.callBase(t);return e.isEditing=this._editingController.isEditCell(e.rowIndex,e.columnIndex),e},_createCell(t){var e=this.callBase(t),i=this._editingController.isEditRow(t.rowIndex);return HE(i,t)&&e.addClass(wg),e},cellValue(t,e,i,r){var n=this.getCellOptions(t,e);if(n){if(void 0===i)return n.value;this._editingController.updateFieldValue(n,i,r,!0)}},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._pointerDownTimeout)},_renderCore(){return this.callBase.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}},headerPanel:{_getToolbarItems(){var t=this.callBase();return this.getController("editing").prepareEditButtons(this).concat(t)},optionChanged(t){var{fullName:e}=t;switch(t.name){case"editing":e&&![Sg,ss,_l,vn].some(n=>n===e)&&this._invalidate(),this.callBase(t);break;case"useLegacyColumnButtonTemplate":t.handled=!0;break;default:this.callBase(t)}},isVisible(){var t=this.getController("editing").option("editing");return this.callBase()||t?.allowAdding}}}}};l.registerModule("editing",(0,O.l)(!0,{},kV,{extenders:{controllers:{data:{_changeRowExpandCore(t){var e=this._editingController;return Array.isArray(t)&&e&&e.refresh(),this.callBase.apply(this,arguments)}}}}}));var LV={extenders:{controllers:{editing:t=>class extends t{isRowEditMode(){return this.getEditMode()===io}_afterCancelEditData(e){var i=this._dataController;this.isRowBasedEditMode()&&e>=0?i.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,i){var r=this.isRowBasedEditMode(),n=i.row&&(0,ne.bY)(i.row.key,this.option(vn));if(r)switch(e.name){case"edit":return!n&&this.allowUpdating(i);case"delete":return super._isDefaultButtonVisible(e,i)&&!n;case"save":case"cancel":return n;default:return super._isDefaultButtonVisible(e,i)}return super._isDefaultButtonVisible(e,i)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){var{allowCancelEditing:i}=e??{};if(this.isRowBasedEditMode()){var r=this.getChanges().filter(n=>"update"===n.type).length>0;this.init(),i&&r&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){var e=super._isEditColumnVisible(),i=this.option("editing"),r=this.isRowEditMode();return e||r&&(i.allowUpdating||i.allowAdding)}_focusEditorIfNeed(){var e=this.getEditMode();if(this._needFocusEditor){if(JF.includes(e)){var i=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(i,()=>{i&&this.component.focus(i)})}this._needFocusEditor=!1}}},data:{_getChangedColumnIndices(t,e,i,r){if(!this.getController("editing").isRowBasedEditMode()||t.isEditing===e.isEditing)return this.callBase.apply(this,arguments)}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return t&&this._editingController.isEditRow(t.rowIndex)&&(e.addClass(NE),e.removeClass(DE),"detail"===t.rowType&&e.addClass(this.addWidgetPrefix(xg))),e},_update(t){this.callBase(t),"updateSelection"===t.changeType&&this.getTableElements().children("tbody").children(".".concat(NE)).removeClass(DE)}}}}};l.registerModule("editingRowBased",LV);var wi=k(9150);class WE{constructor(){this._map={}}_findWidgetInstance(e){var i;return(0,U.S6)(this._map,function(r,n){var{widgetInstance:a,item:s}=n;if(e(s))return i=a,!1}),i}_findFieldByCondition(e,i){var r;return(0,U.S6)(this._map,function(n,a){if(e(a))return r="guid"===i?n:a[i],!1}),r}clear(){this._map={}}removeItemsByItems(e){(0,U.S6)(e.getItems(),i=>this.removeItemByKey(i))}removeItemByKey(e){delete this._map[e]}add(e){var i=e.guid||new Hr.Z;return this._map[i]=e,i}addItemsOrExtendFrom(e){e.each((i,r)=>{this._map[i]?(r.widgetInstance&&(this._map[i].widgetInstance=r.widgetInstance),this._map[i].$itemContainer=r.$itemContainer):this.add({item:r.item,widgetInstance:r.widgetInstance,guid:i,$itemContainer:r.$itemContainer})})}extendRunTimeItemInfoByKey(e,i){this._map[e]&&(this._map[e]=(0,O.l)(this._map[e],i))}findWidgetInstanceByItem(e){return this._findWidgetInstance(i=>i===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(i=>{var{path:r}=i;return r===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(i=>{var{path:r}=i;return r===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(i=>e===i.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(i=>e===((0,v.HD)(i)?i:i.dataField))}findItemContainerByItem(e){for(var i in this._map)if(this._map[i].item===e)return this._map[i].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(i=>{var{item:r}=i;return r===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(i=>{var{item:r}=i;return r===e},"preparedItem")}getItems(){return this._map}each(e){(0,U.S6)(this._map,function(i,r){e(i,r)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(n=>!!this._map[n].path&&this._map[n].path.indexOf(e,0)>-1).forEach(n=>this.removeItemByKey(n))}}var Ig={move(t,e){(0,gi.pB)(t,{left:e})}},Ob={moveTo(t,e,i,r){Ni.Z.animate(t,{type:"slide",to:{left:e},duration:i,complete:r})},complete(t){Ni.Z.stop(t,!0)}},PV="dx-multiview",FV="dx-multiview-wrapper",VV="dx-multiview-item-container",KE="dx-multiview-item",GE=t=>+t,UE=W0.inherit({_activeStateUnit:"."+KE,_supportedKeys:function(){return(0,O.l)(this.callBase(),{pageUp:ne.ZT,pageDown:ne.ZT})},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,_itemAttributes:{role:"tabpanel"},loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectionByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return KE},_itemDataKey:function(){return"dxMultiViewItemData"},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=(0,Q.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(t){var e=this._itemsCount();return t<0&&(t+=e),t>=e&&(t-=e),t},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var t=this.$element();t.addClass(PV),this._$wrapper=(0,C.Z)("<div>").addClass(FV),this._$wrapper.appendTo(t),this._$itemContainer=(0,C.Z)("<div>").addClass(VV),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_afterItemElementDeleted:function(t,e){this.callBase(t,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted:function(t){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(t.index,0,null)},_executeItemRenderAction:function(t,e,i){t=(this.option("items")||[]).indexOf(e),this.callBase(t,e,i)},_renderItemContent:function(t){var e=new Y.BH,i=this,r=this.callBase,n=new Y.BH;return n.done(function(){var a=r.call(i,t);e.resolve(a)}),this._deferredItems[t.index]=n,this.option("deferRendering")||n.resolve(),e.promise()},_render:function(){this.callBase(),(0,ne.g0)(()=>{var t=this._getSelectedItemIndices();this._updateItems(t[0])})},_updateItems:function(t,e){this._updateItemsPosition(t,e),this._updateItemsVisibility(t,e)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_updateItemsPosition:function(t,e){var i=this._itemElements(),r=(0,v.$K)(e)?-this._animationDirection(e,t):void 0,n=i.eq(t);Ig.move(n,0),(0,v.$K)(e)&&Ig.move(i.eq(e),100*r+"%")},_updateItemsVisibility:function(t,e){this._itemElements().each(function(r,n){var a=(0,C.Z)(n),s=r!==t&&r!==e;s||this._renderSpecificItem(r),a.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,a)}.bind(this))},_renderSpecificItem:function(t){var e=this._itemElements().eq(t),i=e.find(this._itemContentClass()).length>0;(0,v.$K)(t)&&!i&&(this._deferredItems[t].resolve(),(0,ns.U_)(e))},_refreshItem:function(t,e){this.callBase(t,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelected:ne.ZT,_updateSelection:function(t,e){var i=t[0],r=e[0];Ob.complete(this._$itemContainer),this._updateItems(r,i);var n=this._animationDirection(i,r);this._animateItemContainer(n*this._itemWidth(),function(){Ig.move(this._$itemContainer,0),this._updateItems(i),(0,Q.dz)(this._$itemContainer)}.bind(this))},_animateItemContainer:function(t,e){var i=this.option("animationEnabled")?200:0;Ob.moveTo(this._$itemContainer,t,i,e)},_animationDirection:function(t,e){var i=(t=>(0,gi.jt)(this._$itemContainer).left)(),r=(e-t)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return(0,Ut.Xx)(0!==i?i:r)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),mb.Z,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:t=>this._swipeStartHandler(t.event),onUpdated:t=>this._swipeUpdateHandler(t.event),onEnd:t=>this._swipeEndHandler(t.event)})},_swipeStartHandler:function(t){Ob.complete(this._$itemContainer);var e=this.option("selectedIndex"),i=this.option("loop"),r=this._itemsCount()-1,n=this.option("rtlEnabled");t.maxLeftOffset=GE(i||(n?e>0:e<r)),t.maxRightOffset=GE(i||(n?e<r:e>0)),this._swipeDirection=null},_swipeUpdateHandler:function(t){var e=t.offset,i=(0,Ut.Xx)(e)*this._getRTLSignCorrection();if(Ig.move(this._$itemContainer,e*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;var r=this.option("selectedIndex"),n=this._normalizeIndex(r-i);this._updateItems(r,n)}},_swipeEndHandler:function(t){var e=t.targetOffset*this._getRTLSignCorrection();if(e){this.option("selectedIndex",this._normalizeIndex(this.option("selectedIndex")-e));var i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,gt.u)(i))}else this._animateItemContainer(0,ne.ZT)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.last()),e},_nextItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.first()),e},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(t){t&&this._dimensionChanged()},_updateSwipeDisabledState(){var t=this._getSwipeDisabledState();mb.Z.getInstance(this.$element()).option("disabled",t)},_optionChanged:function(t){var e=t.value;switch(t.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this.callBase(t);break;default:this.callBase(t)}}});(0,kt.Z)("dxMultiView",UE);const $V=UE;var YE="dx-badge",KV=dc.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(t){if(this._$element.children("."+YE).remove(),t){var e=(0,C.Z)("<div>").addClass("dx-tabs-item-badge").addClass(YE).text(t);this._$element.append(e)}}});const GV=KV;var qE="dx-tabs-expanded";function jE(t){return t.scrollWidth-t.clientWidth}var JE="dx-tabs-stretched",eI="dx-tabs-nav-buttons",tI="dx-overflow-hidden",rI="chevronnext",nI="chevronprev",Bb=W0.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(t){return t?t.badge:void 0},_itemAttributes:{role:"tab"}})},_defaultOptionsRules:function(){var t=(0,_i.Vk)();return this.callBase().concat([{device:function(){return"desktop"!==_t.Z.real().deviceType},options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_i.x2)(t)},options:{useInkRipple:!0,selectOnFocus:!1}}])},_init:function(){this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new fc.c(function(t,e){(0,v.PO)(e)?this._prepareDefaultItemTemplate(e,t):t.text(String(e));var i=(0,ol.H)(e.icon);i&&i.prependTo(t),t.wrapInner((0,C.Z)("<span>").addClass("dx-tab-text"))}.bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(t,e){var{itemData:i,container:r,index:n}=e;return this._deferredTemplates[n]=new Y.BH,t.render({model:i,container:r,index:n,onRendered:()=>this._deferredTemplates[n].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(tI)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){Y.gx.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling:function(){var t=[JE,qE,tI];if(this.$element().removeClass(t.join(" ")),this.option("scrollingEnabled")&&this._isItemsWidthExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var i=jE((0,C.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:i})}this._updateNavButtonsVisibility(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsWidthExceeded()||(this._cleanScrolling(),this._needStretchItems()&&!this._isItemsWidthExceeded()&&this.$element().addClass(JE),this.$element().removeClass(eI).addClass(qE))},_isItemsWidthExceeded:function(){return this._getSummaryItemsWidth(this._getVisibleItems(),!0)-1>(0,Q.dz)(this.$element())},_needStretchItems:function(){var t=this._getVisibleItems(),e=(0,Q.dz)(this.$element()),i=[];return(0,U.S6)(t,(n,a)=>{i.push((0,Q.Y_)(a,!0))}),Math.max.apply(null,i)>=e/t.length},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=(0,O0.sY)()},_toggleActiveState:function(t,e,i){if(this.callBase.apply(this,arguments),this._inkRipple){var r={element:t,event:i};e?this._inkRipple.showWave(r):this._inkRipple.hideWave(r)}},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,C.Z)("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_renderScrollable:function(){var t=this.$element().wrapInner((0,C.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(t,rs.Z,{direction:"horizontal",showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsVisibility()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(t){if(this._scrollable){var e=this._editStrategy.getItemElement(t);this._scrollable.scrollToElement(e)}},_renderNavButtons:function(){if(this.$element().toggleClass(eI,this.option("showNavButtons")),this.option("showNavButtons")){var t=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,t?rI:nI);var e=this._leftButton.$element();e.addClass("dx-tabs-nav-button-left"),this.$element().prepend(e),this._rightButton=this._createNavButton(30,t?nI:rI);var i=this._rightButton.$element();i.addClass("dx-tabs-nav-button-right"),this.$element().append(i)}},_updateNavButtonsVisibility:function(){var t=this.getScrollable();this._leftButton&&this._leftButton.option("disabled",function XE(t,e){return Math.round(t)<=e}(t.scrollLeft(),1)),this._rightButton&&this._rightButton.option("disabled",function QE(t,e,i){return Math.round(jE(t)-e)<=i}((0,C.Z)(t.container()).get(0),t.scrollLeft(),1))},_updateScrollPosition:function(t,e){this._scrollable.update(),this._scrollable.scrollBy(t/e)},_createNavButton:function(t,e){var i=this,r=i._createAction(function(){i._holdInterval=setInterval(function(){i._updateScrollPosition(t,5)},5)}),n=(0,be.V4)(Gd.Z.name,"dxNavButton"),a=(0,be.V4)(qt.Z.up,"dxNavButton"),s=(0,be.V4)(qt.Z.out,"dxNavButton"),o=this._createComponent((0,C.Z)("<div>").addClass("dx-tabs-nav-button"),Er.Z,{focusStateEnabled:!1,icon:e,onClick:function(){i._updateScrollPosition(t,1)},integrationOptions:{}}),d=o.$element();return Z.Z.on(d,n,{timeout:300},function(u){r({event:u})}.bind(this)),Z.Z.on(d,a,function(){i._clearInterval()}),Z.Z.on(d,s,function(){i._clearInterval()}),o},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(t){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(t[0]),{left:1,right:1})},_visibilityChanged:function(t){t&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_optionChanged:function(t){switch(t.name){case"useInkRipple":case"scrollingEnabled":case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(t.name,t.value);break;case"width":this.callBase(t),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(t);break;default:this.callBase(t)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Bb.ItemClass=GV,(0,kt.Z)("dxTabs",Bb);const sN=Bb;var kb=$V.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!ma.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this.setAria("role","tabpanel")},_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new fc.c(function(t,e){if((0,v.PO)(e)){var i=(0,ol.H)(e.icon);i&&t.append(i),(0,v.$K)(e.title)&&!(0,v.PO)(e.title)&&t.append(tt.Z.createTextNode(e.title))}else(0,v.$K)(e)&&t.text(String(e));t.wrapInner((0,C.Z)("<span>").addClass("dx-tab-text"))},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderContent:function(){var t=this;this.callBase(),this.option("templatesRenderAsynchronously")&&(this._resizeEventTimer=setTimeout(function(){t._updateLayout()},0))},_renderLayout:function(){if(this._tabs)this._updateLayout();else{var t=this.$element();this._$tabContainer=(0,C.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(t);var e=(0,C.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,sN,this._tabConfig()),this._$container=(0,C.Z)("<div>").addClass("dx-tabpanel-container").appendTo(t),this._$container.append(this._$wrapper),this._updateLayout()}},_updateLayout:function(){if((0,qe.Ym)()){var t=(0,Q.zp)(this._$tabContainer);this._$container.css({marginTop:-t,paddingTop:t})}},_refreshActiveDescendant:function(){if(this._tabs){var t=this._tabs,e=t.itemElements(),i=(0,C.Z)(e[t.option("selectedIndex")]),r=this.getFocusedItemId();this.setAria("controls",void 0,(0,C.Z)(e)),this.setAria("controls",r,i)}},_tabConfig:function(){return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(t){this.option("selectedIndex",t.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(t){if("focusedElement"===t.name)if(t.value){var e=(0,C.Z)(t.value),i=this._itemElements().eq(e.index());this.option("focusedElement",(0,gt.u)(i))}else this.option("focusedElement",t.value)}.bind(this),onFocusIn:function(t){this._focusInHandler(t.event)}.bind(this),onFocusOut:function(t){this._isFocusOutHandlerExecuting||this._focusOutHandler(t.event)}.bind(this)}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_updateFocusState:function(t,e){this.callBase(t,e),t.target===this._tabs._focusTarget().get(0)&&this._toggleFocusClass(e,this._focusTarget())},_focusOutHandler:function(t){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(t),this._isFocusOutHandlerExecuting=!1},_setTabsOption:function(t,e){this._tabs&&this._tabs.option(t,e)},_visibilityChanged:function(t){t&&(this._tabs._dimensionChanged(),this._updateLayout())},registerKeyHandler:function(t,e){this.callBase(t,e),this._tabs&&this._tabs.registerKeyHandler(t,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_optionChanged:function(t){var e=t.name,i=t.value,r=t.fullName;switch(e){case"dataSource":default:this.callBase(t);break;case"items":this._setTabsOption(e,this.option(e)),this._updateLayout(),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(t);break;case"width":this.callBase(t),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(r,i),this.callBase(t),!0===this.option("focusStateEnabled")){var n=this.option("selectedIndex"),a=this._itemElements().eq(n);this.option("focusedElement",(0,gt.u)(a))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(r,i),this.callBase(t);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(r,i);break;case"focusedElement":var s=i&&(0,C.Z)(i).index(),o=i&&this._tabs._itemElements().eq(s);this._setTabsOption("focusedElement",(0,gt.u)(o)),this.callBase(t);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate()}},_clean:function(){clearTimeout(this._resizeEventTimer),this.callBase()}});kb.ItemClass=class oN extends dc.Z{_renderWatchers(){return this._startWatcher("badge",ne.ZT),super._renderWatchers()}},(0,kt.Z)("dxTabPanel",kb);const cN=kb;class gl{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){en.Z.abstract()}}var Mb=(t,e)=>"".concat(e?"tabs":"items","[").concat(t,"]"),oI=(t,e)=>(0,v.$K)(t)&&(0,v.$K)(e)?"".concat(t,".").concat(e):t||e,Lb=t=>t?t.replace(/\s/g,""):void 0,Bc=(t,e)=>"".concat(t,".").concat(e),lI=t=>{var e=t.split(".");return e[e.length-1].replace(/\[\d+]/,"")},dI=t=>t.indexOf("tabs")>-1,uI=(t,e,i)=>{var r=t.indexOf(e);if(r>-1)return Mb(r,i);for(var n=0;n<t.length;n++){var a=t[n],s=a.tabs||a.items;if(s){var o=uI(s,e,a.tabs);if(o)return oI(Mb(n,i),o)}}};class gN extends gl{tryExecute(){var{value:e}=this._options,i=this.findInstance();return!!i&&(i.option(e),!0)}}class hI extends gl{tryExecute(){var e=this.findInstance();if(e){var{optionName:i,item:r,value:n}=this._options,a=this._itemsRunTimeInfo.findItemIndexByItem(r);if(a>=0)return e.option(Bc("items[".concat(a,"]"),i),n),!0}return!1}}class mN extends gl{tryExecute(){return!1}}class vN extends gl{tryExecute(){var e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class CN extends gl{tryExecute(){var e=this.findInstance();if(e){var{value:i}=this._options;return e.option("dataSource",i),!0}return!1}}class bN extends gl{tryExecute(){var{item:e}=this._options,i=this.findInstance(),r=i&&(0,Ed.aT)(i.$element()[0],"dxValidator");if(r&&e){var n=o=>"required"===o.type,a=(r.option("validationRules")||[]).some(n),s=(e.validationRules||[]).some(n);if(!a&&!s||a&&s)return r.option("validationRules",e.validationRules),!0}return!1}}class yN extends gl{tryExecute(){var e=this.findItemContainer(),{previousValue:i,value:r}=this._options;return!!e&&(e.removeClass(i).addClass(r),!0)}}var cI="dx-responsivebox",pI=cI+"-screen-",fI="dxBoxItemData",_I=Yd.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",qe.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return"dx-box-item"},_itemDataKey:function(){return fI},_initMarkup:function(){this.callBase(),this.$element().addClass(cI)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(t){var e=this._findItemElementByItem(t);e.length&&(this._refreshItem(e,t),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var t=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(pI+t),this.option("currentScreenFactor",t)},_removeScreenSizeClass:function(){var t=this.option("currentScreenFactor");t&&this.$element().removeClass(pI+t)},_prepareGrid:function(){var t=this._grid=[];this._prepareRowsAndCols(),(0,U.S6)(this._rows,function(){var e=[];t.push(e),(0,U.S6)(this._cols,function(){e.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var t=this.option("rows"),e=this._screenItems.length;if(t.length){for(var i=this._filterByScreen(t),r=[],n=0;n<e;n++){var a=this._defaultSizeConfig();n<i.length&&(0,v.$K)(i[n].shrink)&&(a.shrink=i[n].shrink),r.push(a)}return r}return this._defaultSizeConfig(e)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(t,e){return t.location.row-e.location.row||t.location.col-e.location.col}),(0,U.S6)(this._screenItems,function(t,e){(0,O.l)(e.location,{row:t,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(t){return(0,U.UI)(this._filterByScreen(t),function(e){return(0,O.l)(this._defaultSizeConfig(),e)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(t){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var i=[],r=0;r<t;r++)i.push(e);return i},_filterByScreen:function(t){var e=this._screenRegExp();return(0,ne.h3)(t,function(i){return!i.screen||e.test(i.screen)})},_screenRegExp:function(){var t=this._getCurrentScreen();return new RegExp("(^|\\s)"+t+"($|\\s)","i")},_getCurrentScreen:function(){var t=this._screenWidth();return this.option("screenByWidth")(t)},_screenWidth:function(){return(0,qe.Ym)()?(0,Q.dz)((0,qe.Jj)()):1920},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){(0,U.S6)(this._screenItems,function(t,e){var i=e.location||{},a=this._grid[i.row];this._occupyCells(a&&a[i.col],e)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce((t,e)=>{var i=e.location||{};return i=(0,v.PO)(i)?[i]:i,this._filterByScreen(i).forEach(r=>{t.push({item:e,location:(0,O.l)({rowspan:1,colspan:1},r)})}),t},[])},_occupyCells:function(t,e){!t||this._isItemCellOccupied(t,e)||((0,O.l)(t,e),this._markSpanningCell(t))},_isItemCellOccupied:function(t,e){if(!(0,v.Qr)(t.item))return!0;var i=!1;return this._loopOverSpanning(e.location,function(r){i=i||!(0,v.Qr)(r.item)}),i},_loopOverSpanning:function(t,e){var i=t.row+t.rowspan-1,r=t.col+t.colspan-1,n=Math.min(i,this._rows.length-1),a=Math.min(r,this._cols.length-1);t.rowspan-=i-n,t.colspan-=r-a;for(var s=t.row;s<=n;s++)for(var o=t.col;o<=a;o++)(s!==t.row||o!==t.col)&&e(this._grid[s][o])},_markSpanningCell:function(t){this._loopOverSpanning(t.location,function(e){(0,O.l)(e,{item:t.item,spanningCell:t})})},_linkNodeToItem:function(){(0,U.S6)(this._itemElements(),function(t,e){var i=(0,C.Z)(e),r=i.data(fI);r.box||(r.node=i.children())})},_layoutItems:function(){var t=this._grid.length,e=t&&this._grid[0].length;if(t||e){var i=this._layoutBlock({direction:"col",row:{start:0,end:t-1},col:{start:0,end:e-1}}),r=this._prepareBoxConfig(i.box||{direction:"row",items:[(0,O.l)(i,{ratio:1})]});(0,O.l)(r,this._rootBoxConfig(r.items)),this._$root=(0,C.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,Cg,r)}},_rootBoxConfig:function(t){return{width:"100%",height:"100%",items:(0,U.S6)(t,function(i,r){this._needApplyAutoBaseSize(r)&&(0,O.l)(r,{baseSize:"auto"})}.bind(this)),itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(t){return!(t.baseSize||t.minSize&&"auto"!==t.minSize||t.maxSize&&"auto"!==t.maxSize)},_prepareBoxConfig:function(t){return(0,O.l)(t||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(t){return this._isSingleItem(t)?this._itemByCell(t.row.start,t.col.start):this._layoutDirection(t)},_isSingleItem:function(t){var e=this._grid[t.row.start][t.col.start].location;return t.row.end-t.row.start==e.rowspan-1&&t.col.end-t.col.start==e.colspan-1},_itemByCell:function(t,e){var i=this._grid[t][e];return i.spanningCell?null:i.item},_layoutDirection:function(t){for(var n,e=[],i=t.direction,r=this._crossDirection(i);n=this._nextBlock(t);){if(this._isBlockIndivisible(t.prevBlockOptions,n))throw Nt.Z.Error("E1025");var a=this._layoutBlock({direction:r,row:n.row,col:n.col,prevBlockOptions:t});a&&((0,O.l)(a,this._blockSize(n,r)),e.push(a)),t[r].start=n[r].end+1}return{box:this._prepareBoxConfig({direction:i,items:e})}},_isBlockIndivisible:function(t,e){return t&&t.col.start===e.col.start&&t.col.end===e.col.end&&t.row.start===e.row.start&&t.row.end===e.row.end},_crossDirection:function(t){return"col"===t?"row":"col"},_nextBlock:function(t){var e=t.direction,i=this._crossDirection(e),r=t[e].start,n=t[e].end,a=t[i].start;if(a>t[i].end)return null;for(var s=1,o=a;o<a+s;o++){for(var d=1,u=r;u<=n;u++){var c=this._cellByDirection(e,u,o);d=Math.max(d,c.location[i+"span"])}var f=o+d,g=a+s;f>g&&(s+=f-g)}var m={};return m[e]={start:r,end:n},m[i]={start:a,end:a+s-1},m},_cellByDirection:function(t,e,i){return"col"===t?this._grid[i][e]:this._grid[e][i]},_blockSize:function(t,e){for(var i="row"===e?"auto":0,r="row"===e?this._rows:this._cols,n=(0,O.l)(this._createDefaultSizeConfig(),{ratio:0}),a=t[e].start;a<=t[e].end;a++){var s=r[a];n.ratio+=s.ratio,n.baseSize+=s.baseSize,n.minSize+=s.minSize,n.maxSize+=s.maxSize,(0,v.$K)(s.shrink)&&(n.shrink=s.shrink)}return n.minSize=n.minSize?n.minSize:i,n.maxSize=n.maxSize?n.maxSize:"auto",this._isSingleColumnScreen()&&(n.baseSize="auto"),n},_update:function(t){var e=this._$root;this._renderItems(),e&&(t?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot:function(t){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(t)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&(0,U.S6)(this._assistantRoots,function(t,e){(0,C.Z)(e).remove()})},_clearItemNodeTemplates:function(){(0,U.S6)(this.option("items"),function(){delete this.node})},_attachClickEvent:ne.ZT,_optionChanged:function(t){switch(t.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(t),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(t);break;case"currentScreenFactor":break;default:this.callBase(t)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});(0,kt.Z)("dxResponsiveBox",_I);const IN=_I;var Pb="dx-form-group",gI="dx-col-",mI="dx-field-item",vI="dx-layout-manager-one-col",CI="dx-field-item-label-content",bI="dx-field-item-label",Fb="dx-field-item-content",yI="dx-root-simple-item",wI="dx-field-item-tab",xI="dx-group-colcount-",SI="group-col-count",Vb="simple",FN=en.Z.inherit({ctor(t,e){this.editor=t,this.validator=e,this.validationRequestsCallbacks=[];var i=r=>{this.validationRequestsCallbacks.forEach(n=>n(r))};t.validationRequest.add(i),t.on("disposing",function(){t.validationRequest.remove(i)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(t){this.editor.option({validationErrors:t.brokenRules,validationStatus:t.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}});const VN=FN;var Nb="pending",II=tg.Z.inherit({_initOptions:function(t){this.callBase.apply(this,arguments),this.option(wi.Z.initValidationOptions(t))},_getDefaultOptions(){return(0,O.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,fi.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var t=this._findGroup();this._groupWasInit||this.on("disposing",function(e){wi.Z.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==t)&&(wi.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=t,wi.Z.registerValidatorInGroup(t,this))},_setOptionsByReference(){this.callBase(),(0,O.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var t=this.$element()[0];return(0,Ed.aT)(t,"dx-validation-target")},_initAdapter(){var t=this._getEditor(),e=this.option("adapter");if(!e){if(t)return(e=new VN(t,this)).validationRequestsCallbacks.push(r=>{this._validationInfo.skipValidation||this.validate(r)}),void this.option("adapter",e);throw Nt.Z.Error("E0120")}var i=e.validationRequestsCallbacks;i&&i.push(r=>{this.validate(r)})},_toggleRTLDirection(t){var e,i,r,n=null!==(e=null===(i=this.option("adapter"))||void 0===i||null===(r=i.editor)||void 0===r?void 0:r.option("rtlEnabled"))&&void 0!==e?e:t;this.callBase(n)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var t=this._getEditor();if(t){var i=(this.option("validationRules")||[]).some(r=>{var{type:n}=r;return"required"===n})||null;t.isInitialized()&&t.setAria("required",i),t.option("_onMarkupRendered",()=>{t.setAria("required",i)})}},_visibilityChanged(t){t&&this._initGroupRegistration()},_optionChanged(t){switch(t.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(wi.Z.synchronizeValidationOptions(t,this.option()));break;default:this.callBase(t)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,U.UI)(this.option("validationRules"),(t,e)=>(0,O.l)({},t,{validator:this,index:e}))),this._validationRules},_findGroup(){var t=this.$element();return this.option("validationGroup")||wi.Z.findGroup(t,this._modelByElement(t))},_resetValidationRules(){delete this._validationRules},validate(t){var d,e=this.option("adapter"),i=this.option("name"),r=e.bypass&&e.bypass(),n=t&&void 0!==t.value?t.value:e.getValue(),a=e.getCurrentValidationError&&e.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;return o&&o.status===Nb&&o.value===n?(0,O.l)({},o):(r?d={isValid:!0,status:"valid"}:a&&a.editorSpecific?(a.validator=this,d={isValid:!1,status:"invalid",brokenRule:a,brokenRules:[a]}):d=wi.Z.validate(n,s,i),d.id=(new Hr.Z).toString(),this._applyValidationResult(d,e),d.complete&&d.complete.then(u=>{u.id===this._validationInfo.result.id&&this._applyValidationResult(u,e)}),(0,O.l)({},this._validationInfo.result))},reset(){var t=this.option("adapter");this._validationInfo.skipValidation=!0,t.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},t)},_updateValidationResult(t){if(this._validationInfo.result&&this._validationInfo.result.id===t.id)for(var i in t)"id"!==i&&"complete"!==i&&(this._validationInfo.result[i]=t[i]);else this._validationInfo.result=(0,O.l)({},t,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(t,e){var i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(t.validator=this,this._updateValidationResult(t),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===Nb)return this._validationInfo.deferred||(this._validationInfo.deferred=new Y.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==Nb&&(i(t),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(t),this._validationInfo.deferred=null))},focus(){var t=this.option("adapter");t&&t.focus&&t.focus()},_useTemplates:function(){return!1}});(0,kt.Z)("dxValidator",II);const zb=II;var HN=["dxTagBox","dxRangeSlider"],ZN=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function TI(t,e){var{showRequiredMark:i,requiredMark:r,showOptionalMark:n,optionalMark:a}=t;return{showRequiredMark:i&&e,requiredMark:r,showOptionalMark:n&&!e,optionalMark:a}}var YN="dx-field-item-required-mark",DI="dx-field-item-label-location-",qN="dx-field-item-optional-mark",jN="dx-field-item-label-text";function ez(t){for(var e=0,i=t.children.length,r=0;r<i;r++)e+=t.children[r].offsetWidth;return e}var tz="dx-flex-layout",iz="dx-field-item-optional",rz="dx-field-item-required",AI="dx-field-item-content-wrapper",nz="dx-field-item-content-location-",az="dx-field-item-label-align",sz="dx-field-item-help-text",oz="dx-label-v-align",lz="dx-label-h-align",dz="dx-toggle-controls-paddings",uz="dx-template-wrapper",Hb="dx-validation-target",hz="dx-invalid";function cz(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:r,createComponentCallback:n,labelOptions:a,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:d,formLabelLocation:u,item:c,editorOptions:f,isSimpleItem:g,isRequired:m,template:y,helpID:w,labelID:I,name:P,helpText:$,requiredMessageTemplate:se,validationGroup:fe}=t,Se=(0,C.Z)("<div>").addClass(i.join(" ")).appendTo(e);Se.addClass(m?rz:iz),g&&Se.addClass(tz),g&&s&&Se.addClass(az);var Fe=(0,C.Z)("<div>");Fe.data("dx-form-item",c),Fe.addClass(Fb).addClass(nz+{right:"left",left:"right",top:"bottom"}[u]);var mi,$e=null;if(d&&(a.labelTemplate&&(a.labelTemplateData=BI(c,f,r)),$e=function XN(t){var{text:e,id:i,location:r,alignment:n,labelID:a=null,markOptions:s={},labelTemplate:o,labelTemplateData:d,onLabelTemplateRendered:u}=t;if((!(0,v.$K)(e)||e.length<=0)&&!(0,v.$K)(o))return null;var c=(0,C.Z)("<label>").addClass(bI+" "+DI+r).attr("for",i).attr("id",a).css("textAlign",n),f=(0,C.Z)("<span>").addClass(CI),g=(0,C.Z)("<span>").addClass(jN).text(e);return o&&(g=(0,C.Z)("<div>").addClass("dx-field-item-custom-label-content"),d.text=e,o.render({container:(0,gt.u)(g),model:d,onRendered(){u?.()}})),c.append(f.append(g,function QN(t){var e=function WN(t){var{showRequiredMark:e,requiredMark:i,showOptionalMark:r,optionalMark:n}=t;return e||r?String.fromCharCode(160)+(e?i:n):""}(t);return""===e?null:(0,C.Z)("<span>").addClass(t.showRequiredMark?YN:qN).text(e)}(s)))}(a)),$e){var{editorType:We}=c;Se.append($e),("top"===o||"left"===o)&&Se.append(Fe),"right"===o&&Se.prepend(Fe),Se.addClass("top"===o?oz:lz),("dxCheckBox"===We||"dxSwitch"===We)&&Z.Z.on($e,ii.u,function(){Z.Z.trigger(Fe.children(),ii.u)});var Ze=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(We),nt=a.alignment;!y&&Ze&&"top"===o&&("left"===nt||!nt)&&Fe.addClass(dz)}else Se.append(Fe);if(y)y.render({container:(0,gt.u)(Fe),model:BI(c,f,r),onRendered(){var Al=function pz(t){var e,i;return t?.data(Hb)||(null==t||null===(e=t.parent)||void 0===e||null===(i=e.call(t))||void 0===i?void 0:i.data(Hb))}(RI(Fe));OI(Al)}});else{var Oe=(0,C.Z)("<div>").appendTo(Fe);try{(mi=n(Oe,c.editorType,f)).setAria("describedby",w),I&&mi.setAria("labelledby",I),mi.setAria("required",m)}catch(_s){Nt.Z.log("E1035",_s.message)}}var rt=RI(Fe),et=rt&&rt.data(Hb);if(et){var ri,st=c.label&&c.label.text,Je=st?null:P,Ot=st?c.label.text:Je&&(0,Cr.GK)(Je);if(g)if(c.validationRules)ri=c.validationRules;else{var Dl=(0,tn.WU)(se,Ot||"");ri=c.isRequired?[{type:"required",message:Dl}]:null}Array.isArray(ri)&&ri.length&&n(rt,zb,{validationRules:ri,validationGroup:fe,dataGetter:function(){return{formItem:c}}}),OI(et)}return $&&g&&Fe.parent().append((0,C.Z)("<div>").addClass(AI).append(Fe).append((0,C.Z)("<div>").addClass(sz).attr("id",w).text($))),{$fieldEditorContainer:Fe,$rootElement:Se,widgetInstance:mi}}function RI(t){var e=t.children().first();return e.hasClass(uz)?e.children().first():e}function OI(t){if(t&&(0,_i.x2)()){var e=".".concat(AI),i=r=>{var{element:n,component:a}=r,{isValid:s,validationMessageMode:o}=a.option();(0,C.Z)(n).parents(e).toggleClass(hz,!1===s&&(a._isFocused()||"always"===o))};t.on("optionChanged",r=>{"isValid"===r.name&&i(r)}),t.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function BI(t,e,i){return{dataField:t.dataField,editorType:t.editorType,editorOptions:e,component:i,name:t.name}}var fz="dx-field-button-item";var vz="dx-field-empty-item";function kI(t){var{$parent:e,rootElementCssClassList:i}=t;return(0,C.Z)("<div>").addClass(vz).html("&nbsp;").addClass(i.join(" ")).appendTo(e)}var Sz=gn.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:le.Z.format("dxForm-optionalMark"),requiredMessage:le.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,O.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var t=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new WE,this._updateReferencedOptions(t),this._initDataAndItems(t)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(t){this._syncDataWithItems(),this._updateItems(t)},_syncDataWithItems:function(){var t=this.option("layoutData"),e=this.option("items");(0,v.$K)(e)&&e.forEach(i=>{var r;i.dataField&&void 0===this._getDataByField(i.dataField)&&(i.editorOptions&&(r=i.editorOptions.value),((0,v.$K)(r)||i.dataField in t)&&this._updateFieldValue(i.dataField,r))})},_getDataByField:function(t){return t?this.option("layoutData."+t):null},_isCheckboxUndefinedStateEnabled:function(t){var{allowIndeterminateState:e,editorType:i,dataField:r}=t;if(!0===e&&"dxCheckBox"===i){var n=["layoutData",...r.split(".")],a=n.pop(),s=this.option(n.join("."));return s&&a in s}return!1},_updateFieldValue:function(t,e){var i=this.option("layoutData"),r=e;!_n.Z.isWrapped(i[t])&&(0,v.$K)(t)?this.option("layoutData."+t,r):_n.Z.isWritableWrapped(i[t])&&(r=(0,v.mf)(r)?r():r,i[t](r)),this._triggerOnFieldDataChanged({dataField:t,value:r})},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_updateItems:function(t){var e=this,i=this.option("items"),r=(0,v.$K)(i),n=e.option("customizeItem"),a=r?i:this._generateItemsByData(t);if((0,v.$K)(a)){var s=[];(0,U.S6)(a,function(o,d){e._isAcceptableItem(d)&&(d=e._processItem(d),n&&n(d),(0,v.Kn)(d)&&!1!==_n.Z.unwrap(d.visible)&&s.push(d))}),(!e._itemWatchers.length||!r)&&e._updateItemWatchers(a),this._setItems(s),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(t){t()}),this._itemWatchers=[]},_updateItemWatchers:function(t){var e=this,i=e._getWatch();t.forEach(function(r){(0,v.Kn)(r)&&(0,v.$K)(r.visible)&&(0,v.mf)(i)&&e._itemWatchers.push(i(function(){return _n.Z.unwrap(r.visible)},function(){e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(t){var e=[];return(0,v.$K)(t)&&(0,U.S6)(t,function(i){e.push({dataField:i})}),e},_isAcceptableItem:function(t){var i=this._getDataByField(t.dataField||t);return!((0,v.mf)(i)&&!_n.Z.isWrapped(i))},_processItem:function(t){if("string"==typeof t&&(t={dataField:t}),"object"==typeof t&&!t.itemType&&(t.itemType=Vb),!(0,v.$K)(t.editorType)&&(0,v.$K)(t.dataField)){var e=this._getDataByField(t.dataField);t.editorType=(0,v.$K)(e)?this._getEditorTypeByDataType((0,v.dt)(e)):"dxTextBox"}var i;return"dxCheckBox"===t.editorType&&(t.allowIndeterminateState=null===(i=t.allowIndeterminateState)||void 0===i||i),t},_getEditorTypeByDataType:function(t){switch(t){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,At.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(t,e){var i=t.visibleIndex,r=e.visibleIndex;return i>r?1:i<r?-1:0})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var t=[];if(this._items&&this._items.length){var e=this._getColCount(),i=(0,C.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var r=this._generateLayoutItems();this._responsiveBox=this._createComponent(i,IN,this._getResponsiveBoxConfig(r,e,t)),(0,qe.Ym)()||this._renderTemplates(t)}},_itemStateChangedHandler:function(t){this._refresh()},_renderTemplates:function(t){var e=this,i=0;t.forEach(r=>{var n,{item:a}=r;null!=a&&null!==(n=a.label)&&void 0!==n&&n.template&&i++}),(0,U.S6)(t,function(r,n){switch(n.itemType){case"empty":kI(n);break;case"button":e._renderButtonItem(n);break;default:e._renderFieldItem(n,i)}})},_getResponsiveBoxConfig:function(t,e,i){var r=this,n=r.option("colCountByScreen"),a=n&&n.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var s=r.option("onLayoutChanged"),o=r.isSingleColumnMode();s&&(r.$element().toggleClass(vI,o),s(o))},onContentReady:function(s){(0,qe.Ym)()&&r._renderTemplates(i),r.option("onLayoutChanged")&&r.$element().toggleClass(vI,r.isSingleColumnMode(s.component))},itemTemplate:function(s,o,d){if(s.location){var u=(0,C.Z)(d),f=r._items[s.location.col+s.location.row*e];if(f){var g=[f.cssClass];u.toggleClass("dx-single-column-item-content",r.isSingleColumnMode(this)),0===s.location.row&&g.push("dx-first-row"),0===s.location.col&&g.push("dx-first-col"),f.itemType===Vb&&r.option("isRoot")&&u.addClass(yI);var m=s.location.col===e-1||s.location.col+s.location.colspan===e,y=r._getRowsCount(),w=s.location.row===y-1;m&&g.push("dx-last-col"),w&&g.push("dx-last-row"),"empty"!==f.itemType&&(g.push(mI),g.push(r.option("cssItemClass")),(0,v.$K)(f.col)&&g.push("dx-col-"+f.col)),i.push({itemType:f.itemType,item:f,$parent:u,rootElementCssClassList:g})}}},cols:r._generateRatio(e),rows:r._generateRatio(r._getRowsCount(),!0),dataSource:t,screenByWidth:r.option("screenByWidth"),singleColumnScreen:!a&&"xs"}},_getColCount:function(){var t=this.option("colCount"),e=this.option("colCountByScreen");if(e){var i=this.option("form").getTargetScreenFactor();i||(i=(0,qe.Ym)()?(0,qe.Wf)(this.option("screenByWidth")):"lg"),t=e[i]||t}if("auto"===t){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=t=this._getMaxColCount()}return t<1?1:t},_getMaxColCount:function(){if(!(0,qe.Ym)())return 1;var t=this.option("minColWidth"),e=(0,Q.dz)(this.$element()),i=this._items.length,r=Math.floor(e/t)||1;return i<r?i:r},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(t){var i,r,a,s,e=this._items.slice(0),n=[];for(s=0;s<e.length;s++)if(n.push(i=e[s]),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(n.length-1,t)),i.colSpan>1&&i.col+i.colSpan<=t){for(r=[],a=0;a<i.colSpan-1;a++)r.push({merged:!0});n=n.concat(r)}else delete i.colSpan;this._setItems(n)},_getColByIndex:function(t,e){return t%e},_setItems:function(t){this._items=t,this._cashedColCount=null},_generateLayoutItems:function(){var r,n,t=this._items,e=this._getColCount(),i=[];for(n=0;n<t.length;n++)if(!(r=t[n]).merged){var a={location:{row:parseInt(n/e),col:this._getColByIndex(n,e)}};(0,v.$K)(r.disabled)&&(a.disabled=r.disabled),(0,v.$K)(r.visible)&&(a.visible=r.visible),(0,v.$K)(r.colSpan)&&(a.location.colspan=r.colSpan),(0,v.$K)(r.rowSpan)&&(a.location.rowspan=r.rowSpan),i.push(a)}return i},_renderEmptyItem:function(t){kI({$container:t})},_renderButtonItem:function(t){var{item:e,$parent:i,rootElementCssClassList:r}=t,{$rootElement:n,buttonInstance:a}=function _z(t){var{item:e,$parent:i,rootElementCssClassList:r,validationGroup:n,createComponentCallback:a}=t,s=(0,C.Z)("<div>").appendTo(i).addClass(r.join(" ")).addClass(fz).css("textAlign",function gz(t){return(0,v.$K)(t)?t:"right"}(e.horizontalAlignment));return i.css("justifyContent",function mz(t){switch(t){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:s,buttonInstance:a((0,C.Z)("<div>").appendTo(s),"dxButton",(0,O.l)({validationGroup:n},e.buttonOptions))}}({item:e,$parent:i,rootElementCssClassList:r,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:a,guid:e.guid,$itemContainer:n})},_renderFieldItem:function(t,e){var i,r,{item:n,$parent:a,rootElementCssClassList:s}=t,o=this._getDataByField(n.dataField),d=!1;if(void 0===o){var{allowIndeterminateState:u,editorType:c,dataField:f}=n;d=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:u,editorType:c,dataField:f})}var g=n.dataField||n.name,m=this._getFormOrThis(),{$fieldEditorContainer:y,widgetInstance:w,$rootElement:I}=cz(function $N(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:r,createComponentCallback:n,item:a,template:s,labelTemplate:o,name:d,formLabelLocation:u,requiredMessageTemplate:c,validationGroup:f,editorValue:g,canAssignUndefinedValueToEditor:m,editorValidationBoundary:y,editorStylingMode:w,showColonAfterLabel:I,managerLabelLocation:P,itemId:$,managerMarkOptions:se,labelMode:fe,onLabelTemplateRendered:Se}=t,Fe=(0,v.$K)(a.isRequired)?a.isRequired:!!function GN(t){var e;return t&&t.length&&(0,U.S6)(t,function(i,r){if("required"===r.type)return e=!0,!1}),e}(a.validationRules),$e=a.itemType===Vb,We=a.helpText?"dx-"+new Hr.Z:null,Ze=function UN(t){var{item:e,id:i,isRequired:r,managerMarkOptions:n,showColonAfterLabel:a,labelLocation:s,labelTemplate:o,formLabelMode:d,onLabelTemplateRendered:u}=t,c=ZN.includes(e.editorType),f=(0,O.l)({showColon:a,location:s,id:i,visible:"outside"===d||c&&"hidden"!==d,isRequired:r},e?e.label:{},{markOptions:TI(n,r),labelTemplate:o,onLabelTemplateRendered:u});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor"].includes(e.editorType)&&(f.labelID="dx-label-".concat(new Hr.Z)),!f.text&&e.dataField&&(f.text=(0,Cr.GK)(e.dataField)),f.text&&(f.textWithoutColon=f.text,f.text+=f.showColon?":":""),f}({item:a,id:$,isRequired:Fe,managerMarkOptions:se,showColonAfterLabel:I,labelLocation:P,formLabelMode:fe,labelTemplate:o,onLabelTemplateRendered:Se}),nt=Ze.visible&&(Ze.text||Ze.labelTemplate&&$e),{location:mt,labelID:jt}=Ze,$t="top"!==mt&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(a.editorType),mi=function KN(t){var{editorType:e,defaultEditorName:i,editorValue:r,canAssignUndefinedValueToEditor:n,externalEditorOptions:a,editorInputId:s,editorValidationBoundary:o,editorStylingMode:d,formLabelMode:u,labelText:c,labelMark:f}=t,g={};(void 0!==r||n)&&(g.value=r),-1!==HN.indexOf(e)&&(g.value=g.value||[]);var m=a?.labelMode;(0,v.$K)(m)||(m="outside"===u?"hidden":u);var w=(0,O.l)(!0,g,a,{inputAttr:{id:s},validationBoundary:o,stylingMode:a?.stylingMode||d,label:c,labelMode:m,labelMark:f});return a&&(w.dataSource&&(w.dataSource=a.dataSource),w.items&&(w.items=a.items)),i&&!w.name&&(w.name=i),w}({editorType:a.editorType,editorValue:g,defaultEditorName:a.dataField,canAssignUndefinedValueToEditor:m,externalEditorOptions:a.editorOptions,editorInputId:$,editorValidationBoundary:y,editorStylingMode:w,formLabelMode:fe,labelText:Ze.textWithoutColon,labelMark:Ze.markOptions.showRequiredMark?String.fromCharCode(160)+Ze.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:i,formOrLayoutManager:r,createComponentCallback:n,labelOptions:Ze,labelNeedBaselineAlign:$t,labelLocation:mt,needRenderLabel:nt,item:a,isSimpleItem:$e,isRequired:Fe,template:s,helpID:We,labelID:jt,name:d,helpText:!Ze.markOptions.showOptionalMark||Ze.visible||"hidden"===mi.labelMode||(0,v.$K)(a.helpText)?a.helpText:Ze.markOptions.optionalMark,formLabelLocation:u,requiredMessageTemplate:c,validationGroup:f,editorOptions:mi}}({$parent:a,rootElementCssClassList:s,item:n,name:g,editorValue:o,canAssignUndefinedValueToEditor:d,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:n.template?this._getTemplate(n.template):null,labelTemplate:null!==(i=n.label)&&void 0!==i&&i.template?this._getTemplate(n.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(g),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(m,e)&&m._alignLabels(this,this.isSingleColumnMode(m))}}));null===(r=this.option("onFieldItemRendered"))||void 0===r||r(),w&&n.dataField&&this._bindDataField(w,n.dataField,n.editorType,y),this._itemsRunTimeInfo.add({item:n,widgetInstance:w,guid:n.guid,$itemContainer:I})},_incTemplateRenderedCallCount(){var t;this._labelTemplateRenderedCallCount=(null!==(t=this._labelTemplateRenderedCallCount)&&void 0!==t?t:0)+1},_shouldAlignLabelsOnTemplateRendered(t,e){return t.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(t,e,i,r){var n=this._getFormOrThis();t.on("enterKey",function(a){n._createActionByOption("onEditorEnterKey")((0,O.l)(a,{dataField:e}))}),this._createWatcher(t,r,e),this.linkEditorToDataField(t,e,i)},_createWatcher:function(t,e,i){var r=this,n=r._getWatch();if((0,v.mf)(n)){var a=n(function(){return r._getDataByField(i)},function(){var s=r._getDataByField(i);if("dxTagBox"===t.NAME){var o=t.option("value");if(s!==o&&function(d,u){if(!Array.isArray(d)||!Array.isArray(u)||d.length!==u.length)return!1;for(var c=0;c<d.length;c++)if(d[c]!==u[c])return!1;return!0}(s,o))return}t.option("value",s)},{deep:!0,skipImmediate:!0});Z.Z.on(e,Uo.x,a)}},_getWatch:function(){if(!(0,v.$K)(this._watch)){var t=this.option("form");this._watch=t&&t.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(t,e,i){var r=this.option("readOnly"),n=Object.hasOwn(i,"readOnly"),a=this.callBase(t,e,(0,je.Z)({},i,{readOnly:n?i.readOnly:r})),s=!1;return a.on("optionChanged",o=>{"readOnly"===o.name&&!s&&(n=!0)}),this.on("optionChanged",function(o){"readOnly"===o.name&&!n&&(s=!0,a.option(o.name,o.value),s=!1)}),a},_generateRatio:function(t,e){var r,n,i=[];for(n=0;n<t;n++)r={ratio:1},e&&(r.baseSize="auto"),i.push(r);return i},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(t){var e=this.option("layoutData");(0,v.Kn)(e)&&Object.getOwnPropertyNames(e).forEach(i=>delete this._optionsByReference["layoutData."+i]),(0,v.Kn)(t)&&Object.getOwnPropertyNames(t).forEach(i=>this._optionsByReference["layoutData."+i]=!0)},_resetWidget(t){this._disableEditorValueChangedHandler=!0,t.reset(),this._disableEditorValueChangedHandler=!1,t.option("isValid",!0)},_optionChanged(t){if(0!==t.fullName.search("layoutData."))switch(t.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(t.value),this.option("items")?(0,v.Qr)(t.value)||this._itemsRunTimeInfo.each((e,i)=>{if((0,v.$K)(i.item)){var r=i.item.dataField;if(r&&(0,v.$K)(i.widgetInstance)){var a=(0,Pt.vb)(r)(t.value),{allowIndeterminateState:s,editorType:o}=i.item;void 0!==a||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:r})?i.widgetInstance.option("value",a):this._resetWidget(i.widgetInstance)}}}):(this._initDataAndItems(t.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(t.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(t),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(t)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(t,e){this.on("optionChanged",i=>{i.fullName==="layoutData.".concat(e)&&t._setOptionWithoutOptionChange("value",i.value)}),t.on("valueChanged",i=>{var r=(0,v.Kn)(i.value)||Array.isArray(i.value);!this._disableEditorValueChangedHandler&&(!r||i.value!==i.previousValue)&&this._updateFieldValue(e,i.value)})},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(t,e){var i=this;(0,v.Kn)(t)?(0,U.S6)(t,function(r,n){i._updateFieldValue(r,n)}):"string"==typeof t&&i._updateFieldValue(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},isSingleColumnMode:function(t){var e=this._responsiveBox||t;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,kt.Z)("dxLayoutManager",Sz);var Zb="dx-validationsummary",Ez=Zb+"-item",Iz=Zb+"-item-data",MI=Yd.Z.inherit({_getDefaultOptions(){return(0,O.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,O.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var t=this.$element(),e=this.option("validationGroup")||wi.Z.findGroup(t,this._modelByElement(t)),i=wi.Z.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){var t=wi.Z.getGroupConfig(this._validationGroup);t&&t.off("validated",this.groupSubscription)},_getOrderedItems(t,e){var i=[];return(0,U.S6)(t,function(r,n){var a=(0,ne.h3)(e,function(s){if(s.validator===n)return!0});a.length&&(i=i.concat(a))}),i},_groupValidationHandler(t){var e=this._getOrderedItems(t.validators,(0,U.UI)(t.brokenRules,function(i){return{text:i.message,validator:i.validator,index:i.index}}));this.validators=t.validators,(0,U.S6)(this.validators,(i,r)=>{if(r._validationSummary!==this){var n=this._itemValidationHandler.bind(this);r.on("validated",n),r.on("disposing",function(){r.off("validated",n),r._validationSummary=null,n=null}),r._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(t){for(var{isValid:e,validator:i,brokenRules:r}=t,n=this.option("items"),a=!1,s=0,o=function(){var u=n[s];if(u.validator===i){var c=(0,ne.h3)(r||[],function(f){return f.index===u.index})[0];if(e||!c)return n.splice(s,1),a=!0,"continue";c.message!==u.text&&(u.text=c.message,a=!0)}s++};s<n.length;)o();(0,U.S6)(r,function(u,c){(0,ne.h3)(n,function(g){return g.validator===i&&g.index===c.index})[0]||(n.push({text:c.message,validator:i,index:c.index}),a=!0)}),a&&(n=this._getOrderedItems(this.validators,n),this.option("items",n))},_initMarkup(){this.$element().addClass(Zb),this.callBase()},_optionChanged(t){"validationGroup"===t.name?this._initGroupRegistration():this.callBase(t)},_itemClass:()=>Ez,_itemDataKey:()=>Iz,_postprocessRenderItem(t){Z.Z.on(t.itemElement,"click",function(){t.itemData.validator&&t.itemData.validator.focus&&t.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,kt.Z)("dxValidationSummary",MI);const Tz=MI;var LI="dx-validationgroup";(0,kt.Z)("dxValidationGroup",class Rz extends tg.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),wi.Z.addGroup(this)}_initMarkup(){var e=this.$element();e.addClass(LI),e.find(".".concat("dx-validator")).each(function(i,r){zb.getInstance((0,C.Z)(r))._initGroupRegistration()}),e.find(".".concat("dx-validationsummary")).each(function(i,r){Tz.getInstance((0,C.Z)(r)).refreshValidationGroup()}),super._initMarkup()}validate(){return wi.Z.validateGroup(this)}reset(){return wi.Z.resetGroup(this)}_dispose(){wi.Z.removeGroup(this),this.$element().removeClass(LI),super._dispose()}_useTemplates(){return!1}});var PI="dx-state-focused",Oz=["items","isRequired","validationRules","visible"],FI=gn.Z.inherit({_init:function(){this.callBase(),this._cachedColCountOptions=[],this._itemsRunTimeInfo=new WE,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{formID:"dx-"+new Hr.Z,formData:{},colCount:1,screenByWidth:qe.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:le.Z.format("dxForm-optionalMark"),requiredMessage:le.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,_.Z)().editorStylingMode,labelMode:"outside"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,_i.x2)()},options:{showColonAfterLabel:!1,labelLocation:"top"}}])},_setOptionsByReference:function(){this.callBase(),(0,O.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(t){return parseInt(t.attr(SI))},_applyLabelsWidthByCol:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.inOneColumn?mI:gI+e,a=i.excludeTabbed?":not(.".concat(wI,")"):"";!function JN(t,e,i){var s,o,r="".concat(e," > .").concat(bI,":not(.").concat(DI,"top) > .").concat(CI),n=t.find(r),a=n.length,d=0;for(o=0;o<a;o++)(s=ez(n[o]))>d&&(d=s);for(o=0;o<a;o++)n[o].style.width=d+"px"}(t,".".concat(n).concat(a))},_applyLabelsWidth:function(t,e,i,r,n){r=i?1:r||this._getGroupColCount(t);var s,a={excludeTabbed:e,inOneColumn:i};for(s=0;s<r;s++)this._applyLabelsWidthByCol(t,s,a,n)},_getGroupElementsInColumn:function(t,e,i){var r=(0,v.$K)(i)?"."+xI+i:"";return t.find("."+gI+e+" > ."+Fb+" > ."+Pb+r)},_applyLabelsWidthWithGroups:function(t,e,i,r){if(!0===this.option("alignRootItemLabels"))for(var n=t.find(".".concat(yI)),a=0;a<e;a++)this._applyLabelsWidthByCol(n,a,i,r);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(t,e,i,r);else{var d,o=this.$element().find("."+Pb);for(d=0;d<o.length;d++)this._applyLabelsWidth(o.eq(d),i,void 0,void 0,r)}},_applyLabelsWidthWithNestedGroups:function(t,e,i,r){var a,s,o,d,n={excludeTabbed:i};for(a=0;a<e;a++)for(d=this._getGroupElementsInColumn(t,a),this._applyLabelsWidthByCol(d,0,n,r),s=0;s<this._groupsColCount.length;s++){d=this._getGroupElementsInColumn(t,a,this._groupsColCount[s]);var u=this._getGroupColCount(d);for(o=1;o<u;o++)this._applyLabelsWidthByCol(d,o,n,r)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(t){var{layoutManager:e,inOneColumn:i,$container:r,excludeTabbed:n,items:a}=t;if((0,qe.Ym)()&&"top"!==this._labelLocation()){var s=TI(e._getMarkOptions());i?this._applyLabelsWidth(r,n,!0,void 0,s):this._checkGrouping(a)?this._applyLabelsWidthWithGroups(r,e._getColCount(),n,s):this._applyLabelsWidth(r,n,!1,e._getColCount(),s)}},_prepareFormData:function(){(0,v.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){wi.Z.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,qe.Ym)()){var t=this.$element().get(0);bc.Z.unobserve(t),bc.Z.observe(t,()=>{this._resizeHandler()})}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,U.S6)(this._cachedLayoutManagers,(t,e)=>{var i;null===(i=e.option("onLayoutChanged"))||void 0===i||i(e.isSingleColumnMode())})},_getCurrentScreenFactor:function(){return(0,qe.Ym)()?(0,qe.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(t,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:t,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,ns.U_)(this.$element().find(".".concat(Ex)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,bc.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){var t=this.option("useNativeScrolling");this._scrollable=new rs.Z(this.$element(),{useNative:!!t,useSimulatedScrollbar:!t,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,C.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var t;null===(t=this._$validationSummary)||void 0===t||t.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,C.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(t,e,i,r){if(t){for(var n=[],a=0;a<t.length;a++){var s=t[a],o=oI(i,Mb(a,r)),d={item:s,itemIndex:a,path:o},u=this._itemsRunTimeInfo.add(d);if((0,v.HD)(s)&&(s={dataField:s}),(0,v.Kn)(s)){var c=(0,je.Z)({},s);d.preparedItem=c,c.guid=u,this._tryPrepareGroupItem(c),this._tryPrepareTabbedItem(c,o),this._tryPrepareItemTemplate(c),e&&(c.cssItemClass=wI),c.items&&(c.items=this._prepareItems(c.items,e,o)),n.push(c)}else n.push(s)}return n}},_tryPrepareGroupItem:function(t){"group"===t.itemType&&(t.alignItemLabels=(0,ne.IS)(t.alignItemLabels,!0),t._prepareGroupItemTemplate=e=>{t.template&&(t.groupContentTemplate=this._getTemplate(e)),t.template=this._itemGroupTemplate.bind(this,t)},t._prepareGroupItemTemplate(t.template))},_tryPrepareTabbedItem:function(t,e){"tabbed"===t.itemType&&(t.template=this._itemTabbedTemplate.bind(this,t),t.tabs=this._prepareItems(t.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(t){t.template&&(t.template=this._getTemplate(t.template))},_checkGrouping:function(t){if(t)for(var e=0;e<t.length;e++)if("group"===t[e].itemType)return!0},_renderLayout:function(){var t=this,e=t.option("items"),i=t._getContent();e=t._prepareItems(e),t._rootLayoutManager=t._renderLayoutManager(i,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:t.option("colCount"),alignItemLabels:t.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(r){t._alignLabels.bind(t)(t._rootLayoutManager,r)},onContentReady:function(r){t._alignLabels(r.component,r.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(t){return t.items||[]},_itemTabbedTemplate:function(t,e,i){var r,n=(0,C.Z)("<div>").appendTo(i),a=(0,O.l)({},t.tabPanelOptions,{dataSource:t.tabs,onItemRendered:d=>{var u,c;null===(u=t.tabPanelOptions)||void 0===u||null===(c=u.onItemRendered)||void 0===c||c.call(u,d),(0,ns.Uo)(d.itemElement)},itemTemplate:(d,u,c)=>{var f=(0,C.Z)(c),g=(0,ne.IS)(d.alignItemLabels,!0),m=this._renderLayoutManager(f,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(d),{colCount:d.colCount,alignItemLabels:g,screenByWidth:this.option("screenByWidth"),colCountByScreen:d.colCountByScreen,cssItemClass:d.cssItemClass,onLayoutChanged:y=>{this._alignLabelsInColumn({$container:f,layoutManager:m,items:d.items,inOneColumn:y})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(d.guid,{layoutManager:m}),g&&this._alignLabelsInColumn({$container:f,layoutManager:m,items:d.items,inOneColumn:m.isSingleColumnMode()})}}),s=(d,u)=>{Array.isArray(d)&&d.forEach(c=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(c.guid,{widgetInstance:u}))},o=this._createComponent(n,cN,a);(0,C.Z)(i).parent().addClass("dx-field-item-has-tabs"),o.on("optionChanged",d=>{"dataSource"===d.fullName&&s(d.value,d.component)}),s([{guid:t.guid},...null!==(r=t.tabs)&&void 0!==r?r:[]],o)},_itemGroupTemplate:function(t,e,i){var n,a,r=(0,C.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,v.$K)(t.caption)&&t.caption.length).addClass(Pb).appendTo(i);(0,C.Z)(i).parent().addClass("dx-field-item-has-group"),t.caption&&(0,C.Z)("<span>").addClass("dx-form-group-caption").text(t.caption).appendTo(r);var s=(0,C.Z)("<div>").addClass("dx-form-group-content").appendTo(r);t.groupContentTemplate?(t._renderGroupContentTemplate=()=>{s.empty();var o={formData:this.option("formData"),component:this};t.groupContentTemplate.render({model:o,container:(0,gt.u)(s)})},t._renderGroupContentTemplate()):(a=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,colCountByScreen:t.colCountByScreen,alignItemLabels:t.alignItemLabels,cssItemClass:t.cssItemClass})),this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:a}),n=a._getColCount(),this._groupsColCount.includes(n)||this._groupsColCount.push(n),r.addClass(xI+n),r.attr(SI,n))},_createLayoutManagerOptions:function(t,e){return function _N(t){var{form:e,$formElement:i,formOptions:r,items:n,validationGroup:a,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:d,onDisposing:u,onFieldItemRendered:c}=t;return(0,O.l)({form:e,items:n,$formElement:i,validationGroup:a,onFieldDataChanged:o,onContentReady:d,onDisposing:u,onFieldItemRendered:c,validationBoundary:r.scrollingEnabled?i:void 0,scrollingEnabled:r.scrollingEnabled,showRequiredMark:r.showRequiredMark,showOptionalMark:r.showOptionalMark,requiredMark:r.requiredMark,optionalMark:r.optionalMark,requiredMessage:r.requiredMessage,screenByWidth:r.screenByWidth,layoutData:r.formData,labelLocation:r.labelLocation,customizeItem:r.customizeItem,minColWidth:r.minColWidth,showColonAfterLabel:r.showColonAfterLabel,onEditorEnterKey:r.onEditorEnterKey,labelMode:r.labelMode},{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:t,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:i=>{this._isDataUpdating||this._triggerOnFieldDataChanged(i)},onContentReady:i=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(i.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(i)},onDisposing:i=>{var{component:r}=i,n=r.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(n)},onFieldItemRendered:()=>{var i;null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup()}})},_renderLayoutManager:function(t,e){this._cachedColCountOptions.push({colCountByScreen:(0,O.l)({lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1},e.colCountByScreen)});var r=(0,C.Z)("<div>");r.appendTo(t);var n=this._createComponent(r,"dxLayoutManager",e);return n.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(n),n},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(t,e,i){return this._extendConfig(i=i||{},{readOnly:this.option("readOnly")}),this.callBase(t,e,i)},_attachSyncSubscriptions:function(){var t=this;t.on("optionChanged",function(e){var i=e.fullName;"formData"===i&&((0,v.$K)(e.value)||t._options.silent("formData",e.value={}),t._triggerOnFieldDataChangedByDataSet(e.value)),t._cachedLayoutManagers.length&&(0,U.S6)(t._cachedLayoutManagers,function(r,n){"formData"===i&&(t._isDataUpdating=!0,n.option("layoutData",e.value),t._isDataUpdating=!1),("readOnly"===e.name||"disabled"===e.name)&&n.option(i,e.value)})})},_optionChanged:function(t){var e=t.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(t)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(t)||this._defaultOptionChangedHandler(t)},_defaultOptionChangedHandler:function(t){switch(t.name){case"formData":this.option("items")?(0,v.Qr)(t.value)&&this._resetValues():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(t),this._rootLayoutManager.option(t.name,t.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":wi.Z.removeGroup(t.previousValue||this),this._invalidate();break;default:this.callBase(t)}},_itemsOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,r=this._getItemPath(e),n=this.option(r),a=t.fullName.replace(r+".",""),s=a.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,n,n[s],t.previousValue,r),d=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(t.fullName,i);if(!d&&n){this._changeItemOption(n,a,i);var u=this._generateItemsFromData(this.option("items"));this.option("items",u),d=!0}return d},_formDataOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,r=e.slice(1).join("."),n=this.getEditor(r);return n?n.option("value",i):this._triggerOnFieldDataChanged({dataField:r,value:i}),!0},_tryCreateItemOptionAction:function(t,e,i,r,n){return"tabs"===t&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(n,".tabs")),i=this._prepareItems(i,!0,n,!0)),((t,e)=>{switch(t){case"editorOptions":case"buttonOptions":return new gN(e);case"validationRules":return new bN(e);case"cssClass":return new yN(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new hI((0,O.l)(e,{optionName:t}));case"tabs":return new CN(e);case"template":var i,r,n,a=null!==(i=null==e||null===(r=e.item)||void 0===r?void 0:r.itemType)&&void 0!==i?i:null===(n=e.itemsRunTimeInfo.findPreparedItemByItem(e?.item))||void 0===n?void 0:n.itemType;return"simple"===a?new mN(e):"group"===a?new vN(e):new hI((0,O.l)(e,{optionName:t}));default:return null}})(t,{item:e,value:i,previousValue:r,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(t){return t&&t.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(t){var i,e=lI(t);Oz.indexOf(e)>-1&&(wi.Z.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))&&(null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup())},_setLayoutManagerItemOption(t,e,i,r){if(this._updateLockCount>0){!t._updateLockCount&&t.beginUpdate();var n=this._itemsRunTimeInfo.findKeyByPath(r);this.postponedOperations.add(n,()=>(!t._disposed&&t.endUpdate(),(new Y.BH).resolve()))}var a=s=>{if(s.component.off("contentReady",a),dI(r)){var o=(t=>{for(var e=t.split("."),i=[...e],r=e.length-1;r>=0;r--){if(dI(e[r]))return i.join(".");i.splice(r,1)}return""})(r),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);d&&this._alignLabelsInColumn({items:d.option("items"),layoutManager:d,$container:d.$element(),inOneColumn:d.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};t.on("contentReady",a),t.option(e,i),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(t,e){var i=t.split("."),r=lI(t);if("items"===r&&i.length>1){var n=this._getItemPath(i),a=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(n);if(a){this._itemsRunTimeInfo.removeItemsByItems(a.getItemsRunTimeInfo());var s=this._prepareItems(e,!1,n);return this._setLayoutManagerItemOption(a,r,s,n),!0}}else if(i.length>2){var o=i.length-2,d=this._getItemPath(i.slice(0,o)),u=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(d);if(u){var c=Bc(i[o],r);if("editorType"===r&&u.option(c)!==e)return!1;if("visible"===r){var f=this.option(Bc(d,"items"));if(f&&f.length){var g=u.option("items");f.forEach((m,y)=>{g[y].visibleIndex=m.visibleIndex})}}return this._setLayoutManagerItemOption(u,c,e,d),!0}}return!1},_tryChangeLayoutManagerItemOptions(t,e){var i;return this.beginUpdate(),(0,U.S6)(e,(r,n)=>{if(!(i=this._tryChangeLayoutManagerItemOption(Bc(t,r),n)))return!1}),this.endUpdate(),i},_getItemPath:function(t){var i,e=t[0];for(i=1;i<t.length&&-1!==t[i].search(/items\[\d+]|tabs\[\d+]/);i++)e+="."+t[i];return e},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_triggerOnFieldDataChangedByDataSet:function(t){var e=this;t&&(0,v.Kn)(t)&&(0,U.S6)(t,function(i,r){e._triggerOnFieldDataChanged({dataField:i,value:r})})},_updateFieldValue:function(t,e){if((0,v.$K)(this.option("formData"))){var i=this.getEditor(t);this.option("formData."+t,e),i&&i.option("value")!==e&&i.option("value",e)}},_generateItemsFromData:function(t){var e=this.option("formData"),i=[];return!t&&(0,v.$K)(e)&&(0,U.S6)(e,function(r){i.push({dataField:r})}),t&&(0,U.S6)(t,function(r,n){(0,v.Kn)(n)?i.push(n):i.push({dataField:n})}),i},_getItemByField:function(t,e){var s,i=this,r=(0,v.Kn)(t)?t:i._getFieldParts(t),n=r.fieldName,a=r.fieldPath;return e.length&&(0,U.S6)(e,function(o,d){var u=d.itemType;if(a.length){var c=a.slice();d=i._getItemByFieldPath(c,n,d)}else if("group"===u&&!d.caption&&!d.name||"tabbed"===u&&!d.name){var f=i._getSubItemField(u);d.items=i._generateItemsFromData(d.items),d=i._getItemByField({fieldName:n,fieldPath:a},d[f])}if(((t,e)=>!!t&&(t.dataField===e||t.name===e||Lb(t.title)===e||"group"===t.itemType&&Lb(t.caption)===e))(d,n))return s=d,!1}),s},_getFieldParts:function(t){for(var e=t,i=e.indexOf("."),r=[];-1!==i;)r.push(e.substr(0,i)),i=(e=e.substr(i+1)).indexOf(".");return{fieldName:e,fieldPath:r.reverse()}},_getItemByFieldPath:function(t,e,i){var s,r=i.itemType,n=this._getSubItemField(r),a="group"===r||"tabbed"===r||i.title;do{if(!a)break;var o=i.name||i.caption||i.title,d=(0,v.$K)(o),u=Lb(o),c=void 0;if(i[n]=this._generateItemsFromData(i[n]),d&&(c=t.pop()),!t.length&&(s=this._getItemByField(e,i[n])))break;(!d||d&&u===c)&&t.length&&(s=this._searchItemInEverySubItem(t,e,i[n]))}while(t.length&&!(0,v.$K)(s));return s},_getSubItemField:function(t){return"tabbed"===t?"tabs":"items"},_searchItemInEverySubItem:function(t,e,i){var n,r=this;return(0,U.S6)(i,function(a,s){if(n=r._getItemByFieldPath(t.slice(),e,s))return!1}),n||(n=!1),n},_changeItemOption:function(t,e,i){(0,v.Kn)(t)&&(t[e]=i)},_dimensionChanged:function(){var t=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==t&&(this._isColCountChanged(this._lastMarkupScreenFactor,t)&&(this._targetScreenFactor=t,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=t)},_isColCountChanged:function(t,e){var i=!1;return(0,U.S6)(this._cachedColCountOptions,function(r,n){if(n.colCountByScreen[t]!==n.colCountByScreen[e])return i=!0,!1}),i},_refresh:function(){var t="."+PI+" input, ."+PI+" textarea";Z.Z.trigger(this.$element().find(t),"change"),this.callBase()},_resetValues:function(){this._itemsRunTimeInfo.each(function(t,e){(0,v.$K)(e.widgetInstance)&&Xd.Z.isEditor(e.widgetInstance)&&(e.widgetInstance.reset(),e.widgetInstance.option("isValid",!0))}),wi.Z.resetGroup(this._getValidationGroup())},_updateData:function(t,e,i){var r=this,n=i?e:t;(0,v.Kn)(n)?(0,U.S6)(n,function(a,s){r._updateData(i?t+"."+a:a,s,(0,v.Kn)(s))}):(0,v.HD)(t)&&r._updateFieldValue(t,e)},registerKeyHandler:function(t,e){this.callBase(t,e),this._itemsRunTimeInfo.each(function(i,r){(0,v.$K)(r.widgetInstance)&&r.widgetInstance.registerKeyHandler(t,e)})},_focusTarget:function(){return this.$element().find("."+Fb+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),wi.Z.removeGroup(this._getValidationGroup()),this.callBase()},resetValues:function(){this._resetValues()},updateData:function(t,e){this._updateData(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},getButton:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByName(t)},updateDimensions:function(){var t=this,e=new Y.BH;return t._scrollable?t._scrollable.update().done(function(){e.resolveWith(t)}):e.resolveWith(t),e.promise()},itemOption:function(t,e,i){var r=this._generateItemsFromData(this.option("items")),n=this._getItemByField(t,r),a=uI(r,n);if(n)switch(arguments.length){case 1:return n;case 3:var s=this._tryCreateItemOptionAction(e,n,i,n[e],a);this._changeItemOption(n,e,i);var o=Bc(a,e);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,i)&&this.option("items",r);break;default:var d;(0,v.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(a,e)&&((0,U.S6)(e,(u,c)=>{var f=this._tryCreateItemOptionAction(u,n,c,n[u],a);this._changeItemOption(n,u,c),!d&&!this._tryExecuteItemOptionAction(f)&&(d=!0)}),d&&this.option("items",r))}},validate:function(){return wi.Z.validateGroup(this._getValidationGroup())},getItemID:function(t){return"dx_"+this.option("formID")+"_"+(t||new Hr.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,kt.Z)("dxForm",FI);const VI=FI;var kz={extenders:{controllers:{editing:t=>class extends t{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isPopupEditMode(){return this.option("editing.mode")===Db}isFormEditMode(){return this.option("editing.mode")===nu}getFirstEditableColumnIndex(){var e=this._firstFormItem;if(this.isFormEditMode()&&e){var i=this.option(vn),r=this._dataController.getRowIndexByKey(i),n=this._rowsView.getCellElements(r);return this._rowsView._getEditFormEditorVisibleIndex(n,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var e=super._isEditColumnVisible(),i=this.option("editing");return this.isFormOrPopupEditMode()&&i.allowUpdating||e}_handleDataChanged(e){var i,r;if(this.isPopupEditMode()){var n=this.option("editing.editRowKey"),a=null===(i=e?.items)||void 0===i?void 0:i.some(o=>(0,ne.bY)(o.key,n)),s=(null===(r=e.changeTypes)||void 0===r?void 0:r.length)&&e.changeTypes.every(o=>"insert"===o);("refresh"===e.changeType||a&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e,i=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&i)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,i,r){var n,a=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(n=e.update)||void 0===n||n.call(e,e),this._rowsView.renderDelayedTemplates()):a&&(this._updateEditFormDeferred=(new Y.BH).done(()=>a.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,i,r)}_showEditPopup(e,i){var r="desktop"!==_t.Z.current().deviceType,n=this.addWidgetPrefix("edit-popup"),a=(0,O.l)({showTitle:!1,fullScreen:r,wrapperAttr:{class:n},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(Sg));if(!this._editPopup){var s=(0,C.Z)("<div>").appendTo(this.component.$element()).addClass(n);this._editPopup=this._createComponent(s,xa),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var d;Z.Z.trigger(o.component.$content().find(Tb).not(".".concat(xV)).first(),"focus"),i&&(null===(d=this._editForm)||void 0===d||d.repaint())})}this._editPopup.option(a),this._editPopup.show(),super._showEditPopup(e,i)}_getPopupEditFormTemplate(e){var i=this.component.getVisibleRows()[e],r={row:i,values:i.values,rowType:i.rowType,key:i.key,rowIndex:e};return this._rowsView._addWatchMethod(r,i),n=>{var a=this.getEditFormTemplate(),s=this._createComponent((0,C.Z)("<div>").appendTo(n),rs.Z);this._$popupContent=(0,C.Z)(s.content()),a(this._$popupContent,r,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,C.Z)(n).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var e,i,r=this._getVisibleEditRowIndex();if(r>=0){var n=null===(e=this._editPopup)||void 0===e?void 0:e.option("animation");null===(i=this._editPopup)||void 0===i||i.option("animation",null),this._showEditPopup(r,!0),void 0!==n&&this._editPopup.option("animation",n)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){var{fullName:i}=e;0===i.indexOf(Ib)?(this._handleFormOptionChange(e),e.handled=!0):0===i.indexOf(Sg)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var i;if(this.isFormEditMode()){var r=this._getVisibleEditRowIndex();r>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[r]})}else null!==(i=this._editPopup)&&void 0!==i&&i.option("visible")&&0===e.fullName.indexOf(Ib)&&this._repaintEditPopup()}_handlePopupOptionChange(e){var i=this._editPopup;if(i){var r=e.fullName.slice(Sg.length+1);r?i.option(r,e.value):i.option(e.value)}}renderFormEditorTemplate(e,i,r,n,a){var s=this,o=(0,C.Z)(n),{column:d}=i,u=(t=>{var e,{column:i}=t;return t.isCustomEditorType?t.editorType:null===(e=i.formItem)||void 0===e?void 0:e.editorType})(i),c=e?.row.data,f=r.component,{label:g,labelMark:m,labelMode:y}=r.editorOptions||{},w=(0,O.l)({},e,{data:c,cellElement:null,isOnForm:!0,item:i,id:f.getItemID(i.name||i.dataField),column:(0,O.l)({},d,{editorType:u,editorOptions:(0,O.l)({label:g,labelMark:m,labelMode:y},d.editorOptions,i.editorOptions)}),columnIndex:d.index,setValue:!a&&d.allowEditing&&function(P,$){s.updateFieldValue(w,P,$)}});w.value=d.calculateCellValue(c);var I=this._getFormEditItemTemplate.bind(this)(w,d);return this._rowsView.renderTemplate(o,I,w,!!(0,wa.al)(o)).done(()=>{this._rowsView._updateCell(o,w)}),w}getFormEditorTemplate(e,i){var r=this.component.columnOption(i.dataField);return(n,a)=>{var s,o,d=(0,C.Z)(a);null===(o=(s=e.row).watch)||void 0===o||o.call(s,()=>r.selector(e.row.data),()=>{var u=d.find(".dx-widget").first(),c=u.data("dxValidator"),f=c?.option();d.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,i,n,d),c=(u=d.find(".dx-widget").first()).data("dxValidator"),f&&!c&&u.dxValidator({validationRules:f.validationRules,validationGroup:f.validationGroup,dataGetter:f.dataGetter})}),e=this.renderFormEditorTemplate.bind(this)(e,i,n,d)}}getEditFormOptions(e){var i,r=null===(i=this._getValidationGroupsInForm)||void 0===i?void 0:i.call(this,e),n=this.option("editing.form.customizeItem"),a=this.addWidgetPrefix(VE),s=this.option("editing.form.items"),o={};if(s)$E(s,u=>{var c=u?.name||u?.dataField;c&&(o[c]=!!u.editorType)});else{var d=this.getController("columns").getColumns();s=[],(0,U.S6)(d,(u,c)=>{!c.isBand&&!c.type&&s.push({column:c,name:c.name,dataField:c.dataField})})}return(0,O.l)({},r,{items:s,formID:"dx-".concat(new Hr.Z),customizeItem:u=>{var c,f=u.name||u.dataField;if((u.column||f)&&(c=u.column||this._columnsController.columnOption(u.name?"name:".concat(u.name):"dataField:".concat(u.dataField))),c){if(u.label=u.label||{},u.label.text=u.label.text||c.caption,"boolean"===c.dataType&&void 0===u.label.visible){var g=this.option("editing.form.labelMode");("floating"===g||"static"===g)&&(u.label.visible=!0)}u.template=u.template||this.getFormEditorTemplate(e,u),u.column=c,u.isCustomEditorType=o[f],c.formItem&&(0,O.l)(u,c.formItem),void 0===u.isRequired&&c.validationRules&&(u.isRequired=c.validationRules.some(y=>"required"===y.type),u.validationRules=[]);var m=!(0,v.$K)(u.visible)||u.visible;!this._firstFormItem&&m&&(this._firstFormItem=u)}n?.call(this,u),u.cssClass=(0,v.HD)(u.cssClass)?"".concat(u.cssClass," ").concat(a):a}})}getEditFormTemplate(){return(e,i,r)=>{var n=this.option(Ib),a=this.getEditFormOptions(i),s=(0,C.Z)("<div>").appendTo(e),o=r?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,VI,(0,O.l)({},n,a)),!o){var d=(0,C.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(e);this._createComponent((0,C.Z)("<div>").appendTo(d),Er.Z,this._getSaveButtonConfig()),this._createComponent((0,C.Z)("<div>").appendTo(d),Er.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var u;this._rowsView.renderDelayedTemplates(),null===(u=this._editPopup)||void 0===u||u.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var i;super._beforeEndSaving(e),this.isPopupEditMode()&&(null===(i=this._editPopup)||void 0===i||i.hide())}_processDataItemCore(e,i,r,n,a){var{type:s}=i;this.isPopupEditMode()&&s===Ia&&(e.visible=!1),super._processDataItemCore(e,i,r,n,a)}_editRowFromOptionChangedCore(e,i){var r=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,i,r),r&&this._showEditPopup(i)}},data:{_updateEditItem(t){this._editingController.isFormEditMode()&&(t.rowType="detail")},_getChangedColumnIndices(t,e,i,r){if(!1!==r||!e.isEditing||!this._editingController.isFormEditMode())return this.callBase.apply(this,arguments)}}},views:{rowsView:{_renderCellContent(t,e){"data"===e.rowType&&this._editingController.isPopupEditMode()&&!1===e.row.visible||this.callBase.apply(this,arguments)},getCellElements(t){var e=this.callBase(t),i=this._editingController,r=i.getEditForm();return i.getEditFormRowIndex()===t&&e&&r?r.$element().find(".".concat(this.addWidgetPrefix(VE),", .").concat("dx-button")):e},_getVisibleColumnIndex(t,e,i){if(this._editingController.getEditFormRowIndex()===e&&(0,v.HD)(i)){var n=this._columnsController.columnOption(i);return this._getEditFormEditorVisibleIndex(t,n)}return this.callBase.apply(this,arguments)},_getEditFormEditorVisibleIndex(t,e){var i=-1;return(0,U.S6)(t,(r,n)=>{var a=(0,C.Z)(n).find(".dx-field-item-content").data("dx-form-item");if(a?.column&&e&&a.column.index===e.index)return i=r,!1}),i},_isFormItem(t){var e="detail"===t.rowType||"detailAdaptive"===t.rowType,i="data"===t.rowType&&this._editingController.isPopupEditMode();return(e||i)&&t.item},_updateCell(t,e){this._isFormItem(e)?this._formItemPrepared(e,t):this.callBase(t,e)}}}}};l.registerModule("editingFormBased",kz);var Lz={extenders:{controllers:{editing:t=>class extends t{init(){var i,r,e=!this._saveEditorHandler;super.init(),e&&(this._pointerUpEditorHandler=()=>{var n;r=null===(n=this.getController("columnsResizer"))||void 0===n?void 0:n.isResizing()},this._pointerDownEditorHandler=n=>i=(0,C.Z)(n.target),this._saveEditorHandler=this.createAction(function(n){var{event:a}=n,s=(0,C.Z)(a.target),o=a[AE],{component:d}=this;if((!function RV(t){return t&&(t.is("input")||t.is("textarea"))}(i)||i.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var c=u(s)||u(o?.$element()),f=o&&!o._disposed&&o!==this.component,g=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,m=s.hasClass(this.addWidgetPrefix("focus-overlay")),y=this.isCellEditMode();!r&&!c&&!m&&!(g&&y&&this.isEditing())&&((0,wa.al)(s)||f)&&this._closeEditItem.bind(this)(s)}function u(w){if(!w)return!1;var I=w.closest(".".concat(mV)),P=d.$element();return I.length>0&&0===P.closest(I).length}}),Z.Z.on(tt.Z.getDocument(),qt.Z.up,this._pointerUpEditorHandler),Z.Z.on(tt.Z.getDocument(),qt.Z.down,this._pointerDownEditorHandler),Z.Z.on(tt.Z.getDocument(),ii.u,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===Ac}isBatchEditMode(){return this.option("editing.mode")===ru}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){var i,r=this.component.$element(),n=this.isEditing();if((!r||e.closest(r).length)&&e.closest(".".concat("dx-data-row")).length){var o=this.getView("rowsView"),d=e.closest(".".concat(to,"> td")),u=o.getRowIndex(d.parent()),c=o.getCellElements(u);if(c?.length){var f=c.index(d),m=null===(i=this._columnsController.getVisibleColumns()[f])||void 0===i?void 0:i.allowEditing,y=this.isEditCell(u,f);n=n&&!m&&!y}}return n||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){var e;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var i=this._getVisibleEditColumnIndex(),r=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),i);r&&!r.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},r,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var e=(0,v.$K)(this.option(vn)),i=(0,v.$K)(this.option(_l));return e&&i}return super.isEditing()}_handleEditColumnNameChange(e){var i=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==i&&(0,v.$K)(e.value)&&e.value!==e.previousValue){var r=this._columnsController.getVisibleColumnIndex(e.value),n=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(r,n,i)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){var i=new Y.BH;return this.saveEditData().done(()=>{this.hasChanges()?i.reject("cancel"):this.addRow(e).done(i.resolve).fail(i.reject)}),i.promise()}return super._addRow(e)}editCell(e,i){return this._editCell({rowIndex:e,columnIndex:i})}_editCell(e){var r,i=new Y.BH;return this.executeOperation(i,()=>{r=this._editCellCore(e),(0,Y.gx)(r).done(i.resolve).fail(i.reject)}),void 0!==r?r:i.promise()}_editCellCore(e){var i=this._dataController,r=(0,v.$K)(e.oldColumnIndex)||(0,v.$K)(e.oldRowIndex),{columnIndex:n,rowIndex:a,column:s,item:o}=this._getNormalizedEditCellOptions(e),d={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!r&&this.isEditCell(a,n))return!0;var u=a+i.getRowIndexOffset();return(0,Y.gx)(this._beforeEditCell(a,n,o)).done(c=>{c||this._prepareEditCell(d,o,n,u)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(e,i,r){if(this.isCellEditMode()&&!r.isNewRow&&this.hasChanges()){var n=new Y.BH;return this.saveEditData().always(()=>{n.resolve(this.hasChanges())}),n}}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){var c,{oldColumnIndex:i,oldRowIndex:r,columnIndex:n,rowIndex:a}=e,s=this._columnsController,o=s.getVisibleColumns(),u=this._dataController.items()[a];return c=(0,v.$K)(i)?o[i]:this._getEditColumn(),(0,v.$K)(r)||(r=this._getVisibleEditRowIndex()),(0,v.HD)(n)&&(n=s.columnOption(n,"index"),n=s.getVisibleIndex(n)),{oldColumn:c,columnIndex:n,oldRowIndex:r,rowIndex:a,column:o[n],item:u}}_prepareEditCell(e,i,r,n){var a;return i.isNewRow||(e.key=i.key),!this._isEditingStart(e)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(i.key),this._setEditColumnNameByIndex(r),e.column.showEditorAlways||this._addInternalData({key:i.key,oldData:null!==(a=i.oldData)&&void 0!==a?a:i.data}),!0)}closeEditCell(e,i){var r=(0,Y.gx)(),n=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var a=new Y.BH;r=new Y.BH,this.executeOperation(a,()=>{this._closeEditCellCore(e,n,i).always(r.resolve)})}return r.promise()}_closeEditCellCore(e,i,r){var n=this._dataController,a=new Y.BH,s=a.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!r)return this.saveEditData().done(d=>{this.hasChanges()?a.resolve():this.closeEditCell(!!d).always(a.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),i>=0){var o=[i];this._beforeCloseEditCellInBatchMode(o),e||n.updateItems({changeType:"update",rowIndices:o})}return a.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){var i=this._columnsController.getVisibleColumns().length;e.forEach(r=>{for(var{key:n}=r,a=this._dataController.getRowIndexByKey(n),s=0;s<i;s++)this._rowsView._getCellElement(a,s)?.removeClass("dx-cell-modified")})}}_prepareChange(e,i,r){var n=(0,C.Z)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(n,e),super._prepareChange(e,i,r)}_cancelSaving(e){var i=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),i.updateItems()),super._cancelSaving(e)}optionChanged(e){var{fullName:i}=e;"editing"===e.name&&i===_l?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,i,r){var n=this._columnsController.getVisibleColumns();e>-1&&(0,ne.g0)(()=>{this._repaintEditCell(n[e],n[i],r)})}_handleEditRowKeyChange(e){var i;if(this.isCellOrBatchEditMode()){var r=this._getVisibleEditColumnIndex(),n=this._getEditRowIndexCorrection(),a=this._dataController.getRowIndexByKey(e.previousValue)+n;(0,v.$K)(e.value)&&e.value!==e.previousValue&&(null===(i=this._editCellFromOptionChanged)||void 0===i||i.call(this,r,r,a))}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:i}=this._dataController.items()[e],r=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,i).always(()=>{e=this._dataController.getRowIndexByKey(r),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){var{isPageChanged:i}=e??{},r=this.isBatchEditMode()||i&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?r&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,i){var r=this._dataController;return this.isBatchEditMode()?(r.updateItems({changeType:"update",rowIndices:[i,e]}),(new Y.BH).resolve()):super._afterDeleteRow(e,i)}_updateEditRow(e,i,r){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,i,r):super._updateEditRow(e,i,r)}_isDefaultButtonVisible(e,i){if(this.isCellOrBatchEditMode()){var r=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,i)&&(!r||!i.row.removed);case"undelete":return r&&this.allowDeleting(i)&&i.row.removed;default:return super._isDefaultButtonVisible(e,i)}}return super._isDefaultButtonVisible(e,i)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){var i;this.isCellEditMode()?"update"!==(null===(i=e[0])||void 0===i?void 0:i.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){var i,r=null!==(i=this.option("editing"))&&void 0!==i?i:{},n=super.prepareEditButtons(e);return(r.allowUpdating||r.allowAdding||r.allowDeleting)&&this.isBatchEditMode()&&(n.push(this.prepareButtonItem(e,"save","saveEditData",21)),n.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),n}_saveEditDataInner(){var a,e=this._dataController.getVisibleRows()[this.getEditRowIndex()],r=this._getEditColumn()?.showEditorAlways;return this.isCellEditMode()&&!e?.isNewRow&&r&&(a=new Y.BH,this.addDeferred(a)),super._saveEditDataInner().always(a?.resolve)}_applyChange(e,i,r){var n=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:a}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue;return a&&!r&&n&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,i,r)}_applyChangeCore(e,i){var{showEditorAlways:r}=e.column,n=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(r&&!i){if(n)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return i=this._needUpdateRow(e.column),super._applyChangeCore(e,i)}return super._applyChangeCore(e,i)}_processDataItemCore(e,i,r,n,a){var{data:s,type:o}=i;this.isBatchEditMode()&&o===as&&(e.data=(0,zr.FL)(e.data,s)),super._processDataItemCore(e,i,r,n,a)}_processRemoveCore(e,i,r){if(!this.isBatchEditMode()||r)return super._processRemoveCore(e,i,r)}_processRemoveIfError(e,i){if(!this.isBatchEditMode())return super._processRemoveIfError(e,i)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);var i=e>=0?e:0,r=this.getFirstEditableColumnIndex();r>=0&&this.editCell(i,r)}}},views:{rowsView:{_createTable(){var t=this.callBase.apply(this,arguments),e=this._editingController;return e.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&Z.Z.on(t,(0,be.V4)(Gd.Z.name,"dxDataGridRowsView"),"td:not(.".concat(wg,")"),this.createAction(()=>{e.isEditing()&&e.closeEditCell()})),t},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var r=!!t.removed;this._editingController.isBatchEditMode()&&r&&e.addClass("dx-row-removed")}return e}},headerPanel:{isVisible(){var t=this.getController("editing").option("editing");return this.callBase()||t&&(t.allowUpdating||t.allowDeleting)&&t.mode===ru}}}}};l.registerModule("editingCellBased",Lz);var NI="invalid",$b="revert-tooltip",zI="dx-invalid-message",Wb="invalid-message",HI="dx-invalid-message-always",ZI="validator",Kb="dx-pending-indicator",$I="dx-validation-pending",WI="content",KI="__DX_INSERT_INDEX__",Gb="batch",kc="cell",GI=["popup","form"],Mc="insert",Lc="cancel",Pc=function(t){return(0,v.$K)(t)&&t!==Lc},UI=function(t,e){return void 0!==t||void 0===t&&e&&!e.isNewRow},Wz=zt.Controller.inherit({init(){this._editingController=this.getController("editing"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()},initValidationState(){this._validationState=[],this._validationStateCache={}},_rowIsValidated(t){var e=this._getValidationData(t?.key);return!!e&&!!e.validated},_getValidationData(t,e){var n,i=(0,ne.k3)(t),r=(0,v.Kn)(i);return!(n=r?this._validationState.filter(a=>(0,ne.bY)(a.key,t))[0]:this._validationStateCache[i])&&e&&(this._validationState.push(n={key:t,isValid:!0}),r||(this._validationStateCache[i]=n)),n},_getBrokenRules:(t,e)=>e?e.brokenRules||e.brokenRule&&[e.brokenRule]:t.brokenRules||[],_rowValidating(t,e){var i=new Y.BH,r=this._editingController.getChangeByKey(t?.key),n=this._getBrokenRules(t,e),s={brokenRules:n,isValid:e?e.isValid:t.isValid,key:r.key,newData:r.data,oldData:this._editingController._getOldData(r.key),promise:null,errorText:this.getHiddenValidatorsErrorText(n)};return this.executeAction("onRowValidating",s),(0,Y.gx)((0,Y.p4)(s.promise)).always(()=>{t.isValid=s.isValid,t.errorText=s.errorText,i.resolve(s)}),i.promise()},getHiddenValidatorsErrorText(t){var e=[];return(0,U.S6)(t,(i,r)=>{var{column:n}=r,a=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,s=n&&n.visible;!r.validator.$element().parent().length&&(!s||a)&&e.push(r.message)}),e.join(", ")},validate(t){var e=!0,i=this._editingController,r=new Y.BH,n=[],a=i.getEditMode();if(t=t||"row"===a,this._isValidationInProgress)return r.resolve(!1).promise();if(this._isValidationInProgress=!0,t){i.addDeferred(r);var s=i.getChanges();(0,U.S6)(s,(d,u)=>{var{type:c,key:f}=u;if("remove"!==c){var g=this._getValidationData(f,!0),m=this.validateGroup(g);n.push(m),m.done(y=>{g.validated=!0,e=e&&y.isValid})}})}else if(this._currentCellValidator){var o=this.validateGroup(this._currentCellValidator._findGroup());n.push(o),o.done(d=>{e=d.isValid})}return(0,Y.gx)(...n).done(()=>{this._isValidationInProgress=!1,r.resolve(e)}),r.promise()},validateGroup(t){var r,e=new Y.BH;return(t&&wi.Z.getGroupConfig(t))?.validators.length&&(this.resetRowValidationResults(t),r=wi.Z.validateGroup(t)),(0,Y.gx)(r?.complete||r).done(n=>{(0,Y.gx)(this._rowValidating(t,n)).done(e.resolve)}),e.promise()},isRowDataModified:t=>!(0,v.Qr)(t.data),updateValidationState(t){var e=this._editingController.getEditMode(),{key:i}=t,r=this._getValidationData(i,!0);if(GI.includes(e))r.isValid=!0;else{if(t.type===Mc&&!this.isRowDataModified(t))return void(r.isValid=!0);if(this.setDisableApplyValidationResults(!0),wi.Z.getGroupConfig(r)){var a=wi.Z.validateGroup(r);(0,Y.gx)(a.complete||a).done(s=>{r.isValid=s.isValid,r.brokenRules=s.brokenRules})}else(!r.brokenRules||!r.brokenRules.length)&&(r.isValid=!0);this.setDisableApplyValidationResults(!1)}},setValidator(t){this._currentCellValidator=t},renderCellPendingIndicator(t){var e=t.find(".".concat(Kb));if(!e.length){var i=t;e=(0,C.Z)("<div>").appendTo(i).addClass(Kb),this._createComponent(e,Vr.Z),t.addClass($I)}},disposeCellPendingIndicator(t){var e=t.find(".".concat(Kb));if(e.length){var i=Vr.Z.getInstance(e);i&&(i.dispose(),i.$element().remove()),t.removeClass($I)}},validationStatusChanged(t){var{validator:e}=t,i=e.option("validationGroup"),{column:r}=e.option("dataGetter")();this.updateCellValidationResult({rowKey:i.key,columnIndex:r.index,validationResult:t})},validatorInitialized(t){t.component.on("validating",this.validationStatusChanged.bind(this)),t.component.on("validated",this.validationStatusChanged.bind(this))},validatorDisposing(t){var e=t.component,i=e.option("validationGroup"),{column:r}=e.option("dataGetter")(),n=this.getCellValidationResult({rowKey:i?.key,columnIndex:r.index});Pc(n)&&"pending"===n.status&&this.cancelCellValidationResult({change:i,columnIndex:r.index})},applyValidationResult(t,e){var{validator:i}=e,r=i.option("validationGroup"),{column:n}=i.option("dataGetter")();if(e.brokenRules&&e.brokenRules.forEach(u=>{u.columnIndex=n.index,u.column=n}),t){var a=this.getCellValidationResult({rowKey:r.key,columnIndex:n.index}),s=Pc(a)&&a.disabledPendingId===e.id;if(this._disableApplyValidationResults||s)return;if("invalid"===e.status){var o=t.find(":focus");(0,cg.si)(o)||(Z.Z.trigger(o,"focus"),Z.Z.trigger(o,qt.Z.down))}var d=!n.editCellTemplate&&this.getController("editorFactory").getEditorInstance(t);"pending"===e.status?d?d.option("validationStatus","pending"):this.renderCellPendingIndicator(t):d?d.option("validationStatus","valid"):this.disposeCellPendingIndicator(t),t.toggleClass(this.addWidgetPrefix(NI),"invalid"===e.status)}},_syncInternalEditingData(t){var e,i=this._editingController,r=i.getChangeByKey(t.key),n=i._getOldData(t.key),a=null===(e=t.row)||void 0===e?void 0:e.oldData;r&&a&&!n&&i._addInternalData({key:t.key,oldData:a})},createValidator(t,e){var i,r,n=this._editingController,{column:a}=t,{showEditorAlways:s}=a;if(!(0,v.$K)(a.command)&&a.validationRules&&Array.isArray(a.validationRules)&&a.validationRules.length){var d=n.getIndexByKey(t.key,n.getChanges())>-1;if(!d){s||(s=(this.getController("columns")?.getVisibleColumns()||[]).some(fe=>fe.showEditorAlways));var f=(0,ne.bY)(this.option("editing.editRowKey"),t.key),g=n.isCellOrBatchEditMode()&&n.allowUpdating({row:t.row});d=f||g&&s,g&&s&&n._addInternalData({key:t.key,oldData:null!==(r=null===(i=t.row)||void 0===i?void 0:i.oldData)&&void 0!==r?r:t.data})}if(d){if(e&&!e.length)return void Nt.Z.log("E1050");this._syncInternalEditingData(t);var m=this._getValidationData(t.key,!0),y=()=>{var fe=n.getChangeByKey(m?.key),Se=a.calculateCellValue(fe?.data||{});return void 0!==Se?Se:t.value},w=e&&e.hasClass("dx-widget");e&&e.addClass(this.addWidgetPrefix(ZI));var I=new zb(e||(0,C.Z)("<div>"),{name:a.caption,validationRules:(0,O.l)(!0,[],a.validationRules),validationGroup:m,adapter:w?null:{getValue:y,applyValidationResults:fe=>{this.applyValidationResult(e,fe)}},dataGetter(){var fe=m?.key,Se=n.getChangeByKey(fe),Fe=n._getOldData(fe);return{data:(0,zr.FL)(Fe,Se?.data),column:a}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(w){var P=I.option("adapter");if(P){var $=P.bypass,se=()=>t.row.isNewRow&&!this._isValidationInProgress&&!n.isCellModified(t);P.getValue=y,P.validationRequestsCallbacks=[],P.bypass=()=>$.call(P)||se()}}return I}}},setDisableApplyValidationResults(t){this._disableApplyValidationResults=t},getDisableApplyValidationResults(){return this._disableApplyValidationResults},isCurrentValidatorProcessing(t){var{rowKey:e,columnIndex:i}=t;return this._currentCellValidator&&(0,ne.bY)(this._currentCellValidator.option("validationGroup").key,e)&&this._currentCellValidator.option("dataGetter")().column.index===i},validateCell(t){var e={rowKey:t.option("validationGroup").key,columnIndex:t.option("dataGetter")().column.index},i=this.getCellValidationResult(e),r=Pc(i),n=t.option("adapter");if(r){var a=n.getValue();(0,ne.bY)(a,i.value)||(i=t.validate())}else i=t.validate();var s=new Y.BH;return r&&"pending"===i.status&&(this.updateCellValidationResult(e),n.applyValidationResults(i)),(0,Y.gx)(i.complete||i).done(o=>{r&&n.applyValidationResults(o),s.resolve(o)}),s.promise()},updateCellValidationResult(t){var{rowKey:e,columnIndex:i,validationResult:r}=t,n=this._getValidationData(e);if(n){var a;if(n.validationResults||(n.validationResults={}),r){if(a=(0,O.l)({},r),n.validationResults[i]=a,"pending"===r.status&&(this._editingController.getEditMode()===kc&&(a.deferred=new Y.BH,a.complete.always(()=>{a.deferred.resolve()}),this._editingController.addDeferred(a.deferred)),this._disableApplyValidationResults))return void(a.disabledPendingId=r.id)}else a=n.validationResults[i];a&&a.disabledPendingId&&delete a.disabledPendingId}},getCellValidationResult(t){var r,{rowKey:e,columnIndex:i}=t;return null===(r=this._getValidationData(e,!0)?.validationResults)||void 0===r?void 0:r[i]},removeCellValidationResult(t){var{change:e,columnIndex:i}=t,r=this._getValidationData(e?.key);r&&r.validationResults&&(this.cancelCellValidationResult({change:e,columnIndex:i}),delete r.validationResults[i])},cancelCellValidationResult(t){var{change:e,columnIndex:i}=t,r=this._getValidationData(e.key);if(e&&r.validationResults){var n=r.validationResults[i];n&&(n.deferred&&n.deferred.reject(Lc),r.validationResults[i]=Lc)}},resetRowValidationResults(t){t&&(t.validationResults&&delete t.validationResults,delete t.validated)},isInvalidCell(t){var{rowKey:e,columnIndex:i}=t,r=this.getCellValidationResult({rowKey:e,columnIndex:i});return Pc(r)&&"invalid"===r.status},getCellValidator(t){var{rowKey:e,columnIndex:i}=t,r=this._getValidationData(e),n=r&&wi.Z.getGroupConfig(r),a=n&&n.validators;return a&&a.filter(s=>{var{column:o}=s.option("dataGetter")();return!!o&&o.index===i})[0]},setCellValidationStatus(t){var e=this.getCellValidationResult({rowKey:t.key,columnIndex:t.column.index});(0,v.$K)(e)?t.validationStatus=e!==Lc?e.status:Lc:delete t.validationStatus}}),Kz={defaultOptions:()=>({editing:{texts:{validationCancelChanges:le.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:Wz},extenders:{controllers:{editing:{_addChange(t){var e=this.callBase.apply(this,arguments),i=this.getController("validating");return e&&"remove"!==t.type&&i.updateValidationState(e),e},_handleChangesChange(t){this.callBase.apply(this,arguments);var e=this.getController("validating");t.value.forEach(i=>{void 0===e._getValidationData(i.key)&&e.updateValidationState(i)})},_updateRowAndPageIndices(){var t=this,e=t.getView("rowsView").getTopVisibleItemIndex(),i=e;(0,U.S6)(t.getChanges(),(r,n)=>{var{key:a,type:s}=n,o=this.getController("validating")._getValidationData(a);o&&!o.isValid&&o.pageIndex!==t._pageIndex&&(o.pageIndex=t._pageIndex,o.rowIndex=s===Mc?e:i,i++)})},_getValidationGroupsInForm(t){return{validationGroup:this.getController("validating")._getValidationData(t.key,!0)}},_validateEditFormAfterUpdate(t,e){e&&this._editForm&&this._editForm.validate(),this.callBase.apply(this,arguments)},_prepareEditCell(t){var e=this.callBase.apply(this,arguments),i=this.getController("validating");return e&&t.column.showEditorAlways&&i.updateValidationState({key:t.key}),e},processItems(t,e){var i=this.getChanges(),r=this.getController("data"),n=this.getController("validating"),a=(t=this.callBase(t,e)).length;return this.getEditMode()===Gb&&"prepend"!==e&&"append"!==e&&i.forEach(o=>{var{key:d}=o,u=n._getValidationData(d);u&&o.type&&u.pageIndex===this._pageIndex&&o?.pageIndex!==this._pageIndex&&function(o,d){var u={key:o.key};if(!(function(g,m){var y=-1,w=g.type===Mc,{key:I}=g;return(0,U.S6)(m,(P,$)=>{if((0,ne.bY)(I,w?$.key:r.keyOf($)))return y=P,!1}),y}(o,t)>=0)){d.rowIndex=d.rowIndex>a?d.rowIndex%a:d.rowIndex;var{rowIndex:f}=d;u[KI]=1,t.splice(f,0,u)}}(o,u)}),t},processDataItem(t){var e=t.data[KI],i=e?t.data.key:t.key;if(this.getEditMode()===Gb&&e&&i){var n=this.getChanges(),a=ye.getIndexByKey(i,n);if(a>=0){var s=n[a];if(s.type!==Mc){var o=this._getOldData(s.key);t.data=(0,O.l)(!0,{},o,s.data),t.key=i}}}this.callBase.apply(this,arguments)},_createInvisibleColumnValidators(t){var e=this,i=this.getController("validating"),r=this.getController("columns"),n=r.getColumns(),a=r.getInvisibleColumns().filter(u=>!u.isBand),s=r.getGroupColumns().filter(u=>!u.showWhenGrouped&&-1===a.indexOf(u)),o=[],d=(u,c)=>this._dataController.getRowIndexByKey(c)>=0&&a.indexOf(u)<0;return a.push(...s),GI.includes(this.getEditMode())||(0,U.S6)(n,(u,c)=>{t.forEach(f=>{var g;if(!d(c,f.key)){if(f.type===Mc)g=f.data;else if("update"===f.type){var m=e._getOldData(f.key);if(!(0,v.$K)(m))return;g=(0,zr.FL)(m,f.data)}if(g){var y=i.createValidator({column:c,key:f.key,value:c.calculateCellValue(g)});y&&o.push(y)}}})}),function(){o.forEach(u=>{u.dispose()})}},_beforeSaveEditData(t,e){var i=this.callBase.apply(this,arguments),r=this.getController("validating"),n=r._getValidationData(t?.key);if(t)i=i||!("remove"===t.type||n.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());i=new Y.BH,this.executeOperation(i,()=>{r.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case kc:o||this._focusEditingCell();break;case Gb:o||(this._resetEditRowKey(),this._resetEditColumnName(),this.getController("data").updateItems())}i.resolve(!o)})})}return i.promise?i.promise():i},_beforeEditCell(t,e,i){var r=this.callBase(t,e,i);if(this.getEditMode()===kc){var n=this._rowsView._getCellElement(t,e),a=n&&n.data("dxValidator"),s=n&&n.closest(".dx-row").data("options"),o=a&&a.option("adapter").getValue();if(a&&UI(o,s)){var d=this.getController("validating"),u=new Y.BH;return(0,Y.gx)(d.validateCell(a),r).done((c,f)=>{u.resolve("valid"===c.status&&f)}),u.promise()}if(!a)return r}},_afterSaveEditData(t){var e,i=this.getEditMode()===kc;if((0,U.S6)(this.getChanges(),(d,u)=>{var c=this._showErrorRow(u);e=e||c}),e){var r=this._rowsView.getScrollable();r&&(r.update(),r.scrollToElement(e))}if(t&&i&&this._needUpdateRow()){var n=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[n]}),this._focusEditingCell()}else if(!t){var a=!0;i&&(a=!(this.getController("columns").getColumns().filter(d=>{var u;return d.showEditorAlways&&(null===(u=d.validationRules)||void 0===u?void 0:u.length)>0}).length>0)),a&&this.getController("validating").initValidationState()}},_handleDataChanged(t){var e=this.getController("validating")._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===t.changeType&&(0,U.S6)(e,(i,r)=>{r.rowIndex+=t.items.length}),this.callBase(t)},resetRowAndPageIndices(){var t=this.getController("validating")._validationState;(0,U.S6)(t,(e,i)=>{i.pageIndex!==this._pageIndex&&(delete i.pageIndex,delete i.rowIndex)})},_beforeCancelEditData(){this.getController("validating").initValidationState(),this.callBase()},_showErrorRow(t){var e,i=this.getController("errorHandling"),r=this.getController("data").items(),n=this.getIndexByKey(t.key,r),a=this.getController("validating")._getValidationData(t.key);if(!a?.isValid&&a?.errorText&&n>=0)return e=this.getPopupContent(),i&&i.renderErrorRow(a?.errorText,n,e)},updateFieldValue(t){var e=this.getController("validating"),i=new Y.BH;return e.removeCellValidationResult({change:this.getChangeByKey(t.key),columnIndex:t.column.index}),this.callBase.apply(this,arguments).done(()=>{var r=e.getCellValidator({rowKey:t.key,columnIndex:t.column.index});(0,Y.gx)(r&&e.validateCell(r)).done(n=>{this.getController("editorFactory").refocus(),i.resolve(n)})}),i.promise()},highlightDataCell(t,e){this.callBase.apply(this,arguments);var i=this.getController("validating");i.setCellValidationStatus(e);var r=!!e.setValue,n=this.isCellModified(e),a=(0,v.$K)(e.validationStatus);if(n&&e.column.setCellValue||r&&!n&&!e.row.isNewRow&&a){var o=t.data("dxValidator");o&&(0,Y.gx)(this.getController("validating").validateCell(o)).done(()=>{i.setCellValidationStatus(e)})}},getChangeByKey(t){var e=this.getChanges();return e[ye.getIndexByKey(t,e)]},isCellModified(t){var e=this.callBase(t),i=this.getChangeByKey(t.key),r=!!t.row&&this.getController("validating").isInvalidCell({rowKey:t.key,columnIndex:t.column.index});return e||this.getController("validating")._rowIsValidated(i)&&r}},editorFactory:{_showRevertButton(t){var e,i=null===(e=this._revertTooltip)||void 0===e?void 0:e.$element();if(!t||!t.length)return i?.remove(),void(this._revertTooltip=void 0);if(!t.find(i).length){var r=t.closest(".".concat(this.addWidgetPrefix(WI))),n=this.addWidgetPrefix($b);i?.remove(),i=(0,C.Z)("<div>").addClass(n).appendTo(t);var a={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:r,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:n},contentTemplate:()=>{var s=(0,C.Z)("<div>").addClass("dx-revert-button"),o={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),onClick:()=>{this._editingController.cancelEditData()}};return new Er.Z(s,o).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:t},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new ts.Z(i,a)}},_hideFixedGroupCell(t,e){var i,r,n=this._rowsView.isFixedColumns(),a=this._editingController.isFormOrPopupEditMode();if(n&&!a){var s=t.closest(".dx-row").next().data("options");s&&"group"===s.rowType&&(i=(0,C.Z)(this._rowsView.getRowElement(s.rowIndex)).last(),(r=i.find(".".concat("dx-group-cell"))).length&&"hidden"!==r.get(0).style.visibility&&(r.css("visibility","hidden"),e.onDisposing=function(){r.css("visibility","")}))}},_positionedHandler(t,e){if(!t.component.__skipPositionProcessing){var i=(0,C.Z)(t.element).hasClass(this.addWidgetPrefix($b)),r=!i&&this._rowsView.updateFreeSpaceRowHeight(),n=this._normalizeValidationMessagePositionAndMaxWidth(t,i,e);t.component.__skipPositionProcessing=!(!r&&!n),n?t.component.option(n):r&&t.component.repaint()}},_showValidationMessage(t,e,i){var r,n=t.find(".dx-dropdowneditor-overlay").data("dxPopup"),a=n&&n.option("visible"),s=a?"top right":"top ".concat(i),o=a?"top left":"bottom ".concat(i),u=(null===(r=this._columnsController.getFixedColumns())||void 0===r?void 0:r.length)>0?this.getView("rowsView").element():t.closest(".".concat(this.addWidgetPrefix(WI))),c="";e&&e.forEach(y=>{c+=(c.length?"<br/>":"")+(0,tn.HZ)(y)});var f=this.addWidgetPrefix(Wb);this._rowsView.element().find(".".concat(f)).remove();var g=(0,C.Z)("<div>").addClass(zI).addClass(HI).addClass(f).html(c).appendTo(t),m={container:u,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:"".concat(zI," ").concat(HI," ").concat(f)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!a&&pi.Z.mozilla?-1:0},my:s,at:o,of:t},onPositioned:y=>{this._positionedHandler(y,a),this._shiftValidationMessageIfNeed(y.component.$content(),t)}};this._hideFixedGroupCell(t,m),new ts.Z(g,m)},_hideValidationMessage(){var t;(null===(t=this._rowsView.element())||void 0===t?void 0:t.find(this._getValidationMessagesSelector()))?.remove()},_normalizeValidationMessagePositionAndMaxWidth(t,e,i){var w,I,P,r=this._columnsController.getFixedColumns();if(r&&r.length){var n,d,u,a=!e&&(d=(0,C.Z)(t.element).closest("tr").index(),u=(0,C.Z)(this._rowsView.getRowElement(d)).first().children().filter(":not(.dx-hidden-cell)"),this._rowsView._getWidths(u).reduce((w,I)=>w+I,0)),c=t.component.$content(),f=(0,Q.Y_)(c,!0),g=!e&&f>a,m=this._rowsView.getCellIndex((0,C.Z)(t.element).closest("td")),y=((w=r).some(($,se)=>{if("transparent"===$.command)return I=0===se?-1:se,P=se===w.length-1?-1:se+$.colspan-1,!0}),{startColumnIndex:I,endColumnIndex:P});return e||m!==y.startColumnIndex&&!g?m===y.endColumnIndex&&(n={collision:"none flip",my:"top right",at:e||i?"top left":"bottom right"},e&&(n.offset="-1 0")):n={collision:"none flip",my:"top left",at:i?"top right":"bottom left"},n&&{position:n,maxWidth:g?a-2:void 0}}},_shiftValidationMessageIfNeed(t,e){var i=this._revertTooltip&&this._revertTooltip.$content();if(i){var r=t.offset(),n=i.offset();if(r.top===n.top&&r.left+(0,Q.dz)(t)>n.left){var a=(0,Q.dz)(i)+2;t.css("left",n.left<e.offset().left?-a:a)}}},_getRevertTooltipsSelector(){var t=this.addWidgetPrefix($b);return".dx-editor-cell .".concat(t)},_getValidationMessagesSelector(){var t=this.addWidgetPrefix(Wb);return".dx-editor-cell .".concat(t,", .dx-cell-modified .").concat(t)},init(){this.callBase(),this._editingController=this.getController("editing"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView")},loseFocus(t){t||this.getController("validating").setValidator(null),this.callBase()},updateCellState(t,e,i){var r,n=t?.closest(this._getFocusCellSelector()),a=n?.is("td")?n:null,s=n?.closest(".dx-row").data("options"),o=s?this.getController("editing").getChangeByKey(s.key):null,d=a&&this.getController("columns").getVisibleColumns()[a.index()],u=void 0!==(null===(r=o?.data)||void 0===r?void 0:r[d?.name])&&!this._editingController.isSaving();if(this._editingController.getEditMode()===kc&&("invalid"===e?.status||u?this._showRevertButton(n):this._revertTooltip&&this._revertTooltip.$element().remove()),e&&"invalid"===e.status&&a&&d&&e&&e.brokenRules){var f=[];e.brokenRules.forEach(g=>{g.message&&f.push(g.message)}),f.length&&this._showValidationMessage(n,f,d.alignment||"left")}!i&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()},focus(t,e){if(!arguments.length)return this.callBase();if(this._hideValidationMessage(),t?.hasClass("dx-row")||t?.hasClass("dx-master-detail-cell"))return this.callBase(t,e);var u,i=t?.closest(this._getFocusCellSelector()),{callBase:r}=this,n=i&&(i.data("dxValidator")||t.find(".".concat(this.addWidgetPrefix(ZI))).eq(0).data("dxValidator")),a=i&&i.closest(".dx-row").data("options"),s=this.getController("editing"),o=a?s.getChangeByKey(a.key):null,d=this.getController("validating");if(n){d.setValidator(n);var c=n.option("adapter").getValue();if(UI(c,a)||d._rowIsValidated(o))return s.waitForDeferredOperations().done(()=>{(0,Y.gx)(d.validateCell(n)).done(f=>{u=f;var{column:g}=u.validator.option("dataGetter")();o&&g&&!d.isCurrentValidatorProcessing({rowKey:o.key,columnIndex:g.index})||("invalid"===u.status&&(e=!0),this.updateCellState(t,u,e),r.call(this,t,e))})}),this.callBase(t,e)}return this.updateCellState(t,u,e),this.callBase(t,e)},getEditorInstance(t){var e=t.find(".dx-texteditor").eq(0);return ye.getWidgetInstance(e)}},data:{_getValidationStatus:t=>(Pc(t)?t.status:t)||"valid",_isCellChanged(t,e,i,r,n){var a,s,o=null===(a=t.cells)||void 0===a?void 0:a[r],d=this._getValidationStatus({status:o?.validationStatus}),u=this.getController("validating"),c=u.getCellValidationResult({rowKey:t.key,columnIndex:r}),f=u._getValidationData(t.key),g=this._getValidationStatus(c),m=JSON.stringify(e.modifiedValues)!==JSON.stringify(t.modifiedValues),y=d!==g&&m,w=(0,C.Z)(o?.cellElement).hasClass(this.addWidgetPrefix(NI)),I=null===(s=o?.column.validationRules)||void 0===s?void 0:s.length;return!!(t.isEditing!==e.isEditing&&I||y||f.isValid&&w)||this.callBase.apply(this,arguments)}}},views:{rowsView:{updateFreeSpaceRowHeight(t){var e,i,r,n=this.element(),a=n&&n.find(".".concat(this.addWidgetPrefix(Wb)," .dx-overlay-content"));if(this.callBase(t),a&&a.length&&(e=this._getRowElements(),(i=(r=this._getFreeSpaceRowElements(t)).first())&&1===e.length&&(!i.is(":visible")||(0,Q.zp)(a)>(0,Q.zp)(i))))return r.show(),(0,Q.QQ)(r,(0,Q.zp)(a)),!0},_formItemPrepared(t,e){this.callBase.apply(this,arguments),(0,ne.Su)(()=>{var i=e.find(".dx-widget").first();i.length&&!i.children().length||this.getController("validating").createValidator(t,i)})},_cellPrepared(t,e){this.getController("editing").isFormOrPopupEditMode()||this.getController("validating").createValidator(e,t),this.callBase.apply(this,arguments)},_restoreErrorRow(t){var e=this.getController("editing");e&&e.hasChanges()&&this._getRowElements(t).each((i,r)=>{var n=(0,C.Z)(r).data("options");if(n){var a=e.getChangeByKey(n.key);a&&e._showErrorRow(a)}})}}}}};l.registerModule("validating",Kz);var Ub="scrolling.legacyMode",YI=t=>t.option("scrolling.loadTwoPagesOnStart")||t._controller.isVirtual()||t._controller.getViewportItemIndex()>0,Tg=t=>t._cache.length?t._cache[0].pageIndex:-1,Yb=t=>t._cache.length?t._cache[t._cache.length-1].pageIndex:-1,Dg=(t,e,i)=>{t._isChangedFiring=!0,e(i),t._isChangedFiring=!1},qI=(t,e,i)=>{if(t._isDelayChanged)return t._isDelayChanged=!1,Dg(t,e,i),!0},Ag=(t,e)=>{var i=t.option("scrolling.preloadEnabled"),r=(t=>{var e=t._dataOptions.pageSize();if(t.option("scrolling.preventPreload"))return 0;var r=t._controller.viewportSize();if(t._controller.isVirtualMode()&&t.option("scrolling.removeInvisiblePages")){r=0;for(var n=t._controller.viewportSize()*t._controller.viewportItemSize(),a=t._controller.getContentOffset(),s=t._controller.getViewportPosition(),o=t._controller.virtualItemsCount(),d=t._dataOptions.totalItemsCount(),u=o.begin;u<d&&!(a>=s+n);u++)(a+=t._controller.getItemSizes()[u]||t._controller.viewportItemSize())>=s&&r++}return e&&r>0?Math.ceil(r/e):1})(t),n=t._controller.isAppendMode();return r&&(e?r=i?1:0:(i&&r++,(n||!YI(t))&&r--)),r},jI=(t,e,i,r,n)=>{var a=t._dataOptions,s=a.items().slice(),o=(0,v.Kn)(i)?i:void 0,d="prepend"===i,u=a.viewportItems();i&&(0,v.HD)(i)&&!t._isDelayChanged&&(o={changeType:i,items:s},n&&(o.removeCount=n.itemsCount,o.removeCount&&a.correctCount&&(o.removeCount=a.correctCount(u,o.removeCount,d))));var c=n?n.itemsLength:0;c&&a.correctCount&&(c=a.correctCount(u,c,d)),"append"===i?(u.push.apply(u,s),n&&u.splice(0,c)):d?(u.unshift.apply(u,s),n&&u.splice(-c)):t._dataOptions.viewportItems(s),a.updateLoading(),t._lastPageIndex=t.pageIndex(),t._isDelayChanged=r,r||Dg(t,e,o)};class qz{constructor(e,i){this._controller=e,this._dataOptions=i,this._pageIndex=this._lastPageIndex=i.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){var o,i=this._dataOptions.pageSize(),r=this._dataOptions.pageCount(),n=this._controller.isVirtualMode(),a=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(i&&(n||a)&&s>=0){var d=this._controller.viewportSize();if(d&&e+d>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var u=s%i;(o=r-1)>0&&u>0&&u<d&&o--}else o=r;else{o=Math.floor(e/i);var c=r-1;o=Math.max(o,0),o=Math.min(o,c)}return this.pageIndex(o),this.load()}}pageIndex(e){var i=this._controller.isVirtualMode(),r=this._controller.isAppendMode();return!1!==this.option(Ub)&&(i||r)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){var i=Tg(this);return i<0&&(i=void 0!==e?e:this.pageIndex()),i}endPageIndex(){var e=Yb(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var i,e=this._dataOptions,r=this._controller.isVirtualMode(),n=this._controller.isAppendMode();if(!1!==this.option(Ub)&&(r||n)){var a=(t=>{var e=-1,i=Tg(t),r=t._dataOptions;return i<0?e=t._pageIndex:t._cache[t._pageIndex-i]?i>=0&&t._controller.viewportSize()>=0&&(i>0&&(Yb(t)+1===r.pageCount()&&t._cache.length<Ag(t)+1||t._pageIndex===i&&Ag(t,!0))&&(e=i-1),e<0&&i+t._cache.length<=t._pageIndex+Ag(t)&&(e=i+t._cache.length)):e=t._pageIndex,t._loadingPageIndexes[e]&&(e=-1),e})(this);if(a>=0){var s=((t,e)=>{var i=t._dataOptions;if(e===t.pageIndex()||!i.isLoading()&&e<i.pageCount()||!i.hasKnownLastPage()&&e===i.pageCount())return i.pageIndex(e),t._loadingPageIndexes[e]=!0,(0,Y.gx)(i.load()).always(()=>{t._loadingPageIndexes[e]=!1})})(this,a);s&&(i=new Y.BH,s.done(()=>{var o=this._delayDeferred;o?o.done(i.resolve).fail(i.reject):i.resolve()}).fail(i.reject),e.updateLoading())}}else i=e.load();return!i&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),i||(new Y.BH).resolve()}loadIfNeed(){var e=this._controller.isVirtualMode(),i=this._controller.isAppendMode();if((e||i)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var r=this._controller.getViewportPosition();r>0?this._controller._setViewportPositionCore(r):this.load()}}handleDataChanged(e,i){var a,s,r=this._dataOptions,n=this._cache.length,o=this._controller.isVirtualMode(),d=this._controller.isAppendMode();if(i&&i.changes)Dg(this,e,i);else if(!1!==this.option(Ub)&&(o||d)){var u=Tg(this);if(u>=0&&(o&&u+this._cache.length!==r.pageIndex()&&u-1!==r.pageIndex()&&(n=0,this._cache=[]),d))if(0===r.pageIndex())this._cache=[];else if(r.pageIndex()<Yb(this))return void Dg(this,e,{changeType:"append",items:[]});var f,c={pageIndex:r.pageIndex(),itemsLength:r.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max(Ag(this)+(this.option("scrolling.preloadEnabled")?1:0),2):qI(this,e,{isDelayed:!0}),u===r.pageIndex()+1?(s&&(f=this._cache.pop()),a="prepend",this._cache.unshift(c)):(s&&(f=this._cache.shift()),a="append",this._cache.push(c));var g=o&&0===n&&YI(this);jI(this,e,this._cache.length>1?a:void 0,g,f),this._delayDeferred=this.load().done(()=>{qI(this,e)&&this.load()})}else jI(this,e,i)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){var i=0,r=this._controller.isVirtualMode();return!e&&r?this._cache.forEach(n=>{i+=n.itemsCount}):i=this._dataOptions.itemsCount(),i}virtualItemsCount(){var e=Tg(this);e<0&&(e=this._dataOptions.pageIndex());var i=e*this._dataOptions.pageSize(),r=this._cache.length*this._dataOptions.pageSize();return{begin:i,end:Math.max(0,this._dataOptions.totalItemsCount()-r-i)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var XI="virtual",Rg="scrolling.legacyMode",QI=t=>t.option("scrolling.mode")===XI||t._isVirtual;function JI(t,e,i){var r,n=[],a=[],s=[];function o(f){var g=f.element?f.$element():f,m=js.Z.offset(g);return m?f.scrollTop()-(m.top-t.offset().top):t.offset().top}var f,g,d={on(f,g,m){f.on("scroll",m)},off(f,g,m){f.off("scroll",m)}};function u(f){var P,g="#document"===f.get(0).nodeName,m=f.get(0).nodeType===(0,qe.Jj)().Node.ELEMENT_NODE,y=f.data("dxScrollable"),w=d;if(y||(y=g&&(0,C.Z)((0,qe.Jj)())||m&&"auto"===f.css("overflowY")&&f,w=Z.Z,y)){var I=(P=y,function(){var $=P.scrollTop()-o(P);e($=$>0?$:0)});w.on(y,"scroll",I),a.push(P=>{var $=o(y);P-$>=0&&y[y.scrollTo?"scrollTo":"scrollTop"](P+$)}),n.push(y),s.push(()=>{w.off(y,"scroll",I)})}}for(r=(i=i||t).parent();r.length;void 0,r=(0,C.Z)(null!==(g=(f=r).get(0).parentNode)&&void 0!==g?g:f.get(0).host))u(r);return{scrollTo(f){(0,U.S6)(a,(g,m)=>{m(f)})},dispose(){(0,U.S6)(s,(f,g)=>{g()})}}}var qb=en.Z.inherit(function(){var t={ctor(e,i,r){this._dataOptions=i,this.component=e,this._viewportSize=!1===e.option(Rg)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=r,this.positionChanged=(0,fi.Z)(),this._dataLoader=new qz(this,this._dataOptions)},getItemSizes(){return this._itemSizes},option(){return this.component.option.apply(this.component,arguments)},isVirtual(){return this._isVirtual},virtualItemsCount(){if(QI(this)){var e=this._dataOptions,i=e.totalItemsCount();if(!1===this.option(Rg)&&-1!==i){var r=this.getViewportParams(),n=e.loadedOffset(),a=e.loadedItemCount(),s=Math.max(r.skip,n),o=Math.min(r.take,a);return{begin:s,end:Math.max(i-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}},getScrollingTimeout(){var e,i=this.option("scrolling.renderAsync"),r=0;return(0,v.$K)(i)?i&&(r=null!==(e=this.option("scrolling.timeout"))&&void 0!==e?e:0):(r=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(r=this.option("scrolling.minTimeout")||0),r},setViewportPosition(e){var i=new Y.BH,r=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),r>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),i.resolve()},r):(this._setViewportPositionCore(e),i.resolve()),i.promise()},getViewportPosition(){return this._position},getItemIndexByPosition(e,i,r){e=e??this._position;for(var n=this.getItemSize(),a=0,s=0,o=Object.keys(this._itemSizes).concat(-1),d=0;d<o.length&&a<e;d++){var u=parseInt(o[d]),c=(e-a)/n;if(u<0||s+c<u){s+=c,this._sizeRatio<1&&(0,v.$K)(i)&&(s=i+r/this._viewportItemSize);break}a+=(c=u-s)*n,s+=c;var f=this._itemSizes[u];s+=(a+=f)<e?1:(e-a+f)/f}return Math.round(50*s)/50},isScrollingBack(){return this._isScrollingBack},_setViewportPositionCore(e){var i=this._position||0;this._position=e,i!==this._position&&(this._isScrollingBack=this._position<i);var r=this.getItemIndexByPosition(),n=this.setViewportItemIndex(r);return this.positionChanged.fire(),n},setContentItemSizes(e){var i=this.virtualItemsCount();if(this._contentSize=e.reduce((a,s)=>a+s,0),i){e.forEach((a,s)=>{this._itemSizes[i.begin+s]=a});var r=(i.begin+i.end+this.itemsCount())*this._viewportItemSize,n=ye.getContentHeightLimit(pi.Z);this._sizeRatio=r>n?n/r:1}},getItemSize(){return this._viewportItemSize*this._sizeRatio},getItemOffset(e,i){var r=this.virtualItemsCount(),n=e;if(!r)return 0;var a=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{n&&(i?o>=s-e:o<e)&&(a+=this._itemSizes[o],n--)}),Math.floor(a+n*this._viewportItemSize*this._sizeRatio)},getContentOffset(e){var i="end"===e,r=this.virtualItemsCount();return r?this.getItemOffset(i?r.end:r.begin,i):0},getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0},getViewportItemIndex(){return this._viewportItemIndex},setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(Rg))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)},viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize},viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize},viewportHeight(e,i){var r=i??this._position,n=this.getItemIndexByPosition(r),a=this.getItemIndexByPosition(r+e,n,e);this.viewportSize(Math.ceil(a-n)),!(0,v.$K)(i)&&this._viewportItemIndex!==n&&this._setViewportPositionCore(r)},reset(e){this._dataLoader.reset(),e||(this._itemSizes={})},subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||JI(e,i=>{this.viewportItemSize()&&this.setViewportPosition(i)})},dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null},scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)},isVirtualMode(){return QI(this)},isAppendMode(){return(t=>"infinite"===t.option("scrolling.mode")&&!t._isVirtual)(this)},getViewportParams(){var e,i=this.option("scrolling.mode")===XI,r=this._dataOptions.totalItemsCount(),a=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>r?r:this._viewportItemIndex,s=this._viewportSize+a,o=this.option("scrolling.prerenderedRowChunkSize")||1,d=this.isScrollingBack(),u=null!==(e=this.option("scrolling.prerenderedRowCount"))&&void 0!==e?e:1,f=d?0:u,g=Math.floor(Math.max(0,a-(d?u:0))/o)*o,m=Math.ceil((s+f-g)/o)*o;if(i){var y=Math.max(0,r-g);m=Math.min(m,y)}return{skip:g,take:m}},itemsCount(){return this.option(Rg)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}};return["pageIndex","beginPageIndex","endPageIndex","pageSize","load","loadIfNeed","handleDataChanged","getDelayDeferred"].forEach(e=>{t[e]=function(){return this._dataLoader[e].apply(this._dataLoader,arguments)}}),t}()),eT="bottom-load-panel",tT="dx-freespace-row",Og="dx-virtual-row",vt="scrolling.legacyMode",jb="paging.pageIndex",Tr=function(t){return"virtual"===t.option("scrolling.mode")},Ta=function(t){return"infinite"===t.option("scrolling.mode")},Da=function(t){return Tr(t)||Ta(t)},rT=function(t,e,i,r){for(var n=0;n<e+1;n++){var a=t[i?t.length-1-n:n];a&&!r(a,n===e,i)&&e++}return e},Bg=function(t,e){return"data"===t.rowType&&!t.isNewRow||"group"===t.rowType&&e.isGroupItemCountable(t.data)},nH=function(){var t=function(i){var r=i._virtualScrollController.beginPageIndex(-1);Tr(i)&&(r<0||i.viewportSize()>=0&&i.getViewportItemIndex()>=0&&(r*i.pageSize()>i.getViewportItemIndex()||r*i.pageSize()+i.itemsCount()<i.getViewportItemIndex()+i.viewportSize())&&i._dataSource.isLoading()?i._isLoading||(i._isLoading=!0,i.loadingChanged.fire(!0)):i._isLoading&&(i._isLoading=!1,i.loadingChanged.fire(!1)))},e={init(){this.callBase.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new qb(this.component,this._getVirtualScrollDataOptions())},_getVirtualScrollDataOptions(){var i=this;return{pageSize:()=>i.pageSize(),totalItemsCount:()=>i.totalItemsCount(),hasKnownLastPage:()=>i.hasKnownLastPage(),pageIndex:r=>i._dataSource.pageIndex(r),isLoading:()=>i._dataSource.isLoading()&&!i.isCustomLoading(),pageCount:()=>i.pageCount(),load:()=>i._dataSource.load(),updateLoading(){t(i)},itemsCount:()=>i.itemsCount(!0),items:()=>i._dataSource.items(),viewportItems:r=>(r&&(i._items=r),i._items),onChanged(r){i.changed.fire(r)},changingDuration:()=>i.isLoading()?300:i._renderTime||0}},_handleLoadingChanged(i){!1!==this.option(vt)?((!Tr(this)||this._isLoadingAll)&&(this._isLoading=i,this.callBase.apply(this,arguments)),this._startLoadTime=i?new Date:void 0):this.callBase.apply(this,arguments)},_handleLoadError(){!1!==this.option(vt)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),this.callBase.apply(this,arguments)},_handleDataChanged(i){if(!1===this.option(vt))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void this.callBase.apply(this,arguments);var r=this.callBase.bind(this);this._virtualScrollController.handleDataChanged(r,i)},_customizeRemoteOperations(i,r){var n=!1===this.option(vt),a=this.option("scrolling.renderAsync");(0,v.$K)(a)||(a=this._renderTime>=this.option("scrolling.renderingThreshold")),(Tr(this)||Ta(this)&&n)&&!r.reload&&(r.skip||n)&&!a&&(i.delay=void 0),this.callBase.apply(this,arguments)},items(){return this._items},_dataSourceTotalCount(i){return!1===this.option(vt)&&Tr(this)&&!i?this._totalCount:this.callBase()},itemsCount(i){return i||!1===this.option(vt)?this.callBase():this._virtualScrollController.itemsCount()},load(i){return!1===this.option(vt)||i?this.callBase(i):this._virtualScrollController.load()},isLoading(){return!1===this.option(vt)?this._dataSource.isLoading():this._isLoading},isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded},resetPagesCache(i){i||this._virtualScrollController.reset(!0),this.callBase.apply(this,arguments)},_changeRowExpandCore(){var i=this.callBase.apply(this,arguments);return!1===this.option(vt)||(this.resetPagesCache(),t(this)),i},reload(){this._dataSource.pageIndex(this.pageIndex());var i=this._virtualScrollController;if(!1!==this.option(vt)&&i){var r=new Y.BH;return this.callBase.apply(this,arguments).done(n=>{var a=i.getDelayDeferred();a?a.done(r.resolve).fail(r.reject):r.resolve(n)}).fail(r.reject),r}return this.callBase.apply(this,arguments)},refresh(i,r){if(!1!==this.option(vt)){var{storeLoadOptions:n}=i,a=this._dataSource;r.reload?(this._virtualScrollController.reset(),a.items().length=0,this._isLoaded=!1,t(this),this._isLoaded=!0,Ta(this)?(this.pageIndex(0),a.pageIndex(0),n.pageIndex=0,i.pageIndex=0,n.skip=0):(a.pageIndex(this.pageIndex()),a.paginate()&&(i.pageIndex=this.pageIndex(),n.skip=this.pageIndex()*this.pageSize()))):Ta(this)&&n.skip&&this._totalCountCorrection<0&&(n.skip+=this._totalCountCorrection)}return this.callBase.apply(this,arguments)},dispose(){this._virtualScrollController.dispose(),this.callBase.apply(this,arguments)},loadPageCount(i){if(!(0,v.$K)(i))return this._loadPageCount;this._loadPageCount=i},_handleDataLoading(i){var r=this.loadPageCount(),n=this.pageSize(),a=!1===this.option(vt),{storeLoadOptions:s}=i,o=(0,v.$K)(s.take);i.loadPageCount=r,!i.isCustomLoading&&a&&o&&r>1&&n>0&&(s.take=r*n),this.callBase.apply(this,arguments)},_loadPageSize(){return this.callBase.apply(this,arguments)*this.loadPageCount()}};return["beginPageIndex","endPageIndex","pageIndex"].forEach(i=>{e[i]=function(){if(!1===this.option(vt)){var r=this._dataSource;return r.pageIndex.apply(r,arguments)}var n=this._virtualScrollController;return n[i].apply(n,arguments)}}),["virtualItemsCount","getContentOffset","getVirtualContentSize","setContentItemSizes","setViewportPosition","getViewportItemIndex","setViewportItemIndex","getItemIndexByPosition","viewportSize","viewportItemSize","getItemSize","getItemSizes","loadIfNeed"].forEach(i=>{e[i]=function(){var r=this._virtualScrollController;return r[i].apply(r,arguments)}}),e}(),aH=function(){var t=function(e,i){var r=e.toArray().map(s=>(0,C.Z)(s).parent(".".concat(i)).get(0)).filter(s=>s);r.length&&(e=(0,C.Z)(r));for(var n=i===tT?e.length-1:e.length,a=0;a<n;a++)e.eq(a).remove()};return{init(){var e,i=this.getController("data");this.callBase(),i.pageChanged.add(r=>{var n=this._scrollTop;this.scrollToPage(r??i.pageIndex()),!1===this.option(vt)&&this._scrollTop===n&&i.updateViewport()}),i.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=i.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()},_scrollToCurrentPageOnResize(){var e=this.getController("data");if(e.pageIndex()>0){var i=()=>{this.resizeCompleted.remove(i),this.scrollToPage(e.pageIndex())};this.resizeCompleted.add(i)}},scrollToPage(e){var n,i=this._dataController,r=i?i.pageSize():0;if(Tr(this)||Ta(this)){var a=i.getItemSize(),s=i.getItemSizes(),o=e*r;for(var d in n=o*a,s)parseInt(d)<o&&(n+=s[d]-a)}else n=0;this.scrollTo({y:n,x:this._scrollLeft})},renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),this.callBase.apply(this,arguments)},_renderCore(e){var i=new Date,r=this.callBase.apply(this,arguments),n=this._dataController._dataSource;if(n&&e){var a=e.items?e.items.length:20,s=this._dataController.viewportSize()||20;n._renderTime=ye.isVirtualRowRendering(this)&&a>0&&!1!==this.option(vt)?(new Date-i)*s/a:new Date-i}return r},_getRowElements(e){var i=this.callBase(e);return i&&i.not(".".concat(Og))},_removeRowsElements(e,i,r){var n=this._getRowElements(e).toArray();n="append"===r?n.slice(0,i):n.slice(-i);var a=this.getController("errorHandling");n.map(s=>{var o=(0,C.Z)(s);a&&a.removeErrorRow(o.next()),o.remove()})},_updateContent(e,i){var r,n=this._findContentElement(),a=i&&i.changeType,s=(0,Y.BH)(),o=n.children().first();return"append"===a||"prepend"===a?this.waitAsyncTemplates().done(()=>{var d=this._getBodies(e);1===d.length?this._getBodies(o)["append"===a?"append":"prepend"](d.children()):d["append"===a?"appendTo":"prependTo"](o),e.remove(),r=this._getFreeSpaceRowElements(o),t(r,tT),i.removeCount&&this._removeRowsElements(o,i.removeCount,a),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):this.callBase.apply(this,arguments).done(()=>{"update"===a&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})},_addVirtualRow(e,i,r,n){if(n){var a=this._createEmptyRow(Og,i,n);a=this._wrapRowIfNeed(e,a),this._appendEmptyRow(e,a,r)}},_updateContentItemSizes(){var e=this._getRowHeights(),i=this._correctRowHeights(e);this._dataController.setContentItemSizes(i)},_updateViewportSize(e,i){(0,v.$K)(e)||(e=(0,Q.zp)(this._hasHeight?this.element():(0,qe.Jj)())),this._dataController.viewportHeight(e,i)},_getRowHeights(){var e,i,r=null===(i=null===(e=this.getController("editing"))||void 0===e?void 0:e.isPopupEditMode)||void 0===i?void 0:i.call(e),n=this._getRowElements(this._tableElement).toArray();return r&&(n=n.filter(a=>!(0,C.Z)(a).hasClass("dx-row-inserted"))),n.map(a=>(0,ti.l)(a).height)},_correctRowHeights(e){for(var i=this._dataController,r=i._dataSource,n=[],a=i.getVisibleRows(),s=0,o=!0,d=-1,u=0;u<e.length;u++){var c=a[u];(0,v.$K)(c)&&(!1===this.option(vt)?(d>=0&&d!==c.loadIndex&&(n.push(s),s=0),d=c.loadIndex):Bg(c,r)&&(o?o=!1:(n.push(s),s=0)),s+=e[u])}return s>0&&n.push(s),n},_updateContentPosition(e){var i=this._dataController;if(i.viewportItemSize(this._rowHeight||20),Tr(this)||ye.isVirtualRowRendering(this)){e||this._updateContentItemSizes();var n=i.getContentOffset("begin"),a=i.getContentOffset("end"),s=this.getTableElements(),o=s.children("tbody").children(".".concat(Og));t(o,Og),s.each((d,u)=>{var c=d>0,f=this._isFixedTableRendering;this._isFixedTableRendering=c,this._addVirtualRow((0,C.Z)(u),c,"top",n),this._addVirtualRow((0,C.Z)(u),c,"bottom",a),this._isFixedTableRendering=f})}},_isTableLinesDisplaysCorrect(e){return e.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")},_isColumnElementsEqual(e,i){var r=e.length===i.length;return r&&(0,U.S6)(e,(n,a)=>{if(a.style.width!==i[n].style.width)return r=!1}),r},_getCellClasses(e){var i=[],{cssClass:r}=e,n="expand"===e.command;return r&&i.push(r),n&&i.push(this.addWidgetPrefix("group-space")),i},_findBottomLoadPanel(e){var i=e||this.element(),r=i&&i.find(".".concat(this.addWidgetPrefix(eT)));if(r&&r.length)return r},_updateBottomLoading(){var e=Tr(this),i=Ta(this),r=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(e||i),n=this._findContentElement(),a=this._findBottomLoadPanel(n);r?a||(0,C.Z)("<div>").addClass(this.addWidgetPrefix(eT)).append(this._createComponent((0,C.Z)("<div>"),Vr.Z).$element()).appendTo(n):a&&a.remove()},_handleScroll(e){var i=!0===this.option(vt);(this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition)&&(this._hasHeight||!i&&0===e.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(Tr(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option(vt)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),this.callBase.apply(this,arguments)},_needUpdateRowHeight(e){return this.callBase.apply(this,arguments)||e>0&&Ta(this)&&!ye.isVirtualRowRendering(this)},_updateRowHeight(){if(this.callBase.apply(this,arguments),this._rowHeight){this._updateContentPosition();var e=(0,Q.zp)(this._hasHeight?this.element():(0,qe.Jj)()),i=this._dataController;!1===this.option(vt)?(this._updateViewportSize(e),i.updateViewport()):i.viewportSize(Math.ceil(e/this._rowHeight))}},updateFreeSpaceRowHeight(){var e=this.callBase.apply(this,arguments);return e&&this._updateContentPosition(),e},setLoading(e,i){var r=this._dataController,n=r.pageIndex()>0&&r.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option(vt)&&e&&r.isViewportChanging()||(n&&(e=!1),this.callBase.call(this,e,i))},_resizeCore(){var e=this,i=e.element();e.callBase(),e.component.$element()&&!e._windowScroll&&(0,wa.al)(i)&&(e._windowScroll=JI(i,r=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(r)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(vt)&&e.loadIfNeed()},loadIfNeed(){var e,i=this._dataController;null===(e=i?.loadIfNeed)||void 0===e||e.call(i)},_restoreErrorRow(){!1===this.option(vt)&&this.getController("errorHandling")?.removeErrorRow(),this.callBase.apply(this,arguments)},dispose(){clearTimeout(this._scrollTimeoutID),this.callBase()}}}(),nT={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{dataSourceAdapter:nH,controllers:{data:function(){var t={_refreshDataSource(){var e=this.callBase.apply(this,arguments)||(new Y.BH).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e},_loadDataSource(){var e;if(this._rowsScrollController&&Da(this)){var{loadPageCount:i}=(0,v.$K)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:void 0};i>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(i))}return this.callBase.apply(this,arguments)},getRowPageSize(){var e=this.option("scrolling.rowPageSize"),i=this.pageSize();return i&&i<e?i:e},reload(){var e=this._rowsScrollController||this._dataSource,i=e&&e.getItemIndexByPosition(),r=this.callBase.apply(this,arguments);return r&&r.done(()=>{var n;if(Tr(this)||ye.isVirtualRowRendering(this)){var a=this.getRowIndexOffset(),s=Math.floor(i)-a,{component:o}=this,d=o.getScrollable&&o.getScrollable(),u=this.dataSource().operationTypes().sorting;if(d&&!u&&s>=0){var c=o.getRowElement(s),f=c&&c[0]&&(0,C.Z)(c[0]),g=f&&f.position().top,m=pi.Z.chrome&&Number(null!==(n=pi.Z.version)&&void 0!==n?n:0)>=91;g>(pi.Z.mozilla||m?1:0)&&(g=Math.round(g+(0,Q.zp)(f)*(i%1)),d.scrollTo({y:g}))}}})},initVirtualRows(){var e=ye.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(vt)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var i=!Tr(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(i*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(vt)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new qb(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var r;if(!1===this.option(vt))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(r=this._dataSource)||void 0===r||r.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(vt)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(vt)&&this._rowsScrollController.load()},isViewportChanging(){return this._viewportChanging},_getRowsScrollDataOptions(){var e=this,i=function(r){return Bg(r,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var r;return Tr(e)&&(null===(r=e._dataSource)||void 0===r?void 0:r.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount:()=>Da(e)?e.totalItemsCount():!1===e.option(vt)?e._itemCount:e._items.filter(i).length,hasKnownLastPage:()=>!1!==e.option(vt)||e.hasKnownLastPage(),pageIndex:r=>(void 0!==r&&(e._rowPageIndex=r),e._rowPageIndex),isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(r=>{(r=r||{}).changeType=r.changeType||"refresh",r.items=r.items||e._visibleItems,e._visibleItems.forEach((n,a)=>{n.rowIndex=a}),e._fireChanged(r)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(r,n,a)=>rT(r,n,a,(s,o,d)=>s.isNewRow?o&&!d:o&&d?!s.isNewRow:i(s)),items(r){var n=e._items;if(e.option(vt)){var s=e.dataSource()?.virtualItemsCount(),o=s?s.begin:0,d=e.getRowPageSize(),u=e._rowPageIndex*d-o,c=d;if(u<0)return[];u&&(u=this.correctCount(n,u),n=n.slice(u)),c&&(c=this.correctCount(n,c),n=n.slice(0,c))}return r?n.filter(i):n},viewportItems:r=>(r&&!1!==e.option(vt)&&(e._visibleItems=r),e._visibleItems),onChanged(){},changingDuration(){var r=e.dataSource();return r?.isLoading()&&!1!==e.option(vt)?300:r?._renderTime||0}}},_updateItemsCore(e){var i=this.getRowIndexDelta();if(this.callBase.apply(this,arguments),!1===this.option(vt)&&ye.isVirtualRowRendering(this))"update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0);else{var r=this._rowsScrollController;if(r){var n=this._visibleItems,a="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;a||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,a&&r.reset(!0),r.load()):("update"===e.changeType?e.rowIndices.forEach((s,o)=>{var d=e.changeTypes[o],u=e.items[o];"update"===d?n[s]=u:"insert"===d?n.splice(s,0,u):"remove"===d&&n.splice(s,1)}):(n.forEach((s,o)=>{n[o]=this._items[o+i]||n[o]}),e.items=n),function(t){t.forEach((e,i)=>{e.rowIndex=i})}(n))}}},_updateLoadViewportParams(){var e=this._rowsScrollController.getViewportParams(),i=this.pageSize();if(e&&!Da(this)&&i>0){var r=this.pageIndex()*i;e.skip+=r}this._loadViewportParams=e},_processItems(){var e,i=this.callBase.apply(this,arguments);if(!1===this.option(vt)){var a,s,o,r=this._dataSource,n=null!==(e=r?.lastLoadOptions().skip)&&void 0!==e?e:0,d=!1,u=[];i.forEach(c=>{var{rowType:f}=c,g=Bg(c,r),m="group"===f&&(a||g||"group"!==s&&n>0),y="data"===f&&g&&(a||"group"!==s);!c.isNewRow&&(0,v.$K)(a)&&(m||y)&&(!o||d)&&n++,(m||y)&&(d=!0),c.isNewRow?u.push(c):(u.forEach(I=>{I.loadIndex=n}),u=[]),c.loadIndex=n,a=g,s=f,o=c.isNewRow}),u.forEach(c=>{c.loadIndex=n})}return i},_afterProcessItems(e){if(this._itemCount=e.filter(s=>Bg(s,this._dataSource)).length,(0,v.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var i=e;if(this._allItems=e,e.length){var{skipForCurrentPage:r}=this.getLoadPageParams(!0),n=e[0].loadIndex+r,{take:a}=this._loadViewportParams;i=e.filter(s=>s.loadIndex>=n&&(s.loadIndex<n+a||s.isNewRow&&s.loadIndex===n&&0===a))}return i}return this.callBase.apply(this,arguments)},_applyChange(e){var i=this,{items:r}=e,{changeType:n}=e,{removeCount:a}=e;switch(a&&(a=rT(i._items,a,"prepend"===n,(o,d)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(i._dataSource.isGroupItemCountable(o.data)||d)),e.removeCount=a),n){case"prepend":i._items.unshift.apply(i._items,r),a&&i._items.splice(-a);break;case"append":i._items.push.apply(i._items,r),a&&i._items.splice(0,a);break;default:i.callBase(e)}},items(e){return e?this._allItems||this._items:this._visibleItems||this._items},getRowIndexDelta(){var e=0;if(this.option(vt)){var i=this._visibleItems;i&&i[0]&&(e=this._items.indexOf(i[0]))}return e<0?0:e},getRowIndexOffset(e){var i,r=0,n=this.dataSource(),a=this._rowsScrollController,s=!1===this.option(vt),o=Da(this);if(a&&!e)if(s&&(0,v.$K)(this._loadViewportParams)){var{skipForCurrentPage:d,pageIndex:u}=this.getLoadPageParams(!0),c=this.items(!0);if(r=o?u*this.pageSize():0,c.length){var f=c[0].loadIndex;r+=c.filter(g=>g.loadIndex<f+d).length}}else r=a.beginPageIndex()*a.pageSize();else o&&s&&n?r=null!==(i=n.lastLoadOptions().skip)&&void 0!==i?i:0:Tr(this)&&n&&(r=n.beginPageIndex()*n.pageSize());return r},getDataIndex(){return!1===this.option(vt)?this.getRowIndexOffset(!0):this.callBase.apply(this,arguments)},viewportSize(){var e=this._rowsScrollController,i=this._dataSource,r=e?.viewportSize.apply(e,arguments);return!1===this.option(vt)?r:i?.viewportSize.apply(i,arguments)},viewportHeight(e,i){var r;null===(r=this._rowsScrollController)||void 0===r||r.viewportHeight(e,i)},viewportItemSize(){var e=this._rowsScrollController,i=this._dataSource,r=e?.viewportItemSize.apply(e,arguments);return!1===this.option(vt)?r:i?.viewportItemSize.apply(i,arguments)},setViewportPosition(){var e=this._rowsScrollController,i=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):i?.setViewportPosition.apply(i,arguments)},setContentItemSizes(e){var r=this._dataSource,n=this._rowsScrollController?.setContentItemSizes(e);return!1===this.option(vt)?n:r?.setContentItemSizes(e)},getPreloadedRowCount(){var e=this.option("scrolling.preloadedRowCount"),i=this.option("scrolling.preloadEnabled");if((0,v.$K)(e))return e;var r=this.viewportSize();return i?2*r:r},getLoadPageParams(e){var i,r,n=this.pageSize(),a=this._loadViewportParams,s=null===(i=this._dataSource)||void 0===i?void 0:i.lastLoadOptions(),o=s?.pageIndex||0,d=s?.take||0,u=this._rowsScrollController.isScrollingBack(),c=u?this.getPreloadedRowCount():0,f=u?0:this.getPreloadedRowCount(),g=(null===(r=this._dataSource)||void 0===r?void 0:r.totalCountCorrection())||0,m=Math.max(0,a.skip-c),y=e?o:Math.floor(n?m/n:0),I=a.skip-y*n,se=Math.ceil(n?(e?d:a.take+I+f-g)/n:0);return{pageIndex:y,loadPageCount:Math.max(1,se),skipForCurrentPage:Math.max(0,I)}},_updateVisiblePageIndex(e){if(this._rowsScrollController){if((0,v.$K)(e))return this._silentOption(jb,e),void this.pageChanged.fire();var i=this._rowsScrollController.getViewportItemIndex(),r=Math.floor(i/this.pageSize());this.pageIndex()!==r&&(this._silentOption(jb,r),this.updateItems({changeType:"pageIndex"}))}},_getChangedLoadParams(){var e=this.getLoadPageParams(!0),{pageIndex:i,loadPageCount:r}=this.getLoadPageParams(),n=this._pageIndexIsValid(i),a=null;return!this._isLoading&&n&&(i!==e.pageIndex||r!==e.loadPageCount)&&(a={pageIndex:i,loadPageCount:r}),a},_pageIndexIsValid(e){var i=!0;return(Ta(this)&&this.hasKnownLastPage()||Tr(this))&&(i=e*this.pageSize()<this.totalItemsCount()),i},_loadItems(e,i){var r,n,a=Da(this),s=this._dataSource,o=this._getChangedLoadParams(),d=null!==(r=s?.loadPageCount())&&void 0!==r?r:0,u=this.pageSize()*d,c=null!==(n=s?.pageIndex())&&void 0!==n?n:0,f=o?.pageIndex===c,g=Ta(this)&&this.totalItemsCount()<u,m="repaint"===this.option("editing.refreshMode"),w=!1;if(!s||a&&e&&(m&&i||o?.pageIndex>c||f&&g))return w;if(a&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),a&&o){w=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var I=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var P=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(I||P)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return w},loadViewport(e){var i,r,{checkLoadedParamsOnly:n,checkLoading:a,viewportIsNotFilled:s}=e??{};if((Da(this)||ye.isVirtualRowRendering(this))&&(this._updateLoadViewportParams(),!(this._loadItems(a,!s)||this._isLoading&&a||n))){var c=!(null!==(r=null===(i=this.getController("editing"))||void 0===i?void 0:i.getChanges())&&void 0!==r&&r.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:c,cancelEmptyChanges:!0})}},updateViewport(){var e,i,r=this.viewportSize(),n=this.items().length,a=r>n,s=null!==(i=null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)&&void 0!==i?i:0,d=this._rowsScrollController?.getViewportParams().take;(a||s<d)&&!this._isPaging&&n&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:a})},loadIfNeed(){if(!1!==this.option(vt)){var e=this._rowsScrollController;e&&e.loadIfNeed();var i=this._dataSource;return i&&i.loadIfNeed()}},getItemSize(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var i=this._dataSource;return i&&i.getItemSize.apply(i,arguments)},getItemSizes(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var i=this._dataSource;return i&&i.getItemSizes.apply(i,arguments)},getContentOffset(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var i=this._dataSource;return i&&i.getContentOffset.apply(i,arguments)},refresh(e){var i=this._dataSource;return i&&e&&e.load&&Ta(this)&&i.resetCurrentTotalCount(),this.callBase.apply(this,arguments)},dispose(){var e=this._rowsScrollController;e&&e.dispose(),this.callBase.apply(this,arguments)},topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip},bottomItemIndex(){var e=this._loadViewportParams;return e&&e.skip+e.take},virtualItemsCount(){var e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);var i=this._dataSource;return i?.virtualItemsCount.apply(i,arguments)},pageIndex(e){var i,r=Da(this),n=this._rowsScrollController;return!1===this.option(vt)&&r&&n&&void 0===e?null!==(i=this.option(jb))&&void 0!==i?i:0:this.callBase.apply(this,arguments)},_fireChanged(e){this.callBase.apply(this,arguments);var{operationTypes:i}=e;if(!1===this.option(vt)&&Da(this)&&i){var{fullReload:r,pageIndex:n}=i;e.isDataChanged&&!r&&n&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}},_getPagingOptionValue(e){var i=this.callBase.apply(this,arguments);return!1===this.option(vt)&&Da(this)&&(i=this[e]()),i},isEmpty(){return!1===this.option(vt)?!this.items(!0).length:this.callBase(this,arguments)},isLastPageLoaded(){var e=!1;if(!1===this.option(vt)&&Da(this)){var{pageIndex:i,loadPageCount:r}=this.getLoadPageParams(!0);e=i+r>=this.pageCount()}else e=this.callBase.apply(this,arguments);return e},reset(){this._itemCount=0,this._allItems=null,this.callBase.apply(this,arguments)},_applyFilter(){var e;null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),this.callBase.apply(this,arguments)}};return ye.proxyMethod(t,"getVirtualContentSize"),ye.proxyMethod(t,"setViewportItemIndex"),t}(),resizing:{_updateMasterDataGridCore(t){return(0,Y.gx)(this.callBase.apply(this,arguments)).done(e=>{var i=Tr(t)&&!1===t.option(vt);!e&&i&&t.getScrollable()&&t.updateDimensions()})},hasResizeTimeout(){return!!this._resizeTimeout},resize(){var e,{callBase:t}=this;if(Tr(this)||ye.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var i=new Date-this._lastTime,r=this.option("scrolling.updateTimeout");this._lastTime&&i<r?(e=new Y.BH,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,t.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},r),this._lastTime=new Date):(e=t.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=t.apply(this);return e},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._resizeTimeout)}}},views:{rowsView:aH}}};l.registerModule("virtualScrolling",nT),lc.extend(nT.extenders.dataSourceAdapter);var aT=(t,e)=>{var n,i=(0,C.Z)((0,qe.Jj)()),{top:r}=t.offset();if((0,v.kE)(e)){if(e<r)return r-e;n=(0,Q.fA)(i)-e+i.scrollTop()}else{var a=r-i.scrollTop(),s=(0,Q.fA)(i)-a-(0,Q.zp)(t);n=Math.max(a,s)}return.9*n},oH=k(920);const Xb=class uH extends bx{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:ne.ZT})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var e=this._dataAdapter.getNodeByKey(this.option("_parentKey"));e&&this._renderItems(this._getChildNodes(e)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,C.Z)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,O.l)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu(e){this._actions.onShowing({rootItem:(0,gt.u)(e),submenu:this}),super._drawSubmenu(e),this._actions.onShown({rootItem:(0,gt.u)(e),submenu:this})}_hideSubmenu(e){this._actions.onHiding({cancel:!0,rootItem:(0,gt.u)(e),submenu:this}),super._hideSubmenu(e),this._actions.onHidden({rootItem:(0,gt.u)(e),submenu:this})}_showDelimiter(e){if(this.$contentDelimiter){var i=this._itemContainer().children(".".concat("dx-submenu")).eq(0),r=this.option("position").of.find(".dx-context-menu-container-border"),n={of:i,precise:!0},a=e.position,s=a.v.location,o=a.h.location,d=r.offset(),u=Math.round(d.left),c=Math.round(d.top),f=(0,Q.dz)(r),g=(0,Q.Cr)(r),m=(0,Q.dz)(i),y=(0,Q.Cr)(i);this.$contentDelimiter.css("display","block"),(0,Q.cl)(this.$contentDelimiter,this._isMenuHorizontal()?f<m?f:m:3),(0,Q.QQ)(this.$contentDelimiter,this._isMenuHorizontal()?3:g<y?g:y),this._isMenuHorizontal()?s>c?Math.round(o)===u?(n.offset="0 -2.5",n.at=n.my="left top"):(n.offset="0 -2.5",n.at=n.my="right top"):((0,Q.QQ)(this.$contentDelimiter,5),Math.round(o)===u?(n.offset="0 5",n.at=n.my="left bottom"):(n.offset="0 5",n.at=n.my="right bottom")):o>u?Math.round(s)===c?(n.offset="-2.5 0",n.at=n.my="left top"):(n.offset="-2.5 0",n.at=n.my="left bottom"):Math.round(s)===c?(n.offset="2.5 0",n.at=n.my="right top"):(n.offset="2.5 0",n.at=n.my="right bottom"),js.Z.setup(this.$contentDelimiter,n)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var ml="dx-menu",hH=ml+"-vertical",sT=ml+"-horizontal",Qb=ml+"-item",oT=ml+"-items-container",Jb=Qb+"-expanded",kg="dx-context-menu",ey=kg+"-container-border",lT="dx-state-hover",Mg=ml+"-adaptive-mode",dT=ml+"-hamburger-button",gH=Mg+"-overlay-wrapper",Fc="showSubmenu",su="nextItem",no="prevItem",yH={show:50,hide:300},uT=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class hT extends dx{_getDefaultOptions(){return(0,O.l)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,O.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var e=super._itemElements(),i=this._submenuItemElements();return e.add(i)}_submenuItemElements(){var e=[],i=".".concat(Qb),r=this._submenus.length&&this._submenus[0];return r&&r.itemsContainer()&&(e=r.itemsContainer().find(i)),e}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(e){var s,d,i=this._getAvailableItems(),r=this._isMenuHorizontal(),n=this._getActiveItem(!0);switch(e){case"up":s=r?Fc:this._getItemsNavigationOperation(no),d=this._getKeyboardNavigationAction(s,r?n:i)();break;case"down":s=r?Fc:this._getItemsNavigationOperation(su),d=this._getKeyboardNavigationAction(s,r?n:i)();break;case"right":s=r?this._getItemsNavigationOperation(su):Fc,d=this._getKeyboardNavigationAction(s,r?i:n)();break;case"left":s=r?this._getItemsNavigationOperation(no):Fc,d=this._getKeyboardNavigationAction(s,r?i:n)();break;default:return super._moveFocus(e)}d&&0!==d.length&&this.option("focusedElement",(0,gt.u)(d))}_getItemsNavigationOperation(e){var i=e;return this.option("rtlEnabled")&&(i=e===no?su:no),i}_getKeyboardNavigationAction(e,i){var r=ne.ZT;switch(e){case Fc:i.hasClass("dx-state-disabled")||(r=this._showSubmenu.bind(this,i));break;case su:r=this._nextItem.bind(this,i);break;case no:r=this._prevItem.bind(this,i)}return r}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var e=this.$element().find("ul").first().children("li").children(".".concat(Qb));this._menuItemsWidth=this._getSummaryItemsWidth(e,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var e=(0,Q.Y_)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,U.S6)(uT,(e,i)=>{this._actions[i]=this._createActionByOption(i)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass(ml),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new Er.Z((0,C.Z)("<div>").addClass(dT),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(e){(0,v.PO)(e)&&(e=!this._overlay.option("visible")),this._overlay.option("visible",e),this._toggleHamburgerActiveState(e)}_toggleHamburgerActiveState(e){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){var i=this.$element().find(".".concat(sT)),r=this.$element().find(".".concat(Mg));e?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(e)),i.toggle(!e),r.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var i=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>aT(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:r=>!(0,C.Z)(r.target).closest(".".concat(dT)).length,position:{collision:"flipfit",at:"bottom "+i,my:"top "+i,of:this._hamburger.$element()}}}_getTreeViewOptions(){var e={};return(0,U.S6)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(i,r)=>{e[r]=this.option(r)}),(0,U.S6)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(i,r)=>{e[r]=n=>{this._actions[r](n)}}),(0,O.l)(e,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:i=>{this._overlay.repaint(),this._actions.onSubmenuShown(i)},onItemCollapsed:i=>{this._overlay.repaint(),this._actions.onSubmenuHidden(i)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,C.Z)("<div>").addClass(Mg);var e=this._renderHamburgerButton();this._treeView=this._createComponent((0,C.Z)("<div>"),sg.Z,this._getTreeViewOptions()),this._overlay=this._createComponent((0,C.Z)("<div>"),ts.Z,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(Mg).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(gH),this._$adaptiveContainer.append(e),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(e){var i=this.option("showFirstSubmenuMode").delay;return(0,v.$K)(i)?(0,v.Kn)(i)?i[e]:i:yH[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){var e=(0,C.Z)("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?sT:hH),super._renderContainer(e)}_renderSubmenuItems(e,i){var r=this._createSubmenu(e,i);return this._submenus.push(r),this._renderBorderElement(i),r}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,i){var r=(0,C.Z)("<div>").addClass(kg).appendTo(i),n=this._getChildNodes(e),a=this._createComponent(r,Xb,(0,O.l)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:n,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(i)}));return this._attachSubmenuHandlers(i,a),a}_getSubmenuOptions(){var e=(0,C.Z)("<div>"),i=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:e,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:r=>{r.component.option("visible")&&this.option("focusedElement",r.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:i?null:this._moveMainMenuFocus.bind(this,no),onLeftLastItem:i?null:this._moveMainMenuFocus.bind(this,su),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,i?no:null),onExpandLastSubmenu:i?this._moveMainMenuFocus.bind(this,su):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var e=this.option("showFirstSubmenuMode");return(0,v.Kn)(e)?e.name:e}_moveMainMenuFocus(e){var i=this._getAvailableItems(),r=i.length,n=i.filter(".".concat(Jb)).eq(0),a=i.index(n);this._hideSubmenu(this._visibleSubmenu),(a+=e===no?-1:1)>=r?a=0:a<0&&(a=r-1);var s=i.eq(a);this.option("focusedElement",(0,gt.u)(s))}_nestedItemOnSelectionChangedHandler(e){var i=e.addedItems.length&&e.addedItems[0],r=Xb.getInstance(e.element);(0,this._actions.onSelectionChanged)(e),i&&this._clearSelectionInSubmenus(i[0],r),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",i)}_clearSelectionInSubmenus(e,i){var r=!arguments.length;(0,U.S6)(this._submenus,(n,a)=>{var s=a._itemContainer(),o=!s.is(i&&i._itemContainer()),d=s.find(".".concat(this._selectedItemClass()));if(o&&d.length||r){d.removeClass(this._selectedItemClass());var u=this._getItemData(d);u&&(u.selected=!1),a._clearSelectedItems()}})}_clearRootSelection(){var e=this.$element().find(".".concat(oT)).first().children().children().filter(".".concat(this._selectedItemClass()));e.length&&(this._getItemData(e).selected=!1,e.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers(e,i){var n=i.getOverlayContent().find(".".concat("dx-submenu")),a=(0,be.V4)(oH.u,this.NAME+"_submenu");i.option({onShowing:this._submenuOnShowingHandler.bind(this,e,i),onShown:this._submenuOnShownHandler.bind(this,e,i),onHiding:this._submenuOnHidingHandler.bind(this,e,i),onHidden:this._submenuOnHiddenHandler.bind(this,e,i)}),(0,U.S6)(n,(s,o)=>{Z.Z.off(o,a),Z.Z.on(o,a,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,i){var r=e.children(".".concat(ey));this._actions.onSubmenuShowing({rootItem:(0,gt.u)(e),submenu:i}),r.show(),e.addClass(Jb)}_submenuOnShownHandler(e,i){this._actions.onSubmenuShown({rootItem:(0,gt.u)(e),submenu:i})}_submenuOnHidingHandler(e,i,r){var n=e.children(".".concat(ey)),a=r;a.rootItem=(0,gt.u)(e),a.submenu=i,this._actions.onSubmenuHiding(a),(r=a).cancel||(this._visibleSubmenu===i&&(this._visibleSubmenu=null),n.hide(),e.removeClass(Jb))}_submenuOnHiddenHandler(e,i){this._actions.onSubmenuHidden({rootItem:(0,gt.u)(e),submenu:i})}_submenuMouseLeaveHandler(e,i){var r=(0,C.Z)(i.relatedTarget).parents(".".concat(kg))[0],n=this._getSubmenuByRootElement(e).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&r!==n&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var e=(0,C.Z)(this._visibleSubmenu.$element().context).hasClass(lT),i=this._visibleSubmenu.getOverlayContent().find(".".concat(lT)).length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!i&&!e&&this._visibleSubmenu.hide()}}_getSubmenuByRootElement(e){if(!e)return!1;var i=e.children(".".concat(kg));return i.length&&Xb.getInstance(i)}getSubmenuPosition(e){var i=this._isMenuHorizontal(),r=this.option("submenuDirection").toLowerCase(),n=this.option("rtlEnabled"),a={collision:"flip",of:e,precise:!0};switch(r){case"leftortop":a.at="left top",a.my=i?"left bottom":"right top";break;case"rightorbottom":a.at=i?"left bottom":"right top",a.my="left top";break;default:i?(a.at=n?"right bottom":"left bottom",a.my=n?"right top":"left top"):(a.at=n?"left top":"right top",a.my=n?"right top":"left top")}return a}_renderBorderElement(e){(0,C.Z)("<div>").appendTo(e).addClass(ey).hide()}_itemPointerDownHandler(e){(0,C.Z)(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(e)}_hoverStartHandler(e){var i=(0,be.V4)(qt.Z.move,this.NAME),r=this._getItemElementByEventArgs(e),n=this._dataAdapter.getNodeByItem(this._getItemData(r)),a=(0,v.$K)(e.buttons)&&1===e.buttons||!(0,v.$K)(e.buttons)&&1===e.which;if(!this._isItemDisabled(r)){if(Z.Z.off(r,i),!this._hasChildren(n))return void(this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")));if("onHover"===this._getShowFirstSubmenuMode()&&!a){var s=this._getSubmenuByElement(r);this._clearTimeouts(),s.isOverlayVisible()||(Z.Z.on(r,i,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(e){var i=this._getItemElementByEventArgs(e),r=(0,C.Z)(e.relatedTarget);super._hoverEndHandler(e),this._clearTimeouts(),!this._isItemDisabled(i)&&(r.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!r.hasClass(oT)&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(e){var i=this._getSubmenuByElement(e);this._visibleSubmenu!==i&&this._hideVisibleSubmenu(),i&&(this._clearTimeouts(),this.focus(),i.show(),this.option("focusedElement",i.option("focusedElement"))),this._visibleSubmenu=i,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(!e.pointers||!e.pointers.length){var i=(0,C.Z)(e.currentTarget);(0,v.$K)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{var r=this._getSubmenuByElement(i);r&&!r.isOverlayVisible()&&this._showSubmenu(i)},this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,i){var r=this._getSubmenuByRootElement(e);if(r)return r;i=i||this._getItemData(e);var n=this._dataAdapter.getNodeByItem(i);return this._hasChildren(n)&&this._renderSubmenuItems(n,e)}_updateSubmenuVisibilityOnClick(e){var i=e.args.length&&e.args[0];if(i&&!this._disabledGetter(i.itemData)){var r=(0,C.Z)(i.itemElement),n=this._getSubmenuByElement(r,i.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===n)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}if(n&&!n.isOverlayVisible())return void this._showSubmenu(r)}}_optionChanged(e){if(uT.indexOf(e.name)>=0)this._initActions();else switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e.name,e.value);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(e.name,e.value),this._overlay.option(e.name,e.value)),super._optionChanged(e),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!e.value),super._optionChanged(e);break;default:this._isAdaptivityEnabled()&&(e.name===e.fullName||"items"===e.name)&&this._treeView.option(e.fullName,e.value),super._optionChanged(e)}}_changeSubmenusOption(e,i){(0,U.S6)(this._submenus,(r,n)=>{n.option(e,i)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}}(0,kt.Z)("dxMenu",hT);const cT=hT;var ty={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},pT={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},Vc="filter-row",Lg="filter-range-overlay",Pg="filter-range-start",_T="dx-menu",gT="dx-editor-with-menu",vl="dx-editor-container",iy="dx-editor-cell",ry="dx-highlight-outline",mT="dx-focused",ny="dx-filter-range-content",ay="dx-filter-modified",Nc="input:not([type='hidden'])",TH=["date","datetime","number"],DH=le.Z.format("dxDataGrid-ariaSearchBox");function ou(t){return"onClick"===t.option("filterRow.applyFilter")}var sy=function(t){var e=t&&t.children(),i=e&&e.data("dxComponents"),r=i&&i.length&&e.data(i[0]);return r instanceof Xd.Z?r:null},AH=function(){var t=function(a,s){var o="",d="",u=e(a,s),c=ye.getFormatOptionsByColumn(s,"filterRow");return Array.isArray(u)?(o=ye.formatValue(u[0],c),""!==(d=ye.formatValue(u[1],c))&&(o+=" - ".concat(d))):(0,v.$K)(u)&&(o=ye.formatValue(u,c)),o};function e(a,s){if(s)return ou(a)&&void 0!==s.bufferedFilterValue?s.bufferedFilterValue:s.filterValue}var i=function(a,s){if(s)return ou(a)&&void 0!==s.bufferedSelectedFilterOperation?s.bufferedSelectedFilterOperation:s.selectedFilterOperation},r=function(a,s,o){var g,m,d=a._columnsController.columnOption(s),u=e(a,d),c=o.closest(".".concat(a.addWidgetPrefix(Lg))).length,f=o.hasClass(a.addWidgetPrefix(Pg));return u&&Array.isArray(u)&&"between"===i(a,d)?f?u[0]:u[1]:c||(g=u,(m=d)&&TH.includes(m.dataType)&&Array.isArray(g)||void 0===g)?null:u};return{_updateEditorValue(a,s){var o=sy(s);o&&o.option("value",r(this,a.index,s))},_columnOptionChanged(a){var o,d,u,c,{optionNames:s}=a;if(ye.checkChanges(s,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==a.columnIndex){var f=this._columnsController.getVisibleIndex(a.columnIndex),g=this._columnsController.columnOption(a.columnIndex);if(d=(o=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(Vc))).index(),f)||(0,C.Z)()).find(".".concat(vl)).first(),s.filterValue||s.bufferedFilterValue){this._updateEditorValue(g,d);var m=o.find(".".concat(this.addWidgetPrefix(Lg))).data("dxOverlay");m&&(u=m.$content().find(".".concat(vl)),this._updateEditorValue(g,u.first()),this._updateEditorValue(g,u.last())),(!m||!m.option("visible"))&&this._updateFilterRangeContent(o,t(this,g))}(s.selectedFilterOperation||s.bufferedSelectedFilterOperation)&&f>=0&&g&&(c=o.find(".".concat(_T))).length&&(this._updateFilterOperationChooser(c,g,d),"between"===i(this,g)?this._renderFilterRangeContent(o,g):d.find(".".concat(ny)).length&&(this._renderEditor(d,this._getEditorOptions(d,g)),this._hideFilterRange()))}else this.callBase(a)},_renderCore(){return this._filterRangeOverlayInstance=null,this.callBase.apply(this,arguments)},_resizeCore(){this.callBase.apply(this,arguments),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.repaint()},isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))},isVisible(){return this.callBase()||this.isFilterRowVisible()},init(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_initFilterRangeOverlay(a,s){var o=this,d={},u=a.find(".dx-editor-container"),c=o.addWidgetPrefix(Lg),f=(0,C.Z)("<div>").addClass(c).appendTo(a);return o._createComponent(f,ts.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:c},animation:!1,position:{my:"top",at:"top",of:u.length&&u||a,offset:"0 -1"},contentTemplate(g){var m,y=(0,C.Z)("<div>").addClass("".concat(vl," ").concat(o.addWidgetPrefix(Pg))).appendTo(g);return s=o._columnsController.columnOption(s.index),(m=o._getEditorOptions(y,s)).sharedData=d,o._renderEditor(y,m),Z.Z.on(y.find(Nc),"keydown",w=>{var I=a.find("[tabindex]").not(w.target).first();"tab"===(0,be.EV)(w)&&w.shiftKey&&(w.preventDefault(),o._hideFilterRange(),I.length||(I=a.prev().find("[tabindex]").last()),Z.Z.trigger(I,"focus"))}),y=(0,C.Z)("<div>").addClass("".concat(vl," ").concat(o.addWidgetPrefix("filter-range-end"))).appendTo(g),(m=o._getEditorOptions(y,s)).sharedData=d,o._renderEditor(y,m),Z.Z.on(y.find(Nc),"keydown",w=>{"tab"===(0,be.EV)(w)&&!w.shiftKey&&(w.preventDefault(),o._hideFilterRange(),Z.Z.trigger(a.next().find("[tabindex]").first(),"focus"))}),(0,C.Z)(g).addClass(o.getWidgetContainerClass())},onShown(g){var m=g.component.$content().find(".".concat(vl)).first();Z.Z.trigger(m.find(Nc),"focus")},onHidden(){s=o._columnsController.columnOption(s.index),a.find(".".concat(_T)).parent().addClass(gT),"between"===i(o,s)&&(o._updateFilterRangeContent(a,t(o,s)),o.component.updateDimensions())}})},_updateFilterRangeOverlay(a){var s=this._filterRangeOverlayInstance;s&&s.option(a)},_showFilterRange(a,s){var o=a.children(".".concat(this.addWidgetPrefix(Lg))),d=o.length&&o.data("dxOverlay");!d&&s&&(d=this._initFilterRangeOverlay(a,s)),d.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=d,this._updateFilterRangeOverlay({width:(0,Q.Y_)(a,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())},_hideFilterRange(){var a=this._filterRangeOverlayInstance;a&&a.hide()},getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance},_createRow(a){var s=this.callBase(a);return"filter"===a.rowType&&(s.addClass(this.addWidgetPrefix(Vc)),this.option("useLegacyKeyboardNavigation")||Z.Z.on(s,"keydown",o=>Ah("filterRow",this,o))),s},_getRows(){var a=this.callBase();return this.isFilterRowVisible()&&a.push({rowType:"filter"}),a},_renderFilterCell(a,s){var{column:o}=s,d=(0,C.Z)(a);this.component.option("showColumnHeaders")&&this.setAria("describedby",o.headerId,d),this.setAria("label",le.Z.format("dxDataGrid-ariaFilterCell"),d),d.addClass(iy);var u=(0,C.Z)("<div>").appendTo(d),c=(0,C.Z)("<div>").addClass(vl).appendTo(u);if("between"===i(this,o))this._renderFilterRangeContent(d,o);else{var f=this._getEditorOptions(c,o);this._renderEditor(c,f)}var{alignment:g}=o;g&&"center"!==g&&d.find(Nc).first().css("textAlign",o.alignment),o.filterOperations&&o.filterOperations.length&&this._renderFilterOperationChooser(u,o,c)},_renderCellContent(a,s){var o=this,{column:d}=s;if("filter"===s.rowType)if(d.command)a.html("&nbsp;");else if(d.allowFiltering)return void o.renderTemplate(a,o._renderFilterCell.bind(o),s).done(()=>{o._updateCell(a,s)});this.callBase.apply(this,arguments)},_getEditorOptions(a,s){var o=this,d={editorOptions:{inputAttr:o._getFilterInputAccessibilityAttributes(s)}},u=(0,O.l)(d,s,{value:r(o,s.index,a),parentType:"filterRow",showAllText:o.option("filterRow.showAllText"),updateValueTimeout:"onClick"===o.option("filterRow.applyFilter")?0:700,width:null,setValue(c,f){!function(a,s){var o=""===s.value?null:s.value,d=s.container,u=a._columnsController.columnOption(s.column.index),c=r(a,u.index,d);if((0,v.$K)(c)||(0,v.$K)(o)){a._applyFilterViewController.setHighLight(d,c!==o);var f=ou(a)?"bufferedFilterValue":"filterValue",g=function(w,I,P,$){if("between"===i(w,P)){var se=e(w,P);return $.hasClass(w.addWidgetPrefix(Pg))?[I,Array.isArray(se)?se[1]:void 0]:[Array.isArray(se)?se[0]:se,I]}return I}(a,o,u,d),m="between"===i(a,u),y=s.notFireEvent||m&&Array.isArray(g)&&g.includes(void 0);a._columnsController.columnOption(u.index,f,g,y)}}(o,{column:s,value:c,container:a,notFireEvent:f})}});return"between"===i(o,s)&&(u.placeholder=a.hasClass(o.addWidgetPrefix(Pg))?o.option("filterRow.betweenStartText"):o.option("filterRow.betweenEndText")),u},_getFilterInputAccessibilityAttributes(a){var s=le.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":s,"aria-describedby":a.headerId}:{"aria-label":s}},_renderEditor(a,s){a.empty();var o=(0,C.Z)("<div>").appendTo(a),d=this.getController("editorFactory"),u=this.getController("data").dataSource(),c=this.getController("applyFilter");if(s.lookup&&this.option("syncLookupFilterValues")){c.setCurrentColumnForFiltering(s);var f=this.getController("data").getCombinedFilter();c.setCurrentColumnForFiltering(null);var g=ye.getWrappedLookupDataSource(s,u,f),m=(0,je.Z)((0,je.Z)({},s),{lookup:(0,je.Z)((0,je.Z)({},s.lookup),{dataSource:g})});return d.createEditor(o,m)}return d.createEditor(o,s)},_renderFilterRangeContent(a,s){var o=this,d=a.find(".".concat(vl)).first();d.empty();var u=(0,C.Z)("<div>").addClass(ny).attr("tabindex",this.option("tabIndex"));Z.Z.on(u,"focusin",()=>{o._showFilterRange(a,s)}),u.appendTo(d),o._updateFilterRangeContent(a,t(o,s))},_updateFilterRangeContent(a,s){var o=a.find(".".concat(ny));o.length&&(""===s?o.html("&nbsp;"):o.text(s))},_updateFilterOperationChooser(a,s,o){var u,d=this,c=function(){var f=cT.getInstance(a);f&&f.option("focusedElement",null),u&&d._focusEditor(o)};d._createComponent(a,cT,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(d.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(s.filterOperations&&s.filterOperations.length),icon:ty[i(d,s)||"default"],selectable:!1,items:d._getFilterOperationMenuItems(s)}],onItemRendered:f=>{var{itemElement:g}=f;this.setAria("label",DH,(0,C.Z)(g))},onItemClick(f){var g=f.itemData.name,m=i(d,s),y=!1,w=ou(d),I={};if(!(f.itemData.items||g&&g===m)){if(g?(I[w?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=g,("between"===g||"between"===m)&&(y="between"===g,I[w?"bufferedFilterValue":"filterValue"]=null)):(I[w?"bufferedFilterValue":"filterValue"]=null,I[w?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=s.defaultSelectedFilterOperation||null),d._columnsController.columnOption(s.index,I),d._applyFilterViewController.setHighLight(o,!0),!g){var P=sy(o);P&&"dxDateBox"===P.NAME&&!P.option("isValid")&&(P.reset(),P.option("isValid",!0))}y?d._showFilterRange(o.closest(".".concat(iy)),s):d._focusEditor(o)}},onSubmenuShowing(){u=d._isEditorFocused(o),d.getController("editorFactory").loseFocus()},onSubmenuHiding(){Z.Z.trigger(a,"blur"),c()},onContentReady(f){Z.Z.on(a,"blur",()=>{f.component._hideSubmenuAfterTimeout(),c()})},rtlEnabled:d.option("rtlEnabled")})},_isEditorFocused:a=>a.hasClass(mT)||a.parents(".".concat(mT)).length,_focusEditor(a){this.getController("editorFactory").focus(a),Z.Z.trigger(a.find(Nc),"focus")},_renderFilterOperationChooser(a,s,o){var d;this.option("filterRow.showOperationChooser")&&(a.addClass(gT),d=(0,C.Z)("<div>").prependTo(a),this._updateFilterOperationChooser(d,s,o))},_getFilterOperationMenuItems(a){var s=this,o=[{}],d=s.option("filterRow"),u=d&&d.operationDescriptions||{};if(a.filterOperations&&a.filterOperations.length){var c=a.filterOperations.filter(f=>(0,v.$K)(pT[f]));(o=(0,U.UI)(c,f=>{var g=pT[f];return{name:f,selected:(i(s,a)||a.defaultFilterOperation)===f,text:u[g],icon:ty[f]}})).push({name:null,text:d&&d.resetOperationText,icon:ty.default})}return o},_handleDataChanged(a){var s,o,d;this.callBase.apply(this,arguments),(null!==(s=a.operationTypes)&&void 0!==s&&s.filtering||null!==(o=a.operationTypes)&&void 0!==o&&o.fullReload)&&this.updateLookupDataSource(null===(d=a.operationTypes)||void 0===d?void 0:d.filtering)},updateLookupDataSource(a){if(this.option("syncLookupFilterValues")&&this.element()){var s=this._columnsController.getVisibleColumns(),o=this._dataController.dataSource(),d=this._applyFilterViewController,u=this.element().find(".".concat(this.addWidgetPrefix(Vc))).index();-1!==u&&s.forEach((c,f)=>{if(c.lookup&&c.calculateCellValue===c.defaultCalculateCellValue){var g=this._getCellElement(u,f),m=sy(g?.find(".dx-editor-container"));if(m){d.setCurrentColumnForFiltering(c);var y=this._dataController.getCombinedFilter()||null;d.setCurrentColumnForFiltering(null);var w=m.option("dataSource");if(!a||!(0,ne.bY)(w.__dataGridSourceFilter,y)){var P=ye.getWrappedLookupDataSource(c,o,y);m.option("dataSource",P)}}}})}},optionChanged(a){switch(a.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),a.handled=!0;break;case"syncLookupFilterValues":a.value?this.updateLookupDataSource():this.render(),a.handled=!0;break;default:this.callBase(a)}}}}(),RH={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var t=[this.callBase()],e=this._columnsController.getVisibleColumns(null,!0),i=this.getController("applyFilter");return(0,U.S6)(e,function(){var r,n=(null===(r=i.getCurrentColumnForFiltering())||void 0===r?void 0:r.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,v.$K)(this.filterValue)&&!n){var a=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");t.push(a)}}),ye.combineFilters(t)}},OH=zt.ViewController.inherit({_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight(t,e){ou(this)&&(t&&t.toggleClass(ry,e)&&t.closest(".".concat(iy)).toggleClass(ay,e),this._getHeaderPanel().enableApplyButton(e))},applyFilter(){var t=this.getController("columns"),e=t.getColumns();t.beginUpdate();for(var i=0;i<e.length;i++){var r=e[i];void 0!==r.bufferedFilterValue&&(t.columnOption(i,"filterValue",r.bufferedFilterValue),r.bufferedFilterValue=void 0),void 0!==r.bufferedSelectedFilterOperation&&(t.columnOption(i,"selectedFilterOperation",r.bufferedSelectedFilterOperation),r.bufferedSelectedFilterOperation=void 0)}t.endUpdate(),this.removeHighLights()},removeHighLights(){if(ou(this)){var t=this.getView("columnHeadersView").element();t.find(".".concat(this.addWidgetPrefix(Vc)," .").concat(ry)).removeClass(ry),t.find(".".concat(this.addWidgetPrefix(Vc)," .").concat(ay)).removeClass(ay),this._getHeaderPanel().enableApplyButton(!1)}},setCurrentColumnForFiltering(t){this._currentColumn=t},getCurrentColumnForFiltering(){return this._currentColumn}}),BH={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:le.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:le.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:le.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:le.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:le.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:le.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:le.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:le.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:le.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:le.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:le.Z.format("dxDataGrid-filterRowOperationContains"),notContains:le.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:le.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:le.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:le.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:le.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:le.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:le.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:OH},extenders:{controllers:{data:RH,columnsResizer:{_startResizing(){if(this.callBase.apply(this,arguments),this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();if(t){var e=t.$element().closest("td").index();(e===this._targetPoint.columnIndex||e===this._targetPoint.columnIndex+1)&&t.$content().hide()}}},_endResizing(){var t;if(this.isResizing()){var e=this._columnHeadersView.getFilterRangeOverlayInstance();e&&(t=e.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,Q.Y_)(t,!0)+1}),e.$content().show())}this.callBase.apply(this,arguments)}},editing:{updateFieldValue(t){return t.column.lookup&&(this._needUpdateLookupDataSource=!0),this.callBase.apply(this,arguments)},_afterSaveEditData(t){var e;return this._needUpdateLookupDataSource&&!t&&(null===(e=this.getView("columnHeadersView"))||void 0===e||e.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)},_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)}}},views:{columnHeadersView:AH,headerPanel:{_getToolbarItems(){var t=this.callBase();return this._prepareFilterItem(t).concat(t)},_prepareFilterItem(){var t=this,e=[];if(t._isShowApplyFilterButton()){var i=t.option("filterRow.applyFilterText"),n=!t._columnsController.getColumns().filter(s=>void 0!==s.bufferedFilterValue).length;e.push({widget:"dxButton",options:{icon:"apply-filter",disabled:n,onClick:function(){t._applyFilterViewController.applyFilter()},hint:i,text:i,onInitialized:function(s){(0,C.Z)(s.element).addClass(t._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return e},_isShowApplyFilterButton(){var t=this.option("filterRow");return t&&t.visible&&"onClick"===t.applyFilter},init(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton(t){this.setToolbarItemDisabled("applyFilterButton",!t)},isVisible(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged(t){"filterRow"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}}}}};l.registerModule("filterRow",BH),fb.Z.setEditorClass(wS.Z);var vT="dx-header-filter",CT="dx-header-filter-menu";function bT(t){t=t||[];for(var e=0;e<t.length;e++)t[e].selected=!1,bT(t[e].items)}function yT(t,e){if(!t.component.option("searchValue")){var i=(0,C.Z)(t.element).find(".dx-list-select-all-checkbox").data("dxCheckBox");i&&e&&e.length&&i.option("value",void 0)}}function MH(t,e){var{headerFilter:i}=e;return i&&(0,v.$K)(i.allowSearch)?i.allowSearch:t.option("headerFilter.allowSearch")}function LH(t,e,i){if(e^i){if(t.selected=!0,i&&t.items)for(var r=0;r<t.items.length;r++)if(!t.items[r].selected){t.selected=void 0;break}}else(i||t.selected)&&(t.selected=!1,bT(t.items))}var PH=zt.View.inherit({getPopupContainer(){return this._popupContainer},getListContainer(){return this._listContainer},applyHeaderFilter(t){var e=this.getListContainer(),i=e.option("searchValue"),n=[];i||t.isFilterBuilder||!e.$element().find(".dx-checkbox").eq(0).hasClass("dx-checkbox-checked")?"tree"===t.type&&(t.filterType&&(t.filterType="include"),function a(s,o,d){(0,U.S6)(o,(u,c)=>{if(void 0!==c.selected&&!!c.selected^d){var f=e._getNode(c),m=e._hasChildren(f)&&c.items&&c.items.some(y=>y.selected);if(!i||!m)return void s.push(c.value)}c.items&&c.items.length&&a(s,c.items,d)})}(n,e.option("items"),!1),t.filterValues=n):("tree"===t.type&&(t.filterType="exclude"),Array.isArray(t.filterValues)&&(t.filterValues=[])),t.filterValues&&!t.filterValues.length&&(t.filterValues=null),t.apply(),this.hideHeaderFilterMenu()},showHeaderFilterMenu(t,e){if(e){this._initializePopupContainer(e);var i=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(t,e),i.show()}},hideHeaderFilterMenu(){var t=this.getPopupContainer();t&&t.hide()},updatePopup(t,e){var i=this.option("showColumnLines"),r="right"===e.alignment^!i?"left":"right";this._popupContainer.setAria({role:"dialog",label:le.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(r," top"),at:"".concat(r," bottom"),of:t,collision:"fit fit"}))},_getSearchExpr(t){var{lookup:e}=t,{useDefaultSearchExpr:i}=t,r=t.headerFilter&&t.headerFilter.dataSource;if(i||(0,v.$K)(r)&&!(0,v.mf)(r))return"text";if(e)return e.displayExpr||"this";if(t.dataSource){var{group:n}=t.dataSource;if(Array.isArray(n)&&n.length>0)return n[0].selector;if((0,v.mf)(n)&&!t.remoteFiltering)return n}return t.dataField||t.selector},_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()},_initializePopupContainer(t){var e=this,i=e.element(),r=e.option("headerFilter"),s={width:t.headerFilter&&t.headerFilter.width||r&&r.width,height:t.headerFilter&&t.headerFilter.height||r&&r.height,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:CT},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:r.texts.ok,onClick(){e.applyHeaderFilter(t)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:r.texts.cancel,onClick(){e.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(o){o.component.$content().parent().addClass("dx-dropdowneditor-overlay"),e._initializeListContainer(t),t.onShowing&&t.onShowing(o)},onShown(){e.getListContainer().focus()},onHidden:t.onHidden,onInitialized(o){var{component:d}=o;d.option("animation",d._getDefaultOptions().animation)}};(0,v.$K)(e._popupContainer)?e._popupContainer.option(s):e._popupContainer=e._createComponent(i,xa,s)},_initializeListContainer(t){var e=this,i=e._popupContainer.$content(),r={searchEnabled:MH(e,t),searchTimeout:e.option("headerFilter.searchTimeout"),searchMode:t.headerFilter&&t.headerFilter.searchMode||"",dataSource:t.dataSource,onContentReady(){e.renderCompleted.fire()},itemTemplate(a,s,o){var d=(0,C.Z)(o);return t.encodeHtml?d.text(a.text):d.html(a.text)}};function n(a){"searchValue"===a.fullName&&!t.isFilterBuilder&&!1!==e.option("headerFilter.hideSelectAllOnSearch")&&("tree"===t.type?a.component.option("showCheckBoxesMode",a.value?"normal":"selectAll"):a.component.option("selectionMode",a.value?"multiple":"all"))}e._listContainer="tree"===t.type?e._createComponent((0,C.Z)("<div>").appendTo(i),sg.Z,(0,O.l)(r,{showCheckBoxesMode:t.isFilterBuilder?"normal":"selectAll",onOptionChanged:n,keyExpr:"id"})):e._createComponent((0,C.Z)("<div>").appendTo(i),Sc,(0,O.l)(r,{searchExpr:e._getSearchExpr(t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:t.isFilterBuilder?"multiple":"all",onOptionChanged:n,onSelectionChanged(a){var s=a.component.option("items"),o=a.component.option("selectedItems");if(!a.component._selectedItemsUpdating&&!a.component.option("searchValue")&&!t.isFilterBuilder){var d=t.filterValues||[];0===o.length&&s.length&&(d.length<=1||"exclude"===t.filterType&&d.length===s.length-1)?(t.filterType="include",t.filterValues=[]):o.length===s.length&&(t.filterType="exclude",t.filterValues=[])}(0,U.S6)(s,(c,f)=>{var g=ye.getIndexByKey(f,o,null)>=0;if(!!f.selected!==g){f.selected=g,t.filterValues=t.filterValues||[];var y=ye.getIndexByKey(f.value,t.filterValues,null);y>=0&&t.filterValues.splice(y,1),g^"exclude"===t.filterType&&t.filterValues.push(f.value)}}),yT(a,t.filterValues)},onContentReady(a){var{component:s}=a,o=s.option("items"),d=[];(0,U.S6)(o,function(){this.selected&&d.push(this)}),s._selectedItemsUpdating=!0,s.option("selectedItems",d),s._selectedItemsUpdating=!1,yT(a,t.filterValues)}}))},_renderCore(){this.element().addClass(CT)}}),Fg=function(t){return(0,v.$K)(t.allowHeaderFiltering)?t.allowHeaderFiltering:t.allowFiltering},wT={_applyColumnState(t){var e,{rootElement:i}=t,{column:r}=t;if("headerFilter"===t.name){if(i.find(".".concat(vT)).remove(),Fg(r)){e=this.callBase(t).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(r)),this.option("useLegacyKeyboardNavigation")||e.attr("tabindex",this.option("tabindex")||0);var n=le.Z.format("dxDataGrid-headerFilterIndicatorLabel",r.caption);e.attr("aria-label",n),e.attr("aria-haspopup","dialog"),e.attr("role","button")}return e}return this.callBase(t)},_isHeaderFilterEmpty:t=>!t.filterValues||!t.filterValues.length,_getIndicatorClassName(t){return"headerFilter"===t?vT:this.callBase(t)},_renderIndicator(t){var e=t.container,i=t.indicator;if("headerFilter"===t.name){var r=this.option("rtlEnabled");if(e.children().length&&(!r&&"right"===t.columnAlignment||r&&"left"===t.columnAlignment))return void e.prepend(i)}this.callBase(t)},optionChanged(t){if("headerFilter"===t.name){var e="columnHeadersView"===this.name;this._invalidate(e,e),t.handled=!0}else this.callBase(t)}},FH={month:t=>ct.getMonthNames()[t-1],quarter:t=>ct.format(new Date(2e3,3*t-1),"quarter")};function xT(t,e,i){return e=e||[],i=i||[],t.forEach(r=>{if((0,v.$K)(r.key)){if(e.push(1===e.length?r.key-1:r.key),r.items)xT(r.items,e,i);else{var a=new Date(Date.UTC.apply(Date,e));i.push(a)}e.pop()}else i.push(null)}),i}function VH(t,e){var i=xT(t),r=(0,hl.Z)(i),n=ye.getHeaderFilterGroupParameters((0,je.Z)((0,je.Z)({},e),{calculateCellValue:a=>a}));return wc.Z.queryByOptions(r,{group:n}).toArray()}var zH=zt.ViewController.inherit({init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")},_updateSelectedState(t,e){for(var i=t.length,r="exclude"===e.filterType;i--;){var n=t[i];"items"in t[i]&&this._updateSelectedState(t[i].items,e),LH(n,ye.getIndexByKey(t[i].value,e.filterValues,null)>-1,r)}},_normalizeGroupItem(t,e,i){var r,n,{path:a}=i,{valueSelector:s}=i,{displaySelector:o}=i,{column:d}=i;return s&&o?(r=s(t),n=o(t)):n=r=t.key,t=(0,v.Kn)(t)?(0,O.l)({},t):{},a.push(r),t.value=1===a.length?a[0]:a.join("/"),t.text=this.getHeaderItemText(n,d,e,i.headerFilterOptions),t},getHeaderItemText(t,e,i,r){var a,s,o,d,u,n=ye.formatValue(t,(a=t,o=i,d=is.getGroupInterval(s=e),u=ye.getFormatOptionsByColumn(s,"headerFilter"),d&&(u.groupInterval=d[o],ye.isDateType(s.dataType)?u.format=FH[d[o]]:"number"===s.dataType&&(u.getDisplayFormat=function(){var c={format:s.format,target:"headerFilter"},f=ye.formatValue(a,c),m=ye.formatValue(a+d[o],c);return f&&m?"".concat(f," - ").concat(m):""})),u));return n||(n=r.texts.emptyValue),n},_processGroupItems(t,e,i,r){var n,a,{column:s}=r,{lookup:o}=s,{level:d}=r;i=i||[],e=e||0,o&&(n=(0,Pt.vb)(o.displayExpr),a=(0,Pt.vb)(o.valueExpr));for(var u=0;u<t.length;u++)t[u]=this._normalizeGroupItem(t[u],e,{column:r.column,headerFilterOptions:r.headerFilterOptions,displaySelector:n,valueSelector:a,path:i}),"items"in t[u]&&(e!==d&&(0,v.$K)(t[u].value)?this._processGroupItems(t[u].items,e+1,i,r):delete t[u].items),i.pop()},getDataSource(t){var e,i=this._dataController.dataSource(),r=i?.remoteOperations().grouping,n=ye.getHeaderFilterGroupParameters(t,r),a=null===(e=t.headerFilter)||void 0===e?void 0:e.dataSource,s=this.option("headerFilter"),o=!1,d={component:this.component};if(i){if((0,v.$K)(a)&&!(0,v.mf)(a))d.dataSource=(0,Td.aN)(a);else if(t.lookup)if(o=!0,this.option("syncLookupFilterValues")){this._currentColumn=t;var u=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=ye.getWrappedLookupDataSource(t,i,u)}else d.dataSource=ye.normalizeLookupDataSource(t.lookup);else{var c=Array.isArray(n)?n.length-1:0;this._currentColumn=t;var f=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:f,group:n,useDefaultSearch:!0,load:y=>{var w=new Y.BH;return y.dataField=t.dataField||t.name,i.load(y).done(I=>{var P=r&&function NH(t){return"Z"===t?.slice(-1)||"'Z'"===t?.slice(-3)}(t.serializationFormat)&&c>3;P&&(I=VH(I,t)),m._processGroupItems(I,null,null,{level:c,column:t,headerFilterOptions:s}),w.resolve(I)}).fail(w.reject),w}}}(0,v.mf)(a)&&a.call(t,d);var g=d.dataSource.postProcess,m=this;return d.dataSource.postProcess=function(y){var w=y;return o&&(w=w.filter(I=>null!==I[t.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(w=w.slice(0)).unshift(null),m._processGroupItems(w,null,null,{level:0,column:t,headerFilterOptions:s})),w=g&&g.call(this,w)||w,m._updateSelectedState(w,t),w},d.dataSource}},getCurrentColumn(){return this._currentColumn},showHeaderFilterMenu(t,e){var i=this._columnsController,r=(0,O.l)(!0,{},this._columnsController.getColumns()[t]);if(r){var n=i.getVisibleIndex(t),a=this.getView(e?"headerPanel":"columnHeadersView"),s=s||a.getColumnElements().eq(e?r.groupIndex:n);this.showHeaderFilterMenuBase({columnElement:s,column:r,applyFilter:!0,apply(){i.columnOption(t,{filterValues:this.filterValues,filterType:this.filterType})}})}},showHeaderFilterMenuBase(t){var e=this,{column:i}=t;if(i){var r=is.getGroupInterval(i),n=e._dataController.dataSource(),a=n&&n.remoteOperations().filtering;(0,O.l)(t,i,{type:r&&r.length>1?"tree":"list",remoteFiltering:a,onShowing(s){var o=s.component.$overlayContent().dxResizable("instance");o&&o.option("onResizeEnd",d=>{var u=e.getController("columns"),c=u.columnOption(t.dataField,"headerFilter");(c=c||{}).width=d.width,c.height=d.height,u.columnOption(t.dataField,"headerFilter",c,!0)})},onHidden:()=>Dh(this)}),t.dataSource=e.getDataSource(t),t.isFilterBuilder&&(t.dataSource.filter=null,t.alignment="right"),e._headerFilterView.showHeaderFilterMenu(t.columnElement,t)}},hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}),HH=(0,O.l)({},wT,{_renderCellContent(t,e){var i,{column:r}=e;!r.command&&Fg(r)&&this.option("headerFilter.visible")&&"header"===e.rowType&&(i=this._applyColumnState({name:"headerFilter",rootElement:t,column:r,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(i,r,"headerFilter"),this.callBase.apply(this,arguments)},_subscribeToIndicatorEvent(t,e,i){"headerFilter"===i&&Z.Z.on(t,ii.u,this.createAction(r=>{r.event.stopPropagation(),Lf(t,this),this.getController("headerFilter").showHeaderFilterMenu(e.index,!1)}))},_updateIndicator(t,e,i){var r=this.callBase(t,e,i);r&&this._subscribeToIndicatorEvent(r,e,i)},_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")},_needUpdateFilterIndicators:()=>!0,_columnOptionChanged(t){var{optionNames:e}=t;ye.checkChanges(e,["filterValues","filterType"])?this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators():this.callBase(t)}}),ZH=(0,O.l)({},wT,{_createGroupPanelItem(t,e){var n,i=this,r=i.callBase.apply(i,arguments);return!e.command&&Fg(e)&&i.option("headerFilter.visible")&&(n=i._applyColumnState({name:"headerFilter",rootElement:r,column:{alignment:(0,ti.q)(i.option("rtlEnabled")),filterValues:e.filterValues,allowHeaderFiltering:!0},showColumnLines:!0}))&&Z.Z.on(n,ii.u,i.createAction(a=>{var{event:s}=a;s.stopPropagation(),i.getController("headerFilter").showHeaderFilterMenu(e.index,!0)})),r}}),$H={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var t=[this.callBase()],e=this._columnsController.getVisibleColumns(null,!0),r=this.getController("headerFilter").getCurrentColumn();return(0,U.S6)(e,(n,a)=>{var s;if((!r||r.index!==a.index)&&Fg(a)&&a.calculateFilterExpression&&Array.isArray(a.filterValues)&&a.filterValues.length){var o=[];(0,U.S6)(a.filterValues,(d,u)=>{Array.isArray(u)?s=u:(a.deserializeValue&&!ye.isDateType(a.dataType)&&"number"!==a.dataType&&(u=a.deserializeValue(u)),s=a.createFilterExpression(u,"=","headerFilter")),s&&(s.columnIndex=a.index),o.push(s)}),o=ye.combineFilters(o,"or"),t.push("exclude"===a.filterType?["!",o]:o)}}),ye.combineFilters(t)}};l.registerModule("headerFilter",{defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSearch:!1,searchTimeout:500,texts:{emptyValue:le.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:le.Z.format("dxDataGrid-headerFilterOK"),cancel:le.Z.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:zH},views:{headerFilterView:PH},extenders:{controllers:{data:$H},views:{columnHeadersView:HH,headerPanel:ZH}}});var Vg="dx-filterbuilder-range",KH=Vg+"-start",GH=Vg+"-end",UH=Vg+"-separator",ST="\u2013";function YH(t,e){var i=(0,C.Z)("<div>").addClass(KH),r=(0,C.Z)("<div>").addClass(GH),n=t.value||[],a=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};e.append(i),e.append((0,C.Z)("<span>").addClass(UH).text(ST)),e.append(r),e.addClass(Vg),this._editorFactory.createEditor.call(this,i,(0,O.l)({},t.field,t,{value:a(n),parentType:"filterBuilder",setValue:function(o){n=[o,s(n)],t.setValue(n)}})),this._editorFactory.createEditor.call(this,r,(0,O.l)({},t.field,t,{value:s(n),parentType:"filterBuilder",setValue:function(o){n=[a(n),o],t.setValue(n)}}))}function ET(t,e){return{name:"between",caption:t,icon:"range",valueSeparator:ST,dataTypes:["number","date","datetime"],editorTemplate:YH.bind(e),notForLookup:!0}}var qH={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},jH={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const IT={getIconByFilterOperation:function(t){return qH[t]},getNameByFilterOperation:function(t){return jH[t]}};var oy="string",TT="icon-none",ao="and",ly="=",XH="<>",QH={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},JH={date:"shortDate",datetime:"shortDateShortTime"},eZ=["=","<>","isblank","isnotblank"],tZ=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],DT="dx-filterbuilder-text",rZ=DT+"-part",AT=DT+"-separator",nZ=AT+"-empty";function Cl(t){return t&&t.length>1&&"!"===t[0]&&!Li(t)}function os(t){return Cl(t)?t[1]:t}function RT(t){if(Li(t))return ao;for(var e="",i=0;i<t.length;i++){var r=t[i];if(!Array.isArray(r)){if(e&&e!==r)throw new og.R0.Error("E4019");"!"!==r&&(e=r)}}return e}function bl(t){var e=os(t),i=RT(e);return i||(i=ao),e!==t&&(i="!"+i),i}function OT(t){var e=function hZ(t){return Array.isArray(t)&&t.length}(t.filterOperations)?t.filterOperations:function uZ(t){return t.lookup&&eZ||QH[t.dataType||oy]}(t);return(0,O.l)([],e)}function dy(t,e){var i=IT.getNameByFilterOperation(t);return e&&e[i]?e[i]:i}function ls(t,e){var i=t.filter(function(r){return r.name===e});return i.length?i[0]:null}function uy(t){return t.defaultFilterOperation||OT(t)[0]}function hy(t,e){var i=os(t),r=i.indexOf(e);return i.splice(r,1),1!==i.length&&i.splice(r,1),t}function BT(t){var e=cy(t),i=e?py(t):t;return e?["!",[i]]:[i]}function Ng(t,e){var i=os(e),r=bl(i);return 1===i.length?i.unshift(t):i.push(t,r),e}function zg(t,e){for(var i=0;i<e.length;i++)if(e[i].name===t||e[i].dataField.toLowerCase()===t.toLowerCase())return e[i];var r=HT(e,!0).filter(function(n){return n.dataField.toLowerCase()===t.toLowerCase()});if(r.length>0)return r[0];throw new Nt.Z.Error("E1047",t)}function so(t){return!!Array.isArray(t)&&(t.length<2||Array.isArray(t[0])||Array.isArray(t[1]))}function Li(t){return!!Array.isArray(t)&&t.length>1&&!Array.isArray(t[0])&&!Array.isArray(t[1])}function kT(t,e,i){i=i||ao;for(var r=RT(t).toLowerCase()||i,n=[],a=0;a<t.length;a++)so(t[a])?(n.push(gy(t[a],e,i)),n=_y(n,r)):Li(t[a])&&(n.push(Hg(t[a],e)),n=_y(n,r));return 0===n.length&&(n=_y(n,r)),n}function Hg(t,e){return function _Z(t,e){var i=ls(e,t[1]);return i&&i.name===t[1]}(t,e)||t.length<3&&(t[2]=t[1],t[1]=ly),t}function cy(t){return-1!==t.indexOf("not")}function py(t){return t.substring(3).toLowerCase()}function fy(t,e){var i=cy(e);return e=i?py(e):e,i?["!",t,e]:[t,e]}function _y(t,e){var i=cy(e);e=i?py(e):e,t.push(e);var r=t;return i&&(r=["!",r]),r}function gy(t,e,i){return i=i||ao,t?Li(t=(0,O.l)(!0,[],t))?fy(Hg(t,e),i):Cl(t)?["!",Li(t[1])?fy(Hg(t[1],e),i):Cl(t[1])?fy(gy(t[1],e),i):kT(t[1],e,i)]:kT(t,e,i):BT(i)}function MT(t,e,i,r){var n=zg(t[0],e),a=Hg(t,i),s=i.length&&ls(i,a[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[a[2],n,e]):n.createFilterExpression?n.createFilterExpression.apply(n,[a[2],a[1],r]):n.calculateFilterExpression?n.calculateFilterExpression.apply(n,[a[2],a[1],r]):n.defaultCalculateFilterExpression.apply(n,[a[2],a[1],r])}function lu(t,e,i,r){if(!(0,v.$K)(t))return null;if(Cl(t))return["!",lu(t[1],e,i,r)];var a=os(t);if(Li(a))return MT(a,e,i,r)||null;for(var o,s=[],d=bl(a),u=0;u<a.length;u++)so(a[u])?(o=lu(a[u],e,i,r))&&(u&&s.push(d),s.push(o)):Li(a[u])&&(o=MT(a[u],e,i,r))&&(s.length&&s.push(d),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function zc(t){var i,e=os(t);if(0===e.length)return null;var r=[];for(i=0;i<e.length;i++)if(so(e[i])){var n=zc(e[i]);n?e[i]=n:r.push(e[i])}else Li(e[i])&&(vZ(e[i])||r.push(e[i]));for(i=0;i<r.length;i++)hy(e,r[i]);return 1===e.length||(e.splice(e.length-1,1),1===e.length&&(t=function sZ(t,e){return Cl(t)?t[1]=e:t=e,t}(t,e[0])),0===t.length)?null:t}function LT(t,e,i){if(""!==e){var r=t.lookup;if(r.items)i(r.calculateCellValue(e)||"");else{var n=(0,v.mf)(r.dataSource)?r.dataSource({}):r.dataSource;new Ys.o(n).loadSingle(r.valueExpr,e).done(function(s){var o="";s&&(o=r.displayExpr?(0,Pt.vb)(r.displayExpr)(s):s),t.customizeText&&(o=t.customizeText({value:e,valueText:o})),i(o)}).fail(function(){i("")})}}else i("")}function PT(t,e,i,r,n){var a;return a=!0===e?t.trueText||le.Z.format("dxDataGrid-trueText"):!1===e?t.falseText||le.Z.format("dxDataGrid-falseText"):function aZ(t,e){return y_.format(e,t.format||JH[t.dataType])}(t,e),t.customizeText&&(a=t.customizeText.call(t,{value:e,valueText:a,target:r})),i&&i.customizeText&&(a=i.customizeText.call(i,{value:e,valueText:a,field:t,target:r},n)),a}function my(t){return""===t||null===t}function FT(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(my(e))return"";if(Array.isArray(e)){var n=new Y.BH;return Y.gx.apply(this,function mZ(t,e,i,r){var n={values:e};return e.map(a=>PT(t,a,i,r,n))}(t,e,i,r)).done(function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var d=s.some(u=>!my(u))?s.map(u=>my(u)?"?":u):"";n.resolve(d)}),n}return PT(t,e,i,r)}function VT(t,e){return t.some(function(i){return i.dataField===e})}function NT(t,e,i){var r=i.dataField;vy(r)&&(i.parentId=ZT(r),!VT(e,i.parentId)&&!VT(t,i.parentId)&&NT(t,e,{id:i.parentId,dataType:"object",dataField:i.parentId,caption:zT(i.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:is.defaultCalculateFilterExpression})),e.push(i)}function zT(t,e){var i="";if(e)t=t.substring(t.lastIndexOf(".")+1);else if(vy(t))return t.split(".").forEach(function(r,n,a){i+=(0,Cr.GK)(r),n!==a.length-1&&(i+=".")}),i;return(0,Cr.GK)(t)}function HT(t,e){for(var i=[],r=0;r<t.length;r++){var n=(0,O.l)(!0,{caption:zT(t[r].dataField,e)},t[r]);n.id=n.name||n.dataField,e?NT(t,i,n):i.push(n)}return i}function vy(t){return-1!==t.lastIndexOf(".")}function ZT(t){return t.substring(0,t.lastIndexOf("."))}function $T(t,e){if(vy(t.dataField))for(var i=ZT(t.dataField),r=0;r<e.length;r++)if(e[r].dataField===i)return $T(e[r],e)+"."+t.caption;return t.caption}function Cy(t,e,i){var r=ls(i,e);return r?(!1===r.hasValue?(t[1]=e,t.length=2):(t[1]=e,t[2]=""),t):("isblank"===e?(t[1]=ly,t[2]=null):"isnotblank"===e?(t[1]=XH,t[2]=null):(((r=ls(i,t[1]))||2===t.length||null===t[2])&&(t[2]=""),t[1]=e),t)}function WT(t){return null===t[2]?t[1]===ly?"isblank":"isnotblank":t[1]}function vZ(t){return""!==t[2]}function Hc(t,e){return t[0]===e}function by(t,e){return t&&0!==t.length?Li(t)?Hc(t,e)?null:t:KT(t,[e],!1):null}function KT(t,e,i){var r=[];return t.forEach(function(n){Li(n)?Hc(n,e[0])?i?(r.push(e),i=!1):r.splice(r.length-1,1):r.push(n):(r.length||so(n))&&r.push(n)}),0===r.length?null:(i&&(r.push(ao),r.push(e)),1===r.length?r[0]:r)}function GT(t,e){return null===t||0===t.length?e:Li(t)?Hc(t,e[0])?e:[t,ao,e]:bl(t)!==ao?[e,"and",t]:KT(t,e,!0)}function UT(t,e){return null!==t&&0!==t.length&&(Li(t)?t[0]===e:t.some(function(i){return(Li(i)||so(i))&&UT(i,e)}))}var yy=function(t,e,i){if(Array.isArray(e)){var r=e.length-1;t.empty(),e.forEach((n,a)=>{(0,C.Z)("<span>").addClass(rZ).text(n).appendTo(t),a!==r&&(0,C.Z)("<span>").addClass(AT).text(i&&i.valueSeparator?i.valueSeparator:"|").addClass(nZ).appendTo(t)})}else t.text(e||le.Z.format("dxFilterBuilder-enterValueText"))};function YT(t){var e=function(r,n){return n?"".concat(n,"/").concat(r):r},i=t&&t.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(r,n,a){var s=[],o=r.length-1;return r&&r.forEach((d,u)=>{if(Li(d)||so(d)){var c=lu(d,a,[],"headerFilter");s.push(c)}else{var f=lu([n.dataField,"=",d],a,[],"headerFilter");s.push(f)}u!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(r,n){var a=(0,C.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(n),s=(0,O.l)(!0,{},t.columnOption(r.field.dataField));return yy(a,r.text&&r.text.split("|")),s.filterType="include",s.filterValues=r.value?r.value.slice():[],i.showHeaderFilterMenuBase({columnElement:a,column:s,apply(){r.setValue(this.filterValues),i.hideHeaderFilterMenu(),r.closeEditor()},onHidden(){r.closeEditor()},isFilterBuilder:!0}),n},customizeText:function(r,n){n=n||{};var{value:a}=r,s=t.columnOption(r.field.dataField),o=s&&s.headerFilter,d=s&&s.lookup,u=n.values||[a];if(o&&o.dataSource||d&&d.dataSource){var c=new Y.BH,f=n.items||new Y.BH;if(!n.items){s=(0,O.l)({},s,{filterType:"include",filterValues:u});var g=i.getDataSource(s);g.paginate=!1;var m=new Ys.o(g),y=m.store().key();if(y){var{values:w}=n;if(w&&w.length>1){var I=w.reduce(($,se)=>($.length&&$.push("or"),$.push([y,"=",se]),$),[]);m.filter(I)}else m.filter([y,"=",r.value])}else r.field.calculateDisplayValue&&Nt.Z.log("W1017");n.items=f,m.load().done(f.resolve)}return f.done($=>{var se=u.indexOf(r.value);c.resolve(function fe(Se,Fe){var $e=[];return Se.forEach(We=>{if(We.items){var Ze=fe(We.items,e(We.text,Fe));$e=$e.concat(Ze)}We.selected&&$e.push(e(We.text,Fe))}),$e}($,null)[se])}),c}return i.getHeaderItemText(a,s,0,t.option("headerFilter"))}}}function yZ(t){return(0,O.l)(YT(t),{name:"anyof",icon:"selectall",caption:le.Z.format("dxFilterBuilder-filterOperationAnyOf")})}function wZ(t){var e=YT(t);return(0,O.l)({},e,{calculateFilterExpression(i,r,n){var a=e.calculateFilterExpression(i,r,n);return a&&0!==a.length?"!"===a[0]?a:["!",a]:null},name:"noneof",icon:"unselectall",caption:le.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var xZ=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],qT="include",Zc="exclude";function Aa(t){return t.name||t.dataField}var EZ=zt.Controller.inherit(function(){var t=function(){return{filterType:qT,filterValues:void 0}},e=function(s){var o=s.filterValues||[];return!is.getGroupInterval(s)&&!(s.headerFilter&&s.headerFilter.dataSource)||1===o.length&&null===o[0]},i=function(s){if((0,v.$K)(s.filterValue)){var d=s.selectedFilterOperation||s.defaultFilterOperation||uy(s);return[Aa(s),d,s.filterValue]}return null},r=function(s){var o,d,{filterValues:u}=s;return u?(1===u.length&&e(s)&&!Array.isArray(u[0])?(o=s.filterType===Zc?"<>":"=",d=u[0]):(o=s.filterType===Zc?"noneof":"anyof",d=u),[Aa(s),o,d]):null},n=function(s,o,d){var u=function(c,f){if(!c)return t();var g,m=c[1],y=c[2],w=Array.isArray(y);if(!w&&!e(f))return t();switch(m){case"anyof":case"=":g=qT;break;case"noneof":case"<>":g=Zc;break;default:return t()}return{filterType:g,filterValues:w?y:[y]}}(d,o);s.columnOption(Aa(o),u)},a=function(s,o,d){var u,c=d?.[1],f=d?.[2],g=o.filterOperations||o.defaultFilterOperations;(!g||g.indexOf(c)>=0||c===o.defaultFilterOperation)&&xZ.includes(c)&&null!==f?(c===o.defaultFilterOperation&&!(0,v.$K)(o.selectedFilterOperation)&&(c=o.selectedFilterOperation),u={filterValue:f,selectedFilterOperation:c}):u={filterValue:void 0,selectedFilterOperation:void 0},s.columnOption(Aa(o),u)};return{syncFilterValue(){var s=this,o=s.getController("columns"),d=o.getFilteringColumns();this._skipSyncColumnOptions=!0,d.forEach(u=>{var c=function bZ(t,e){return null===t||0===t.length?[]:Li(t)?Hc(t,e)?[t]:[]:bl(t)!==ao?[]:t.filter(function(n){return Li(n)&&Hc(n,e)})}(s.option("filterValue"),Aa(u));if(1===c.length){var f=c[0];n(o,u,f),a(o,u,f)}else(0,v.$K)(u.filterValues)&&n(o,u,null),(0,v.$K)(u.filterValue)&&a(o,u,null)}),this._skipSyncColumnOptions=!1},_initSync(){var s=this.getController("columns").getColumns(),o=this.getController("data"),d=o.pageIndex();if(function SZ(t){t.forEach(e=>{var i=Aa(e);if(!(0,v.$K)(i)&&e.allowFiltering)throw new Nt.Z.Error("E1049",e.caption)})}(s),!this.option("filterValue")){var u=this.getController("columns").getFilteringColumns(),c=this.getFilterValueFromColumns(u);this.option("filterValue",c)}this.syncFilterValue(),o.pageIndex(d)},init(){var s=this.getController("data");s.isFilterSyncActive()&&(this.getController("columns").isAllDataTypesDefined()?this._initSync():s.dataSourceChanged.add(()=>this._initSync()))},_getSyncFilterRow(s,o){var d=i(o);return(0,v.$K)(d)?GT(s,d):by(s,Aa(o))},_getSyncHeaderFilter(s,o){var d=r(o);return d?GT(s,d):by(s,Aa(o))},getFilterValueFromColumns(s){if(!this.getController("data").isFilterSyncActive())return null;var o=["and"];return s&&s.forEach(d=>{var u=r(d),c=i(d);u&&Ng(u,o),c&&Ng(c,o)}),zc(o)},syncFilterRow(s){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),s))},syncHeaderFilter(s){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),s))},getCustomFilterOperations(){var s=this.option("filterBuilder.customOperations")||[];return[yZ(this.component),wZ(this.component)].concat(s)},publicMethods:()=>["getCustomFilterOperations"]}}()),IZ={isFilterSyncActive(){var t=this.option("filterSyncEnabled");return"auto"===t?this.option("filterPanel.visible"):t},skipCalculateColumnFilters(){var t=this.getController("filterSync");return((0,v.$K)(this.option("filterValue"))||t._skipSyncColumnOptions)&&this.isFilterSyncActive()},_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return this.callBase();var t=[this.callBase()],e=this.getController("columns").getFilteringColumns(),i=this.option("filterValue");if(this.isFilterSyncActive()){var r=this.getController("headerFilter").getCurrentColumn();r&&i&&(i=by(i,Aa(r)))}var a=lu(i,e,this.getController("filterSync").getCustomFilterOperations(),"filterBuilder");return a&&t.push(a),ye.combineFilters(t)},_parseColumnPropertyName(t){var e=t.match(/.*\.(.*)/);return e?e[1]:null},clearFilter(t){this.component.beginUpdate(),arguments.length>0?("filterValue"===t&&this.option("filterValue",null),this.callBase(t)):(this.option("filterValue",null),this.callBase()),this.component.endUpdate()},optionChanged(t){switch(t.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this.getController("filterSync").syncFilterValue(),t.handled=!0;break;case"filterSyncEnabled":t.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var e=this.getController("columns").getColumnByPath(t.fullName),i=this.getController("filterSync");if(e&&!i._skipSyncColumnOptions){var r=this._parseColumnPropertyName(t.fullName);i._skipSyncColumnOptions=!0,"filterType"===r?(Zc===t.value||Zc===t.previousValue)&&i.syncHeaderFilter(e):"filterValues"===r?i.syncHeaderFilter(e):["filterValue","selectedFilterOperation"].includes(r)&&i.syncFilterRow(e,e.filterValue),i._skipSyncColumnOptions=!1}}this.callBase(t);break;default:this.callBase(t)}}},TZ={_isHeaderFilterEmpty(t){return this.getController("data").isFilterSyncActive()?!UT(this.option("filterValue"),Aa(t)):this.callBase(t)},_needUpdateFilterIndicators(){return!this.getController("data").isFilterSyncActive()},optionChanged(t){"filterValue"===t.name?this._updateHeaderFilterIndicators():this.callBase(t)}};l.registerModule("filterSync",{defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:EZ},extenders:{controllers:{data:IZ},views:{columnHeadersView:TZ}}});var Cn="dx-filterbuilder",du=Cn+"-group",jT=du+"-item",XT=du+"-content",AZ=du+"-operations",RZ=du+"-operation",wy=Cn+"-action",QT=wy+"-icon",$c=Cn+"-text",kZ=Cn+"-item-field",MZ=Cn+"-item-operation",JT=Cn+"-item-value",LZ=Cn+"-item-value-text",PZ=Cn+"-overlay",FZ=Cn+"-operations",VZ=Cn+"-fields",NZ=Cn+"-add-condition",Zg="dx-state-active",zZ=Cn+"-menu-custom-operation",eD="filterBuilder",xy="enter",ZZ=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],rD={and:"and",or:"or",notAnd:"!and",notOr:"!or"},$Z=en.Z.inherit(wE),nD=gn.Z.inherit({_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:le.Z.format("dxFilterBuilder-and"),or:le.Z.format("dxFilterBuilder-or"),notAnd:le.Z.format("dxFilterBuilder-notAnd"),notOr:le.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:le.Z.format("dxFilterBuilder-filterOperationBetween"),equal:le.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:le.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:le.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:le.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:le.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:le.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:le.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:le.Z.format("dxFilterBuilder-filterOperationContains"),notContains:le.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:le.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:le.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:le.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})},_optionChanged:function(t){switch(t.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(t.value!==t.previousValue){var e=this._disableInvalidateForValue;e||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:t.value,previousValue:t.previousValue}),this._disableInvalidateForValue=e}break;default:this.callBase(t)}},getFilterExpression:function(){var t=this._getNormalizedFields();return lu(zc((0,O.l)(!0,[],this._model)),t,this._customOperations,eD)},_getNormalizedFields:function(){return function gZ(t){return t.reduce(function(e,i){if((0,v.$K)(i.dataField)){var r={};for(var n in i)i[n]&&tZ.indexOf(n)>-1&&(r[n]=i[n]);r.defaultCalculateFilterExpression=is.defaultCalculateFilterExpression,(0,v.$K)(r.dataType)||(r.dataType=oy),(0,v.$K)(r.trueText)||(r.trueText=le.Z.format("dxDataGrid-trueText")),(0,v.$K)(r.falseText)||(r.falseText=le.Z.format("dxDataGrid-falseText")),e.push(r)}return e},[])}(this.option("fields"))},_updateFilter:function(){this._disableInvalidateForValue=!0;var e=zc((0,O.l)(!0,[],this._model)),i=zc(this._getModel(this.option("value")));JSON.stringify(i)!==JSON.stringify(e)&&this.option("value",e),this._disableInvalidateForValue=!1,this._fireContentReadyAction()},_init:function(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),this.callBase()},_initEditorFactory:function(){this._editorFactory=new $Z},_initCustomOperations:function(){this._customOperations=function CZ(t,e,i){var r=(0,O.l)(!0,[],t),n=-1;return r.some(function(a,s){if("between"===a.name)return n=s,!0}),-1!==n?r[n]=(0,O.l)(ET(e,i),r[n]):r.unshift(ET(e,i)),r}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)},_getDefaultGroupOperation:function(){var t,e;return null!==(t=null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])&&void 0!==t?t:rD.and},_getModel:function(t){return gy(t,this._customOperations,this._getDefaultGroupOperation())},_initModel:function(){this._model=this._getModel(this.option("value"))},_initActions:function(){var t=this;t._actions={},ZZ.forEach(function(e){var i=(0,O.l)({},e.config);t._actions[e.name]=t._createActionByOption(e.name,i)})},executeAction:function(t,e){var i=this._actions[t];return i&&i(e)},_initMarkup:function(){this.$element().addClass(Cn),this.callBase(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())},_createConditionElement:function(t,e){return(0,C.Z)("<div>").addClass(du).append(this._createConditionItem(t,e))},_createGroupElementByCriteria:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._createGroupElement(t,e,i),n=r.find("."+XT),a=os(t),s=0;s<a.length;s++){var o=a[s];so(o)?this._createGroupElementByCriteria(o,t,i+1).appendTo(n):Li(o)&&this._createConditionElement(o,t).appendTo(n)}return r},_createGroupElement:function(t,e,i){var r=(0,C.Z)("<div>").addClass(jT),n=(0,C.Z)("<div>").addClass(XT),a=(0,C.Z)("<div>").addClass(du).append(r).append(n);return null!=e&&this._createRemoveButton(()=>{hy(e,t),a.remove(),this._updateFilter()}).appendTo(r),this._createGroupOperationButton(t).appendTo(r),this._createAddButton(()=>{var s=BT(this._getDefaultGroupOperation());Ng(s,t),this._createGroupElement(s,t,i+1).appendTo(n),this._updateFilter()},()=>{var o=function fZ(t,e){var i=[t.dataField,"",""];return Cy(i,uy(t),e),i}(this.option("fields")[0],this._customOperations);Ng(o,t),this._createConditionElement(o,t).appendTo(n),this._updateFilter()},i).appendTo(r),a},_createButton:function(t){return(0,C.Z)("<div>").text(t)},_createGroupOperationButton:function(t){var e=this._getGroupOperations(t),i=function dZ(t,e){var i=bl(t);return e.filter(function(r){return r.value===i})[0]}(t,e),r=i.text,n=e&&e.length<2?this._createButton(r).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:r,menu:{items:e,displayExpr:"text",keyExpr:"value",onItemClick:a=>{i!==a.itemData&&(function lZ(t,e){var r,n;return function oZ(t,e){-1!==e.indexOf("!")?Cl(t)||function(i){var r=i.slice(0);i.length=0,i.push("!",r)}(t):Cl(t)&&function(i){var r=os(i);i.length=0,[].push.apply(i,r)}(t)}(t,e),function(n,a){for(r=0;r<n.length;r++)Array.isArray(n[r])||(n[r]=a)}(os(t),e=-1===(n=e).indexOf("!")?n:n.substring(1)),t}(t,a.itemData.value),n.text(a.itemData.text),i=a.itemData,this._updateFilter())},onContentReady:function(a){a.component.selectItem(i)},cssClass:AZ}});return n.addClass($c).addClass(RZ).attr("tabindex",0)},_createButtonWithMenu:function(t){var s,e=this,i=function(){e.$element().find("."+Zg).removeClass(Zg),e.$element().find(".dx-overlay .dx-treeview").remove(),e.$element().find(".dx-overlay").remove()},r=this.option("rtlEnabled"),n=r?"right":"left",a=this._createButton(t.caption);return(0,O.l)(t.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(s=t.menu.onItemClick,function(o){s(o),"dxclick"===o.event.type&&i()}),onHiding:function(o){a.removeClass(Zg)},position:{my:n+" top",at:n+" bottom",offset:"0 1",of:a,collision:"flip"},animation:null,onHidden:function(){i()},cssClass:PZ+" "+t.menu.cssClass,rtlEnabled:r}),t.popup={onShown:function(o){var d=(0,C.Z)(o.component.content()).find(".dx-treeview"),u=d.dxTreeView("instance");Z.Z.on(d,"keyup keydown",function(c){var f=(0,be.EV)(c);("keydown"===c.type&&"tab"===f||"keyup"===c.type&&("escape"===f||f===xy))&&(o.component.hide(),Z.Z.trigger(t.menu.position.of,"focus"))}),u.focus(),u.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(a,function(){i(),e._createPopupWithTreeView(t,e.$element()),a.addClass(Zg)}),a},_hasValueButton:function(t){var e=ls(this._customOperations,t[1]);return e?!1!==e.hasValue:null!==t[2]},_createOperationButtonWithMenu:function(t,e){var i=this,r=function pZ(t,e,i){var r=OT(t),n=!!t.lookup;return i.forEach(function(a){if(!t.filterOperations&&-1===r.indexOf(a.name)){var s=a&&a.dataTypes;(!n||!a.notForLookup)&&s&&s.indexOf(t.dataType||oy)>=0&&r.push(a.name)}}),r.map(function(a){var s=ls(i,a);return s?{icon:s.icon||TT,text:s.caption||(0,Cr.GK)(s.name),value:s.name,isCustom:!0}:{icon:IT.getIconByFilterOperation(a)||TT,text:dy(a,e),value:a}})}(e,this.option("filterOperationDescriptions"),this._customOperations),n=function cZ(t,e){for(var i=0;i<e.length;i++)if(e[i].value===t)return e[i];throw new Nt.Z.Error("E1048",t)}(WT(t),r),a=this._createButtonWithMenu({caption:n.text,menu:{items:r,displayExpr:"text",onItemRendered:function(s){s.itemData.isCustom&&(0,C.Z)(s.itemElement).addClass(zZ)},onContentReady:function(s){s.component.selectItem(n)},onItemClick:s=>{if(n!==s.itemData){Cy(t,(n=s.itemData).value,i._customOperations);var o=a.siblings().filter("."+JT);i._hasValueButton(t)?(0!==o.length&&o.remove(),i._createValueButton(t,e).appendTo(a.parent())):o.remove(),a.html(n.text),this._updateFilter()}},cssClass:FZ}}).addClass($c).addClass(MZ).attr("tabindex",0);return a},_createOperationAndValueButtons:function(t,e,i){this._createOperationButtonWithMenu(t,e).appendTo(i),this._hasValueButton(t)&&this._createValueButton(t,e).appendTo(i)},_createFieldButtonWithMenu:function(t,e,i){var r=this,n=this.option("allowHierarchicalFields"),a=HT(t,n),s=zg(i.name||i.dataField,a),o=function(u,c){return n?$T(u,c):u.caption},d=this._createButtonWithMenu({caption:o(s,a),menu:{items:a,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:u=>{if(s!==u.itemData){e[0]=(s=u.itemData).name||s.dataField,e[2]="object"===s.dataType?null:"",Cy(e,uy(s),r._customOperations),d.siblings().filter("."+$c).remove(),r._createOperationAndValueButtons(e,s,d.parent());var c=o(s,u.component.option("items"));d.html(c),this._updateFilter()}},onContentReady:function(u){u.component.selectItem(s)},cssClass:VZ}}).addClass($c).addClass(kZ).attr("tabindex",0);return d},_createConditionItem:function(t,e){var i=(0,C.Z)("<div>").addClass(jT),r=this._getNormalizedFields(),n=zg(t[0],r);return this._createRemoveButton(()=>{hy(e,t),1===i.parent().children().length?i.parent().remove():i.remove(),this._updateFilter()}).appendTo(i),this._createFieldButtonWithMenu(r,t,n).appendTo(i),this._createOperationAndValueButtons(t,n,i),i},_getGroupOperations:function(t){var e=this.option("groupOperations"),i=this.option("groupOperationDescriptions");return(!e||!e.length)&&(e=[bl(t).replace("!","not")]),e.map(r=>({text:i[r],value:rD[r]}))},_createRemoveButton:function(t){var e=(0,C.Z)("<div>").addClass(QT).addClass("dx-icon-remove").addClass(wy).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(e,t),e},_createAddButton:function(t,e,i){var r,n=this.option("maxGroupLevel");return(0,v.$K)(n)&&i>=n?(r=this._createButton(),this._subscribeOnClickAndEnterKey(r,e)):r=this._createButtonWithMenu({menu:{items:[{caption:le.Z.format("dxFilterBuilder-addCondition"),click:e},{caption:le.Z.format("dxFilterBuilder-addGroup"),click:t}],displayExpr:"caption",onItemClick:function(a){a.itemData.click()},cssClass:NZ}}),r.addClass(QT).addClass("dx-icon-plus").addClass(wy).attr("tabindex",0)},_createValueText:function(t,e,i){var r=this,n=(0,C.Z)("<div>").html("&nbsp;").addClass(LZ).attr("tabindex",0).appendTo(i),a=t[2],s=ls(r._customOperations,t[1]);return!s&&e.lookup?LT(e,a,function(o){yy(n,o)}):(0,Y.gx)(FT(e,a,s)).done(o=>{yy(n,o,s)}),r._subscribeOnClickAndEnterKey(n,function(o){"keyup"===o.type&&o.stopPropagation(),r._createValueEditorWithEvents(t,e,i)}),n},_updateConditionValue:function(t,e,i){t[2]!==e&&(t[2]=e),i(),this._updateFilter()},_addDocumentKeyUp:function(t,e){var i=!1,r=!1,n=tt.Z.getDocument(),a=o=>{i||r?r=!1:e(o)};Z.Z.on(n,"keyup",a);var s=t.find("input");Z.Z.on(s,"compositionstart",()=>{i=!0}),Z.Z.on(s,"compositionend",()=>{i=!1,r=!0}),Z.Z.on(s,"keydown",o=>{229!==o.which&&(r=!1)}),this._documentKeyUpHandler=a},_addDocumentClick:function(t,e){var i=tt.Z.getDocument(),r=n=>{this._isFocusOnEditorParts(t,n.target)||(Z.Z.trigger(t.find("input"),"change"),e())};Z.Z.on(i,"dxpointerdown",r),this._documentClickHandler=r},_isFocusOnEditorParts:function(t,e){var i=e||tt.Z.getActiveElement();return(0,C.Z)(i).closest(t.children()).length||(0,C.Z)(i).closest(".dx-dropdowneditor-overlay").length},_removeEvents:function(){var t=tt.Z.getDocument();(0,v.$K)(this._documentKeyUpHandler)&&Z.Z.off(t,"keyup",this._documentKeyUpHandler),(0,v.$K)(this._documentClickHandler)&&Z.Z.off(t,"dxpointerdown",this._documentClickHandler)},_dispose:function(){this._removeEvents(),this.callBase()},_createValueEditorWithEvents:function(t,e,i){var r=t[2],n=()=>(i.empty(),this._removeEvents(),this._createValueText(t,e,i)),a=()=>{this._updateConditionValue(t,r,function(){n()})},s={value:""===r?null:r,filterOperation:WT(t),setValue:function(d){r=null===d?"":d},closeEditor:a,text:i.text()};i.empty();var o=this._createValueEditor(i,e,s);Z.Z.trigger(o.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(o,a),this._addDocumentKeyUp(o,d=>{var u=(0,be.EV)(d);if("tab"===u){if(this._isFocusOnEditorParts(o))return;this._updateConditionValue(t,r,function(){n(),d.shiftKey&&Z.Z.trigger(i.prev(),"focus")})}"escape"===u&&Z.Z.trigger(n(),"focus"),u===xy&&this._updateConditionValue(t,r,function(){Z.Z.trigger(n(),"focus")})}),this._fireContentReadyAction()},_createValueButton:function(t,e){var i=(0,C.Z)("<div>").addClass($c).addClass(JT);return this._createValueText(t,e,i),i},_createValueEditor:function(t,e,i){var r=(0,C.Z)("<div>").attr("tabindex",0).appendTo(t),n=ls(this._customOperations,i.filterOperation),a=n&&n.editorTemplate?n.editorTemplate:e.editorTemplate;return a?this._getTemplate(a).render({model:(0,O.l)({field:e},i),container:r}):this._editorFactory.createEditor.call(this,r,(0,O.l)({},e,i,{parentType:eD})),r},_createPopupWithTreeView:function(t,e){var i=this,r=(0,C.Z)("<div>").addClass(t.menu.cssClass).appendTo(e);this._createComponent(r,xa,{onHiding:t.menu.onHiding,onHidden:t.menu.onHidden,rtlEnabled:t.menu.rtlEnabled,position:t.menu.position,animation:t.menu.animation,contentTemplate:function(n){var a=(0,C.Z)("<div>").appendTo(n);i._createComponent(a,sg.Z,t.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:function(){return aT(t.menu.position.of)},visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:t.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:t.menu.cssClass})},_subscribeOnClickAndEnterKey:function(t,e){Z.Z.on(t,"dxclick",e),Z.Z.on(t,"keyup",function(i){(0,be.EV)(i)===xy&&e(i)})}});(0,kt.Z)("dxFilterBuilder",nD);const WZ=nD;var KZ=zt.View.inherit({_renderCore(){this._updatePopupOptions()},_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()},_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)},_initPopup(){var t=this;t._disposePopup(),t._filterBuilderPopup=t._createComponent(t.element(),xa,(0,O.l)({title:le.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:e=>t._getPopupContentTemplate(e),onOptionChanged(e){"visible"===e.name&&t.option("filterBuilderPopup.visible",e.value)},toolbarItems:t._getPopupToolbarItems()},t.option("filterBuilderPopup"),{onHidden(){Dh(t),t._disposePopup()}}))},_getPopupContentTemplate(t){var e=(0,C.Z)(t),i=(0,C.Z)("<div>").appendTo((0,C.Z)(t));this._filterBuilder=this._createComponent(i,WZ,(0,O.l)({value:this.option("filterValue"),fields:this.getController("columns").getFilteringColumns()},this.option("filterBuilder"),{customOperations:this.getController("filterSync").getCustomFilterOperations()})),this._createComponent(e,Vx,{direction:"both"})},_getPopupToolbarItems(){var t=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:le.Z.format("OK"),onClick(){var e=t._filterBuilder.option("value");t.option("filterValue",e),t._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:le.Z.format("Cancel"),onClick(){t._filterBuilderPopup.hide()}}}]},optionChanged(t){switch(t.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),t.handled=!0;break;default:this.callBase(t)}}});l.registerModule("filterBuilder",{defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:le.Z.format("dxFilterBuilder-and"),or:le.Z.format("dxFilterBuilder-or"),notAnd:le.Z.format("dxFilterBuilder-notAnd"),notOr:le.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:le.Z.format("dxFilterBuilder-filterOperationBetween"),equal:le.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:le.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:le.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:le.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:le.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:le.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:le.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:le.Z.format("dxFilterBuilder-filterOperationContains"),notContains:le.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:le.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:le.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:le.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:KZ}});var Wc="filter-panel",UZ="".concat(Wc,"-text"),YZ="".concat(Wc,"-checkbox"),qZ="".concat(Wc,"-clear-filter"),jZ="".concat(Wc,"-left"),QZ=zt.View.inherit({isVisible(){return this.option("filterPanel.visible")&&this.getController("data").dataSource()},init(){this.getController("data").dataSourceChanged.add(()=>this.render()),this._columnsController=this.getController("columns")},_renderCore(){var t=this.element();if(t.empty(),this._columnsController.getColumns().length){t.addClass(this.addWidgetPrefix(Wc));var i=(0,C.Z)("<div>").addClass(this.addWidgetPrefix(jZ)).appendTo(t);this._renderFilterBuilderText(t,i)}},_renderFilterBuilderText(t,e){var i=this._getFilterElement(),r=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var n=this._getCheckElement(),a=this._getRemoveButtonElement();return e.append(n).append(i).append(r),void t.append(a)}e.append(i).append(r)},_getCheckElement(){var t=this,e=(0,C.Z)("<div>").addClass(this.addWidgetPrefix(YZ));return t._createComponent(e,ub.Z,{value:t.option("filterPanel.filterEnabled"),onValueChanged(i){t.option("filterPanel.filterEnabled",i.value)}}),e.attr("title",this.option("filterPanel.texts.filterEnabledHint")),e},_getFilterElement(){var t=this,e=(0,C.Z)("<div>").addClass("dx-icon-filter");return Z.Z.on(e,"click",()=>t._showFilterBuilder()),Go("filterPanel",t,e,void 0,()=>t._showFilterBuilder()),t._addTabIndexToElement(e),e},_getTextElement(){var i,t=this,e=(0,C.Z)("<div>").addClass(t.addWidgetPrefix(UZ)),r=t.option("filterValue");return r?(0,Y.gx)(t.getFilterText(r,t.getController("filterSync").getCustomFilterOperations())).done(n=>{var a=t.option("filterPanel.customizeText");if(a){var s=a({component:t.component,filterValue:r,text:n});"string"==typeof s&&(n=s)}e.text(n)}):(i=t.option("filterPanel.texts.createFilter"),e.text(i)),Z.Z.on(e,"click",()=>t._showFilterBuilder()),Go("filterPanel",t,e,void 0,()=>t._showFilterBuilder()),t._addTabIndexToElement(e),e},_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)},_getRemoveButtonElement(){var t=this,e=()=>t.option("filterValue",null),i=(0,C.Z)("<div>").addClass(t.addWidgetPrefix(qZ)).text(t.option("filterPanel.texts.clearFilter"));return Z.Z.on(i,"click",e),Go("filterPanel",this,i,void 0,e),t._addTabIndexToElement(i),i},_addTabIndexToElement(t){if(!this.option("useLegacyKeyboardNavigation")){var e=this.option("tabindex")||0;t.attr("tabindex",e)}},optionChanged(t){switch(t.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),t.handled=!0;break;case"filterPanel":this._invalidate(),t.handled=!0;break;default:this.callBase(t)}},_getConditionText(t,e,i){var r="[".concat(t,"] ").concat(e);return(0,v.$K)(i)&&(r+=i),r},_getValueMaskedText:t=>Array.isArray(t)?"('".concat(t.join("', '"),"')"):" '".concat(t,"'"),_getValueText(t,e,i){var r=new Y.BH,n=e&&e.customizeText;if((0,v.$K)(i)||n)if(!n&&t.lookup)LT(t,i,s=>{r.resolve(this._getValueMaskedText(s))});else{var a=Array.isArray(i)?i:ye.getDisplayValue(t,i,null);(0,Y.gx)(FT(t,a,e,"filterPanel")).done(s=>{r.resolve(this._getValueMaskedText(s))})}else r.resolve("");return r.promise()},getConditionText(t,e){var s,i=this,r=t[1],n=new Y.BH,a=ls(e.customOperations,r),o=zg(t[0],e.columns),d=o.caption||"",u=t[2];return s=a?a.caption||(0,Cr.GK)(a.name):dy(null===u?"="===r?"isblank":"isnotblank":r,e.filterOperationDescriptions),this._getValueText(o,a,u).done(c=>{n.resolve(i._getConditionText(d,s,c))}),n},getGroupText(t,e,i){var r=this,n=new Y.BH,a=[],s=bl(t);return t.forEach(o=>{Li(o)?a.push(r.getConditionText(o,e)):so(o)&&a.push(r.getGroupText(o,e,!0))}),Y.gx.apply(this,a).done(function(){for(var o,d=arguments.length,u=new Array(d),c=0;c<d;c++)u[c]=arguments[c];if(s.startsWith("!")){var f=e.groupOperationDescriptions["not".concat(s.substring(1,2).toUpperCase()).concat(s.substring(2))].split(" ");o="".concat(f[0]," ").concat(u[0])}else o=u.join(" ".concat(e.groupOperationDescriptions[s]," "));i&&(o="(".concat(o,")")),n.resolve(o)}),n},getFilterText(t,e){var i={customOperations:e,columns:this.getController("columns").getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return Li(t)?this.getConditionText(t,i):this.getGroupText(t,i)}}),JZ={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:le.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:le.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:le.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:QZ},extenders:{controllers:{data:{optionChanged(t){"filterPanel"===t.name?(this._applyFilter(),t.handled=!0):this.callBase(t)}}}}};l.registerModule("filterPanel",JZ);var aD="search-panel",sD="search-text";function oD(t){return(0,v.$K)(t.allowSearch)?t.allowSearch:t.allowFiltering}function lD(t,e){var{lookup:i}=t;return t.parseValue?i?t.parseValue.call(i,e):t.parseValue(e):e}var r2={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:le.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:{publicMethods(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter(){var t=this.callBase(),e=function(i,r){var n,a,d,s=i._columnsController.getColumns(),o=i.option("searchPanel.searchVisibleColumnsOnly"),u=[];if(!r)return null;function c(g){for(var m=(0,Pt.vb)(d.valueExpr),y=0;y<g.length;y++){var w=m(g[y]);u.push(a.createFilterExpression(w,null,"search"))}}for(n=0;n<s.length;n++)if(a=s[n],(!o||a.visible)&&oD(a)&&a.calculateFilterExpression){d=a.lookup;var f=lD(a,r);d&&d.items?(0,hl.Z)(d.items).filter(a.createFilterExpression.call({dataField:d.displayExpr,dataType:d.dataType,calculateFilterExpression:a.calculateFilterExpression},f,null,"search")).enumerate().done(c):void 0!==f&&u.push(a.createFilterExpression(f,null,"search"))}return 0===u.length?["!"]:ye.combineFilters(u,"or")}(this,this.option("searchPanel.text"));return ye.combineFilters([t,e])},searchByText(t){this.option("searchPanel.text",t)},optionChanged(t){switch(t.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),t.handled=!0;break;default:this.callBase(t)}}}},views:{headerPanel:function(){var t=function(e){return e.option("searchPanel")};return{_getToolbarItems(){var e=this.callBase();return this._prepareSearchItem(e)},_prepareSearchItem(e){var i=this,r=i.getController("data"),n=t(i);return n&&n.visible&&e.push({template(s,o,d){var u=(0,C.Z)("<div>").addClass(i.addWidgetPrefix(aD)).appendTo(d);i.getController("editorFactory").createEditor(u,{width:n.width,placeholder:n.placeholder,parentType:"searchPanel",value:i.option("searchPanel.text"),updateValueTimeout:700,setValue(c){r.searchByText(c)},editorOptions:{inputAttr:{"aria-label":le.Z.format("".concat(i.component.NAME,"-ariaSearchInGrid"))}}}),i.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),e},getSearchTextEditor(){var e=this,i=e.element(),r=i.find(".".concat(e.addWidgetPrefix(aD))).filter(function(){return(0,C.Z)(this).closest(".".concat(e.addWidgetPrefix("header-panel"))).is(i)});return r.length?r.dxTextBox("instance"):null},isVisible(){var e=t(this);return this.callBase()||e&&e.visible},optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){var i=this.getSearchTextEditor();i&&i.option("value",e.value)}else this._invalidate();e.handled=!0}else this.callBase(e)}}}(),rowsView:{init(){this.callBase.apply(this,arguments),this._searchParams=[]},_getFormattedSearchText(t,e){var i=lD(t,e),r=ye.getFormatOptionsByColumn(t,"search");return ye.formatValue(i,r)},_getStringNormalizer(){var t=this.option("searchPanel.highlightCaseSensitive");return function(e){return t?e:e.toLowerCase()}},_findHighlightingTextNodes(t,e,i){var n,r=e.parent(),a=this._getStringNormalizer(),s=a(i),o=[];if(r.length){if(t)if(t.groupIndex>=0&&!t.showWhenGrouped)n=e;else{var d=this._columnsController.getVisibleIndex(t.index);n=r.children("td").eq(d).find("*")}}else r=(0,C.Z)("<div>").append(e);return(n=n?.length?n:r.find("*")).each((u,c)=>{for(var f=(0,C.Z)(c).contents(),g=0;g<f.length;g++){var m=f.get(g);3===m.nodeType&&a(m.textContent||m.nodeValue).indexOf(s)>-1&&o.push(m)}}),o},_highlightSearchTextCore(t,e){var i=(0,C.Z)("<span>").addClass(this.addWidgetPrefix(sD)),r=t.text(),n=t[0],a=this._getStringNormalizer(),s=a(r).indexOf(a(e));if(s>=0)return n.textContent?n.textContent=r.substr(0,s):n.nodeValue=r.substr(0,s),t.after(i.text(r.substr(s,e.length))),t=(0,C.Z)(tt.Z.createTextNode(r.substr(s+e.length))).insertAfter(i),this._highlightSearchTextCore(t,e)},_highlightSearchText(t,e,i){var r=this,n=this._getStringNormalizer(),a=r.option("searchPanel.text");e&&i&&(a=a&&r._getFormattedSearchText(i,a)),a&&r.option("searchPanel.highlightSearchText")&&r._findHighlightingTextNodes(i,t,a).forEach(o=>{e?n((0,C.Z)(o).text())===n(a)&&(0,C.Z)(o).replaceWith((0,C.Z)("<span>").addClass(r.addWidgetPrefix(sD)).text((0,C.Z)(o).text())):r._highlightSearchTextCore((0,C.Z)(o),a)})},_renderCore(){var t=this.callBase.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),t},_updateCell(t,e){var{column:i}=e,n="string"!==(i.lookup&&i.lookup.dataType||i.dataType);oD(i)&&!e.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(a=>{this._highlightSearchText.apply(this,a)}),this._searchParams=[]})),this._searchParams.push([t,n,i])):this._highlightSearchText(t,n,i)),this.callBase(t,e)},dispose(){clearTimeout(this._highlightTimer),this.callBase()}}}}};l.registerModule("search",r2);var n2=k(6755);class a2 extends n2.Z{_optionChanged(e){switch(e.name){case"pageIndex":var i=this.option("pageIndexChanged");i&&i(e.value);break;case"pageSize":var r=this.option("pageSizeChanged");r&&r(e.value)}super._optionChanged(e)}}var St=k(2954),xi=k(6444),dD=k(6842),s2=k(6044);function ds(t,e){var i;return zx((null!==(i=(0,s2.Z)(e))&&void 0!==i?i:{})[t])}function $g(t){return ds("marginLeft",t)+ds("marginRight",t)+ds("width",t)}function uD(t){return ds("minWidth",t)}var l2=["contentTemplate","pagerProps"];var p2={},f2=t=>t&&(t.defaultProps?e=>(0,St.vs)((0,St.Iz)(2,t,(0,je.Z)({},e))):t);let _2=(()=>{class t extends xi.OS{constructor(i){super(i),this.parentRef=(0,St.Vf)(),this.pageSizesRef=(0,St.Vf)(),this.infoTextRef=(0,St.Vf)(),this.pagesRef=(0,St.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new xi.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new xi.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var i,r;null===(i=this._effects[0])||void 0===i||i.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(r=this._effects[1])||void 0===r||r.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var i=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return dD.Z.add(i),()=>{dD.Z.remove(i)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:i,displayMode:r,gridCompatibility:n,hasKnownLastPage:a,infoText:s,label:o,lightModeEnabled:d,maxPagesCount:u,onKeyDown:c,pageCount:f,pageIndex:g,pageIndexChange:m,pageSize:y,pageSizeChange:w,pageSizes:I,pagesCountText:P,pagesNavigatorVisible:$,rtlEnabled:se,showInfo:fe,showNavigationButtons:Se,showPageSizes:Fe,totalCount:$e,visible:We}=this.props.pagerProps;return(0,je.Z)({},this.restAttributes,{pageSize:y,pageIndex:g,pageIndexChange:m,pageSizeChange:w,gridCompatibility:n,className:i,showInfo:fe,infoText:s,lightModeEnabled:d,displayMode:r,maxPagesCount:u,pageCount:f,pagesCountText:P,visible:We,hasKnownLastPage:a,pagesNavigatorVisible:$,showPageSizes:Fe,pageSizes:I,rtlEnabled:se,showNavigationButtons:Se,totalCount:$e,onKeyDown:c,label:o})}get parentWidth(){return this.parentRef.current?$g(this.parentRef.current):0}updateAdaptivityProps(){var i=function c2(t){var{info:e,pageSizes:i,pages:r,parent:n}=t,a=function o2(t){var e=ds("paddingLeft",t)+ds("paddingRight",t);return ds("width",t)-e}(n),s=$g(i),o=$g(e),d=$g(r);return{parent:a,pageSizes:s,info:o+ds("marginLeft",e)+ds("marginRight",e),pages:d}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var r=!(0,v.$K)(this.elementsWidth);r&&(this.elementsWidth={}),(r||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=i.pageSizes,this.elementsWidth.pages=i.pages),(r||this.state.infoTextVisible)&&(this.elementsWidth.info=i.info),this.actualIsLargeDisplayMode=function u2(t){var{pageSizes:e,pages:i,parent:r}=t;return r-(e+i)>0}((0,je.Z)({parent:i.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function h2(t){var{info:e,pageSizes:i,pages:r,parent:n}=t;return n-(i+r+e)>0}((0,je.Z)({},i,{info:this.elementsWidth.info})),this.setState(n=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(n=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,Ir.Z)(this.props,l2)}render(){var i=this.props;return(t=>{var{contentAttributes:e,infoTextRef:i,infoTextVisible:r,isLargeDisplayMode:n,pageSizesRef:a,pagesRef:s,parentRef:o,props:{contentTemplate:d}}=t;return d((0,je.Z)({rootElementRef:o,pageSizesRef:a,infoTextRef:i,pagesRef:s,infoTextVisible:r,isLargeDisplayMode:n},e))})({props:(0,je.Z)({},i,{contentTemplate:f2(i.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return t.defaultProps=p2,t})();var hD={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return le.Z.format("dxPager-ariaLabel")}},g2=Object.create(Object.prototype,(0,je.Z)(Object.getOwnPropertyDescriptors(hD),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),Ki=Object.create(Object.prototype,(0,je.Z)(Object.getOwnPropertyDescriptors(hD),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),m2=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],cD="dx-info",C2={get pageIndex(){return Ki.pageIndex},get pageCount(){return Ki.pageCount},get totalCount(){return Ki.totalCount}};let b2=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={}}get infoText(){var i;return(null!==(i=this.props.infoText)&&void 0!==i?i:"")||le.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount:i,pageIndex:r,totalCount:n}=this.props;return(0,tn.WU)(this.infoText,(r+1).toString(),i.toString(),n.toString())}get restAttributes(){return(0,Ir.Z)(this.props,m2)}render(){return(t=>{var{props:{rootElementRef:e},text:i}=t;return(0,St.Wm)(1,"div",cD,i,0,null,null,e)})({props:(0,je.Z)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return t.defaultProps=C2,t})();var y2=k(6024),Kc=(0,xi.kr)(void 0),w2=["children","className","label","onClick","selected","tabIndex"],S2={className:"",label:"",tabIndex:0,selected:!1};let Wg=(()=>{class t extends xi.OS{constructor(i){super(i),this.state={},this.widgetRef=(0,St.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[Kc.id]?this.context[Kc.id]:Kc.defaultValue}createEffects(){return[new xi.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new xi.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var i,r;null===(i=this._effects[0])||void 0===i||i.update([this.keyboardContext,this.props.onClick]),null===(r=this._effects[1])||void 0===r||r.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,y2.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,Ir.Z)(this.props,w2)}render(){return(t=>{var{props:{children:e,className:i,label:r,selected:n,tabIndex:a},widgetRef:s}=t;return(0,St.Wm)(1,"div",i,e,0,{tabIndex:a,role:"button","aria-label":r,"aria-current":n?"page":void 0},null,s)})({props:(0,je.Z)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return t.defaultProps=S2,t})();var pD="dx-selection",fD="dx-page-size",O2="".concat(fD," ").concat(pD),Kg=k(6499),k2=["className","index","onClick","selected"],L2={index:0,selected:!1,className:"dx-page"};let _D=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={}}get label(){return(0,tn.WU)(le.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:i}=this.props;return(0,Kg.G)({["".concat(this.props.className)]:!!this.props.className,[pD]:!!i})}get restAttributes(){return(0,Ir.Z)(this.props,k2)}render(){return(t=>{var{className:e,label:i,props:{onClick:r,selected:n},value:a}=t;return(0,St.Iz)(2,Wg,{className:e,label:i,onClick:r,selected:n,children:a})})({props:(0,je.Z)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return t.defaultProps=L2,t})();var Ra=k(2845),P2=["pageIndexes"],F2=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function gD(t,e,i){return 1===t?"high":t+e===i-1?"low":"both"}function mD(t,e,i){var r=[],n=[];switch(i){case"none":r=[...t];break;case"both":r=[0,"low",...t,"high",e-1],n=t.slice(1,-1);break;case"high":r=[0,...t,"high",e-1],n=t.slice(0,-1);break;case"low":r=[0,"low",...t,e-1],n=t.slice(1)}return{slidingWindowIndexes:t,indexesForReuse:n,pageIndexes:r}}function vD(t,e,i,r){for(var n=[],a=0;a<e;a+=1)n.push(a+t);return mD(n,i,r)}var z2={get pageIndex(){return Ki.pageIndex},get maxPagesCount(){return Ki.maxPagesCount},get pageCount(){return Ki.pageCount}};let H2=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[Ra.E.id]?this.context[Ra.E.id]:Ra.E.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(i,r){var{indexesForReuse:n}=this.slidingWindowState,a=n.slice(-1)[0]<i-1,s=n.includes(r);return a&&s}generatePageIndexes(){var n,{pageCount:i,pageIndex:r}=this.props,{slidingWindowIndexes:a}=this.slidingWindowState,d=vD(n=r===a[0]?r-1:r===a[a.length-1]?r+2-4:r<4?1:r>=i-4?i-4-1:r-1,4,i,gD(n,4,i)),{pageIndexes:u}=d,c=(0,Ir.Z)(d,P2);return this.slidingWindowStateHolder=c,u}isSlidingWindowMode(){var{maxPagesCount:i,pageCount:r}=this.props;return r<=4||r<=i}onPageClick(i){this.props.pageIndexChange(i)}get pageIndexes(){var{pageCount:i}=this.props;if(this.isSlidingWindowMode())return vD(0,i,i,"none").pageIndexes;if(this.canReuseSlidingWindow(i,this.props.pageIndex)){var{slidingWindowIndexes:r}=this.slidingWindowState;return mD(r,i,gD(r[0],4,i)).pageIndexes}return this.generatePageIndexes()}get pages(){var i,{pageIndex:r}=this.props,n=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:r===s};return{key:s.toString(),pageProps:o}};return(null!==(i=this.config)&&void 0!==i&&i.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>n(s))}get restAttributes(){return(0,Ir.Z)(this.props,F2)}render(){return(t=>{var{pages:e}=t,i=e.map(r=>{var{key:n,pageProps:a}=r;return a?(0,St.Iz)(2,_D,{index:a.index,selected:a.selected,onClick:a.onClick},n):(0,St.Wm)(1,"div","dx-separator",". . .",16,null,n)});return(0,St.xJ)(i,0)})({props:(0,je.Z)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return t.defaultProps=z2,t})();var CD=k(2134),bD=k(6410),uu={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===_t.Z.real().deviceType&&!_t.Z.isSimulator()}},Gg={label:"",get labelMode(){return(0,_i.x2)((0,_i.Vk)())?"floating":"static"}},Z2=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],dn=Object.create(Object.prototype,(0,je.Z)(Object.getOwnPropertyDescriptors(bD.nY),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),K2={get defaultValue(){return dn.defaultValue},get readOnly(){return dn.readOnly},get name(){return dn.name},get validationError(){return dn.validationError},get validationErrors(){return dn.validationErrors},get validationMessageMode(){return dn.validationMessageMode},get validationMessagePosition(){return dn.validationMessagePosition},get validationStatus(){return dn.validationStatus},get isValid(){return dn.isValid},get inputAttr(){return dn.inputAttr},get className(){return dn.className},get activeStateEnabled(){return uu.activeStateEnabled},get disabled(){return dn.disabled},get focusStateEnabled(){return uu.focusStateEnabled},get hoverStateEnabled(){return uu.hoverStateEnabled},get tabIndex(){return dn.tabIndex},get visible(){return dn.visible},get label(){return Gg.label},get labelMode(){return Gg.labelMode},isReactComponentWrapper:!0};let G2=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var i=(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,Ir.Z)(i,Z2)}render(){return(t=>{var{componentProps:e,restAttributes:i}=t;return(0,St.vs)((0,St.Iz)(2,CD.Ag,(0,je.Z)({componentType:db,componentProps:e,templateNames:[]},i)))})({props:(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return t.defaultProps=K2,t})();var U2=10;function yD(t,e){return t+U2*Math.max(...e).toString().length}var Y2=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],q2="".concat(cD,"  dx-info-text"),wD="dx-page-index",J2={inputAttr:Object.freeze({"aria-label":le.Z.format("dxPager-ariaPageNumber")})},e$={get pageIndex(){return Ki.pageIndex},get pageCount(){return Ki.pageCount},get inputAttr(){return J2.inputAttr}};let t$=(()=>{class t extends xi.OS{constructor(i){super(i),this.pageIndexRef=(0,St.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new xi.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var i;null===(i=this._effects[0])||void 0===i||i.update([this.state.minWidth])}updateWidth(){var i,r=null===(i=this.pageIndexRef.current)||void 0===i?void 0:i.querySelector(".".concat(wD));this.setState(n=>({minWidth:r&&uD(r)||n.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:i}=this.props;return yD(this.state.minWidth,[i])}get pagesCountText(){var i;return(null!==(i=this.props.pagesCountText)&&void 0!==i?i:"")||le.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(i){this.props.pageIndexChange(i-1)}get restAttributes(){return(0,Ir.Z)(this.props,Y2)}render(){return(t=>{var{pageIndexRef:e,pagesCountText:i,props:{inputAttr:r,pageCount:n},selectLastPageIndex:a,value:s,valueChange:o,width:d}=t;return(0,St.Wm)(1,"div","dx-light-pages",[(0,St.Iz)(2,G2,{className:wD,min:1,max:n,width:d,value:s,valueChange:o,inputAttr:r}),(0,St.Wm)(1,"span",q2,i,0),(0,St.Iz)(2,_D,{className:"dx-pages-count",selected:!1,index:n-1,onClick:a})],4,null,null,e)})({props:(0,je.Z)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return t.defaultProps=e$,t})();var i$=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],Ug="dx-navigate-button",xD="dx-prev-button",SD="dx-next-button",ED="dx-button-disable",a$={nextEnabledClass:"".concat(Ug," ").concat(SD),prevEnabledClass:"".concat(Ug," ").concat(xD),nextDisabledClass:"".concat(ED," ").concat(Ug," ").concat(SD),prevDisabledClass:"".concat(ED," ").concat(Ug," ").concat(xD)},s$={next:"prev",prev:"next"},u$={get pageIndex(){return Ki.pageIndex},get maxPagesCount(){return Ki.maxPagesCount},get pageCount(){return Ki.pageCount},get hasKnownLastPage(){return Ki.hasKnownLastPage},get showNavigationButtons(){return Ki.showNavigationButtons},get totalCount(){return Ki.totalCount},get isLargeDisplayMode(){return true}};let h$=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[Ra.E.id]?this.context[Ra.E.id]:Ra.E.defaultValue}pageIndexChange(i){this.canNavigateToPage(i)&&this.props.pageIndexChange(i)}getButtonProps(i){var r,n=null!==(r=this.config)&&void 0!==r&&r.rtlEnabled?s$[i]:i,a=this.canNavigateTo(n);return{className:a$["".concat(i).concat(a?"Enabled":"Disabled","Class")],tabIndex:a?0:-1,navigate:()=>this.navigateToPage(n)}}canNavigateToPage(i){return this.props.hasKnownLastPage?i>=0&&i<=this.props.pageCount-1:i>=0}getNextPageIndex(i){return this.props.pageIndex+function l$(t){return"next"===t?1:-1}(i)}canNavigateTo(i){return this.canNavigateToPage(this.getNextPageIndex(i))}navigateToPage(i){this.pageIndexChange(this.getNextPageIndex(i))}get renderPrevButton(){var{isLargeDisplayMode:i,showNavigationButtons:r}=this.props;return!i||r}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){return(0,Ir.Z)(this.props,i$)}componentWillUpdate(i,r,n){(this.context[Ra.E.id]!==n[Ra.E.id]||this.props.hasKnownLastPage!==i.hasKnownLastPage||this.props.pageCount!==i.pageCount||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[Ra.E.id]!==n[Ra.E.id]||this.props.hasKnownLastPage!==i.hasKnownLastPage||this.props.pageCount!==i.pageCount||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(t=>{var{nextButtonProps:e,pageIndexChange:i,prevButtonProps:r,props:{isLargeDisplayMode:n,maxPagesCount:a,pageCount:s,pageIndex:o,pagesCountText:d},renderNextButton:u,renderPrevButton:c}=t;return(0,St.xJ)([c&&(0,St.Iz)(2,Wg,{label:le.Z.getFormatter("dxPager-prevPage")(),className:r.className,tabIndex:r.tabIndex,onClick:r.navigate}),n&&(0,St.Iz)(2,H2,{maxPagesCount:a,pageCount:s,pageIndex:o,pageIndexChange:i}),!n&&(0,St.Iz)(2,t$,{pageCount:s,pageIndex:o,pageIndexChange:i,pagesCountText:d}),u&&(0,St.Iz)(2,Wg,{label:le.Z.getFormatter("dxPager-nextPage")(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)})({props:(0,je.Z)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return t.defaultProps=u$,t})();var c$=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Dr=Object.create(Object.prototype,(0,je.Z)(Object.getOwnPropertyDescriptors(bD.nY),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),f$={get placeholder(){return Dr.placeholder},get hoverStateEnabled(){return uu.hoverStateEnabled},get searchEnabled(){return Dr.searchEnabled},get defaultValue(){return Dr.defaultValue},get readOnly(){return Dr.readOnly},get name(){return Dr.name},get validationError(){return Dr.validationError},get validationErrors(){return Dr.validationErrors},get validationMessageMode(){return Dr.validationMessageMode},get validationMessagePosition(){return Dr.validationMessagePosition},get validationStatus(){return Dr.validationStatus},get isValid(){return Dr.isValid},get inputAttr(){return Dr.inputAttr},get className(){return Dr.className},get activeStateEnabled(){return uu.activeStateEnabled},get disabled(){return Dr.disabled},get focusStateEnabled(){return uu.focusStateEnabled},get tabIndex(){return Dr.tabIndex},get visible(){return Dr.visible},get label(){return Gg.label},get labelMode(){return Gg.labelMode},isReactComponentWrapper:!0};let _$=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var i=(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,Ir.Z)(i,c$)}render(){return(t=>{var{componentProps:e,restAttributes:i}=t;return(0,St.vs)((0,St.Iz)(2,CD.Ag,(0,je.Z)({componentType:QS,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},i)))})({props:(0,je.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return t.defaultProps=f$,t})();var g$=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],v$={inputAttr:Object.freeze({"aria-label":le.Z.format("dxPager-ariaPageSize")})},C$={get pageSize(){return Ki.pageSize},get inputAttr(){return v$.inputAttr}};let b$=(()=>{class t extends xi.OS{constructor(i){super(i),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new xi.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var i;null===(i=this._effects[0])||void 0===i||i.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(i=>({minWidth:uD(this.props.parentRef.current)||i.minWidth}))}get width(){return yD(this.state.minWidth,this.props.pageSizes.map(i=>i.value))}get restAttributes(){return(0,Ir.Z)(this.props,g$)}render(){return(t=>{var{props:{inputAttr:e,pageSize:i,pageSizeChange:r,pageSizes:n},width:a}=t;return(0,St.Iz)(2,_$,{displayExpr:"text",valueExpr:"value",dataSource:n,value:i,valueChange:r,width:a,inputAttr:e})})({props:(0,je.Z)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return t.defaultProps=C$,t})();var y$=["pageSize","pageSizeChange","pageSizes"],x$={get pageSize(){return Ki.pageSize}};let S$=(()=>{class t extends xi.Ul{constructor(i){super(i),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:i,pageSizes:r}=this.props;return r.map((n,a)=>{var{text:s,value:o}=n;return{className:(0,Kg.G)({[o===i?O2:fD]:!0,"dx-first-child":0===a}),click:this.onPageSizeChange(o),label:(0,tn.WU)(le.Z.getFormatter("dxPager-pageSize"),o||le.Z.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(i){return()=>(this.props.pageSizeChange(i),this.props.pageSize)}get restAttributes(){return(0,Ir.Z)(this.props,y$)}componentWillUpdate(i,r,n){(this.props.pageSize!==i.pageSize||this.props.pageSizes!==i.pageSizes||this.props.pageSizeChange!==i.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(t=>{var{pageSizesText:e}=t;return(0,St.xJ)(e.map(i=>{var{className:r,click:n,label:a,text:s}=i;return(0,St.Iz)(2,Wg,{className:r,label:a,onClick:n,children:s},s)}),0)})({props:(0,je.Z)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return t.defaultProps=x$,t})();var E$=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],A$={get pageSize(){return Ki.pageSize},get pageSizes(){return Ki.pageSizes},get isLargeDisplayMode(){return true}};let R$=(()=>{class t extends xi.OS{constructor(i){super(i),this.state={},this.htmlRef=(0,St.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new xi.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:i}=this.props;i&&(i.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:i}=this.props;return i.map(r=>"all"===r||0===r?{text:le.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(r),value:r})})()}get restAttributes(){return(0,Ir.Z)(this.props,E$)}componentWillUpdate(i,r,n){super.componentWillUpdate(),this.props.pageSizes!==i.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(t=>{var{htmlRef:e,normalizedPageSizes:i,props:{isLargeDisplayMode:r,pageSize:n,pageSizeChange:a}}=t;return(0,St.Wm)(1,"div","dx-page-sizes",[r&&(0,St.Iz)(2,S$,{pageSizes:i,pageSize:n,pageSizeChange:a}),!r&&(0,St.Iz)(2,b$,{parentRef:e,pageSizes:i,pageSize:n,pageSizeChange:a})],0,null,null,e)})({props:(0,je.Z)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return t.defaultProps=A$,t})();var O$=k(5347),B$=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],M$=Object.create(Object.prototype,(0,je.Z)(Object.getOwnPropertyDescriptors(Ki),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let L$=(()=>{class t extends xi.OS{constructor(i){super(i),this.state={},this.widgetRootElementRef=(0,St.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new xi.b0(this.setRootElementRef,[])]}getChildContext(){return(0,je.Z)({},this.context,{[Kc.id]:this.keyboardAction||Kc.defaultValue})}setRootElementRef(){var{rootElementRef:i}=this.props;i&&(i.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>i=>{var r,n;null===(r=(n=this.props).onKeyDown)||void 0===r||r.call(n,i)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(i,r)=>Nf("pager",this.createFakeInstance(),i,void 0,r)}))()}get infoVisible(){var{infoTextVisible:i,showInfo:r}=this.props;return r&&i}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:i,lightModeEnabled:r}=this.props;return"adaptive"===i&&void 0!==r?r?"compact":"full":i}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var i=this.normalizedDisplayMode;return"adaptive"===i?this.props.isLargeDisplayMode:"full"===i}get classes(){var i={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,Kg.G)(i)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,Ir.Z)(this.props,B$)}componentWillUpdate(i,r,n){super.componentWillUpdate(),this.props.onKeyDown!==i.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(t=>{var{aria:e,classes:i,infoVisible:r,isLargeDisplayMode:n,pageIndexSelectorVisible:a,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:d,infoText:u,infoTextRef:c,maxPagesCount:f,pageCount:g,pageIndex:m,pageIndexChange:y,pageSize:w,pageSizeChange:I,pageSizes:P,pageSizesRef:$,pagesCountText:se,pagesRef:fe,rtlEnabled:Se,showNavigationButtons:Fe,showPageSizes:$e,totalCount:We,visible:Ze},restAttributes:nt,widgetRootElementRef:mt}=t;return(0,St.vs)((0,St.Iz)(2,O$.$L,(0,je.Z)({rootElementRef:mt,rtlEnabled:Se,classes:i,visible:Ze,aria:e},nt,{children:[$e&&(0,St.Iz)(2,R$,{rootElementRef:$,isLargeDisplayMode:n,pageSize:w,pageSizeChange:I,pageSizes:P}),o&&(0,St.Wm)(1,"div","dx-pages",[r&&(0,St.Iz)(2,b2,{rootElementRef:c,infoText:u,pageCount:g,pageIndex:m,totalCount:We}),a&&(0,St.Wm)(1,"div","dx-page-indexes",(0,St.Iz)(2,h$,{hasKnownLastPage:d,isLargeDisplayMode:n,maxPagesCount:f,pageCount:g,pageIndex:m,pageIndexChange:y,pagesCountText:se,showNavigationButtons:Fe,totalCount:We}),2,null,null,fe)],0,{style:(0,xi.jk)({visibility:s})})]})))})({props:(0,je.Z)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return t.defaultProps=M$,t})();var P$=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let V$=(()=>{class t extends xi.DZ{constructor(i){super(i),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,xi.gt)()]}pageIndexChange(i){var r,n;this.props.gridCompatibility?(this.setState(a=>({pageIndex:r=i+1})),this.props.pageIndexChange(r)):(this.setState(a=>({pageIndex:n=i})),this.props.pageIndexChange(n))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(i){var r;this.setState(n=>({pageSize:r=i})),this.props.pageSizeChange(r)}get className(){return this.props.gridCompatibility?(0,Kg.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,je.Z)({},(0,je.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:i=>this.pageIndexChange(i),pageSizeChange:i=>this.pageSizeChange(i)}))()}get restAttributes(){var i=(0,je.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,Ir.Z)(i,P$)}componentWillUpdate(i,r,n){super.componentWillUpdate(),(this.props!==i||this.props.gridCompatibility!==i.gridCompatibility||this.props.className!==i.className||this.state.pageIndex!==r.pageIndex||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange||this.props.pageSizeChange!==i.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(t=>{var{pagerProps:e,restAttributes:i}=t;return(0,St.vs)((0,St.Iz)(2,_2,(0,je.Z)({contentTemplate:L$,pagerProps:e},i)))})({props:(0,je.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return t.defaultProps=g2,t})();class ID extends a2{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return V$}}(0,kt.Z)("dxPager",ID);const N$=ID;var TD=function(t){return 1+(parseInt(t.pageIndex())||0)},Z$=zt.View.inherit({init(){var t=this.getController("data");t.changed.add(e=>{if(e&&e.repaintChangesOnly){var i=this._pager;i?i.option({pageIndex:TD(t),pageSize:t.pageSize(),pageCount:t.pageCount(),totalCount:t.totalCount(),hasKnownLastPage:t.hasKnownLastPage()}):this.render()}else(!e||"update"!==e.changeType&&"updateSelection"!==e.changeType&&"updateFocusedRow"!==e.changeType)&&(this._pager=null,this.render())})},_renderCore(){var t=this.element().addClass(this.addWidgetPrefix("pager")),e=this.option("pager")||{},i=this.getController("data"),r=this.getController("keyboardNavigation"),n={maxPagesCount:10,pageIndex:TD(i),pageCount:i.pageCount(),pageSize:i.pageSize(),showPageSizes:e.showPageSizeSelector,showInfo:e.showInfo,displayMode:e.displayMode,pagesNavigatorVisible:e.visible,showNavigationButtons:e.showNavigationButtons,label:e.label,pageSizes:this.getPageSizes(),totalCount:i.totalCount(),hasKnownLastPage:i.hasKnownLastPage(),pageIndexChanged(a){i.pageIndex()!==a-1&&i.pageIndex(a-1)},pageSizeChanged(a){i.pageSize(a)},onKeyDown:a=>r&&r.executeAction("onKeyDown",a),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,v.$K)(e.infoText)&&(n.infoText=e.infoText),this._pager?this._pager.repaint():(0,qe.Ym)()?this._pager=this._createComponent(t,N$,n):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')},getPager(){return this._pager},getPageSizes(){var t=this.getController("data"),e=this.option("pager"),i=e&&e.allowedPageSizes,r=t.pageSize();return(!(0,v.$K)(this._pageSizes)||!this._pageSizes.includes(r))&&(this._pageSizes=[],e&&(Array.isArray(i)?this._pageSizes=i:i&&r>1&&(this._pageSizes=[Math.floor(r/2),r,2*r]))),this._pageSizes},isVisible(){var t=this.getController("data"),e=this.option("pager"),i=e&&e.visible,r=this.option("scrolling");return"auto"===i&&(i=(!r||"virtual"!==r.mode&&"infinite"!==r.mode)&&(t.pageCount()>1||t.isLoaded()&&!t.hasKnownLastPage())),i},getHeight(){return this.getElementHeight()},optionChanged(t){var{name:e}=t,i="pager"===e,r="paging"===e,n="dataSource"===e,a="scrolling"===e,s=this.getController("data");if(i||r||a||n){if(t.handled=!0,s.skipProcessingPagingChange(t.fullName))return;(i||r)&&(this._pageSizes=null),n||(this._pager=null,this._invalidate(),(0,qe.Ym)()&&i&&this.component&&this.component.resize())}},dispose(){this._pager=null}});l.registerModule("pager",{defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:le.Z.format("dxPager-ariaLabel")}}),views:{pagerView:Z$}});var W$=k(9962),DD="columns-separator-transparent",AD="drag-header",Sy="drag-action",RD="tracker",OD="drop-highlight",BD="dx-block-separator",kD="dx-header-row",un="dxDataGridResizingReordering",Gc=function(t){return t.option("allowColumnResizing")||t.getController("columns").isColumnOptionUsed("allowResizing")},LD=function(t){return t.option("allowColumnReordering")||t.getController("columns").isColumnOptionUsed("allowReordering")};class PD extends zt.View{_renderSeparator(){}_renderCore(e){var i=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),i}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){var i=this.element();if(i){if(!(0,v.$K)(e))return(0,Q.Cr)(i);(0,Q.QQ)(i,e)}}width(e){var i=this.element();if(i){if(!(0,v.$K)(e))return(0,Q.dz)(i);(0,Q.cl)(i,e)}}}var Iy=function(t){return"widget"!==t.option("columnResizingMode")},wl={views:{columnsSeparatorView:class X$ extends PD{_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var i,e=this;e._positionChanged=function(r){(i=e.element())&&(i.css({top:r.top}),(0,Q.QQ)(i,r.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=Gc(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(LD(this)||Gc(this))}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=Gc(this),this.hide(!0))),super.optionChanged(e)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}show(){var e=this.element();e&&!this._isShown&&(this._isTransparent?e.removeClass(this.addWidgetPrefix(DD)):e.show()),super.show()}hide(e){var i=this.element(),r=this.addWidgetPrefix(DD);i&&(this._isShown||e)&&(this._isTransparent?(i.addClass(r),i.css("left",""),i.show()):(i.hasClass(r)&&i.removeClass(r),i.hide())),super.hide()}moveByX(e){var i=this.element();i&&i.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,v.$K)(e)?e:"";var i=this.element();i&&i.css("cursor",e)}dispose(){this._unsubscribeFromCallback(),super.dispose()}},blockSeparatorView:class Q$ extends PD{init(){var e=this;super.init(),this.getController("data").loadingChanged.add(i=>{i||e.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(BD).html("&nbsp;")}hide(){var e=this._parentElement(),i=this.element();i&&this._isShown&&i.css("display","none"),e&&!e.children(".".concat(BD)).length&&e.prepend(this.element()),super.hide()}isVisible(){var e=this.option("groupPanel"),i=this.option("columnChooser");return e&&e.visible||i&&i.enabled}show(e){var i=this.element(),r=function(n){Ni.Z.stop(i,!0),Ni.Z.animate(i,{type:"slide",from:{width:0,display:n.display},to:n,duration:300,easing:"swing"})};if(i&&!this._isShown)switch(e){case"group":r({width:"50px",display:"inline-block"});break;case"columnChooser":r({width:"100%",display:"block"});break;default:i.css("display","")}super.show()}},draggingHeaderView:class J$ extends zt.View{isDragging(){return this._isDragging}_getDraggingPanelByPos(e){var i;return(0,U.S6)(this._dragOptions.draggingPanels,(r,n)=>{if(n){var a=n.getBoundingRect();if(a&&(void 0===a.bottom||e.y<a.bottom)&&(void 0===a.top||e.y>a.top)&&(void 0===a.left||e.x>a.left)&&(void 0===a.right||e.x<a.right))return i=n,!1}}),i}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(AD)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,i){return(0,v.$K)(e)?{columnIndex:i,rowIndex:e}:i}dispose(){var e=this.element();this._dragOptions=null,e&&e.parent().find(".".concat(this.addWidgetPrefix(AD))).remove()}isVisible(){var i=this.getController("columns").getCommonSettings();return this.option("showColumnHeaders")&&(LD(this)||i.allowGrouping||i.allowHiding)}init(){var e=this;super.init(),this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._isDragging=!1,this.getController("data").loadingChanged.add(i=>{var r=e.element();!i&&r&&r.hide()})}dragHeader(e){var{columnElement:i}=e,r=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};var n=tt.Z.getDocument();this._onSelectStart=n.onselectstart,n.onselectstart=()=>!1,this._controller.drag(this._dropOptions),this.element().css({textAlign:i&&i.css("textAlign"),height:i&&(r&&i.get(0).clientHeight||(0,Q.Cr)(i)),width:i&&(r&&i.get(0).clientWidth||(0,Q.dz)(i)),whiteSpace:i&&i.css("whiteSpace")}).addClass(this.addWidgetPrefix(Sy)).toggleClass("dx-drag-command-cell",r).text(r?"":e.sourceColumn.caption),this.element().appendTo(W$.Z.getSwatchContainer(i))}moveHeader(e){var i=e.event,{that:r}=i.data,n=(0,be.a0)(i),a=!!r._columnsResizerViewController&&r._columnsResizerViewController.isResizing(),s=r._dragOptions;if(r._isDragging&&!a){var o=r.element(),d=Math.abs(n.x-s.columnElement.offset().left-s.deltaX),u=Math.abs(n.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||d>5||u>5)&&(o.show(),o.css({left:n.x-s.deltaX,top:n.y-s.deltaY}),r.dockHeader(n)),i.preventDefault()}}dockHeader(e){var i=this._getDraggingPanelByPos(e),r=this._controller,n=this._dropOptions,a=this._dragOptions;if(i){var s=this.option("rtlEnabled"),o="columnChooser"===i.getName(),d=o?"y":"x",u=i.getName(),c="headers"===u?a.rowIndex:void 0,{sourceColumn:f}=a,g=i.getColumnElements(c,f?.ownerBand)||[],m=a.pointsByTarget=a.pointsByTarget||{},y="columnChooser"===u?[]:m[u]||r._generatePointsByColumns((0,O.l)({},a,{targetDraggingPanel:i,columns:i.getColumns(c),columnElements:g,isVerticalOrientation:o,startColumnIndex:"headers"===u&&(0,C.Z)(g[0]).index()}));if(m[u]=y,n.targetLocation=u,y.length>0)for(var w=0;w<y.length;w++){var I=y[w+1]&&(y[w][d]+y[w+1][d])/2;if(void 0===I||(s&&"x"===d?e[d]>I:e[d]<I)){n.targetColumnIndex=this._getVisibleIndexObject(c,y[w].columnIndex),g[w]?(n.targetColumnElement=g.eq(w),n.isLast=!1):(n.targetColumnElement=g.last(),n.isLast=!0),n.posX=y[w].x,n.posY=y[w].y,r.dock(n);break}}else this._resetTargetColumnOptions(),r.dock(n)}}dropHeader(e){var i=e.event,{that:r}=i.data,n=r._controller;r.element().hide(),n&&r._isDragging&&n.drop(r._dropOptions),r.element().appendTo(r._parentElement()),r._dragOptions=null,r._dropOptions=null,r._isDragging=!1,tt.Z.getDocument().onselectstart=r._onSelectStart||null}},trackerView:class j$ extends zt.View{_renderCore(){var e=super._renderCore();return this.element().addClass(this.addWidgetPrefix(RD)),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var e=this;e._positionChanged=function(i){var r=e.element();r&&r.hasClass(e.addWidgetPrefix(RD))&&(r.css({top:i.top}),(0,Q.QQ)(r,i.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}isVisible(){return Gc(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){(0,Q.QQ)(this.element(),e)}dispose(){this._unsubscribeFromCallback(),super.dispose()}}},controllers:{draggingHeader:class iW extends zt.ViewController{_generatePointsByColumns(e){var i=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),ye.getPointsByColumns(e.columnElements,r=>i._pointCreated(r,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){for(var i=!0,r=0;r<e.columns.length;r+=1){var n=e.columns[r];if("expand"===n.command&&!i)return!0;n.command||(i=!1)}return!1}_pointCreated(e,i,r,n){var a,s=i[e.columnIndex],o=i[e.columnIndex-1],d="expand"===o?.command,u="expand"===s?.command&&"expand"!==o?.command,c=n&&!n.allowReordering,f=!s?.allowReordering&&!o?.allowReordering;switch(r){case"columnChooser":return!0;case"headers":if(!u)return d||c||f;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(a=i[e.columnIndex])||void 0===a?void 0:a.command);)e.columnIndex+=1;return!1;default:return 0===i.length}}_subscribeToEvents(e,i){var r=this;(0,U.S6)(i,(n,a)=>{if(a)for(var s,o=a.getRowCount?a.getRowCount():1,d=a.getName(),u=function(g,m){if(m){var y=(0,C.Z)(m),w=s[g];a.allowDragging(w,d,i)&&(y.addClass(r.addWidgetPrefix(Sy)),Z.Z.on(y,(0,be.V4)(hr.BL,un),r.createAction(I=>{var P=I.event,$=(0,be.a0)(P);e.dragHeader({deltaX:$.x-(0,C.Z)(P.currentTarget).offset().left,deltaY:$.y-(0,C.Z)(P.currentTarget).offset().top,sourceColumn:w,index:w.index,columnIndex:g,columnElement:y,sourceLocation:d,draggingPanels:i,rowIndex:r._columnsController.getRowIndex(w.index,!0)})})),Z.Z.on(y,(0,be.V4)(hr.pB,un),{that:e},r.createAction(e.moveHeader)),Z.Z.on(y,(0,be.V4)(hr.ut,un),{that:e},r.createAction(e.dropHeader)))}},c=0;c<o;c++){var f=a.getColumnElements(c)||[];f.length&&(s=a.getColumns(c)||[],(0,U.S6)(f,u))}})}_unsubscribeFromEvents(e,i){var r=this;(0,U.S6)(i,(n,a)=>{if(a){var s=a.getColumnElements()||[];(0,U.S6)(s,(o,d)=>{var u=(0,C.Z)(d);Z.Z.off(u,(0,be.V4)(hr.BL,un)),Z.Z.off(u,(0,be.V4)(hr.pB,un)),Z.Z.off(u,(0,be.V4)(hr.ut,un)),u.removeClass(r.addWidgetPrefix(Sy))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){var i=this._blockSeparatorView,r=this._columnsSeparatorView;this._animationColumnIndex=void 0,i&&i.hide(),"block"!==e&&r&&r.hide()}init(){var e=this;super.init(),e._columnsController=e.getController("columns"),e._columnHeadersView=e.getView("columnHeadersView"),e._columnsSeparatorView=e.getView("columnsSeparatorView"),e._draggingHeaderView=e.getView("draggingHeaderView"),e._rowsView=e.getView("rowsView"),e._blockSeparatorView=e.getView("blockSeparatorView"),e._headerPanelView=e.getView("headerPanel"),e._columnChooserView=e.getView("columnChooserView");var i=function(){if(e._draggingHeaderView){var r=[e._columnChooserView,e._columnHeadersView,e._headerPanelView];e._unsubscribeFromEvents(e._draggingHeaderView,r),e._subscribeToEvents(e._draggingHeaderView,r)}};e._columnHeadersView.renderCompleted.add(i),e._headerPanelView&&e._headerPanelView.renderCompleted.add(i),e._columnChooserView&&e._columnChooserView.renderCompleted.add(i)}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){var{sourceIndex:i}=e,{sourceLocation:r}=e,{sourceColumnElement:n}=e,a=this._columnHeadersView,s=this._rowsView;n&&(n.css({opacity:.5}),"headers"===r&&(a&&a.setRowsOpacity(i,.5),s&&s.setRowsOpacity(i,.5)))}dock(e){var i=this,r=(0,v.Kn)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:n}=e,{targetLocation:a}=e,s=i._getSeparator(a),o=r>=0;i._columnHeadersView.element().find(".".concat(kD)).toggleClass(i.addWidgetPrefix(OD),"headers"!==n&&"headers"===a&&!o),s&&(i.allowDrop(e)&&o?"group"===a||"columnChooser"===a?i._animationColumnIndex!==r&&(i.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),i._animationColumnIndex=r,s.show(a)):(i.hideSeparators("block"),i.getController("tablePosition").update(e.posY),s.moveByX(e.posX-s.width()),s.show()):i.hideSeparators())}drop(e){var{sourceColumnElement:i}=e;if(i&&(i.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".".concat(kD)).removeClass(this.addWidgetPrefix(OD))),this.allowDrop(e)){var r=this._getSeparator(e.targetLocation);r&&r.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}},tablePosition:class tW extends zt.ViewController{constructor(e){super(e),this.positionChanged=(0,fi.Z)()}update(e){var i={},r=this._columnHeadersView.element(),n=r&&r.offset(),a=n&&n.top||0,s=(0,v.$K)(e)?Math.abs(e-a):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,d=this._rowsView.getScrollbarWidth(!0),u=this._rowsView?this._rowsView.height()-d:0,c=this.component.getController("columnsResizer"),f=this.component.getView("draggingHeaderView");i.height=o,(c.isResizing()||f.isDragging())&&(i.height+=u-s),null!==e&&r&&r.length&&(i.top=r[0].offsetTop+s),this.positionChanged.fire(i)}init(){var e=this;super.init(),e._columnHeadersView=this.getView("columnHeadersView"),e._rowsView=this.getView("rowsView"),e._pagerView=this.getView("pagerView"),e._rowsView.resizeCompleted.add(()=>{if(e.option("allowColumnResizing")){var i=e.getController("columnsResizer")._targetPoint;e.update(i?i.y:null)}})}},columnsResizer:class eW extends zt.ViewController{_isHeadersRowArea(e){if(this._columnHeadersView){var i=this._columnHeadersView.element();if(i){var r=i.offset().top,n=this._columnHeadersView.getHeadersRowHeight();return e>=r&&e<=r+n}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_pointCreated(e,i,r){var n=Iy(this),a=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=n||!a||s?1:0;if(e.index>=o&&e.index<i+(n||a&&!s?0:1)){e.columnIndex-=o;var d=r[e.columnIndex]||{};return!(n?d.allowResizing&&(r[e.columnIndex+1]||{}).allowResizing:d.allowResizing)}return!0}_getTargetPoint(e,i,r){if(e)for(var n=0;n<e.length;n++)if((e[n].x!==e[0].x||!e[n+1]||e[n].x!==e[n+1].x)&&e[n].x-r<=i&&i<=e[n].x+r)return e[n];return null}_moveSeparator(e){var i,r=e.event,n=r.data,a=n._columnsSeparatorView.width(),s=Iy(n),o=a/2,d=n._$parentContainer.offset(),u=d.left,c=(0,be.a0)(r),f=n.option("rtlEnabled"),g=this._isRtlParentStyle(),m=null===(i=n._draggingHeaderView)||void 0===i?void 0:i.isDragging();if(n._isResizing&&n._resizingInfo){if((u<=c.x||!s&&g)&&(!s||c.x<=u+(0,Q.dz)(n._$parentContainer))&&n._updateColumnsWidthIfNeeded(c.x)){var y=n._columnHeadersView.getColumnElements().eq(n._resizingInfo.currentColumnIndex),w=y[0];if(w){var I=w.getBoundingClientRect().width;n._columnsSeparatorView.moveByX(y.offset().left+((s||g)&&f?0:I)),n._tablePositionController.update(n._targetPoint.y),r.preventDefault()}}}else m||(n._isHeadersRowArea(c.y)?(n._previousParentOffset&&(n._previousParentOffset.left!==d.left||n._previousParentOffset.top!==d.top)&&n.pointsByColumns(null),n._targetPoint=n._getTargetPoint(n.pointsByColumns(),c.x,a),n._previousParentOffset=d,n._isReadyResizing=!1,n._targetPoint?(n._columnsSeparatorView.changeCursor("col-resize"),n._columnsSeparatorView.moveByX(n._targetPoint.x-o),n._tablePositionController.update(n._targetPoint.y),n._isReadyResizing=!0,r.preventDefault()):(n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null))):(n.pointsByColumns(null),n._isReadyResizing=!1,n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null)))}_endResizing(e){var r=e.event.data;r._isResizing&&(r.pointsByColumns(null),r._resizingInfo=null,r._columnsSeparatorView.hide(),r._columnsSeparatorView.changeCursor(),r._trackerView.hide(),r._isReadyResizing=!1,r._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){var i=this._targetPoint.columnIndex,r=this._getNextColumnIndex(i),n=this._columnHeadersView.getHeaderElement(i),a=this._columnHeadersView.getHeaderElement(r);this._resizingInfo={startPosX:e,currentColumnIndex:i,currentColumnWidth:n&&n.length>0?(0,ti.l)(n[0]).width:0,nextColumnIndex:r,nextColumnWidth:a&&a.length>0?(0,ti.l)(a[0]).width:0}}_startResizing(e){var i=e.event,r=i.data,n=(0,be.a0)(i);if((0,be.z6)(i)&&(r._isHeadersRowArea(n.y)?(r._targetPoint=r._getTargetPoint(r.pointsByColumns(),n.x,10),r._targetPoint&&(r._columnsSeparatorView.moveByX(r._targetPoint.x-r._columnsSeparatorView.width()/2),r._isReadyResizing=!0)):r._isReadyResizing=!1),r._isReadyResizing){r._setupResizingInfo(n.x),r._isResizing=!0,r._tablePositionController.update(r._targetPoint.y),r._columnsSeparatorView.show(),r._trackerView.show();var a=r.component.getScrollable();a&&r._isRtlParentStyle()&&(r._scrollRight=(0,Q.dz)(a.$content())-(0,Q.dz)(a.container())-a.scrollLeft()),i.preventDefault(),i.stopPropagation()}this.isResizing()&&this.getController("editorFactory").loseFocus()}_generatePointsByColumns(){var e=this,i=e._columnsController?e._columnsController.getVisibleColumns():[],r=e._columnHeadersView.getColumnElements(),n=[];r&&r.length>0&&(n=ye.getPointsByColumns(r,a=>e._pointCreated(a,r.length,i))),e._pointsByColumns=n}_unsubscribeFromEvents(){this._moveSeparatorHandler&&Z.Z.off(tt.Z.getDocument(),(0,be.V4)(qt.Z.move,un),this._moveSeparatorHandler),this._startResizingHandler&&Z.Z.off(this._$parentContainer,(0,be.V4)(qt.Z.down,un),this._startResizingHandler),this._endResizingHandler&&(Z.Z.off(this._columnsSeparatorView.element(),(0,be.V4)(qt.Z.up,un),this._endResizingHandler),Z.Z.off(tt.Z.getDocument(),(0,be.V4)(qt.Z.up,un),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),Z.Z.on(tt.Z.getDocument(),(0,be.V4)(qt.Z.move,un),this,this._moveSeparatorHandler),Z.Z.on(this._$parentContainer,(0,be.V4)(qt.Z.down,un),this,this._startResizingHandler),Z.Z.on(this._columnsSeparatorView.element(),(0,be.V4)(qt.Z.up,un),this,this._endResizingHandler),Z.Z.on(tt.Z.getDocument(),(0,be.V4)(qt.Z.up,un),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){var i,r,n=this._rowsView.contentWidth(),a=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),d=this._columnsSeparatorView.width(),u=Iy(this),c=u&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),f=this.option("rtlEnabled"),g=this._isRtlParentStyle(),m=o[a.currentColumnIndex],y=o[a.nextColumnIndex];function w(Ze){return(0,v.HD)(Ze)&&Ze.endsWith("%")}function I(Ze,nt,mt,jt){if(Ze){var $t=Ze.width;$t&&(jt=w($t)),jt?(s.columnOption(Ze.index,"visibleWidth",nt),s.columnOption(Ze.index,"width","".concat((nt/mt*100).toFixed(3),"%"))):(s.columnOption(Ze.index,"visibleWidth",null),s.columnOption(Ze.index,"width",nt))}}i=e-a.startPosX,(u||g)&&f&&(i=-i);var Ze,nt,mt,jt,$t,mi,Oe,{cellWidth:P,nextCellWidth:$}=(Oe={},($t=a.currentColumnWidth+(Ze=i))>=(mi=m&&m.minWidth||d)?Oe.cellWidth=$t:(Oe.cellWidth=mi,jt=!0),u&&((mt=a.nextColumnWidth-Ze)>=(nt=y&&y.minWidth||d)?Oe.nextCellWidth=jt?a.nextColumnWidth-(Ze+mi-$t):mt:(Oe.nextCellWidth=nt,Oe.cellWidth=a.currentColumnWidth+(Ze-nt+mt))),Oe);if(r=m.width!==P){if(s.beginUpdate(),P=Math.floor(P),n=function(Ze,nt){var mt=nt.every($t=>$t.width);if(mt){var jt=nt.reduce(($t,mi)=>(w(mi.width)&&($t+=parseFloat(mi.width)),$t),0);jt>100&&(Ze=Ze/jt*100)}return Ze}(n,o),I(m,P,n,c),u)I(y,$=Math.floor($),n,c);else{var se=this._columnHeadersView.getColumnWidths();se[a.currentColumnIndex]=P;var fe=se.reduce((Ze,nt)=>Ze+nt,0)>this._rowsView.contentWidth();if(!fe){var Se=ye.getLastResizableColumnIndex(o);Se>=0&&s.columnOption(o[Se].index,"visibleWidth","auto")}for(var Fe=0;Fe<se.length;Fe++)o[Fe]&&o[Fe]!==m&&void 0===o[Fe].width&&s.columnOption(o[Fe].index,"width",se[Fe])}if(s.endUpdate(),!u){this.component.updateDimensions();var $e=this.component.getScrollable();if($e&&g){var We=(0,Q.dz)($e.$content())-(0,Q.dz)($e.container())-this._scrollRight;$e.scrollTo({left:We})}}}return r}_subscribeToCallback(e,i){e.add(i),this._subscribesToCallbacks.push({callback:e,handler:i})}_unsubscribeFromCallbacks(){for(var e=0;e<this._subscribesToCallbacks.length;e++){var i=this._subscribesToCallbacks[e];i.callback.remove(i.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var e=this,i=function(){e._isResizing||e.pointsByColumns(null)},r=function(s){e._scrollLeft!==s.left&&(e._scrollLeft=s.left,e.pointsByColumns(null))};e._columnsSeparatorView=e.getView("columnsSeparatorView"),e._columnHeadersView=e.getView("columnHeadersView"),e._trackerView=e.getView("trackerView"),e._rowsView=e.getView("rowsView"),e._columnsController=e.getController("columns"),e._tablePositionController=e.getController("tablePosition"),e._$parentContainer=e.component.$element(),e._draggingHeaderView=e.component.getView("draggingHeaderView"),e._subscribeToCallback(e._columnHeadersView.renderCompleted,i),e._subscribeToCallback(e._columnHeadersView.resizeCompleted,i),e._subscribeToCallback(e._columnsSeparatorView.renderCompleted,()=>{e._unsubscribeFromEvents(),e._subscribeToEvents()}),e._subscribeToCallback(e._rowsView.renderCompleted,()=>{e._rowsView.scrollChanged.remove(r),e._rowsView.scrollChanged.add(r)});var n=0!==e._rowsView.getScrollbarWidth(),a=0;e._subscribeToCallback(e.getController("tablePosition").positionChanged,s=>{if(e._isResizing&&!e._rowsView.isResizing){var o=0!==e._rowsView.getScrollbarWidth();n!==o||a&&a!==s.height?(n=o,a=s.height,e.component.updateDimensions()):e._rowsView.updateFreeSpaceRowHeight()}a=s.height})}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}isResizing(){return this._isResizing}init(){this._subscribesToCallbacks=[],Gc(this)&&this._init()}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}dispose(){this._unsubscribes(),super.dispose()}}},extenders:{views:{rowsView:{_needUpdateRowHeight(t){var e=this.option("wordWrapEnabled"),r=this.getController("columnsResizer").isResizing();return this.callBase.apply(this,arguments)||t>0&&e&&r}}},controllers:{editorFactory:{renderFocusOverlay(){if(!this.getController("columnsResizer").isResizing())return this.callBase.apply(this,arguments)}}}}};l.registerModule("columnsResizingReordering",wl);var Ty=k(3802),rW=(t,e)=>t.length===e.length&&!Object.keys(t).some(i=>t[i]!==e[i]),nW=(t,e)=>(0,ne.bY)(t,e,{maxDepth:4,strict:!0}),aW=(t,e,i,r)=>{var n=t,a=e;return function(){for(var s=arguments.length,o=new Array(s),d=0;d<s;d++)o[d]=arguments[d];return r(o,n)||(n=o,a=i(...n)),a}},sW={compareType:"reference"},FD=function(t){var{compareType:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sW,i=null;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];if(!i){var s=t(...n);return i=aW(n,s,t,"reference"===e?rW:nW),s}return i(...n)}},Ay="rowsview",VD="dx-data-row",oW="dx-group-row",lW="dx-header-row",uW="dx-master-detail-row",ND="dx-freespace-row",zD="dx-master-detail-cell",Yg="dx-command-expand",HD="dx-command-select",ZD="[class^=dx-command]",qg="dx-cell-focus-disabled",$D="dx-state-focused",WD="dx-focused",Ry="delete",jg='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled])\n',KD="".concat(jg,", .dx-dropdowneditor-icon"),YD="columnHeadersView",mW=["shift","control","alt"];function Uc(t){return t&&t.hasClass(oW)}function Oy(t){return t&&t.hasClass(uW)}function Yc(t){return t&&t.hasClass(VD)}function jD(t,e){return!t._isRowEditMode()&&e&&!e.hasClass(HD)&&e.hasClass(wg)}function Pn(t){return(0,v.$K)(t)&&t.length>0}function By(){return"desktop"!==_t.Z.current().deviceType}function XD(t){return!!t.parent(".".concat(lW)).length}var IW={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class EW extends zt.ViewController{init(){var e,i;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._memoFireFocusedCellChanged=FD(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=FD(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function Mv(){Z.Z.on(tt.Z.getDocument(),"visibilitychange",Ff)}(),null===(e=this._editorFactory)||void 0===e||e.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(Vf(),null===(i=this._editorFactory)||void 0===i||i.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){var i,r=(0,C.Z)(e.target),n=(0,C.Z)(e.relatedTarget).closest(this._rowsView.element()).length,a=r.is("a");if(e.relatedTarget&&a&&!n&&this._isEventInCurrentGrid(e)){var s=this._getFocusedCell();s=Pn(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),r.closest(s).length||(e.preventDefault(),Z.Z.trigger(s,"focus"))}var o=r.is("td"),d=(null!==(i=this.option("focusedRowIndex"))&&void 0!==i?i:-1)<0;o&&d&&this._updateFocusedCellPosition(r)}subscribeToRowsViewFocusEvent(){var e,i=null===(e=this._rowsView)||void 0===e?void 0:e.element();Z.Z.on(i,"focusin",this.rowsViewFocusHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e,i=null===(e=this._rowsView)||void 0===e?void 0:e.element();Z.Z.off(i,"focusin",this.rowsViewFocusHandlerContext)}renderCompleted(e){var i=this._rowsView.element(),r=!e||"refresh"===e.changeType,n=this._focusedView&&this._focusedView.name===this._rowsView.name,s=e&&("append"===e.changeType||"prepend"===e.changeType),d=(0,C.Z)(tt.Z.getRootNode(i.get&&i.get(0))).find(":focus"),u=!d.length||d.closest(i).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),n&&u&&(this._isNeedFocus?!s:this._isHiddenFocus&&r&&!e?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var e,i;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(i=null===(e=this._rowsView)||void 0===e?void 0:e.renderCompleted)||void 0===i||i.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var e=tt.Z.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(i=>{var r=(0,C.Z)(i.event.target),n=this._isEventInCurrentGrid(i.event)&&r.closest(".".concat(this.addWidgetPrefix(Ay))).length,a=r.closest(".".concat("dx-dropdowneditor-overlay")).length,s=this.getController("columnsResizer"),o=!!s&&s.isResizing();n||a||o||(!(this._focusedView&&r.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),Z.Z.off(e,(0,be.V4)(qt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&Z.Z.on(e,(0,be.V4)(qt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){var e=By()?ii.u:qt.Z.down,i=this._getRowsViewElement();this._pointerEventAction&&Z.Z.off(i,(0,be.V4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var e=By()?ii.u:qt.Z.down,i=this._getRowsViewElement(),r=".".concat(to," > td, .").concat(to);Z.Z.on(i,(0,be.V4)(e,"dxDataGridKeyboardNavigation"),r,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){Ty.dG.off(this._keyDownListener)}subscribeToKeyDownEvent(){var e=this._getRowsViewElement();this._keyDownListener=Ty.dG.on(e,null,i=>this._keyDownHandler(i))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}dispose(){super.dispose(),this._resetFocusedView(),Ty.dG.off(this._keyDownListener),Z.Z.off(tt.Z.getDocument(),(0,be.V4)(qt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),Vf()}optionChanged(e){switch(e.name){case"keyboardNavigation":case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(e){var i,r=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var n=this._processOnKeyDown(e),a=null===(i=this._editingController)||void 0===i?void 0:i.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!mW.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!n){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,a),n=!0;break;case"upArrow":case"downArrow":e.ctrl?Ah("rowsView",this,s):this._upDownKeysHandler(e,a),n=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),n=!0;break;case"space":n=this._spaceKeyHandler(e,a);break;case"A":(0,be.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,a),n=!0):n=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,a),n=!0;break;case"enter":this._enterKeyHandler(e,a),n=!0;break;case"escape":this._escapeKeyHandler(e,a),n=!0;break;case"F":(0,be.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),n=!0):n=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),n=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(n=this._beginFastEditing(s,!0))}!n&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,r=!1),r&&s.stopPropagation()}}_processOnKeyDown(e){var{originalEvent:i}=e,r={handled:!1,event:i};return this.executeAction("onKeyDown",r),e.ctrl=i.ctrlKey,e.alt=i.altKey,e.shift=i.shiftKey,!!r.handled}_closeEditCell(){setTimeout(()=>{this._editingController.closeEditCell()})}_leftRightKeysHandler(e,i){var r=this.getVisibleRowIndex(),n=e.originalEvent,a=this._focusedView&&this._focusedView.getRow(r),s=this._getDirectionCodeByKey(e.keyName),o=this._isFastEditingStarted();if((!i||o)&&Yc(a)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var u=this._getNextCell(s);Pn(u)&&this._arrowKeysHandlerFocusCell(n,u,s),n&&n.preventDefault()}}_upDownKeysHandler(e,i){var r,n,a=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(a),o=e.originalEvent,d="upArrow"===e.keyName,u=this._dataController.dataSource(),c=null===(n=null===(r=this._editingController)||void 0===r?void 0:r.isEditRowByIndex)||void 0===n?void 0:n.call(r,a),f=this._isFastEditingStarted();if((!c||!i||f)&&s&&!Oy(s)){if(f&&this._closeEditCell(),!this._navigateNextCell(o,e.keyName)&&this._isVirtualRowRender()&&d&&u&&!u.isLoading()){var m=(0,Q.zp)(s);this._scrollBy(0,-m,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(e){var i=this._dataController.pageIndex(),r=this._dataController.pageCount(),n=this.option("paging.enabled"),a="pageUp"===e.keyName,s=a?-1:1,o=this._rowsView.getScrollable();n&&!this._isVirtualScrolling()?(a?i>0:i<r-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(i+s),e.originalEvent.preventDefault()):o&&(0,Q.Cr)(o.container())<(0,Q.Cr)(o.$content())&&(this._scrollBy(0,(0,Q.Cr)(o.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,i){var r=this.getVisibleRowIndex(),n=(0,C.Z)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!i){var a="row"===this._getElementType(n)&&this.isRowFocusType()&&Yc(n);return n.hasClass(HD)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(a||n.parent().hasClass(VD)||n.hasClass(this.addWidgetPrefix(Ay)))&&(this._selectionController.changeItemSelection(r,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,i){!i&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_tabKeyHandler(e,i){var r=this.option("editing"),n=e.shift?"previous":"next",s=!((0,v.$K)(this._focusedCellPosition)&&!(0,v.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=e.originalEvent.target,d=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(o,n)){if((0,C.Z)(d).addClass($D),r&&o&&!s)if((0,C.Z)(o).hasClass(this.addWidgetPrefix(Ay))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(n),i){if(!this._editingCellTabHandler(e,n))return}else this._targetCellTabHandler(e,n)&&(s=!0);s?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var e=this.component.getScrollable();return e?e.scrollWidth()-(0,Q.dz)(this._rowsView.element()):0}_isColumnRendered(e){var i=this._columnsController.getVisibleColumns(null,!0),r=this._columnsController.getVisibleColumns(),n=i[e],a=!1;return n&&(a=r.indexOf(n)>=0),a}_isFixedColumn(e){var r=this._columnsController.getVisibleColumns(null,!0)[e];return!!r&&!!r.fixed}_isColumnVirtual(e){var i=e-this._columnsController.getColumnIndexOffset(),n=this._columnsController.getVisibleColumns()[i];return!!n&&"virtual"===n.command}_processVirtualHorizontalPosition(e){var n,i=this.component.getScrollable(),r=this.getColumnIndex(),a=0,s=!1;switch(e){case"next":case"nextInRow":var o=this._getVisibleColumnCount();n=r+1,a=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?o===n||this._isFixedColumn(r)&&!this._isColumnRendered(n):o>n&&this._isFixedColumn(r)&&!this._isColumnRendered(n);break;case"previous":case"previousInRow":if(n=r-1,a=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){var d=this._columnsController.getColumnIndexOffset();s=n<0&&0===d||this._isFixedColumn(r)&&!this._isColumnRendered(n)}else s=n>=0&&this._isFixedColumn(r)&&!this._isColumnRendered(n)}s?i.scrollTo({left:a}):(0,v.$K)(n)&&(0,v.$K)(e)&&this._isColumnVirtual(n)&&0!==(a=this._getHorizontalScrollPositionOffset(e))&&i.scrollBy({left:a,top:0})}_getHorizontalScrollPositionOffset(e){var i=0,r=this._getCell(this._focusedCellPosition),n=r&&(0,Q.Y_)(r);if(n>0){var a=this.option("rtlEnabled")?-1:1;i="nextInRow"===e||"next"===e?n*a:n*a*-1}return i}_editingCellTabHandler(e,i){var a,r=e.originalEvent.target,n=this._getCellElementFromTarget(r),s=e.originalEvent,o=this._getElementType(r);if(n.is(ZD))return!this._targetCellTabHandler(e,i);this._updateFocusedCellPosition(n);var d=this._getNextCellByTabKey(s,i,o);if(!(n=d.$cell)||this._handleTabKeyOnMasterDetailCell(n,i))return!1;var u=this._columnsController,f=this._rowsView.getCellIndex(n)+u.getColumnIndexOffset(),g=u.getVisibleColumns(null,!0)[f],m=n.parent(),y=this._getRowIndex(m),w=this._dataController.items()[y];if(g&&g.allowEditing){var P=!w||"data"===w.rowType;a=this._editingController.allowUpdating({row:w})?P:w&&w.isNewRow}return a||this._closeEditCell(),this._focusCell(n,!d.isHighlighted)&&(!this._isRowEditMode()&&a?this._editFocusedCell():this._focusInteractiveElement(n,e.shift)),!0}_targetCellTabHandler(e,i){var d,r=e.originalEvent,n=r.target,a=this._getCellElementFromTarget(n),s=this._getInteractiveElement(a,!e.shift),o=!1;if(!jD(this,a)&&s.length&&n!==s.get(0))o=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,C.Z)(n).hasClass(to)&&this._updateFocusedCellPosition(a),d=this._getElementType(n),this.isRowFocusType()&&(this.setCellFocusType(),"row"===d&&Yc((0,C.Z)(n))&&(n=this.getFirstValidCellInRow((0,C.Z)(n)),d=this._getElementType(n)));var u=this._getNextCellByTabKey(r,i,d);if(!(a=u.$cell)||!(a=this._checkNewLineTransition(r,a)))return!1;this._focusCell(a,!u.isHighlighted),jD(this,a)||this._focusInteractiveElement(a,e.shift)}return o}_getNextCellByTabKey(e,i,r){var n=this._getNextCell(i,r),a=n&&this._fireFocusedCellChanging(e,n,!0);return!a||a.cancel?{}:(a.$newCellElement&&(n=a.$newCellElement),{$cell:n,isHighlighted:a.isHighlighted})}_checkNewLineTransition(e,i){var r=this.getVisibleRowIndex(),n=i.parent();if(r!==this._getRowIndex(n)){var a=this._getCellPosition(i),s=this._fireFocusedRowChanging(e,n);if(s.cancel)return;s.rowIndexChanged&&a&&(this.setFocusedColumnIndex(a.columnIndex),i=this._getFocusedCell())}return i}_enterKeyHandler(e,i){var r=this._getFocusedCell(),n=this.getVisibleRowIndex(),a=this._focusedView&&this._focusedView.getRow(n);if(this.option("grouping.allowCollapsing")&&Uc(a)||this.option("masterDetail.enabled")&&r&&r.hasClass(Yg)){var s=this._dataController.getKeyByRowIndex(n),o=this._dataController.items()[n];void 0!==s&&o&&o.data&&!o.data.isContinuation&&this._dataController.changeRowExpand(s)}else this._processEnterKeyForDataCell(e,i)}_processEnterKeyForDataCell(e,i){var r=this._getEnterKeyDirection(e),n=this._allowEditingOnEnterKey();i||!n&&r?(this._handleEnterKeyEditingCell(e.originalEvent),"next"===r||"previous"===r?this._targetCellTabHandler(e,r):("upArrow"===r||"downArrow"===r)&&this._navigateNextCell(e.originalEvent,r)):n&&this._startEditing(e)}_getEnterKeyDirection(e){var i=this.option("keyboardNavigation.enterKeyDirection"),r=e.shift;return"column"===i?r?"upArrow":"downArrow":"row"===i?r?"previous":"next":void 0}_handleEnterKeyEditingCell(e){var{target:i}=e,r=this._getCellElementFromTarget(i),n=this._isRowEditMode();this._updateFocusedCellPosition(r),n?(this._focusEditFormCell(r),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(Z.Z.trigger((0,C.Z)(i),"change"),this._closeEditCell(),e.preventDefault())}_escapeKeyHandler(e,i){var r=this._getCellElementFromTarget(e.originalEvent.target);i&&(this._updateFocusedCellPosition(r),this._isRowEditMode()?(this._focusEditFormCell(r),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault())}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){var i=this._headerPanel.getSearchTextEditor();i&&(i.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){var e=this._editingController.isEditing(),i=this.getVisibleRowIndex(),r=this._focusedView&&this._focusedView.getRow(i);!e&&Yc(r)&&this._startEditing()}_navigateNextCell(e,i){var r=this._getNextCell(i),n=this._getDirectionCodeByKey(i);return!(!r||!this._isCellValid(r))&&this._arrowKeysHandlerFocusCell(e,r,n)}_arrowKeysHandlerFocusCell(e,i,r){var a=this._fireFocusChangingEvents(e,i,"prevRow"===r||"nextRow"===r,!0);return i=a.$newCellElement,!(a.cancel||!this._isCellValid(i)||(this._focus(i,!a.isHighlighted),0))}_beginFastEditing(e,i){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(i)this._startEditing(e,Ry);else{var{key:r}=e,n=e.keyCode||e.which,a=r||n&&String.fromCharCode(n);a&&(1===a.length||a===Ry)&&this._startEditing(e,a)}return!0}_pointerEventHandler(e){var i,r=e.event||e,n=(0,C.Z)(r.currentTarget),a=null===(i=this._rowsView)||void 0===i?void 0:i.element(),s=n.parent(),o=(0,C.Z)(r.target).is(jg),d=!!(0,C.Z)(r.target).closest(".".concat("dx-revert-button")).length,u=n.hasClass(Yg);this._isEventInCurrentGrid(r)&&(d||!this._isCellValid(n,!o)&&!u?n.is("td")&&this._resetFocusedCell():(n=this._isInsideEditForm(n)?(0,C.Z)(r.target):n,this._focusView(),(0,C.Z)(a).removeClass($D),s.hasClass(ND)?(this._updateFocusedCellPosition(n),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(n)?this._updateFocusedCellPosition(n):this._clickTargetCellHandler(r,n)))}_clickTargetCellHandler(e,i){var r=this._rowsView.getCellIndex(i),n=this._columnsController.getVisibleColumns()[r],a=this._isCellEditMode();this.setCellFocusType();var s=this._fireFocusChangingEvents(e,i,!0);if(i=s.$newCellElement,s.cancel)this.setRowFocusType(),this.setFocusedRowIndex(s.prevRowIndex),this._editingController.isEditing()&&a&&this._closeEditCell();else{if(s.resetFocusedRow)return void this.getController("focus")._resetFocusedRow();if(s.rowIndexChanged&&(i=this._getFocusedCell()),!s.isHighlighted&&!a&&this.setRowFocusType(),this._updateFocusedCellPosition(i),this._allowRowUpdating()&&a&&n&&n.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{i=this._getFocusedCell();var o=e&&(0,C.Z)(e.target).closest("".concat(KD,", td")),d=o&&o.not(i).is(KD),u=!!n&&!n.command&&i.hasClass(wg);this._focus(i,!u&&(!s.isHighlighted||d),d)}}}_allowRowUpdating(){var e=this.getVisibleRowIndex(),i=this._dataController.items()[e];return this._editingController.allowUpdating({row:i},"click")}focus(e){var i,r=this.option("focusedRowEnabled"),n=this._isCellElement((0,C.Z)(e));e||(i=".dx-datagrid-rowsview .dx-row[tabindex]",r||(i+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(i).first()),e&&this._focusElement((0,C.Z)(e),n)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,v.$K)(this._focusedView)&&this._focusView()}_focusElement(e,i){var r=(0,C.Z)(this._getRowsViewElement()),n=e.closest(r),a=this.isRowFocusType(),s={};!n.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||Uc(e))&&(this.setCellFocusType(),e=(s=this._fireFocusChangingEvents(null,e,!0,i)).$newCellElement,a&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(e,!s.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){var i=this.getFocusedView(),r=i&&(0,C.Z)(i.element());return e&&0!==e.closest(r).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,i){if(e){var r=this._getInteractiveElement(e,i);ye.focusAndSelectElement(this,r)}}_focus(e,i,r){var n=e&&!e.hasClass(to)?e.closest(".".concat(to)):e;if(!n||!function wW(t){return!t||t.hasClass(ND)||t.hasClass("dx-virtual-row")}(n)){var o,a=this._focusedView,s=a&&a.element();this._isHiddenFocus=i;var d=Uc(n)||function yW(t){return t&&t.hasClass("dx-datagrid-group-footer")}(n)||this.isRowFocusType();d?(o=n,a&&this.setFocusedRowIndex(this._getRowIndex(n))):this._isCellElement(e)&&(o=e,this._updateFocusedCellPosition(e)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(qg).removeClass(WD).removeAttr("tabindex"),Z.Z.one(o,"blur",u=>{u.relatedTarget&&o.removeClass(qg).removeClass(WD)}),r||(this._applyTabIndexToElement(o),Z.Z.trigger(o,"focus")),i?(o.addClass(qg),d&&e.addClass(qg)):this._editorFactory.focus(o))}}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var i=this._getFocusedCell(),r=this._editingController.isEditing();if((!this._isMasterDetailCell(i)||this._isRowEditMode())&&(this._hasSkipRow(i.parent())&&(i=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),Pn(i)))if(i.is("td")||i.hasClass(this.addWidgetPrefix("edit-form-item"))){var a=i.is(ZD),s=i.find(":focus"),o=Pn(s);if(!e&&a||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(i,this._isHiddenFocus);else{if(a&&o)return void ye.focusAndSelectElement(this,s);!o&&this._focus(i)}r&&this._focusInteractiveElement.bind(this)(i)}else Z.Z.trigger(i,"focus")}})}_needFocusEditingCell(){var e=this._editingController.getEditMode()===Ac,i=this._editingController.getEditMode()===ru,r=e&&this._editingController.hasChanges(),n=i&&this._editingController.isNewRowInEditMode(),a=this._getFocusedCell();return(0===a.children().length||a.find(Tb).length>0)&&(r||n)}_getFocusedCell(){return(0,C.Z)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var i;if("row"===this._getElementType(e)&&(0,v.$K)(null===(i=this._focusedCellPosition)||void 0===i?void 0:i.columnIndex)){var n=(0,C.Z)(e);this._focusedView&&Uc(n)&&this.setFocusedRowIndex(this._getRowIndex(n))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,i){var r=this._getCellPosition(e,i);return r&&(!e.length||r.rowIndex>=0&&r.columnIndex>=0)&&this.setFocusedCellPosition(r.rowIndex,r.columnIndex),r}_getFocusedColumnIndexOffset(e){var i=0,r=this._columnsController.getVisibleColumns()[e];return r&&r.fixed?i=this._getFixedColumnIndexOffset(r):e>=0&&(i=this._columnsController.getColumnIndexOffset()),i}_getFixedColumnIndexOffset(e){var i=function xW(t,e){return t.option("rtlEnabled")?!("right"===e.fixedPosition||(0,v.$K)(e.command)&&!(0,v.$K)(e.fixedPosition)):!(!(0,v.$K)(e.fixedPosition)||"left"===e.fixedPosition)}(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return i}_getCellPosition(e,i){var r,n=Pn(e)&&e.closest("tr");if(Pn(n)){var a=this._getRowIndex(n);return r=this._rowsView.getCellIndex(e,a),r+=this._getFocusedColumnIndexOffset(r),i&&(r=this._applyColumnIndexBoundaries(r="previous"===i?r-1:r+1)),{rowIndex:a,columnIndex:r}}}_focusCell(e,i){if(this._isCellValid(e))return this._focus(e,i),!0}_focusEditFormCell(e){e.hasClass(zD)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var i,r=this._getFocusedCell();Pn(r)&&r.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(i=this._focusedView)||void 0===i||i.renderFocusState({preventScroll:e})}restoreFocusableElement(e,i){var r,n,a=(0,v.$K)(e),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,d=this._dataController.getRowIndexOffset();e=a?e:this._rowsView.getTopVisibleItemIndex()+d,a?(n=this._rowsView.getRow(e-d),!(r=this._fireFocusedRowChanging(i,n)).cancel&&r.rowIndexChanged&&(e=r.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),Z.Z.trigger(s,"focus")),(!a||!r.cancel)&&this.setFocusedCellPosition(e,o),a&&this._updateFocus()}_getNewPositionByCode(e,i,r){var{columnIndex:n}=e,{rowIndex:a}=e;if(void 0===e.rowIndex&&"next"===r)return{columnIndex:0,rowIndex:0};switch(r){case"nextInRow":case"next":n<this._getVisibleColumnCount()-1&&"row"!==i&&this._hasValidCellAfterPosition({columnIndex:n,rowIndex:a})?n++:!this._isLastRow(a)&&"next"===r&&(n=0,a++);break;case"previousInRow":case"previous":n>0&&"row"!==i&&this._hasValidCellBeforePosition({columnIndex:n,rowIndex:a})?n--:a>0&&"previous"===r&&(a--,n=this._getVisibleColumnCount()-1);break;case"upArrow":a=a>0?a-1:a;break;case"downArrow":a=this._isLastRow(a)?a:a+1}return{columnIndex:n,rowIndex:a}}setFocusedCellPosition(e,i){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(i)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e,i=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,v.$K)(i)||i<0?-1:i-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e,i=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,v.$K)(i)?i-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){var i=this._getVisibleColumnCount();return e<0?e=0:e>=i&&(e=i-1),e}_isCellByPositionValid(e){var i=(0,C.Z)(this._getCell(e));return this._isCellValid(i)}_isLastRow(e){var i=this._dataController,r=i.items().filter(n=>!1!==n.visible);return this._isVirtualRowRender()?e>=i.getMaxRowIndex():e===r.length-1}_isFirstValidCell(e){var i=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(i=i||!this._hasValidCellBeforePosition(e)),i}_hasValidCellBeforePosition(e){for(var{columnIndex:i}=e,r=!1;i>0&&!r;){var n={columnIndex:--i,rowIndex:e.rowIndex};r=this._isCellByPositionValid(n)}return r}_hasValidCellAfterPosition(e){for(var{columnIndex:i}=e,r=!1,n=this._getVisibleColumnCount();i<n-1&&!r;){var a={columnIndex:++i,rowIndex:e.rowIndex};r=this._isCellByPositionValid(a)}return r}_isLastValidCell(e){var i=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:r}=e,n={columnIndex:i,rowIndex:r},a=this._dataController.getVisibleRows(),s=a&&a[r];return!!this._isLastRow(r)&&(!!(s&&"group"===s.rowType&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(n)&&this._isLastValidCell(n))}_isCellValid(e,i){if(Pn(e)){var r=e.parent(),n=this._columnsController,a=this._rowsView.getCellIndex(e)+n.getColumnIndexOffset(),s=n.getVisibleColumns(null,!0)[a],o=this._getVisibleColumnCount(),d=this._editingController,u=Oy(r),c=s&&s.showWhenGrouped,f=s&&!e.hasClass(Yg)&&Yc(r);if((t=>void 0!==t.attr("dx-drag-cell"))(e))return!1;if(this._isMasterDetailCell(e))return!0;if(o>a&&(!u&&s&&(!(0,v.$K)(s.groupIndex)||c&&f)||parseInt(e.attr("colspan"),10)>1)){var m=this._dataController.items(),y=this._rowsView.getRowIndex(r),w=m[y],I=d&&this._isCellEditMode()&&d.isEditing(),P=d&&d.isEditRow(y),$=P||I;return s.command?this._isLegacyNavigation()?!$&&"expand"===s.command:!I&&(P?"select"!==s.command:!$):(!I||!w||"data"===w.rowType)&&(!$||s.allowEditing||i)}}}getFirstValidCellInRow(e,i){for(var n,a,r=e.find("> td"),s=i=i||0;s<r.length;++s)if(n=r.eq(s),this._isCellValid(n)){a=n;break}return a}_getNextCell(e,i,r){var o,d,n=r||this._focusedCellPosition,a=this.isRowFocusType(),s=a||["next","previous"].includes(e);if(this._focusedView&&n){var u=this._getNewPositionByCode(n,i,e);o=(0,C.Z)(this._getCell(u));var c="previous"===e?this._isFirstValidCell(u):this._isLastValidCell(u);if(Pn(o)&&!this._isCellValid(o)&&this._isCellInRow(u,s)&&!c&&(o=a?this.getFirstValidCellInRow(o.parent(),u.columnIndex):this._getNextCell(e,"cell",u)),d=Pn(o)&&o.parent(),this._hasSkipRow(d)){var f=this._getRowIndex(d);if(this._isLastRow(f))return null;o=this._getNextCell(e,"row",{columnIndex:n.columnIndex,rowIndex:f})}return Pn(o)?o:null}return null}_startEditing(e,i){var r=this._focusedCellPosition,n=this.getVisibleRowIndex(),a=this.getVisibleColumnIndex(),s=this._dataController.items()[n],o=this._columnsController.getVisibleColumns()[a];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(n):r&&this._startEditCell(e,i))}_isAllowEditing(e,i){return this._editingController.allowUpdating({row:e})&&i&&i.allowEditing}_editFocusedCell(){var e=this.getVisibleRowIndex(),i=this.getVisibleColumnIndex();return this._editingController.editCell(e,i)}_startEditCell(e,i){this._fastEditingStarted=(0,v.$K)(i);var r=this._editFocusedCell(),n=(0,v.EY)(r);if(this._isFastEditingStarted()&&(n||r)){var s=n&&i===Ry?"":i,o=n?r:(0,Y.BH)().resolve(),d=this._rowsView.waitAsyncTemplates(!0);(0,Y.gx)(o,d).done(()=>{this._editingCellHandler(e,s)})}}_editingCellHandler(e,i){var r,n,a=this._getFocusedCell().find(jg).eq(0),s=a.get(0);if(s){var o=(0,be.yM)(e,{type:"keydown",target:s}),d=(0,be.yM)(e,{type:"keypress",target:s}),u=(0,be.yM)(e,{type:"input",target:s});u.originalEvent&&(u.originalEvent=(0,be.yM)(u.originalEvent,{data:i})),null===(n=(r=s).select)||void 0===n||n.call(r),Z.Z.trigger(a,o),o.isDefaultPrevented()||(Z.Z.trigger(a,d),d.isDefaultPrevented())||setTimeout(()=>{a.val(i);var f=a.closest(".".concat("dx-widget"));Z.Z.off(f,"focusout"),Z.Z.one(f,"focusout",()=>{Z.Z.trigger(a,"change")}),Z.Z.trigger(a,u)},pi.Z.mozilla?25:0)}}_fireFocusChangingEvents(e,i,r,n){var a,s={},o=null!==(a=this._getCellPosition(i))&&void 0!==a?a:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(e,i,n)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,n=s.isHighlighted,i=(0,C.Z)(this._getCell(o)))),!s.cancel&&r&&i&&((s=this._fireFocusedRowChanging(e,i.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=n)),s.$newCellElement=(0,C.Z)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=i),s}_fireFocusedCellChanging(e,i,r){var n=this.option("focusedColumnIndex"),a=this.option("focusedRowIndex"),s=this._getCellPosition(i),o=s?s.columnIndex:-1,d=s?s.rowIndex:-1,f={cellElement:i,prevColumnIndex:n,prevRowIndex:a,newColumnIndex:o,newRowIndex:d,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:e,isHighlighted:r||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",f),(f.newColumnIndex!==o||f.newRowIndex!==d)&&(f.$newCellElement=(0,C.Z)(this._getCell({columnIndex:f.newColumnIndex,rowIndex:f.newRowIndex}))),f.cancel&&(this._canceledCellPosition={rowIndex:d,columnIndex:o}),f}_fireFocusedCellChanged(e){var i=this._rowsView.getCellIndex(e),r=e?.parent().data("options"),n=r?.key;this._memoFireFocusedCellChanged(n,i)}_memoFireFocusedCellChanged(e,i){var r=this._getFocusedCell(),n=this._getRowIndex(r?.parent()),a=Math.min(n-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(a,i)){var o=this._dataController.items()[a],d=this._columnsController.getVisibleColumns()[i];this.executeAction("onFocusedCellChanged",{cellElement:r?(0,gt.u)(r):void 0,columnIndex:i,rowIndex:n,row:o,column:d})}}_fireFocusedRowChanging(e,i){var r=this._getRowIndex(i),n=this.option("focusedRowIndex"),a=this._dataController.loadingOperationTypes(),s={rowElement:i,prevRowIndex:n,newRowIndex:r,event:e,rows:this._dataController.getVisibleRows(),cancel:!1};return!this._dataController||this._dataController.isLoading()&&(a.reload||a.paging)?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==r&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e,i=this.option("focusedRowEnabled"),r=this.option("focusedRowKey"),n=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(r);!i||(0,v.$K)(r)&&n<0||this._memoFireFocusedRowChanged(r,n)}_memoFireFocusedRowChanged(e,i){var r=i-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:i<0?void 0:this._rowsView.getRowElement(r),rowIndex:i,row:i<0?void 0:this._dataController.getVisibleRows()[r]})}_isEventInCurrentGrid(e){return ye.isElementInCurrentGrid(this,(0,C.Z)(e.target))}_isRowEditMode(){var e=this._editingController.getEditMode();return e===io||e===nu}_isCellEditMode(){var e=this._editingController.getEditMode();return e===Ac||e===ru}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,i){var r=e.find(jg).filter(":visible");return i?r.last():r.first()}_applyTabIndexToElement(e){var i=this.option("tabIndex")||0;e.attr("tabindex",(0,v.$K)(i)?i:0)}_getCell(e){if(this._focusedView&&e){var i=this._dataController.getRowIndexOffset(),r=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],n=r&&r.fixed?this._getFixedColumnIndexOffset(r):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:e.rowIndex>=0?e.rowIndex-i:-1,columnIndex:e.columnIndex>=0?e.columnIndex-n:-1})}}_getRowIndex(e){var i=this._rowsView.getRowIndex(e);return i>=0&&(i+=this._dataController.getRowIndexOffset()),i}_hasSkipRow(e){var i=e&&e.get(0);return i&&("none"===i.style.display||Oy(e)&&!e.hasClass(this.addWidgetPrefix(xg)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){var i;switch(e){case"upArrow":i="prevRow";break;case"downArrow":i="nextRow";break;case"leftArrow":i=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":i=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return i}_isVirtualScrolling(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||ye.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(e,i,r,n){var a=this,s=this._rowsView.getScrollable();return a._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(a.restoreFocusableElement.bind(a,r,n))}),s.scrollBy({left:e,top:i})}_isInsideEditForm(e){var i=(0,C.Z)(e).closest(".".concat(this.addWidgetPrefix(xg)));return i.length&&this.elementIsInsideGrid(i)}_isMasterDetailCell(e){var i=(0,C.Z)(e).closest(".".concat(zD));return i.length&&this.elementIsInsideGrid(i)}_processNextCellInMasterDetail(e,i){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,i){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,C.Z)(e),i);var r=this._getNextCell(i,"row");return this._processNextCellInMasterDetail(r,(0,C.Z)(e)),!0}return!1}_getElementType(e){return(0,C.Z)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,i){var{columnIndex:r}=e,n=this._getVisibleColumnCount();return i?r>=0&&r<=n-1:r>0&&r<n-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){var i=this._getElementType(e),r=(0,C.Z)(e);return"cell"===i?r.closest(".".concat(to," > td")):r.children().not(".".concat(Yg)).first()}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,i){if(this._canceledCellPosition){var r=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===i;return this._canceledCellPosition=null,r}}updateFocusedRowIndex(){var e=this._dataController,i=this.getVisibleRowIndex(),r=e.items(),n=r.length?r.length-1:-1,a=e.getRowIndexOffset();n>=0&&i>n&&this.setFocusedRowIndex(n+a)}}},extenders:{views:{rowsView:{_rowClick(t){var e=this.getController("editing").getEditRowIndex(),i=this.getController("keyboardNavigation"),r=i.isKeyboardEnabled();e===t.rowIndex&&i.setCellFocusType(),(By()||!r)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(t,!r),this.callBase.apply(this,arguments)},_triggerPointerDownEventHandler(t,e){var{originalEvent:i}=t.event;if(i){var r=this.getController("keyboardNavigation"),n=(0,C.Z)(i.target),a=this.getCellIndex(n),s=this.getController("columns").getVisibleColumns()[a],o=this.getController("data").items()[t.rowIndex];if(r._isAllowEditing(o,s)||e){var d=(0,be.yM)(i,{currentTarget:i.target});r._pointerEventHandler(d)}}},renderFocusState(t){var{preventScroll:e,pageSizeChanged:i}=t??{},r=this.getController("keyboardNavigation"),n=this.element();n&&!(0,cg.si)(n)&&n.attr("tabindex",null),i&&r.updateFocusedRowIndex();var a=r.getVisibleRowIndex();(!(0,v.$K)(a)||a<0)&&(a=0);var s=this.getCellElements(a);r.isKeyboardEnabled()&&s?.length&&this.updateFocusElementTabIndex(s,e)},updateFocusElementTabIndex(t){var e=this.getController("keyboardNavigation"),i=t.eq(0).parent();if(Uc(i))e._applyTabIndexToElement(i);else{var r=e.getColumnIndex();(!(0,v.$K)(r)||r<0)&&(r=0),this._updateFocusedCellTabIndex(t,r)}},_updateFocusedCellTabIndex(t,e){var i=this.getController("keyboardNavigation"),r=t?t.length:-1,n=function(o){var d=i._isMasterDetailCell(o),u=i._isCellValid(o);if(!d&&u&&i._isCellElement(o))return i._applyTabIndexToElement(o),i.setCellFocusType(),!0},a=((t,e)=>t.filter("[".concat("aria-colindex",'="').concat(e+1,'"]:not([').concat("dx-drag-cell","])")).first())(t,e);if(a.length)n(a);else{r<=e&&(e=r-1);for(var s=e;s<r&&!n((0,C.Z)(t[s]));++s);}},renderDelayedTemplates(t){this.callBase.apply(this,arguments),this._renderFocusByChange(t)},_renderFocusByChange(t){var{operationTypes:e,repaintChangesOnly:i}=t??{},{fullReload:r,pageSize:n}=e??{};if(!t||!i||r||n){var a=function SW(t){var e=t.getController("keyboardNavigation");return!!e._isVirtualScrolling()&&t.option("focusedRowIndex")===e.getRowIndex()}(this);this.renderFocusState({preventScroll:a,pageSizeChanged:n})}},_renderCore(t){var e=this.callBase.apply(this,arguments);return this._renderFocusByChange(t),e},_editCellPrepared(t){var e=this._getEditorInstance(t),i=this.getController("keyboardNavigation"),r=i&&i._isFastEditingStarted();e&&r&&this._handleEditingNavigationMode(e),this.callBase.apply(this,arguments)},_handleEditingNavigationMode(t){["downArrow","upArrow"].forEach(i=>{var r=t._supportedKeys()[i];t.registerKeyHandler(i,n=>{if("true"===t._input().attr("aria-expanded"))return r&&r.call(t,n)})}),t.registerKeyHandler("leftArrow",ne.ZT),t.registerKeyHandler("rightArrow",ne.ZT),"dxDateBox"===t.NAME&&t.option("useMaskBehavior")&&t.registerKeyHandler("enter",ne.ZT)},_getEditorInstance(t){var e=t.find(".dx-texteditor").eq(0);return ye.getWidgetInstance(e)}}},controllers:{editing:{editCell(t,e){var i=this.getController("keyboardNavigation");if(i._processCanceledEditCellPosition(t,e))return!1;var r=this.callBase(t,e);return r&&i.setupFocusedView(),r},editRow(t){var e=this.getController("keyboardNavigation"),i=e.getVisibleColumnIndex(),r=this._columnsController.getVisibleColumns()[i];(r&&r.type||this.option("editing.mode")===nu)&&e._resetFocusedCell(),this.callBase(t)},addRow(t){var e=this.getController("keyboardNavigation");return e.setupFocusedView(),e.setCellFocusType(),this.callBase.apply(this,arguments)},getFocusedCellInRow(t){var e=this.getController("keyboardNavigation"),i=this.callBase(t);if(e.isKeyboardEnabled()&&e._focusedCellPosition.rowIndex===t){var r=e._getFocusedCell();Pn(r)&&!r.hasClass("dx-command-edit")&&(i=r)}return i},_processCanceledEditingCell(){this.closeEditCell().done(()=>{this.getController("keyboardNavigation")._updateFocus()})},init(){this.callBase(),this._keyboardNavigationController=this.getController("keyboardNavigation")},closeEditCell(){var t=this._keyboardNavigationController;t._fastEditingStarted=!1;var e=this.callBase.apply(this,arguments);return t._updateFocus(),e},_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,this.callBase.apply(this,arguments)},_isEditingStart(){var t=this.getController("keyboardNavigation"),e=this.callBase.apply(this,arguments);if(e&&!t._isNeedFocus){var i=t._getFocusedCell();t._focus(i,!0)}return e}},data:{_correctRowIndices(t){var e=this.getController("keyboardNavigation"),i=this.getController("editorFactory"),r=e._focusedCellPosition;if(this.callBase.apply(this,arguments),r&&r.rowIndex>=0){var n=t(r.rowIndex);n&&(r.rowIndex+=n,i.refocus())}},getMaxRowIndex(){var t=this.items().length-1,e=this.virtualItemsCount();return e&&(t+=this.getRowIndexOffset()+e.end),t}},adaptiveColumns:{_showHiddenCellsInView(t){var{viewName:e,$cells:i,isCommandColumn:r}=t;this.callBase.apply(this,arguments),e===YD&&!r&&i.each((n,a)=>{var s=(0,C.Z)(a);XD(s)&&s.attr("tabindex",0)})},_hideVisibleCellInView(t){var{viewName:e,$cell:i,isCommandColumn:r}=t;this.callBase.apply(this,arguments),e===YD&&!r&&XD(i)&&i.removeAttr("tabindex")}}}}};function ky(t,e,i,r){var n=0;if(t<e)for(;n<i.items.length;n++)ky(t+1,e,i.items[n],r);t===e&&r(i)}function Xg(t,e){var i;if("map"in t)return t.map(e);var r=new Array(t.length);for(i in t)r[i]=e(t[i],i);return r}function DW(t){return t===On.bG.count}function QD(t){var e=(0,Pt.vb)(t.selector),i=!("skipEmptyValues"in t)||t.skipEmptyValues,{aggregator:r}=t;if("string"==typeof r&&!(r=On.bG[r]))throw og.R0.Error("E4001",t.aggregator);return{selector:e,aggregator:r,skipEmptyValues:i}}l.registerModule("keyboardNavigation",IW);const AW=en.Z.inherit({ctor(t){this._data=t.data,this._groupLevel=t.groupLevel||0,this._totalAggregates=Xg(t.totalAggregates||[],QD),this._groupAggregates=Xg(t.groupAggregates||[],QD),this._totals=[]},calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})},totalAggregates(){return this._totals},_aggregate(t,e,i){for(var r=e.items?e.items.length:0,n=0;n<t.length;n++)if(DW(t[n].aggregator))i[n]=(i[n]||0)+r;else for(var a=0;a<r;a++)this._accumulate(n,t[n],i,e.items[a])},_calculateTotals(t,e){if(0===t&&(this._totals=this._seed(this._totalAggregates)),t===this._groupLevel)this._aggregate(this._totalAggregates,e,this._totals);else for(var i=0;i<e.items.length;i++)this._calculateTotals(t+1,e.items[i]);0===t&&(this._totals=this._finalize(this._totalAggregates,this._totals))},_calculateGroups(t){var e=this._groupLevel,i=e+1,r=this._seed.bind(this,this._groupAggregates),n=this._aggregate.bind(this,this._groupAggregates),a=this._finalize.bind(this,this._groupAggregates);function s(o){o.aggregates=r(i-1),i===e?n(o,o.aggregates):ky(i,e,o,d=>{n(d,o.aggregates)}),o.aggregates=a(o.aggregates)}for(;--i>0;)ky(0,i,t,s)},_seed:(t,e)=>Xg(t,i=>{var{aggregator:r}=i;return"seed"in r?(0,v.mf)(r.seed)?r.seed(e):r.seed:NaN}),_accumulate(t,e,i,r){var n=e.selector(r),{aggregator:a}=e,{skipEmptyValues:s}=e;s&&function TW(t){return t!=t||""===t||null==t}(n)||(i[t]=i[t]!=i[t]?n:a.step(i[t],n))},_finalize:(t,e)=>Xg(t,(i,r)=>{var n=i.aggregator.finalize;return n?n(e[r]):e[r]})});var My="groupFooter",JD="totalFooter",eA=function(t,e){var i=(0,C.Z)(t),{column:r}=e,{summaryItems:n}=e,a=[];if(!r.command&&n){for(var s=0;s<n.length;s++){var o=n[s];a.push((0,C.Z)("<div>").css("textAlign",o.alignment||r.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===e.rowType).text(l.getSummaryText(o,e.summaryTexts)))}i.append(a)}},tA=function(t,e){var i=t.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:i}},Ly=function(t){return t.summary||t.aggregates||[]},Py=function(t){return t.option("summary.recalculateWhileEditing")},FW=nl.inherit({_getRows(){return this._dataController.footerItems()},_getCellOptions(t){return(0,O.l)(this.callBase(t),tA(this,t))},_renderCellContent(t,e){eA(t,e),this.callBase.apply(this,arguments)},_renderCore(t){var e=!1,i=this._dataController.footerItems()[0];(!t||!t.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),e=!0),i&&i.summaryCells&&i.summaryCells.length&&(this._updateContent(this._renderTable({change:t}),t),e&&this._updateScrollLeftPosition())},_updateContent(t,e){return e&&"update"===e.changeType&&e.columnIndices?this.waitAsyncTemplates().done(()=>{var i=this.getTableElement().find(".dx-row"),r=t.find(".dx-row");this._updateCells(i,r,e.columnIndices[0])}):this.callBase.apply(this,arguments)},_rowClick(t){var e=this._dataController.footerItems()[t.rowIndex]||{};this.executeAction("onRowClick",(0,O.l)({},t,e))},_columnOptionChanged(t){var{optionNames:e}=t;t.changeTypes.grouping||(e.width||e.visibleWidth)&&this.callBase(t)},_handleDataChanged(t){var{changeType:e}=t;"update"===t.changeType&&t.repaintChangesOnly?t.totalColumnIndices?t.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[t.totalColumnIndices]}):this.render():("refresh"===e||"append"===e||"prepend"===e)&&this.render()},_createRow(t){var e=this.callBase.apply(this,arguments);return t.rowType===JD&&e.addClass("dx-footer-row"),e},getHeight(){return this.getElementHeight()},isVisible(){return!!this._dataController.footerItems().length}}),VW={init(){this.callBase.apply(this,arguments),this._totalAggregates=[],this._summaryGetter=ne.ZT},summaryGetter(t){if(!arguments.length)return this._summaryGetter;(0,v.mf)(t)&&(this._summaryGetter=t)},summary(t){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return t}},totalAggregates(){return this._totalAggregates},isLastLevelGroupItemsPagingLocal(){var t=this.summary(),e=t&&t.sortByGroups();return e&&e.length},sortLastLevelGroupItems(t,e,i){var r=wc.Z.multiLevelGroup((0,hl.Z)(t),e).toArray(),n=[];return i.forEach(a=>{!function s(o,d,u,c){c=c||[];for(var f=0;f<o.length;f++)c.push(o[f].key),1===d?u(c,o[f].items):s(o[f].items,d-1,u,c),c.pop()}(r,e.length,(s,o)=>{a.toString()===s.toString()&&(n=n.concat(o))})}),n}},NW=function(){var t=function(i,r,n,a){var s;if(Py(i)){var o=i.getController("editing");if(o){var d=o.getInsertedData();d.length&&(n=function c(f,g,m){return m?c(f,g.map(y=>({items:[y]}),m-1)):f.concat(g)}(n,d,a));var u=o.getRemovedData();u.length&&(n=function c(f,g,m){return m?f.map(y=>{var w={},I=c(y.items||[],g,m-1);return Object.defineProperty(w,"aggregates",{get:()=>y.aggregates,set:P=>{y.aggregates=P}}),(0,O.l)(w,y,{items:I})}):f.filter(y=>g.indexOf(y)<0)}(n,u,a))}}return r&&(s=new AW({totalAggregates:r.totalAggregates,groupAggregates:r.groupAggregates,data:n,groupLevel:a})).calculate(),s?s.totalAggregates():[]},e=function(i,r,n){var a=n&&n.sortByGroups&&n.sortByGroups();return a&&a.length?function s(o,d,u){if(!o||!d.length)return o;var g,f=u[0];return d[0]&&f&&f.length&&(g=(0,hl.Z)(o),(0,U.S6)(f,function(m){g=0===m?g.sortBy(this.selector,this.desc):g.thenBy(this.selector,this.desc)}),g.enumerate().done(m=>{o=m})),d=d.slice(1),u=u.slice(1),d.length&&u.length&&(0,U.S6)(o,function(){this.items=s(this.items,d,u)}),o}(i,r,a):i};return{_customizeRemoteOperations(i){var r=this.summary();r&&(i.remoteOperations.summary?(!i.isCustomLoading||i.storeLoadOptions.isLoadingAll)&&(i.storeLoadOptions.group&&(i.remoteOperations.grouping?i.storeLoadOptions.groupSummary=r.groupAggregates:r.groupAggregates.length&&(i.remoteOperations.paging=!1)),i.storeLoadOptions.totalSummary=r.totalAggregates):(r.totalAggregates.length||r.groupAggregates.length&&i.storeLoadOptions.group)&&(i.remoteOperations.paging=!1)),this.callBase.apply(this,arguments);var n=i.cachedData.extra;n&&n.summary&&!i.isCustomLoading&&(i.storeLoadOptions.totalSummary=void 0)},_handleDataLoadedCore(i){var r,n,a=(0,On.G5)(i.storeLoadOptions.group||i.loadOptions.group||[]),s=i.remoteOperations||{},o=this.summaryGetter()(s);if(!i.isCustomLoading||i.storeLoadOptions.isLoadingAll)if(s.summary)!s.paging&&a.length&&o&&(s.grouping||t(this,{groupAggregates:o.groupAggregates},i.data,a.length),i.data=e(i.data,a,o));else if(!s.paging&&o){var d=i.operationTypes||{};if(!Object.keys(d).some(f=>d[f])||null===(n=null===(r=i.cachedData)||void 0===r?void 0:r.extra)||void 0===n||!n.summary||a.length&&o.groupAggregates.length){var c=t(this,o,i.data,a.length);i.extra=(0,v.PO)(i.extra)?i.extra:{},i.extra.summary=c,i.cachedData&&(i.cachedData.extra=i.extra)}i.data=e(i.data,a,o)}i.isCustomLoading||(this._totalAggregates=i.extra&&i.extra.summary||this._totalAggregates),this.callBase(i)}}}();lc.extend(VW),lc.extend(NW),l.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:le.Z.format("dxDataGrid-summarySum"),sumOtherColumn:le.Z.format("dxDataGrid-summarySumOtherColumn"),min:le.Z.format("dxDataGrid-summaryMin"),minOtherColumn:le.Z.format("dxDataGrid-summaryMinOtherColumn"),max:le.Z.format("dxDataGrid-summaryMax"),maxOtherColumn:le.Z.format("dxDataGrid-summaryMaxOtherColumn"),avg:le.Z.format("dxDataGrid-summaryAvg"),avgOtherColumn:le.Z.format("dxDataGrid-summaryAvgOtherColumn"),count:le.Z.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:FW},extenders:{controllers:{data:{_isDataColumn:t=>t&&(!(0,v.$K)(t.groupIndex)||t.showWhenGrouped),_isGroupFooterVisible(){for(var t=this.option("summary.groupItems")||[],e=0;e<t.length;e++){var i=t[e],r=this._columnsController.columnOption(i.showInColumn||i.column);if(i.showInGroupFooter&&this._isDataColumn(r))return!0}return!1},_processGroupItems(t,e,i){var r=i&&i.data,n=this.callBase.apply(this,arguments);return i&&(void 0===i.isGroupFooterVisible&&(i.isGroupFooterVisible=this._isGroupFooterVisible()),r&&r.items&&i.isGroupFooterVisible&&(i.collectContinuationItems||!r.isContinuationOnNextPage)&&n.push({rowType:My,key:i.path.slice(),data:r,groupIndex:i.path.length-1,values:[]})),n},_processGroupItem(t,e){var i=this;if(e.summaryGroupItems||(e.summaryGroupItems=i.option("summary.groupItems")||[]),"group"===t.rowType){var r=-1,n=-1;(0,U.S6)(e.visibleColumns,function(a){t.groupIndex===this.groupIndex&&(r=this.index),a>0&&"expand"===e.visibleColumns[a-1].command&&"expand"!==this.command&&(n=this.index)}),t.summaryCells=this._calculateSummaryCells(e.summaryGroupItems,Ly(t.data),e.visibleColumns,(a,s)=>a.showInGroupFooter?-1:a.alignByColumn&&s&&!(0,v.$K)(s.groupIndex)&&s.index!==n?s.index:r,!0)}return t.rowType===My&&(t.summaryCells=this._calculateSummaryCells(e.summaryGroupItems,Ly(t.data),e.visibleColumns,(a,s)=>a.showInGroupFooter&&i._isDataColumn(s)?s.index:-1)),t},_calculateSummaryCells(t,e,i,r,n){var a=this,s=[],o={};return(0,U.S6)(t,(d,u)=>{var c=a._columnsController.columnOption(u.column),f=u.showInColumn&&a._columnsController.columnOption(u.showInColumn)||c,g=r(u,f);if(g>=0){o[g]||(o[g]=[]);var y,m=e[d];m==m&&((0,v.$K)(u.valueFormat)?y=u.valueFormat:"count"!==u.summaryType&&(y=l.getFormatByDataType(c&&c.dataType)),o[g].push((0,O.l)({},u,{value:(0,v.HD)(m)&&c&&c.deserializeValue?c.deserializeValue(m):m,valueFormat:y,columnCaption:c&&c.index!==g?c.caption:void 0})))}}),(0,v.Qr)(o)||i.forEach((d,u)=>{var c=i[u-1];s.push(o[!n||"expand"!==c?.command&&"expand"!==d.command?d.index:c?.index]||[])}),s},_getSummaryCells(t,e){var i=this;return i._calculateSummaryCells(t,e,i._columnsController.getVisibleColumns(),(n,a)=>i._isDataColumn(a)?a.index:-1)},_updateItemsCore(t){var e,i=this._dataSource,r=this._footerItems,n=r&&r[0]&&r[0].summaryCells,a=this.option("summary.totalItems");if(this._footerItems=[],i&&a&&a.length){var s=i.totalAggregates();e=this._getSummaryCells(a,s),t&&t.repaintChangesOnly&&n&&(t.totalColumnIndices=e.map((o,d)=>JSON.stringify(o)!==JSON.stringify(n[d])?d:-1).filter(o=>o>=0)),e.length&&this._footerItems.push({rowType:JD,summaryCells:e})}this.callBase(t)},_prepareUnsavedDataSelector(t){if(Py(this)){var e=this.getController("editing");if(e)return function(i){return i=e.getUpdatedData(i),t(i)}}return t},_prepareAggregateSelector(t,e){return t=this._prepareUnsavedDataSelector(t),"avg"===e||"sum"===e?function(i){var r=t(i);return(0,v.$K)(r)?Number(r):r}:t},_getAggregates(t,e){var i=this,r=i.getController("columns"),n=i.option("summary.calculateCustomSummary"),a=i.option("summary.skipEmptyValues");return(0,U.UI)(t||[],s=>{var o=r.columnOption(s.column),d=o&&o.calculateCellValue?o.calculateCellValue.bind(o):(0,Pt.vb)(o?o.dataField:s.column),u=s.summaryType||"count",c=(0,v.$K)(s.skipEmptyValues)?s.skipEmptyValues:a;if(e)return{selector:s.column,summaryType:u};var f=i._prepareAggregateSelector(d,u);if("custom"===u){n||(Nt.Z.log("E1026"),n=function(){});var g={component:i.component,name:s.name};n(g),g.summaryProcess="calculate",u={seed:m=>(g.summaryProcess="start",g.totalValue=void 0,g.groupIndex=m,delete g.value,n(g),g.totalValue),step:(m,y)=>(g.summaryProcess="calculate",g.totalValue=m,g.value=y,n(g),g.totalValue),finalize:m=>(g.summaryProcess="finalize",g.totalValue=m,delete g.value,n(g),g.totalValue)}}return{selector:f,aggregator:u,skipEmptyValues:c}})},_addSortInfo(t,e,i,r){if(e){var{groupIndex:n}=e;r=r||e.sortOrder,(0,v.$K)(n)&&(t[n]=t[n]||[],t[n].push({selector:i,desc:"desc"===r}))}},_findSummaryItem(t,e){var i=-1;return(0,v.$K)(e)&&(0,U.S6)(t||[],function(r){if(this.name===e||r===e||this.summaryType===e||this.column===e||function(n){var{summaryType:a}=n,{column:s}=n;return a&&s&&"".concat(a,"_").concat(s)}(this)===e)return i=r,!1}),i},_getSummarySortByGroups(t,e){var i=this,r=i._columnsController,n=r.getGroupColumns(),a=[];if(e&&e.length)return(0,U.S6)(t||[],function(){var{sortOrder:s}=this,{groupColumn:o}=this,d=i._findSummaryItem(e,this.summaryItem);if(!(d<0)){var u=function(c){return Ly(c)[d]};(0,v.$K)(o)?(o=r.columnOption(o),i._addSortInfo(a,o,u,s)):(0,U.S6)(n,(c,f)=>{i._addSortInfo(a,f,u,s)})}}),a},_createDataSourceAdapterCore(t,e){var i=this,r=this.callBase(t,e);return r.summaryGetter(n=>i._getSummaryOptions(n||e)),r},_getSummaryOptions(t){var e=this,i=e.option("summary.groupItems"),r=e.option("summary.totalItems"),n=e.option("sortByGroupSummaryInfo"),a=e._getAggregates(i,t&&t.grouping&&t.summary),s=e._getAggregates(r,t&&t.summary);if(a.length||s.length)return{groupAggregates:a,totalAggregates:s,sortByGroups:function(){return e._getSummarySortByGroups(n,i)}}},publicMethods(){var t=this.callBase();return t.push("getTotalSummaryValue"),t},getTotalSummaryValue(t){var e=this._findSummaryItem(this.option("summary.totalItems"),t),i=this._dataSource.totalAggregates();if(i.length&&e>-1)return i[e]},optionChanged(t){("summary"===t.name||"sortByGroupSummaryInfo"===t.name)&&(t.name="dataSource"),this.callBase(t)},init(){this._footerItems=[],this.callBase()},footerItems(){return this._footerItems}},editing:{_refreshSummary(){Py(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})},_addChange(t){var e=this.callBase.apply(this,arguments);return t.type&&this._refreshSummary(),e},_removeChange(){var t=this.callBase.apply(this,arguments);return this._refreshSummary(),t},cancelEditData(){var t=this.callBase.apply(this,arguments);return this._refreshSummary(),t}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return t&&e.addClass(t.rowType===My?"dx-datagrid-group-footer":""),e},_renderCells(t,e){this.callBase.apply(this,arguments),"group"===e.row.rowType&&e.row.summaryCells&&e.row.summaryCells.length&&this._renderGroupSummaryCells(t,e)},_hasAlignByColumnSummaryItems:(t,e)=>!(0,v.$K)(e.columns[t].groupIndex)&&e.row.summaryCells[t].length,_getAlignByColumnCellCount(t,e){for(var i=0,r=1;r<t;r++)i=this._hasAlignByColumnSummaryItems(e.row.summaryCells.length-r,e)?r:i;return i},_renderGroupSummaryCells(t,e){var i=t.children().last(),r=Number(i.attr("colSpan"))||1,n=this._getAlignByColumnCellCount(r,e);this._renderGroupSummaryCellsCore(i,e,r,n)},_renderGroupSummaryCellsCore(t,e,i,r){if(r>0){t.attr("colSpan",i-r);for(var n=0;n<r;n++){var a=e.columns.length-r+n;this._renderCell(t.parent(),(0,O.l)({column:e.columns[a],columnIndex:this._getSummaryCellIndex(a,e.columns)},e))}}},_getSummaryCellIndex:t=>t,_getCellTemplate(t){return!t.column.command&&!(0,v.$K)(t.column.groupIndex)&&t.summaryItems&&t.summaryItems.length?eA:this.callBase(t)},_getCellOptions(t){var e=this.callBase(t);return t.row.summaryCells?(0,O.l)(e,tA(this,t)):e}}}}});var zW=k(7256),iA="content",Qg="content-fixed",rA="dx-first-cell",nA="dx-state-hover",aA="dx-col-fixed",Fy="dx-pointer-events-none",xl="transparent",sA="dx-group-row",us=function(t){var e=-1;return(0,U.S6)(t,(i,r)=>{if(r.command===xl)return e=i,!1}),e},oA=function(t,e,i){var r=0;if(t&&e&&i)for(var n=0;n<t.length;n++)t[n].command===xl?r+=t[n].colspan:(e[r]<i[n]&&(e[r]=i[n]),r++);return e},Vy={init(){this.callBase(),this._isFixedTableRendering=!1,this._isFixedColumns=!1},_createCol(t){return this.callBase(t).toggleClass(aA,!(!this._isFixedTableRendering||!(t.fixed||t.command&&t.command!==xl)))},_correctColumnIndicesForFixedColumns(t,e){var i=us(t),r=t[i].colspan,n=e&&e.columnIndices;n&&(e.columnIndices=n.map(a=>{if(a)return a.map(s=>s<i?s:s>=i+r?s-r+1:-1).filter(s=>s>=0)}))},_partialUpdateFixedTable(t){var e=this._fixedTableElement,i=this._getRowElementsCore(e);e.children("colgroup").replaceWith(this._createColGroup(t));for(var n=0;n<i.length;n++)this._partialUpdateFixedRow((0,C.Z)(i[n]),t)},_partialUpdateFixedRow(t,e){var i,o,r=t.get(0).childNodes,n=us(e),a=e[n],d=this._columnsController.getColumnIndexOffset()+1,{colspan:u}=a;if(t.hasClass("dx-master-detail-row"))r[0].setAttribute("colspan",null===(i=this._columnsController.getVisibleColumns())||void 0===i?void 0:i.length);else{t.hasClass(sA)&&(u=(o=this._getGroupCellOptions({row:t.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,r.length-(o.columnIndex+2)));for(var c=0;c<r.length;c++){var f=o?c===o.columnIndex+1:c===n;r[c].setAttribute("aria-colindex",d),f?(r[c].setAttribute("colspan",u),d+=u):d++}}},_renderTable(t){var e,i,r=this.getFixedColumns();this._isFixedColumns=!!r.length;var n=this.callBase(t);if(this._isFixedColumns){var a=t?.change,s=this._getRowElements(this._fixedTableElement),o=a?.virtualColumnsScrolling&&s.length===(null===(e=a?.items)||void 0===e?void 0:e.length);if(this._isFixedTableRendering=!0,o&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(r),this._isFixedTableRendering=!1;else{var d=a?.columnIndices;this._correctColumnIndicesForFixedColumns(r,a),i=this._createTable(r),this._renderRows(i,(0,O.l)({},t,{columns:r})),this._updateContent(i,a,!0),d&&(a.columnIndices=d),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return n},_renderRow(t,e){var i,{cells:r}=e.row;if(this.callBase.apply(this,arguments),this._isFixedTableRendering&&r&&r.length){i=0;var n=e.row.cells||[];r=r.slice(),e.row.cells=r;for(var a=0;a<n.length;a++)n[a].column&&n[a].column.command===xl?i=(n[a].column.colspan||1)-1:r[a+i]=n[a]}},_createCell(t){var a,s,o,{column:e}=t,i=e&&e.command,{rowType:r}=t,n=this.callBase.apply(this,arguments);(this._isFixedTableRendering||"filter"===r)&&(s=(a=this.getFixedColumns())[(o=us(a))-1]),this._isFixedTableRendering?i===xl&&(n.addClass(Fy).toggleClass(rA,0===o||s&&"expand"===s.command).toggleClass("dx-last-cell",a.length&&o===a.length-1),"freeSpace"!==r&&ye.setEmptyText(n)):"filter"===r&&n.toggleClass(rA,t.columnIndex===o);var d=this.option("rowAlternationEnabled")&&t.isAltRow,u="multiple"===this.option("selection.mode")&&0===t.columnIndex&&"header"===t.rowType;return pi.Z.mozilla&&t.column.fixed&&"group"!==t.rowType&&!d&&!u&&n.addClass(aA),n},_getContent(t){var e;return t?null===(e=this._fixedTableElement)||void 0===e?void 0:e.parent():this.callBase.apply(this,arguments)},_wrapTableInScrollContainer(t,e){var i=this.callBase.apply(this,arguments);return(this._isFixedTableRendering||e)&&i.addClass(this.addWidgetPrefix(Qg)),i},_renderCellContent(t,e){var i,{column:r}=e,n=this._isFixedTableRendering,a="group"===e.rowType&&(0,v.$K)(r.groupIndex);if(n&&a&&!r.command&&!r.groupCellTemplate&&t.css("pointerEvents","none"),!n&&this._isFixedColumns){if(i=r.fixed||r.command&&!1!==r.fixed,a&&(i=!1,e.row.summaryCells&&e.row.summaryCells.length)){var s=this._columnsController.getVisibleColumns(),o=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(r.colspan,{columns:s,row:e.row,isFixed:!0}):0;if(o>0){var d=us(this._columnsController.getFixedColumns());i=s.length-o<d}}if(i){if(r.command&&"buttons"!==r.type||"group"===e.rowType)return void t.html("&nbsp;").addClass(r.cssClass);t.addClass("dx-hidden-cell")}}r.command!==xl&&this.callBase.apply(this,arguments)},_getCellElementsCore(t){var e=this.callBase.apply(this,arguments),i=e?.parent().hasClass(sA),r="columnHeadersView"===this.name?t:void 0;if(this._fixedTableElement&&e){var n=this.getFixedColumns(r),a=this._getRowElements(this._fixedTableElement).eq(t).children("td");(0,U.S6)(a,(s,o)=>{if(i)e[s]&&"hidden"!==o.style.visibility&&(e[s]=o);else{var d=n[s];if(d)if(d.command===xl)a.eq(s).hasClass("dx-master-detail-cell")&&(e[s]=o||e[s]);else{var u=this._columnsController.getVisibleIndexByColumn(d,r);e[u]=o||e[u]}}})}return e},getColumnWidths(){var t=this.callBase(),e=this.getFixedColumns(),i=this._fixedTableElement&&t.length?this.callBase(this._fixedTableElement):void 0;return oA(e,t,i)},getTableElement(t){return(t=this._isFixedTableRendering||t)?this._fixedTableElement:this.callBase()},setTableElement(t,e){this._isFixedTableRendering||e?this._fixedTableElement=t.addClass(Fy):this.callBase(t)},getColumns(t){var e=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(t):this.callBase(t,e)},getRowIndex(t){var e=this._fixedTableElement;return e&&e.find(t).length?this._getRowElements(e).index(t):this.callBase(t)},getTableElements(){var t=this.callBase.apply(this,arguments);return this._fixedTableElement&&(t=(0,C.Z)([t.get(0),this._fixedTableElement.get(0)])),t},getFixedColumns(t){return this._columnsController.getFixedColumns(t)},getFixedColumnsOffset(){var e,t={left:0,right:0};if(this._fixedTableElement){var i=(e=this.getTransparentColumnElement()).position();t={left:i.left,right:(0,Q.Y_)(this.element(),!0)-((0,Q.Y_)(e,!0)+i.left)}}return t},getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(Fy)).first()},getFixedTableElement(){return this._fixedTableElement},isFixedColumns(){return this._isFixedColumns},_resizeCore(){this.callBase(),this.synchronizeRows()},setColumnWidths(t){var e,{widths:i}=t,r=this._columnsController.getVisibleColumns(),n=i?.length&&r.some(f=>(0,v.$K)(f.visibleWidth)),a=null===(e=t.optionNames)||void 0===e?void 0:e.width;if(this.callBase(t),this._fixedTableElement){var s=i?.some(f=>"auto"===f||!(0,v.$K)(f)),d=!s||n&&this.isScrollbarVisible(!0)?this.getFixedColumns():r;this.setFixedTableColumnWidths(d,i)}var u=this.option("wordWrapEnabled");(n||a&&u)&&this.synchronizeRows()},setFixedTableColumnWidths(t,e){if(this._fixedTableElement&&e){var i=this._fixedTableElement.children("colgroup").children("col");i.toArray().forEach(n=>n.removeAttribute("style"));var r=0;t.forEach(n=>{if(n.colspan)r+=n.colspan;else{var a=k_(e[r]);(0,v.$K)(a)&&(0,fn.cl)(i.eq(r),a),r+=1}})}},_getClientHeight(t){var e=t.getBoundingClientRect&&(0,ti.l)(t);return e&&e.height?e.height:t.clientHeight},synchronizeRows(){var i,r,n,a,t=[],e=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var s=this._getClientHeight(this._tableElement.get(0)),o=this._getClientHeight(this._fixedTableElement.get(0));if(r=this._getRowElements(this._tableElement),n=this._getRowElements(this._fixedTableElement),a=this._findContentElement(),s!==o){for(a&&a.css("height",s),r.css("height",""),n.css("height",""),i=0;i<r.length;i++)t.push(this._getClientHeight(r.get(i))),e.push(this._getClientHeight(n.get(i)));for(i=0;i<r.length;i++){var d=t[i],u=e[i];d>u?n.eq(i).css("height",d):d<u&&r.eq(i).css("height",u)}a&&a.css("height","")}}})},setScrollerSpacing(t){var e=this.option("rtlEnabled");this.callBase(t),this.element().children(".".concat(this.addWidgetPrefix(Qg))).css({paddingLeft:e?t:"",paddingRight:e?"":t})}},KW=(0,O.l)({},Vy,{_getRowVisibleColumns(t){return this._isFixedTableRendering?this.getFixedColumns(t):this.callBase(t)},getContextMenuItems(t){var{column:e}=t,i=this.option("columnFixing"),r=this.callBase(t);if(t.row&&"header"===t.row.rowType&&!0===i.enabled&&e&&e.allowFixing){var n=a=>{switch(a.itemData.value){case"none":this._columnsController.columnOption(e.index,"fixed",!1);break;case"left":this._columnsController.columnOption(e.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(e.index,{fixed:!0,fixedPosition:"right"})}};(r=r||[]).push({text:i.texts.fix,beginGroup:!0,items:[{text:i.texts.leftPosition,value:"left",disabled:e.fixed&&(!e.fixedPosition||"left"===e.fixedPosition),onItemClick:n},{text:i.texts.rightPosition,value:"right",disabled:e.fixed&&"right"===e.fixedPosition,onItemClick:n}]},{text:i.texts.unfix,value:"none",disabled:!e.fixed,onItemClick:n})}return r},getFixedColumnElements(t){if((0,v.$K)(t))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(t).children();var e=this.getColumnElements(),i=this.getTransparentColumnElement();if(e&&i&&i.length){var r=us(this.getFixedColumns());e.splice(r,i.get(0).colSpan,i.get(0))}return e},getColumnWidths(){var t,e=this.callBase(),i=this.getFixedColumnElements(),r=this.getFixedColumns();return this._fixedTableElement&&(t=i&&i.length?this._getWidths(i):this.callBase(this._fixedTableElement)),oA(r,e,t)}}),GW=(0,O.l)({},Vy,{_detachHoverEvents(){var t=this.element();this._fixedTableElement&&this._tableElement&&Z.Z.off(t,"mouseover mouseout",".dx-data-row")},_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&Z.Z.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(t=>{var{event:e}=t,i=this.getRowIndex((0,C.Z)(e.target).closest(".dx-row")),r="mouseover"===e.type;i>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(i).toggleClass(nA,r),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(i).toggleClass(nA,r))}))},_getScrollDelay(){var t;return(null===(t=this.getController("resizing"))||void 0===t?void 0:t.hasResizeTimeout())?this.option("scrolling.updateTimeout"):pi.Z.mozilla?60:0},_findContentElement(t){var e,i,r=this.addWidgetPrefix(iA),n=this.element();if(t=this._isFixedTableRendering||t,n&&t){e=n.children(".".concat(r));var a=this.getScrollable();return!e.length&&a&&(e=(0,C.Z)("<div>").addClass(r),Z.Z.on(e,"scroll",s=>{var{target:o}=s,d=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{i=(0,C.Z)(o).scrollTop(),a.scrollTo({y:i})},d)}),Z.Z.on(e,zW.u,s=>{var o=(0,C.Z)(s.target).closest(".dx-scrollable"),d=!1;if(a&&a.$element().is(o))d=!0;else{var u=o.length&&rs.Z.getInstance(o.get(0)),c=u&&u.scrollHeight()-u.clientHeight()>0;d=u&&!c}if(d){i=a.scrollTop(),a.scrollTo({y:i-s.delta});var f=a.scrollTop()+a.clientHeight(),g=a.scrollHeight()+this.getScrollbarWidth();if(a.scrollTop()>0&&f<g)return!1}}),e.appendTo(n)),e}return this.callBase()},_updateScrollable(){this.callBase();var t=this.getScrollable();if(!t?._disposed){var e=t&&t.scrollOffset().top;this._updateFixedTablePosition(e)}},_renderContent(t,e,i){return this._isFixedTableRendering||i?t.empty().addClass("".concat(this.addWidgetPrefix(iA)," ").concat(this.addWidgetPrefix(Qg))).append(e):this.callBase(t,e)},_getGroupCellOptions(t){return this.callBase(this._isFixedTableRendering?(0,O.l)({},t,{columns:this._columnsController.getVisibleColumns()}):t)},_renderGroupedCells(t,e){return this.callBase(t,(0,O.l)({},e,{columns:this._columnsController.getVisibleColumns()}))},_renderGroupSummaryCells(t,e){this.callBase(t,this._isFixedTableRendering?(0,O.l)({},e,{columns:this._columnsController.getVisibleColumns()}):e)},_hasAlignByColumnSummaryItems(t,e){var i=this.callBase.apply(this,arguments),r=e.columns[t];return e.isFixed?r.fixed&&(i||"right"===r.fixedPosition):i&&(!this._isFixedColumns||!r.fixed)},_renderGroupSummaryCellsCore(t,e,i,r){var n;if(this._isFixedTableRendering){e.isFixed=!0,n=this._getAlignByColumnCellCount(i,e),e.isFixed=!1;var a=e.columns.length-n;e=(0,O.l)({},e,{columns:this.getFixedColumns()});var s=us(e.columns);a<s?(n-=e.columns[s].colspan-1||0,i-=e.columns[s].colspan-1||0):r>0&&t.css("visibility","hidden"),r=n}this.callBase(t,e,i,r)},_getSummaryCellIndex(t,e){if(this._isFixedTableRendering){var i=us(e);return t>i&&(t+=e[i].colspan-1),t}return this.callBase.apply(this,arguments)},_renderCore(t){this._detachHoverEvents();var e=this.callBase(t),i=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",i),this.option("hoverStateEnabled")&&i&&this._attachHoverEvents(),e},setRowsOpacity(t,e){this.callBase(t,e);var i=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(i,this.getFixedColumns(),t,e)},optionChanged(t){this.callBase(t),"hoverStateEnabled"===t.name&&this._isFixedColumns&&(t.value?this._attachHoverEvents():this._detachHoverEvents())},getCellIndex(t){var e=this._fixedTableElement,i=0;if(e&&t.is("td")&&t.closest(e).length){var r=this.getFixedColumns();return(0,U.S6)(r,(n,a)=>{if(n===t[0].cellIndex)return!1;a.colspan?i+=a.colspan:i++}),i}return this.callBase.apply(this,arguments)},_updateFixedTablePosition(t,e){if(this._fixedTableElement&&this._tableElement){var i,r=this.getController("editorFactory");this._fixedTableElement.parent().scrollTop(t),e&&r&&(i=r.focus())&&r.focus(i)}},setScrollerSpacing(t,e){var i={marginBottom:0},r=this.element().children(".".concat(this.addWidgetPrefix(Qg)));r.length&&this._fixedTableElement&&(r.css(i),this._fixedTableElement.css(i),i[this.option("rtlEnabled")?"marginLeft":"marginRight"]=t,i.marginBottom=e,(this._scrollable&&this._scrollable.option("useNative")?r:this._fixedTableElement).css(i))},_getElasticScrollTop(t){var e=0;if(t.scrollOffset.top<0)e=-t.scrollOffset.top;else if(t.reachedBottom){var i=(0,C.Z)(t.component.content()),r=(0,C.Z)(t.component.container()),n=Math.max(i.get(0).clientHeight-r.get(0).clientHeight,0);e=Math.min(n-t.scrollOffset.top,0)}return Math.floor(e)},_applyElasticScrolling(t){if(this._fixedTableElement){var e=this._getElasticScrollTop(t);0!==Math.ceil(e)?(0,gi.pB)(this._fixedTableElement,{top:e}):this._fixedTableElement.css("transform","")}},_handleScroll(t){this._updateFixedTablePosition(t.scrollOffset.top,!0),this._applyElasticScrolling(t),this.callBase(t)},_updateContentPosition(t){this.callBase.apply(this,arguments),t||this._updateFixedTablePosition(this._scrollTop)},_afterRowPrepared(t){this._isFixedTableRendering||this.callBase(t)},_scrollToElement(t){this.callBase(t,this.getFixedColumnsOffset())},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}}),YW={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:le.Z.format("dxDataGrid-columnFixingFix"),unfix:le.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:le.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:le.Z.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:KW,rowsView:GW,footerView:Vy},controllers:{draggingHeader:{_generatePointsByColumns(t){var n,a,s,o,d,e=t.columns,{targetDraggingPanel:i}=t;if(i&&"headers"===i.getName()&&i.isFixedColumns()&&t.sourceColumn.fixed){t.rowIndex||(t.columnElements=i.getFixedColumnElements(0)),t.columns=i.getFixedColumns(t.rowIndex);var r=this.callBase(t);return n=e,s=r,o=us(a=t.columns),d=n.length-a.length,(0,U.S6)(s,(u,c)=>{c.index>o&&(c.columnIndex+=d,c.index+=d)}),r}return this.callBase(t)},_pointCreated(t,e,i,r){var n=this.callBase.apply(this,arguments),a=e[t.columnIndex],s=this._columnHeadersView.getTransparentColumnElement();if(!n&&"headers"===i&&s&&s.length){var o=(0,ti.l)(s.get(0));return r&&r.fixed?"right"===r.fixedPosition?t.x<o.right:t.x>o.left:!(!a||!a.fixed||"right"===a.fixedPosition)||t.x<o.left||t.x>o.right}return n}},columnsResizer:{_generatePointsByColumns(){var t=this,e=t._columnsController,i=e&&t._columnsController.getVisibleColumns(),r=e&&t._columnsController.getFixedColumns(),n=us(r),a=i.length-r.length,s=t._columnHeadersView.getFixedColumnElements();t.callBase(),s&&s.length>0&&(t._pointsByFixedColumns=ye.getPointsByColumns(s,o=>(o.index>n&&(o.columnIndex+=a,o.index+=a),t._pointCreated(o,i.length,i))))},_getTargetPoint(t,e,i){var r=this._columnHeadersView.getTransparentColumnElement();if(r&&r.length){var n=(0,ti.l)(r.get(0));if(e<=n.left||e>=n.right)return this.callBase(this._pointsByFixedColumns,e,i)}return this.callBase(t,e,i)}}}}};l.registerModule("columnFixing",YW);var lA="columnHeadersView",dA="rowsView",Ny=[lA,dA,"footerView"],jW="dxDataGridAdaptivity",hs="adaptiveHidden",Sl="detailAdaptive",zy="dx-field-item-content",qc="hidden-column",QW="adaptive-more",uA="dx-command-adaptive",Jg="dx-command-adaptive-hidden",Hy="dx-adaptive-item-text",em="adaptive",hA="dx-group-cell",cA="dxDataGrid-ariaAdaptiveExpand";function tm(t,e){return t._columnsController.getColumnId(e)}function uK(t,e){var i,r=(0,C.Z)(t),n=e.component.getController("adaptiveColumns");"data"===e.rowType?(i=(0,C.Z)("<span>").addClass(n.addWidgetPrefix(QW)),Z.Z.on(i,(0,be.V4)(ii.u,jW),n.createAction(()=>{n.toggleExpandAdaptiveDetailRow(e.key)})),i.appendTo(r)):ye.setEmptyText(r)}function $y(t){var e,i=null===(e=t.data)||void 0===e?void 0:e.$nextCell;Z.Z.off(i,"focus",$y),Z.Z.trigger(i,"dxclick")}var hK={_isRowEditMode(){return"row"===this._getEditMode()},_isItemModified(t,e){var i=this._columnsController.getVisibleIndex(t.column.index),r=this._dataController.getRowIndexByKey(e.key),n=this._dataController.items()[r+1];return n&&n.modifiedValues&&(0,v.$K)(n.modifiedValues[i])},_renderFormViewTemplate(t,e,i){var r=this,{column:n}=t,a=r.createAction(()=>{r._editingController.isEditing()&&Z.Z.trigger(i,ii.u)}),s=e.row.data,o=n.calculateCellValue(s),d=ye.getDisplayValue(n,o,s,e.rowType),u=ye.formatValue(d,n),c=this._editingController.isCellOrBatchEditMode(),f=r._rowsView;if(n.allowEditing&&r.getController("keyboardNavigation").isKeyboardEnabled()&&(i.attr("tabIndex",r.option("tabIndex")),c&&(Z.Z.off(i,"focus",a),Z.Z.on(i,"focus",a))),n.cellTemplate){var g=(0,O.l)({},e,{value:o,displayValue:d,text:u,column:n});f.renderTemplate(i,n.cellTemplate,g,(0,wa.al)(i)).done(()=>{f._cellPrepared(i,e)})}else{var m=i.get(0);n.encodeHtml?m.textContent=u:m.innerHTML=u,i.addClass(Hy),(!(0,v.$K)(u)||""===u)&&i.html("&nbsp;"),r._isRowEditMode()||r._isItemModified(t,e)&&i.addClass("dx-item-modified"),f._cellPrepared(i,e)}},_getTemplate(t,e){var i=this,{column:r}=t,n=this.getController("editing");return function(a,s){var o=(0,C.Z)(s),d=i._columnsController.getVisibleIndex(r.index),u=(0,O.l)({},e),c=function(){var f=i._isItemEdited(t);u.value=e.row.values[d],f||r.showEditorAlways?n.renderFormEditorTemplate(u,t,a,o,!f):(u.column=r,u.columnIndex=d,i._renderFormViewTemplate(t,u,o))};c(),u.watch&&u.watch(()=>({isItemEdited:i._isItemEdited(t),value:e.row.values[d]}),()=>{o.contents().remove(),o.removeClass(Hy),c()})}},_isVisibleColumnsValid:t=>!(t<2||t.length-function(){for(var e=0,i=0;i<t.length;i++)t[i].command&&e++;return e}()<=1),_calculatePercentWidths(t,e){var i=this,r=0;return e.forEach((n,a)=>{t[a]!==hs&&(r+=i._getItemPercentWidth(n))}),r},_isPercentWidth:t=>(0,v.HD)(t)&&t.endsWith("%"),_isColumnHidden(t){return this._hiddenColumns.filter(e=>e.index===t.index).length>0},_getAverageColumnsWidth(t,e,i){var r=this,n=0,a=0;return e.forEach(s=>{if(!r._isColumnHidden(s)){var{width:o}=s;(0,v.$K)(o)&&!isNaN(parseFloat(o))?n+=r._isPercentWidth(o)?r._calculatePercentWidth({visibleIndex:s.visibleIndex,columnsCount:e.length,columnsCanFit:i,bestFitWidth:s.bestFitWidth,columnWidth:o,containerWidth:t}):parseFloat(o):a++}}),(t-n)/a},_calculateColumnWidth(t,e,i,r){var d,n=tm(this,t),a=this._columnsController.columnOption(n,"width"),s=this._columnsController.columnOption(n,"bestFitWidth"),o=i.length;if(a&&"auto"!==a){if(!this._isPercentWidth(a))return parseFloat(a);d=this._calculatePercentWidth({visibleIndex:t.visibleIndex,columnsCount:o,columnsCanFit:r,bestFitWidth:s,columnWidth:a,containerWidth:e})}else d=this.option("columnAutoWidth")||t.command?s:this._getAverageColumnsWidth(e,i,r);return d},_calculatePercentWidth(t){var e=t.visibleIndex<t.columnsCount-1&&t.columnsCanFit,i=t.containerWidth*parseFloat(t.columnWidth)/100,r=t.columnsCanFit&&i<t.bestFitWidth?t.bestFitWidth:i;return e?t.containerWidth*parseFloat(t.columnWidth)/100:r},_getNotTruncatedColumnWidth(t,e,i,r){var n=tm(this,t),a=this._columnsController.columnOption(n,"width"),s=this._columnsController.columnOption(n,"bestFitWidth");if(a&&"auto"!==a&&!this._isPercentWidth(a))return parseFloat(a);var o=this._calculateColumnWidth(t,e,i,r);return o<s?null:o},_getItemPercentWidth(t){var e=0;return t.width&&this._isPercentWidth(t.width)&&(e=parseFloat(t.width)),e},_getCommandColumnsWidth(){var t=this,e=t._columnsController.getVisibleColumns(),i=0;return(0,U.S6)(e,(r,n)=>{(n.index<0||n.command)&&(i+=t._columnsController.columnOption(tm(t,n),"bestFitWidth")||0)}),i},_isItemEdited(t){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,r=this._columnsController.getVisibleIndex(t.column.index);return this._editingController.isEditCell(i,r)}var e=this.option("editing.editRowKey");return!!(0,ne.bY)(e,this._dataController.adaptiveExpandedKey())||void 0},_getFormItemsByHiddenColumns(t){var e=[];return(0,U.S6)(t,(i,r)=>{e.push({column:r,name:r.name,dataField:r.dataField,visibleIndex:r.visibleIndex})}),e},_getAdaptiveColumnVisibleIndex(t){for(var e=0;e<t.length;e++)if(t[e].command===em)return e},_hideAdaptiveColumn(t,e){var i=this._getAdaptiveColumnVisibleIndex(e);(0,v.$K)(i)&&(t[i]=hs,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:i}))},_showHiddenCellsInView(t){var{$cells:e,isCommandColumn:i}=t,r=this.addWidgetPrefix(qc);i?(r=Jg,e.attr({tabIndex:0,"aria-hidden":null}).removeClass(r)):e.removeClass(r)},_showHiddenColumns(){for(var t=0;t<Ny.length;t++){var e=this.getView(Ny[t]);if(e&&e.isVisible()&&e.element()){var i=e.name,r=e.element().find(".".concat(Jg));this._showHiddenCellsInView({viewName:i,$cells:r,isCommandColumn:!0});var n=e.element().find(".".concat(this.addWidgetPrefix(qc)));this._showHiddenCellsInView({viewName:i,$cells:n})}}},_isCellValid:t=>t&&t.length&&!t.hasClass("dx-master-detail-cell")&&!t.hasClass(hA),_hideVisibleColumn(t){var{isCommandColumn:e,visibleIndex:i}=t,r=this;Ny.forEach(n=>{var a=r.getView(n);a&&r._hideVisibleColumnInView({view:a,isCommandColumn:e,visibleIndex:i})})},_hideVisibleColumnInView(t){var a,{view:e,isCommandColumn:i,visibleIndex:r}=t,n=e.name,s=this._columnsController.getVisibleColumns()[r],o=this._editingController&&this._editingController.getEditFormRowIndex();if(e&&e.isVisible()&&s)for(var d=e.getRowsCount(),u=e._getRowElements(),c=0;c<d;c++)if(c!==o||n!==dA||"popup"===this.option("editing.mode")){var g=n===lA?this._columnsController.getVisibleIndex(s.index,c):r;if(g>=0){var m=u.eq(c);a=this._findCellElementInRow(m,g),this._isCellValid(a)&&this._hideVisibleCellInView({viewName:n,isCommandColumn:i,$cell:a})}}},_findCellElementInRow(t,e){var i=t.children(),r=e,n=!1;if(t.hasClass("dx-group-row")){var a=t.find(".".concat(hA)),s=a.attr("colspan");if(a.length&&(0,v.$K)(s)){var o=parseInt(s);e>a.index()+o-1?r=e-o+1:n=!0}}return n?void 0:i.eq(r)},_hideVisibleCellInView(t){var{$cell:e,isCommandColumn:i}=t,r=i?Jg:this.addWidgetPrefix(qc);e.attr({tabIndex:-1,"aria-hidden":!0}).addClass(r)},_getEditMode(){return this._editingController.getEditMode()},isFormOrPopupEditMode(){var t=this._getEditMode();return"form"===t||"popup"===t},hideRedundantColumns(t,e,i){if(this._hiddenColumns=[],this._isVisibleColumnsValid(e)&&i.length){var u,c,f,r=0,n=this.component.$element(),a=(0,Q.dz)(n)-this._getCommandColumnsWidth(),s=function(){return e.filter(Fe=>!Fe.command&&0===this._hiddenColumns.filter($e=>$e.index===Fe.index).length)}.bind(this),o=s(),d=o.length;do{f=!1,r=0;var g=this._calculatePercentWidths(t,e),m=g<100&&0!==g;for(u=0;u<e.length;u++){var y=e[u],w=this._getNotTruncatedColumnWidth(y,a,o,m),I=tm(this,y),P=this._columnsController.columnOption(I,"width"),$=this._columnsController.columnOption(I,"minWidth"),se=this._columnsController.columnOption(I,"bestFitWidth");if(t[u]!==hs){if(!w&&!y.command&&!y.fixed){f=!0;break}(!P||"auto"===P)&&(w=Math.max(se||0,$||0)),(y.command!==em||c)&&(r+=w)}else c=!0}if(f=f||r>(0,Q.dz)(n)){var fe=i.pop(),Se=this._columnsController.getVisibleIndex(fe.index);a+=this._calculateColumnWidth(fe,a,o,m),this._hideVisibleColumn({visibleIndex:Se}),t[Se]=hs,this._hiddenColumns.push(fe),o=s()}}while(f&&o.length>1&&i.length);d===o.length&&this._hideAdaptiveColumn(t,e)}else this._hideAdaptiveColumn(t,e)},getAdaptiveDetailItems(){return this._$itemContents},getItemContentByColumnIndex(t){for(var e,i=0;i<this._$itemContents.length;i++){var r=(e=this._$itemContents.eq(i)).data("dx-form-item");if(r&&r.column&&this._columnsController.getVisibleIndex(r.column.index)===t)return e}},toggleExpandAdaptiveDetailRow(t,e){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this.getController("data").toggleExpandAdaptiveDetailRow(t,e)},createFormByHiddenColumns(t,e){var i=this,r=(0,C.Z)(t),n={items:i._getFormItemsByHiddenColumns(i._hiddenColumns),formID:"dx-".concat(new Hr.Z)},a=(0,_i.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:n}),i._$itemContents=null,i._form=i._createComponent((0,C.Z)("<div>").appendTo(r),VI,(0,O.l)(a,n,{customizeItem(s){var o=s.column||i._columnsController.columnOption(s.name||s.dataField);o&&(s.label=s.label||{},s.label.text=s.label.text||o.caption,s.column=o,s.template=i._getTemplate(s,e,i.updateForm.bind(i))),n.customizeItem&&n.customizeItem.call(this,s)},onContentReady(s){n.onContentReady&&n.onContentReady.call(this,s),i._$itemContents=r.find(".".concat(zy))}}))},hasAdaptiveDetailRowExpanded(){return(0,v.$K)(this._dataController.adaptiveExpandedKey())},updateForm(t){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,v.$K)(this._form._contentReadyAction)&&(t&&t.length?this._form.option("items",this._getFormItemsByHiddenColumns(t)):this._form.repaint())},updateHidingQueue(t){var i,r,e=t.filter(a=>a.visible&&!a.type&&!a.fixed&&!((0,v.$K)(a.groupIndex)&&a.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(r=0;r<e.length;r++)(0,v.$K)(e[r].hidingPriority)&&e[r].hidingPriority>=0&&(i=!0,this._hidingColumnsQueue[e[r].hidingPriority]=e[r]);if(i)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(r=0;r<e.length;r++){var n=this._columnsController.getVisibleIndex(e[r].index);this._hidingColumnsQueue[n]=e[r]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue},getHiddenColumns(){return this._hiddenColumns},hasHiddenColumns(){return this._hiddenColumns.length>0},getHidingColumnsQueue(){return this._hidingColumnsQueue},init(){var t=this;t._columnsController=t.getController("columns"),t._dataController=t.getController("data"),t._rowsView=t.getView("rowsView"),t._columnsController.addCommandColumn({type:em,command:em,visible:!0,adaptiveHidden:!0,cssClass:uA,alignment:"center",width:"auto",cellTemplate:uK,fixedPosition:"right"}),t._columnsController.columnsChanged.add(()=>{var e=!!t.updateHidingQueue(t._columnsController.getColumns()).length;t._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),t._editingController=t.getController("editing"),t._hidingColumnsQueue=[],t._hiddenColumns=[],t.createAction("onAdaptiveDetailRowPreparing"),t.callBase()},optionChanged(t){"columnHidingEnabled"===t.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!t.value),this.callBase(t)},publicMethods:()=>["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"],isAdaptiveDetailRowExpanded(t){var e=this._dataController;return e.adaptiveExpandedKey()&&(0,ne.bY)(e.adaptiveExpandedKey(),t)},expandAdaptiveDetailRow(t){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(t)},collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()},updateCommandAdaptiveAriaLabel(t,e){var i=this._dataController.getRowIndexByKey(t);if(-1!==i){var r=(0,C.Z)(this.component.getRowElement(i));this.setCommandAdaptiveAriaLabel(r,e)}},setCommandAdaptiveAriaLabel(t,e){t.find(".dx-command-adaptive").attr("aria-label",le.Z.format(e))}},fK={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:zt.ViewController.inherit(hK)},extenders:{views:{rowsView:{_getCellTemplate(t){var e=this,{column:i}=t;return t.rowType===Sl&&"detail"===i.command?function(r,n){e._adaptiveColumnsController.createFormByHiddenColumns((0,C.Z)(r),n)}:e.callBase(t)},_createRow(t){var e=this.callBase.apply(this,arguments);return t&&t.rowType===Sl&&t.key===this._dataController.adaptiveExpandedKey()&&e.addClass("dx-adaptive-detail-row"),e},_renderCells(t,e){this.callBase(t,e);var i=this._adaptiveColumnsController,r=i.getHidingColumnsQueue().length,n=i.getHiddenColumns().length;r&&!n&&function dK(t){return t.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(t).last().addClass("dx-last-data-cell"),"data"===e.row.rowType&&i.setCommandAdaptiveAriaLabel(t,cA)},_getColumnIndexByElementCore(t){var e=t.closest(".".concat(zy));if(e.length&&e.closest(this.component.$element()).length){var i=e.length?e.first().data("dx-form-item"):null;return i&&i.column&&this._columnsController.getVisibleIndex(i.column.index)}return this.callBase(t)},_cellPrepared(t,e){this.callBase.apply(this,arguments),e.row.rowType!==Sl&&e.column.visibleWidth===hs&&t.addClass(this.addWidgetPrefix(qc))},getCell(t,e){if(this._dataController.items()[t?.rowIndex]?.rowType===Sl){var r=this._adaptiveColumnsController.getAdaptiveDetailItems();return this.callBase(t,e,r)}return this.callBase.apply(this,arguments)},_getCellElement(t,e){var i=this._dataController.items()[t];return i&&i.rowType===Sl?this._adaptiveColumnsController.getItemContentByColumnIndex(e):this.callBase.apply(this,arguments)},getContextMenuItems(t){if(t.row&&"detailAdaptive"===t.row.rowType){var e=this.component.getView("columnHeadersView"),i=(0,C.Z)(t.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return t.column=i?i.column:t.column,e.getContextMenuItems&&e.getContextMenuItems(t)}return this.callBase&&this.callBase(t)},isClickableElement(t){return!!this.callBase&&this.callBase(t)||!!t.closest(".".concat(uA)).length},init(){this.callBase(),this._adaptiveColumnsController=this.getController("adaptiveColumns")}}},controllers:{export:{_updateColumnWidth(t,e){this.callBase(t,t.visibleWidth===hs?t.bestFitWidth:e)}},columnsResizer:{_pointCreated(t,e,i){var r=this.callBase(t,e,i),n=i[t.columnIndex]||{},a=this._getNextColumnIndex(t.columnIndex);return r||n.visibleWidth===hs||a!==t.columnIndex+1&&(i[a]||{}).command},_getNextColumnIndex(t){for(var e=this._columnsController.getVisibleColumns(),i=this.callBase(t);e[i]&&e[i].visibleWidth===hs;)i++;return i}},draggingHeader:{_pointCreated(t,e,i,r){return this.callBase(t,e,i,r)||(e[t.columnIndex-1]||{}).visibleWidth===hs}},editing:{_isRowEditMode(){return"row"===this.getEditMode()},_getFormEditItemTemplate(t,e){return"row"!==this.getEditMode()&&"detailAdaptive"===t.rowType?(t.columnIndex=this._columnsController.getVisibleIndex(e.index),this.getColumnTemplate(t)):this.callBase(t,e)},_closeEditItem(t){var e=t.closest(".".concat(zy)),i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,r=e.length?e.first().data("dx-form-item"):null,n=r&&r.column&&this._columnsController.getVisibleIndex(r.column.index);this.isEditCell(i,n)||this.callBase(t)},_beforeUpdateItems(t,e){if(!this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.hasHiddenColumns()){var i=this._dataController.items(),r=i[e],n=ye.getIndexByKey(this._dataController.adaptiveExpandedKey(),i);this._isForceRowAdaptiveExpand=!this._adaptiveController.hasAdaptiveDetailRowExpanded(),n>=0&&t.push(n+1),t.push(e+1),this._dataController.adaptiveExpandedKey(r.key)}},_afterInsertRow(t){this.callBase.apply(this,arguments),this._adaptiveController.hasHiddenColumns()&&(this._adaptiveController.toggleExpandAdaptiveDetailRow(t,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)},_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)},_cancelEditAdaptiveDetailRow(){this._adaptiveController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()},_afterSaveEditData(){this.callBase.apply(this,arguments);var t=new Y.BH;return this._isRowEditMode()&&this._adaptiveController.hasHiddenColumns()?(0,Y.gx)(this.getController("validating").validate(!0)).done(e=>{e&&this._cancelEditAdaptiveDetailRow(),t.resolve()}):t.resolve(),t.promise()},_beforeCancelEditData(){this.callBase(),this._cancelEditAdaptiveDetailRow()},_getRowIndicesForCascadeUpdating(t){var e=this.callBase.apply(this,arguments);return this._adaptiveController.isAdaptiveDetailRowExpanded(t.key)&&e.push(t.rowType===Sl?t.rowIndex-1:t.rowIndex+1),e},_beforeCloseEditCellInBatchMode(t){var e=this._dataController._adaptiveExpandedKey;if(e){var i=ye.getIndexByKey(e,this._dataController.items());i>-1&&t.unshift(i)}},editRow(t){this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(t)},deleteRow(t){var e=this._dataController.getKeyByRowIndex(t);"batch"===this.getEditMode()&&this._adaptiveController.isAdaptiveDetailRowExpanded(e)&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(t)},init(){this.callBase(),this._adaptiveController=this.getController("adaptiveColumns")}},resizing:{_needBestFit(){return this.callBase()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length},_correctColumnWidths(t,e){var i=this._adaptiveColumnsController,r=i.getHiddenColumns(),n=i.updateHidingQueue(this._columnsController.getColumns());i.hideRedundantColumns(t,e,n);var a=i.getHiddenColumns();return i.hasAdaptiveDetailRowExpanded()&&r.length!==a.length&&i.updateForm(a),!a.length&&i.collapseAdaptiveDetailRow(),this.callBase.apply(this,arguments)},_toggleBestFitMode(t){t&&this._adaptiveColumnsController._showHiddenColumns(),this.callBase(t)},_needStretch(){var t=this._adaptiveColumnsController;return this.callBase.apply(this,arguments)||t.getHidingColumnsQueue().length||t.hasHiddenColumns()},init(){this._adaptiveColumnsController=this.getController("adaptiveColumns"),this.callBase()},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}},data:{_processItems(t,e){var{changeType:i}=e;if(t=this.callBase.apply(this,arguments),"loadingAll"===i||!(0,v.$K)(this._adaptiveExpandedKey))return t;var r=ye.getIndexByKey(this._adaptiveExpandedKey,t),n=!1===this.option("scrolling.legacyMode");if(r>=0){var a=t[r];t.splice(r+1,0,{visible:!0,rowType:Sl,key:a.key,data:a.data,node:a.node,modifiedValues:a.modifiedValues,isNewRow:a.isNewRow,values:a.values})}else"refresh"===i&&(!n||!e.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return t},_getRowIndicesForExpand(t){var e=this.callBase.apply(this,arguments);return this.getController("adaptiveColumns").isAdaptiveDetailRowExpanded(t)&&e.push(e[e.length-1]+1),e},adaptiveExpandedKey(t){if(!(0,v.$K)(t))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=t},toggleExpandAdaptiveDetailRow(t,e){var i=ye.getIndexByKey(this._adaptiveExpandedKey,this._items),r=ye.getIndexByKey(t,this._items);i>=0&&i===r&&!e&&(t=void 0,r=-1);var n=this._adaptiveExpandedKey;this._adaptiveExpandedKey=t,i>=0&&i++,r>=0&&r++;var a=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[i-a,r-a]});var s=this.getController("adaptiveColumns");s.updateCommandAdaptiveAriaLabel(t,"dxDataGrid-ariaAdaptiveCollapse"),s.updateCommandAdaptiveAriaLabel(n,cA)},init(){this.callBase(),this._adaptiveExpandedKey=void 0}},editorFactory:{_needHideBorder(t){return this.callBase(t)||t?.hasClass("dx-field-item-content")&&t?.find(".dx-checkbox").length},_getFocusCellSelector(){return"".concat(this.callBase(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")},_getRevertTooltipsSelector(){return"".concat(this.callBase(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:{_isColumnVisible(t){return this.callBase(t)&&!t.adaptiveHidden}},keyboardNavigation:t=>class extends t{_isCellValid(e,i){return super._isCellValid(e,i)&&!e.hasClass(this.addWidgetPrefix(qc))&&!e.hasClass(Jg)}_processNextCellInMasterDetail(e,i){super._processNextCellInMasterDetail(e,i);var r=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&r&&!this._isInsideEditForm(e)&&(Z.Z.off(e,"focus",$y),Z.Z.on(e,"focus",{$nextCell:e},$y),Z.Z.trigger(i,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass(Hy)}init(){super.init(),this._adaptiveController=this.getController("adaptiveColumns")}}}}};function pA(t,e,i,r,n,a){a=a||[],(r=r||[])[i=i||0]=r[i]||0;var u,s=t[i],d=0;if(s){for(u=a[i]+1||0;u<s.length;u++){var c=s[u],f=u+r[i],g=c.colspan||1;if(pA(t,e,i+(c.rowspan||1),r,g,a),r[i]+=g-1,d+=g,c.rowspan)for(var m=i+1;m<i+c.rowspan;m++)r[m]=r[m]||0,r[m]+=c.colspan||1;if(!1===e(c,f,i,u)||void 0!==n&&d>=n)break}a[i]=u}}function Wy(t,e,i){var r=[];pA(t,(a,s,o)=>{var u,d=a,c=d.colspan||1,f=s+c-1>=e&&s<i;if(r[o]=r[o]||[],f)s<e?(u=c-(e-s),s=e):u=c,s+u>i&&(u=i-s),u!==c&&(d=(0,O.l)({},d,{colspan:u})),r[o].push(d);else if(s>i)return!1});for(var n=0;n<r.length;n++)r[n]=r[n]||[];return r}l.registerModule("adaptivity",fK);var gK={_resizeCore(){this.callBase.apply(this,arguments),this._columnsController.resize()},_handleScroll(t){var e=this.getScrollable(),{left:i}=t.scrollOffset;this.callBase.apply(this,arguments),this.option("rtlEnabled")&&e&&(i=(0,Q.dz)(e.$content())-(0,Q.dz)(e.$element())-i),this._columnsController.setScrollPosition(i)},_restoreScrollTop(){var t=this.getScrollable(),e=t?.scrollTop();this._scrollTop>0&&e!==this._scrollTop&&t.scrollTo({y:this._scrollTop})},_renderCore(t){if(t?.virtualColumnsScrolling){var e=()=>{this.resizeCompleted.remove(e),this._restoreScrollTop()};this.resizeCompleted.add(e)}return this.callBase.apply(this,arguments)}},mK={_renderCore(){var t=this.callBase.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),t}},vK=function(){var t=function(i){return i.map(r=>r.visibleWidth||parseFloat(r.width)||50)},e={init(){this.callBase.apply(this,arguments),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}},resetColumnsCache(){this.callBase(),this._virtualVisibleColumns={}},getBeginPageIndex(i){for(var r=this.getVisibleColumns(void 0,!0),n=t(r),a=0,s=0;s<n.length;s++){if(a>=i)return Math.floor(s/this.getColumnPageSize());a+=n[s]}return 0},getTotalWidth(){var i=this.option("width");return"number"==typeof i?i:this.getController("resizing")._lastWidth||(0,Q.Y_)(this.component.$element())},getEndPageIndex(i){var r=this.getVisibleColumns(void 0,!0),n=t(r),a=0;i+=this.getTotalWidth();for(var s=0;s<n.length;s++){if(a>=i)return Math.ceil(s/this.getColumnPageSize());a+=n[s]}return Math.ceil(n.length/this.getColumnPageSize())},getColumnPageSize(){return this.option("scrolling.columnPageSize")},_fireColumnsChanged(){var i=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-i},getScrollingTimeout(){var i=this.option("scrolling.columnRenderingThreshold"),r=this.option("scrolling.renderAsync"),n=0;return(!(0,v.$K)(r)&&this._renderTime>i||r)&&(n=this.option("scrolling.timeout")),n},setScrollPosition(i){var r=this.getScrollingTimeout();r>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(i)},r)):this._setScrollPositionCore(i)},isVirtualMode(){return(0,qe.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")},resize(){this._setScrollPositionCore(this._position)},_setScrollPositionCore(i){if(this.isVirtualMode()){var r=this.getBeginPageIndex(i),n=this.getEndPageIndex(i),a=i<this._position?this._beginPageIndex>r:this._endPageIndex<n;this._position=i,a&&(this._beginPageIndex=r,this._endPageIndex=n,this._fireColumnsChanged())}},getFixedColumns(i,r){var n=this.callBase(i);if(this.isVirtualMode()&&!r&&n.length){var a=n.map(s=>s.command).indexOf("transparent");return n[a].colspan=this.getVisibleColumns().length-this.callBase().length+1,n}return n},_compileVisibleColumns(i,r){var n;if(r||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return this.callBase(i);null!==(n=this._columns)&&void 0!==n&&n.length&&!(0,v.$K)(this._beginPageIndex)&&!(0,v.$K)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var a=this._beginPageIndex,s=this._endPageIndex,o="".concat(i,"-").concat(a,"-").concat(s);if(this._virtualVisibleColumns[o])return this._virtualVisibleColumns[o];var d=this.callBase(),u=this.getRowCount(),c=this.getColumnPageSize(),f=a*c,g=s*c,m=this.getFixedColumns(void 0,!0),y=m.map(Ze=>Ze.command).indexOf("transparent"),w=m.length?y:0,I=d.slice(0,w),P=d.slice(w,f),$=t(P).reduce((Ze,nt)=>Ze+nt,0);$||(f=0);var se=m.length?m.length-y-1:0,fe=d.slice(d.length-se),Se=d.slice(g,d.length-se),Fe=t(Se).reduce((Ze,nt)=>Ze+nt,0);if(Fe||(g=d.length),u>1&&"number"==typeof i){for(var $e=[],We=0;We<=u;We++)$e.push(this.callBase(We));I=Wy($e,0,I.length)[i]||[],fe=Wy($e,d.length-fe.length,d.length)[i]||[],d=Wy($e,f,g)[i]||[]}else d=d.slice(f,g);return $&&(d.unshift({command:"virtual",width:$}),d=I.concat(d)),Fe&&(d.push({command:"virtual",width:Fe}),d=d.concat(fe)),this._virtualVisibleColumns[o]=d,d},getColumnIndexOffset(){var i=0;if(this._beginPageIndex>0){var n=this.getFixedColumns().map(s=>s.command).indexOf("transparent"),a=n>=0?n:0;i=this._beginPageIndex*this.getColumnPageSize()-a-1}return i>0?i:0},dispose(){clearTimeout(this._changedTimeout),this.callBase.apply(this,arguments)}};return e}();l.registerModule("virtualColumns",{defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:vK},views:{columnHeadersView:mK,rowsView:gK}}});var jc="dx-buttongroup",bK=jc+"-wrapper",fA=jc+"-item",yK=jc+"-first-item",wK=jc+"-last-item",_A=fA+"-has-width",SK=Yd.Z.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new fc.c((t,e,i)=>{this._prepareItemStyles(t);var r=this.option("buttonTemplate");this._createComponent(t,Er.Z,(0,O.l)({},i,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(r)?i:{},template:i.template||r}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions:function(){return(0,O.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(t){return(0,v.mf)(t)||this.option("integrationOptions.templates")[t]},_prepareItemStyles(t){var e=t.data("dxItemIndex");0===e&&t.addClass(yK);var i=this.option("items");i&&e===i.length-1&&t.addClass(wK),t.addClass("dx-shape-standard")},_renderItemContent(t){return t.container=(0,C.Z)(t.container).parent(),this.callBase(t)},_renderItemContentByNode:function(t,e){return t.container=(0,C.Z)(t.container.children().first()),this.callBase(t,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>fA,_itemSelectHandler:function(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)}}),gA=gn.Z.inherit({_getDefaultOptions(){return(0,O.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(jc),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_fireSelectionChangeEvent:function(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_renderButtons(){var t=(0,C.Z)("<div>").addClass(bK).appendTo(this.$element()),e=this.option("selectedItems"),i={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:r=>{var n=this.option("width");(0,v.$K)(n)&&(0,C.Z)(r.itemElement).addClass(_A)},onSelectionChanged:r=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(r.addedItems,r.removedItems)},onItemClick:r=>{this._itemClickAction(r)}};(0,v.$K)(e)&&e.length&&(i.selectedItems=e),this._buttonsCollection=this._createComponent(t,SK,i)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(t){switch(t.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(t.name,t.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(t),this._buttonsCollection.itemElements().toggleClass(_A,!!t.value);break;default:this.callBase(t)}}});(0,kt.Z)("dxButtonGroup",gA);const EK=gA;var mA="dx-dropdownbutton",vA="dx-dropdownbutton-action",CA="dx-dropdownbutton-toggle",BK=gn.Z.inherit({_getDefaultOptions(){return(0,O.l)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:le.Z.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,O.l)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new hb.k(t=>{var e=(0,C.Z)(t.container),i=(0,C.Z)("<div>").appendTo(e);this._list=this._createComponent(i,Sc,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(t){this._dataSource||(this._dataSource=new Ys.o({store:new H_.Z({key:this._getKey(),data:t}),pageSize:0}))},_getKey:function(){var t,e=this.option("keyExpr"),i=null===(t=this._dataSource)||void 0===t?void 0:t.key();return!(0,v.$K)(i)||(0,v.$K)(e)&&"this"!==e?e:i},_compileKeyGetter(){this._keyGetter=(0,Pt.vb)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,Pt.vb)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(mA),this._renderButtonGroup(),this._updateArrowClass(),(0,v.$K)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:ne.ZT,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var t;null===(t=this._loadSingleDeferred)||void 0===t||t.reject();var e=new Y.BH;if(this._list&&void 0!==this._lastSelectedItemData){var i=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(i)}this._lastSelectedItemData=void 0;var r=this.option("selectedItemKey");return this._loadSingle(this._getKey(),r).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(t){var{previousValue:e,value:i}=t;this._selectionChangedAction({item:i,previousItem:e})},_fireItemClickAction(t){var{event:e,itemElement:i,itemData:r}=t;return this._itemClickAction({event:e,itemElement:i,itemData:this._actionItem||r})},_actionButtonConfig(){return{text:this.option("text"),icon:this.option("icon"),elementAttr:{class:vA}}},_getButtonGroupItems(){var t=[];return t.push(this._actionButtonConfig()),this.option("splitButton")&&t.push({icon:"spindown",elementAttr:{class:CA}}),t},_buttonGroupItemClick(t){var{event:e,itemData:i}=t,r=i.elementAttr.class===vA;i.elementAttr.class===CA?this.toggle():r&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:t,showArrowIcon:e,focusStateEnabled:i,hoverStateEnabled:r,stylingMode:n,accessKey:a,tabIndex:s}=this.option(),o=t||!e?"content":(d,u)=>{var{text:c,icon:f}=d,g=(0,ol.H)(f),m=c?(0,C.Z)("<span>").text(c).addClass("dx-button-text"):void 0,y=(0,ol.H)("spindown").addClass("dx-icon-right");(0,C.Z)(u).append(g,m,y)};return(0,O.l)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:d=>this._keyboardHandler(d),buttonTemplate:o,focusStateEnabled:i,hoverStateEnabled:r,stylingMode:n,accessKey:a,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var t=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return t.empty(),this._popupContentId="dx-"+new Hr.Z,this.setAria("id",this._popupContentId,t),e.render({container:(0,gt.u)(t),model:this.option("items")||this._dataSource})},_popupOptions(){var t=this.option("rtlEnabled")?"right":"left";return(0,O.l)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var i=this.$element();return!(0,C.Z)(e.target).closest(".".concat(mA)).is(i)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>pg(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:t+" top",at:t+" bottom"},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var t=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,v.$K)(t)&&e?[t]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:i=>{this.option("useSelectMode")||(this._lastSelectedItemData=i.itemData),this.option("selectedItemKey",this._keyGetter(i.itemData)),!1!==this._fireItemClickAction(i)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var t=(0,C.Z)("<div>");this.$element().append(t),this._popup=this._createComponent(t,xa,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._setAriaExpanded(!1)},_popupOptionChanged:function(t){var e=gn.Z.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(-1!==i.indexOf("width")||-1!==i.indexOf("height"))&&this._dimensionChanged()},_dimensionChanged:function(){void 0===cb(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>pg(this.$element()))},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._setAriaExpanded(!0)},_setAriaExpanded(t){this._ariaExpandedElements.forEach(e=>{this.setAria({expanded:t,owns:t?this._popupContentId:void 0},(0,C.Z)(e))})},_renderButtonGroup(){var t=this._buttonGroup&&this._buttonGroup.$element()||(0,C.Z)("<div>");this._buttonGroup||this.$element().append(t),this._buttonGroup=this._createComponent(t,EK,this._buttonGroupOptions());var e=this._buttonGroup.$element().find(".dx-button").toArray();this._ariaExpandedElements=[...e,this.$element()],this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._setAriaExpanded(this.option("opened"))},_updateArrowClass(){var t=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",t)},toggle(t){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(t)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(t,e){this._list&&this._list.option(t,e)},_getDisplayValue(t){var i=(0,v.PO)(t)?this._displayGetter(t):t;return(0,v.PO)(i)?"":String((0,ne.IS)(i,""))},_updateActionButton(t){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(t),icon:(0,v.PO)(t)?t.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(t))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(t){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,v.$K)(t)?[t]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(i=>{this._updateActionButton(i),this._displayGetter(e)!==this._displayGetter(i)&&this._fireSelectionChangedAction({previousValue:e,value:i})})},_actionButtonOptionChanged(t){var{name:e,value:i}=t,r={};r[e]=i,this._buttonGroup.option("items[0]",(0,O.l)({},this._actionButtonConfig(),r)),this._popup&&this._popup.repaint()},_selectModeChanged(t){if(t){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,v.$K)(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(t){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[t]),(0,v.$K)(e)&&this._loadSelectedItem().done(i=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",i)}).fail(i=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(t),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(t){var e,{name:i,value:r}=t;switch(i){case"useSelectMode":this._selectModeChanged(r);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(i,r),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,t);break;case"dropDownOptions":if("dropDownOptions.visible"===t.fullName)break;void 0!==t.value.visible&&delete t.value.visible,this._popupOptionChanged(t),this._innerWidgetOptionChanged(this._popup,t);break;case"opened":this.toggle(r);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(i,r),this._buttonGroup.option(i,r),this.callBase(t);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(i);break;case"dataSource":Array.isArray(r)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(i);break;case"icon":case"text":this._actionButtonOptionChanged(t);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(t),null===(e=this._popup)||void 0===e||e.repaint();break;case"stylingMode":case"tabIndex":this._buttonGroup.option(i,r);break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(i,r);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(r);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;default:this.callBase(t)}}}).include(I0.Z);(0,kt.Z)("dxDropDownButton",BK);var oo=(0,qe.Jj)(),Ky=(0,qe.jW)(),bA={EXCEL:"xlsx",CSS:"css",PNG:"png",JPEG:"jpeg",GIF:"gif",SVG:"svg",PDF:"pdf"},yA={CSS:"text/css",EXCEL:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",PNG:"image/png",JPEG:"image/jpeg",GIF:"image/gif",SVG:"image/svg+xml",PDF:"application/pdf"},kK={_revokeObjectURLTimeout:3e4,_getDataUri:function(t,e){var i=this._getMimeType(t);return"data:".concat(i,";base64,").concat(e)},_getMimeType:function(t){return yA[t]||"application/octet-stream"},_linkDownloader:function(t,e){var i=tt.Z.createElement("a");return i.download=t,i.href=e,i.target="_blank",i},_winJSBlobSave:function(t,e,i){var r=new Windows.Storage.Pickers.FileSavePicker;r.suggestedStartLocation=Windows.Storage.Pickers.PickerLocationId.documentsLibrary;var n=bA[i];if(n){var a=this._getMimeType(i);r.fileTypeChoices.insert(a,["."+n])}r.suggestedFileName=e,r.pickSaveFileAsync().then(function(s){s&&s.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(o){var d=t.msDetachStream();Windows.Storage.Streams.RandomAccessStream.copyAsync(d,o).then(function(){o.flushAsync().done(function(){d.close(),o.close()})})})})},_click:function(t){try{t.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}catch{var e=tt.Z.getDocument().createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,oo,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}},_saveBlobAs:function(t,e,i){if(this._blobSaved=!1,(0,v.$K)(Ky.msSaveOrOpenBlob))Ky.msSaveOrOpenBlob(i,t),this._blobSaved=!0;else if((0,v.$K)(oo.WinJS))this._winJSBlobSave(i,t,e),this._blobSaved=!0;else{var r=oo.URL||oo.webkitURL||oo.mozURL||oo.msURL||oo.oURL;if((0,v.$K)(r)){var n=r.createObjectURL(i),a=this._linkDownloader(t,n);setTimeout(()=>{r.revokeObjectURL(n),this._objectUrlRevoked=!0},this._revokeObjectURLTimeout),this._click(a)}else ba.k.warn("window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined")}},saveAs:function(t,e,i){var r=bA[e];if(r&&(t+="."+r),(0,v.mf)(oo.Blob))this._saveBlobAs(t,e,i);else{(0,v.$K)(Ky.userAgent.match(/iPad/i))||Nt.Z.log("E1034");var n=this._linkDownloader(t,this._getDataUri(e,i));this._click(n)}}},MK=k(5650),LK=k.n(MK),PK={ar:1,bg:2,ca:3,"zh-Hans":4,cs:5,da:6,de:7,el:8,en:9,es:10,fi:11,fr:12,he:13,hu:14,is:15,it:16,ja:17,ko:18,nl:19,no:20,pl:21,pt:22,rm:23,ro:24,ru:25,hr:26,sk:27,sq:28,sv:29,th:30,tr:31,ur:32,id:33,uk:34,be:35,sl:36,et:37,lv:38,lt:39,tg:40,fa:41,vi:42,hy:43,az:44,eu:45,hsb:46,mk:47,tn:50,xh:52,zu:53,af:54,ka:55,fo:56,hi:57,mt:58,se:59,ga:60,ms:62,kk:63,ky:64,sw:65,tk:66,uz:67,tt:68,bn:69,pa:70,gu:71,or:72,ta:73,te:74,kn:75,ml:76,as:77,mr:78,sa:79,mn:80,bo:81,cy:82,km:83,lo:84,gl:86,kok:87,syr:90,si:91,iu:93,am:94,tzm:95,ne:97,fy:98,ps:99,fil:100,dv:101,ha:104,yo:106,quz:107,nso:108,ba:109,lb:110,kl:111,ig:112,ii:120,arn:122,moh:124,br:126,ug:128,mi:129,oc:130,co:131,gsw:132,sah:133,qut:134,rw:135,wo:136,prs:140,gd:145,"ar-SA":1025,"bg-BG":1026,"ca-ES":1027,"zh-TW":1028,"cs-CZ":1029,"da-DK":1030,"de-DE":1031,"el-GR":1032,"en-US":1033,"fi-FI":1035,"fr-FR":1036,"he-IL":1037,"hu-HU":1038,"is-IS":1039,"it-IT":1040,"ja-JP":1041,"ko-KR":1042,"nl-NL":1043,"nb-NO":1044,"pl-PL":1045,"pt-BR":1046,"rm-CH":1047,"ro-RO":1048,"ru-RU":1049,"hr-HR":1050,"sk-SK":1051,"sq-AL":1052,"sv-SE":1053,"th-TH":1054,"tr-TR":1055,"ur-PK":1056,"id-ID":1057,"uk-UA":1058,"be-BY":1059,"sl-SI":1060,"et-EE":1061,"lv-LV":1062,"lt-LT":1063,"tg-Cyrl-TJ":1064,"fa-IR":1065,"vi-VN":1066,"hy-AM":1067,"az-Latn-AZ":1068,"eu-ES":1069,"hsb-DE":1070,"mk-MK":1071,"tn-ZA":1074,"xh-ZA":1076,"zu-ZA":1077,"af-ZA":1078,"ka-GE":1079,"fo-FO":1080,"hi-IN":1081,"mt-MT":1082,"se-NO":1083,"ms-MY":1086,"kk-KZ":1087,"ky-KG":1088,"sw-KE":1089,"tk-TM":1090,"uz-Latn-UZ":1091,"tt-RU":1092,"bn-IN":1093,"pa-IN":1094,"gu-IN":1095,"or-IN":1096,"ta-IN":1097,"te-IN":1098,"kn-IN":1099,"ml-IN":1100,"as-IN":1101,"mr-IN":1102,"sa-IN":1103,"mn-MN":1104,"bo-CN":1105,"cy-GB":1106,"km-KH":1107,"lo-LA":1108,"gl-ES":1110,"kok-IN":1111,"syr-SY":1114,"si-LK":1115,"iu-Cans-CA":1117,"am-ET":1118,"ne-NP":1121,"fy-NL":1122,"ps-AF":1123,"fil-PH":1124,"dv-MV":1125,"ha-Latn-NG":1128,"yo-NG":1130,"quz-BO":1131,"nso-ZA":1132,"ba-RU":1133,"lb-LU":1134,"kl-GL":1135,"ig-NG":1136,"ii-CN":1144,"arn-CL":1146,"moh-CA":1148,"br-FR":1150,"ug-CN":1152,"mi-NZ":1153,"oc-FR":1154,"co-FR":1155,"gsw-FR":1156,"sah-RU":1157,"qut-GT":1158,"rw-RW":1159,"wo-SN":1160,"prs-AF":1164,"gd-GB":1169,"ar-IQ":2049,"zh-CN":2052,"de-CH":2055,"en-GB":2057,"es-MX":2058,"fr-BE":2060,"it-CH":2064,"nl-BE":2067,"nn-NO":2068,"pt-PT":2070,"sr-Latn-CS":2074,"sv-FI":2077,"az-Cyrl-AZ":2092,"dsb-DE":2094,"se-SE":2107,"ga-IE":2108,"ms-BN":2110,"uz-Cyrl-UZ":2115,"bn-BD":2117,"mn-Mong-CN":2128,"iu-Latn-CA":2141,"tzm-Latn-DZ":2143,"quz-EC":2155,"ar-EG":3073,"zh-HK":3076,"de-AT":3079,"en-AU":3081,"es-ES":3082,"fr-CA":3084,"sr-Cyrl-CS":3098,"se-FI":3131,"quz-PE":3179,"ar-LY":4097,"zh-SG":4100,"de-LU":4103,"en-CA":4105,"es-GT":4106,"fr-CH":4108,"hr-BA":4122,"smj-NO":4155,"ar-DZ":5121,"zh-MO":5124,"de-LI":5127,"en-NZ":5129,"es-CR":5130,"fr-LU":5132,"bs-Latn-BA":5146,"smj-SE":5179,"ar-MA":6145,"en-IE":6153,"es-PA":6154,"fr-MC":6156,"sr-Latn-BA":6170,"sma-NO":6203,"ar-TN":7169,"en-ZA":7177,"es-DO":7178,"sr-Cyrl-BA":7194,"sma-SE":7227,"ar-OM":8193,"en-JM":8201,"es-VE":8202,"bs-Cyrl-BA":8218,"sms-FI":8251,"ar-YE":9217,"en-029":9225,"es-CO":9226,"sr-Latn-RS":9242,"smn-FI":9275,"ar-SY":10241,"en-BZ":10249,"es-PE":10250,"sr-Cyrl-RS":10266,"ar-JO":11265,"en-TT":11273,"es-AR":11274,"sr-Latn-ME":11290,"ar-LB":12289,"en-ZW":12297,"es-EC":12298,"sr-Cyrl-ME":12314,"ar-KW":13313,"en-PH":13321,"es-CL":13322,"ar-AE":14337,"es-UY":14346,"ar-BH":15361,"es-PY":15370,"ar-QA":16385,"en-IN":16393,"es-BO":16394,"en-MY":17417,"es-SV":17418,"en-SG":18441,"es-HN":18442,"es-NI":19466,"es-PR":20490,"es-US":21514,"bs-Cyrl":25626,"bs-Latn":26650,"sr-Cyrl":27674,"sr-Latn":28698,smn:28731,"az-Cyrl":29740,sms:29755,zh:30724,nn:30740,bs:30746,"az-Latn":30764,sma:30779,"uz-Cyrl":30787,"mn-Cyrl":30800,"iu-Cans":30813,"zh-Hant":31748,nb:31764,sr:31770,"tg-Cyrl":31784,dsb:31790,smj:31803,"uz-Latn":31811,"mn-Mong":31824,"iu-Latn":31837,"tzm-Latn":31839,"ha-Latn":31848},xA={thousands:"#,##0{0},&quot;K&quot;",millions:"#,##0{0},,&quot;M&quot;",billions:"#,##0{0},,,&quot;B&quot;",trillions:"#,##0{0},,,,&quot;T&quot;",percent:"0{0}%",decimal:"#{0}",fixedpoint:"#,##0{0}",exponential:"0{0}E+00",currency:" "},VK=/a+/g,NK=/E/g,zK=/dE+/g,HK=/L/g,ZK=/h/g,$K=/./g,Gy={_applyPrecision:function(t,e){var i,r;if(e>0){for(i="decimal"!==t?".":"",r=0;r<e;r++)i+="0";return i}return""},_hasArabicDigits:function(t){for(var e,i=0;i<t.length;i++)if((e=t.charCodeAt(i))>=1632&&e<1642)return!0;return!1},_convertDateFormatToOpenXml:function(t){return t.split("/").join("\\/").split("'").map(function(e,i){return i%2==0?e.replace(VK,"AM/PM").replace(zK,"d").replace(NK,"d").replace(HK,"M").replace(ZK,"H").split("[").join("\\[").split("]").join("\\]"):e?e.replace($K,"\\$&"):"'"}).join("")},_convertDateFormat:function(t){var e=(ct.format(new Date(2009,8,8,6,5,4),t)||"").toString(),i=ur(r=>ct.format(r,t));return i&&(i=this._convertDateFormatToOpenXml(i),i=this._getLanguageInfo(e)+i),i},_getLanguageInfo:function(t){var e=function FK(){return PK[es.Z.locale()]}(),i=e?e.toString(16):"",r="";if(this._hasArabicDigits(t)){for(;i.length<3;)i="0"+i;r="[$-2010"+i+"]"}else i&&(r="[$-"+i+"]");return r},_convertNumberFormat:function(t,e,i){var r,n;return(n="currency"===t?Kt.Z.getOpenXmlCurrencyFormat(i):xA[t.toLowerCase()])&&(r=(0,tn.WU)(n,this._applyPrecision(t,e))),r},convertFormat:function(t,e,i,r){if((0,v.$K)(t)){if("date"===i)return Gy._convertDateFormat(t);if((0,v.HD)(t)&&xA[t.toLowerCase()])return Gy._convertNumberFormat(t,e,r)}}};const SA=Gy;var WK={toXml:function(t,e,i){var r=["<",t];for(var n in e){var a=e[n];(0,v.$K)(a)&&r.push(" ",n,'="',a,'"')}return(0,v.$K)(i)&&""!==i?r.push(">",i,"</",t,">"):r.push(" />"),r.join("")}};const er=WK;var im={tryCreateTag:function(t){var e=null;return(0,v.$K)(t)&&im.isEmpty(e={vertical:t.vertical,wrapText:t.wrapText,horizontal:t.horizontal})&&(e=null),e},copy:function(t){var e=null;return(0,v.$K)(t)&&(e={},void 0!==t.horizontal&&(e.horizontal=t.horizontal),void 0!==t.vertical&&(e.vertical=t.vertical),void 0!==t.wrapText&&(e.wrapText=t.wrapText)),e},areEqual:function(t,e){return im.isEmpty(t)&&im.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.vertical===e.vertical&&t.wrapText===e.wrapText&&t.horizontal===e.horizontal},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.vertical)&&!(0,v.$K)(t.wrapText)&&!(0,v.$K)(t.horizontal)},toXml:function(t){return er.toXml("alignment",{vertical:t.vertical,wrapText:(0,v.$K)(t.wrapText)?Number(t.wrapText):void 0,horizontal:t.horizontal})}};const hu=im;var rm={_tryConvertColor:function(t){if("string"!=typeof t)return t;var e;if(t.length>0&&"#"===t[0]){var i=t.substr(1,t.length);e=6===i.length?"FF"+i:8===i.length?i[6]+i[7]+i.substr(0,6):i}else e=t;return e},tryCreateTag:function(t){var e=null;return(0,v.$K)(t)&&(e="string"==typeof t?{rgb:this._tryConvertColor(t)}:{rgb:this._tryConvertColor(t.rgb),theme:t.theme},rm.isEmpty(e)&&(e=null)),e},copy:function(t){var e=null;return(0,v.$K)(t)&&("string"==typeof t?e=t:(e={},void 0!==t.rgb&&(e.rgb=t.rgb),void 0!==t.theme&&(e.theme=t.theme))),e},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.rgb)&&!(0,v.$K)(t.theme)},areEqual:function(t,e){return rm.isEmpty(t)&&rm.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.rgb===e.rgb&&t.theme===e.theme},toXml:function(t,e){return er.toXml(t,{rgb:e.rgb,theme:e.theme})}};const bn=rm;var nm={tryCreateTag:function(t){var e=null;return(0,v.$K)(t)&&(e={patternType:t.patternType,backgroundColor:bn.tryCreateTag(t.backgroundColor),foregroundColor:bn.tryCreateTag(t.foregroundColor)},nm.isEmpty(e)&&(e=null)),e},copy:function(t){var e=null;return(0,v.$K)(t)&&(e={},void 0!==t.patternType&&(e.patternType=t.patternType),void 0!==t.backgroundColor&&(e.backgroundColor=bn.copy(t.backgroundColor)),void 0!==t.foregroundColor&&(e.foregroundColor=bn.copy(t.foregroundColor))),e},areEqual:function(t,e){return nm.isEmpty(t)&&nm.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.patternType===e.patternType&&bn.areEqual(t.backgroundColor,e.backgroundColor)&&bn.areEqual(t.foregroundColor,e.foregroundColor)},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.patternType)},toXml:function(t){var e=[(0,v.$K)(t.foregroundColor)?bn.toXml("fgColor",t.foregroundColor):"",(0,v.$K)(t.backgroundColor)?bn.toXml("bgColor",t.backgroundColor):""].join("");return er.toXml("patternFill",{patternType:t.patternType},e)}};const Xc=nm;var am={tryCreateTag:function(t){var e=null;return(0,v.$K)(t)&&(e={patternFill:Xc.tryCreateTag(t.patternFill)},am.isEmpty(e)&&(e=null)),e},tryCreateFillFromSimpleFormat:function(){var{backgroundColor:t,fillPatternType:e,fillPatternColor:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(0,v.$K)(t)||(0,v.$K)(e)&&(0,v.$K)(i)?(0,v.$K)(e)&&(0,v.$K)(i)?{patternFill:{patternType:e,foregroundColor:{rgb:i},backgroundColor:{rgb:t}}}:void 0:{patternFill:{patternType:"solid",foregroundColor:{rgb:t}}}},copySimpleFormat:function(t,e){void 0!==t.backgroundColor&&(e.backgroundColor=t.backgroundColor),void 0!==t.fillPatternType&&(e.fillPatternType=t.fillPatternType),void 0!==t.fillPatternColor&&(e.fillPatternColor=t.fillPatternColor)},copy:function(t){var e=null;return(0,v.$K)(t)&&(e={},void 0!==t.patternFill&&(e.patternFill=Xc.copy(t.patternFill))),e},areEqual:function(t,e){return am.isEmpty(t)&&am.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&Xc.areEqual(t.patternFill,e.patternFill)},isEmpty:function(t){return!(0,v.$K)(t)||Xc.isEmpty(t.patternFill)},toXml:function(t){return er.toXml("fill",{},Xc.toXml(t.patternFill))}};const lo=am;var sm={tryCreateTag:function(t){var e=null;return(0,v.$K)(t)&&(e={size:t.size,name:t.name,family:t.family,scheme:t.scheme,bold:t.bold,italic:t.italic,underline:t.underline,color:bn.tryCreateTag(t.color)},sm.isEmpty(e)&&(e=null)),e},copy:function(t){var e=null;return(0,v.$K)(t)&&(e={},void 0!==t.size&&(e.size=t.size),void 0!==t.name&&(e.name=t.name),void 0!==t.family&&(e.family=t.family),void 0!==t.scheme&&(e.scheme=t.scheme),void 0!==t.bold&&(e.bold=t.bold),void 0!==t.italic&&(e.italic=t.italic),void 0!==t.underline&&(e.underline=t.underline),void 0!==t.color&&(e.color=bn.copy(t.color))),e},areEqual:function(t,e){return sm.isEmpty(t)&&sm.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.size===e.size&&t.name===e.name&&t.family===e.family&&t.scheme===e.scheme&&(t.bold===e.bold||!t.bold==!e.bold)&&(t.italic===e.italic||!t.italic==!e.italic)&&t.underline===e.underline&&bn.areEqual(t.color,e.color)},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.size)&&!(0,v.$K)(t.name)&&!(0,v.$K)(t.family)&&!(0,v.$K)(t.scheme)&&(!(0,v.$K)(t.bold)||!t.bold)&&(!(0,v.$K)(t.italic)||!t.italic)&&!(0,v.$K)(t.underline)&&bn.isEmpty(t.color)},toXml:function(t){var e=[(0,v.$K)(t.bold)&&t.bold?er.toXml("b",{}):"",(0,v.$K)(t.size)?er.toXml("sz",{val:t.size}):"",(0,v.$K)(t.color)?bn.toXml("color",t.color):"",(0,v.$K)(t.name)?er.toXml("name",{val:t.name}):"",(0,v.$K)(t.family)?er.toXml("family",{val:t.family}):"",(0,v.$K)(t.scheme)?er.toXml("scheme",{val:t.scheme}):"",(0,v.$K)(t.italic)&&t.italic?er.toXml("i",{}):"",(0,v.$K)(t.underline)?er.toXml("u",{val:t.underline}):""].join("");return er.toXml("font",{},e)}};const om=sm;var lm={tryCreateTag:function(t,e){var i=null;if((0,v.$K)(t)){var r;r="number"==typeof t.numberFormat?t.numberFormat:e.registerNumberFormat(t.numberFormat);var n=t.fill;(0,v.$K)(n)||(n=lo.tryCreateFillFromSimpleFormat(t)),i={numberFormatId:r,alignment:hu.tryCreateTag(t.alignment),fontId:e.registerFont(t.font),fillId:e.registerFill(n)},lm.isEmpty(i)&&(i=null)}return i},copy:function(t){var e;return null===t?e=null:(0,v.$K)(t)&&(e={},void 0!==t.numberFormat&&(e.numberFormat=t.numberFormat),void 0!==t.fill?e.fill=lo.copy(t.fill):lo.copySimpleFormat(t,e),void 0!==t.alignment&&(e.alignment=hu.copy(t.alignment)),void 0!==t.font&&(e.font=om.copy(t.font))),e},areEqual:function(t,e){return lm.isEmpty(t)&&lm.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.fontId===e.fontId&&t.numberFormatId===e.numberFormatId&&t.fillId===e.fillId&&hu.areEqual(t.alignment,e.alignment)},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.fontId)&&!(0,v.$K)(t.numberFormatId)&&!(0,v.$K)(t.fillId)&&hu.isEmpty(t.alignment)},toXml:function(t){var i,e=hu.isEmpty(t.alignment);return(0,v.$K)(t.numberFormatId)&&(i=t.numberFormatId>0?1:0),er.toXml("xf",{xfId:0,applyAlignment:e?null:1,fontId:t.fontId,applyNumberFormat:i,fillId:t.fillId,numFmtId:t.numberFormatId},e?null:hu.toXml(t.alignment))}};const dm=lm;var Qc={ID_PROPERTY_NAME:"id",tryCreateTag:function(t){var e=null;return"string"==typeof t&&Qc.isEmpty(e={formatCode:t})&&(e=null),e},areEqual:function(t,e){return Qc.isEmpty(t)&&Qc.isEmpty(e)||(0,v.$K)(t)&&(0,v.$K)(e)&&t.formatCode===e.formatCode},isEmpty:function(t){return!(0,v.$K)(t)||!(0,v.$K)(t.formatCode)||""===t.formatCode},toXml:function(t){return er.toXml("numFmt",{numFmtId:t[Qc.ID_PROPERTY_NAME],formatCode:t.formatCode})}};const cu=Qc;class EA{constructor(){this._cellFormatTags=[],this._fillTags=[],this._fontTags=[],this._numberFormatTags=[],this._fillTags.push(lo.tryCreateTag({patternFill:{patternType:"none"}}))}registerCellFormat(e){var i,r=dm.tryCreateTag(e,{registerFill:this.registerFill.bind(this),registerFont:this.registerFont.bind(this),registerNumberFormat:this.registerNumberFormat.bind(this)});if((0,v.$K)(r)){for(var n=0;n<this._cellFormatTags.length;n++)if(dm.areEqual(this._cellFormatTags[n],r)){i=n;break}void 0===i&&(i=this._cellFormatTags.push(r)-1)}return i}static copyCellFormat(e){return dm.copy(e)}generateCellFormatsXml(){var e=this._cellFormatTags.map(i=>dm.toXml(i));return er.toXml("cellXfs",{count:e.length},e.join(""))}registerFill(e){var i,r=lo.tryCreateTag(e);if((0,v.$K)(r)){for(var n=0;n<this._fillTags.length;n++)if(lo.areEqual(this._fillTags[n],r)){i=n;break}void 0===i&&(this._fillTags.length<2&&this._fillTags.push(lo.tryCreateTag({patternFill:{patternType:"Gray125"}})),i=this._fillTags.push(r)-1)}return i}generateFillsXml(){var e=this._fillTags.map(i=>lo.toXml(i));return er.toXml("fills",{count:e.length},e.join(""))}registerFont(e){var i,r=om.tryCreateTag(e);if((0,v.$K)(r)){for(var n=0;n<this._fontTags.length;n++)if(om.areEqual(this._fontTags[n],r)){i=n;break}void 0===i&&(i=this._fontTags.push(r)-1)}return i}generateFontsXml(){var e=this._fontTags.map(i=>om.toXml(i));return er.toXml("fonts",{count:e.length},e.join(""))}_convertNumberFormatIndexToId(e){return 165+e}registerNumberFormat(e){var i,r=cu.tryCreateTag(e);if((0,v.$K)(r)){for(var n=0;n<this._numberFormatTags.length;n++)if(cu.areEqual(this._numberFormatTags[n],r)){i=this._numberFormatTags[n][cu.ID_PROPERTY_NAME];break}void 0===i&&(r[cu.ID_PROPERTY_NAME]=this._convertNumberFormatIndexToId(this._numberFormatTags.length),i=r[cu.ID_PROPERTY_NAME],this._numberFormatTags.push(r))}return i}generateNumberFormatsXml(){if(this._numberFormatTags.length>0){var e=this._numberFormatTags.map(i=>cu.toXml(i));return er.toXml("numFmts",{count:e.length},e.join(""))}return""}}var pu='<?xml version="1.0" encoding="utf-8"?>',El="http://schemas.openxmlformats.org",Uy="rels",Yy="workbook.xml",IA="sharedStrings.xml",TA="styles.xml",DA="sheet1.xml",Zr={boolean:"b",date:"d",number:"n",string:"s"},XK=Date.UTC(1899,11,30),eG={quarter:"shortDate",quarterAndYear:"shortDate",minute:"longTime",millisecond:"longTime"},Jc=en.Z.inherit({_getXMLTag:function(t,e,i){var n,s,r="<"+t,a=e.length;for(n=0;n<a;n++)void 0!==(s=e[n]).value&&(r=r+" "+s.name+'="'+s.value+'"');return(0,v.$K)(i)?r+">"+i+"</"+t+">":r+" />"},_convertToExcelCellRef:function(t,e){for(var r,n,i="";!n;)r=65+(e>=26?e%26:Math.ceil(e)),i=String.fromCharCode(r)+i,e>=26?e=Math.floor(e/26)-1:n=!0;return i+(t+1)},_convertToExcelCellRefAndTrackMaxIndex:function(t,e){return this._maxRowIndex<Number(t)&&(this._maxRowIndex=Number(t)),this._maxColumnIndex<Number(e)&&(this._maxColumnIndex=Number(e)),this._convertToExcelCellRef(t,e)},_getDataType:function(t){return Zr[t]||Zr.string},_tryGetExcelCellDataType:function(t){if((0,v.$K)(t)){if("number"==typeof t)return isFinite(t)?Zr.number:Zr.string;if((0,v.HD)(t))return Zr.string;if((0,v.J_)(t))return Zr.number;if((0,v.jn)(t))return Zr.boolean}},_formatObjectConverter:function(t,e){var i={format:t,precision:t&&t.precision,dataType:e};return(0,v.Kn)(t)?(0,O.l)(i,t,{format:t.formatter||t.type,currency:t.currency}):i},_tryConvertToExcelNumberFormat:function(t,e){var i=this._formatObjectConverter(t,e),r=i.currency;return e=i.dataType,(0,v.$K)(t=i.format)&&"date"===e&&(t=eG[t&&t.type||t]||t),SA.convertFormat(t,i.precision,e,r)},_appendString:function(t){if((0,v.$K)(t)&&(t=String(t)).length)return t=(0,tn.HZ)(t),void 0===this._stringHash[t]&&(this._stringHash[t]=this._stringArray.length,this._stringArray.push(t)),this._stringHash[t]},_tryGetExcelDateValue:function(t){var e;if((0,v.J_)(t))return(e=Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-XK)/864e5))<60&&e--,e+(3600*t.getHours()+60*t.getMinutes()+t.getSeconds())/86400},_prepareValue:function(t,e){var a,i=this._dataProvider,{cellSourceData:r}=i.getCellData(t,e)||{},{value:n}=i.getCellData(t,e)||{},s=this._getDataType(i.getCellType(t,e));switch(s===Zr.date&&!(0,v.J_)(n)&&(s=Zr.string),s){case Zr.string:a=n,n=this._appendString(n);break;case Zr.date:a=n,n=this._tryGetExcelDateValue(n),s=Zr.number}return{value:n,type:s,sourceValue:a,cellSourceData:r}},_callCustomizeExcelCell:function(t){var{dataProvider:e,value:i,style:r,sourceData:n}=t,a=EA.copyCellFormat(r),s={value:i,numberFormat:a.numberFormat,clearStyle:function(){this.horizontalAlignment=null,this.verticalAlignment=null,this.wrapTextEnabled=null,this.font=null,this.numberFormat=null}};(0,v.$K)(a)&&((0,v.$K)(a.alignment)&&(s.horizontalAlignment=a.alignment.horizontal,s.verticalAlignment=a.alignment.vertical,s.wrapTextEnabled=a.alignment.wrapText),s.backgroundColor=a.backgroundColor,s.fillPatternType=a.fillPatternType,s.fillPatternColor=a.fillPatternColor,s.font=a.font),e.customizeExcelCell(s,n);var o=a||{};return o.font=s.font,o.alignment=o.alignment||{},o.alignment.horizontal=s.horizontalAlignment,o.alignment.vertical=s.verticalAlignment,o.alignment.wrapText=s.wrapTextEnabled,o.backgroundColor=s.backgroundColor,o.fillPatternType=s.fillPatternType,o.fillPatternColor=s.fillPatternColor,o.numberFormat=s.numberFormat,{value:s.value,style:o}},_getDataArray:function(){var t,e,i,r,d,n=[],a=this._dataProvider,s=a.getRowsCount(),o=a.getColumns();for(t=0;t<s;t++){for(i=[],d=o.length,e=0;e!==d;e++){r=this._prepareValue(t,e);var u=a.getStyleId(t,e),c=this._styleArrayIndexToCellStyleIdMap[u];if(a.hasCustomizeExcelCell&&a.hasCustomizeExcelCell()){var f=r.sourceValue||r.value,g=this._callCustomizeExcelCell({dataProvider:a,value:f,style:this._styleArray[u],sourceData:r.cellSourceData});if(g.value!==f){if(typeof g.value!=typeof f||"number"==typeof g.value&&!isFinite(g.value)){var m=this._tryGetExcelCellDataType(g.value);(0,v.$K)(m)&&(r.type=m)}switch(r.type){case Zr.string:r.value=this._appendString(g.value);break;case Zr.date:r.value=g.value;break;case Zr.number:var y=g.value,w=this._tryGetExcelDateValue(y);(0,v.$K)(w)&&(y=w),r.value=y;break;default:r.value=g.value}}c=this._excelFile.registerCellFormat(g.style)}i.push({style:c,value:r.value,type:r.type})}!this._needSheetPr&&a.getGroupLevel(t)>0&&(this._needSheetPr=!0),n.push(i)}return n},_calculateWidth:function(t){return(!(t=parseInt(t,10))||t<5)&&(t=100),Math.min(255,Math.floor((t-5)/7*100+.5)/100)},_prepareStyleData:function(){var t=this,e=t._dataProvider.getStyles();t._dataProvider.getColumns().forEach(function(r){t._colsArray.push(t._calculateWidth(r.width))});var i=[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor",bold:!1},{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor",bold:!0}];this._excelFile.registerFont(i[0]),this._excelFile.registerFont(i[1]),e.forEach(function(r){var n=t._tryConvertToExcelNumberFormat(r.format,r.dataType);(0,v.$K)(n)||(n=0),t._styleArray.push({font:i[Number(!!r.bold)],numberFormat:n,alignment:{vertical:"top",wrapText:!!r.wrapText,horizontal:r.alignment||"left"}})}),t._styleArrayIndexToCellStyleIdMap=t._styleArray.map(r=>this._excelFile.registerCellFormat(r))},_prepareCellData:function(){this._cellsArray=this._getDataArray()},_createXMLRelationships:function(t){return this._getXMLTag("Relationships",[{name:"xmlns",value:El+"/package/2006/relationships"}],t)},_createXMLRelationship:function(t,e,i){return this._getXMLTag("Relationship",[{name:"Id",value:"rId"+t},{name:"Type",value:El+"/officeDocument/2006/relationships/"+e},{name:"Target",value:i}])},_getWorkbookContent:function(){return pu+this._getXMLTag("workbook",[{name:"xmlns:r",value:El+"/officeDocument/2006/relationships"},{name:"xmlns",value:El+"/spreadsheetml/2006/main"}],'<bookViews><workbookView xWindow="0" yWindow="0" windowWidth="0" windowHeight="0"/></bookViews><sheets><sheet name="Sheet" sheetId="1" r:id="rId1" /></sheets><definedNames><definedName name="_xlnm.Print_Titles" localSheetId="0">Sheet!$1:$1</definedName><definedName name="_xlnm._FilterDatabase" hidden="0" localSheetId="0">Sheet!$A$1:$F$6332</definedName></definedNames>')},_getContentTypesContent:function(){return pu+'<Types xmlns="'+El+'/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /></Types>'},_generateStylesXML:function(){var t=this._zip.folder("xl"),e="";e+=this._excelFile.generateNumberFormatsXml(),e+=this._excelFile.generateFontsXml(),e+=this._excelFile.generateFillsXml(),e+='<borders count="1"><border><left style="thin"><color rgb="FFD3D3D3"/></left><right style="thin"><color rgb="FFD3D3D3"/></right><top style="thin"><color rgb="FFD3D3D3"/></top><bottom style="thin"><color rgb="FFD3D3D3"/></bottom></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',e+=this._excelFile.generateCellFormatsXml(),e+=this._getXMLTag("cellStyles",[{name:"count",value:1}],this._getXMLTag("cellStyle",[{name:"name",value:"Normal"},{name:"xfId",value:0},{name:"builtinId",value:0}])),e=pu+this._getXMLTag("styleSheet",[{name:"xmlns",value:El+"/spreadsheetml/2006/main"}],e),t.file(TA,e),this._styleArray=[]},_generateStringsXML:function(){var e,t=this._zip.folder("xl"),i=this._stringArray.length,r=pu;for(e=0;e<i;e++)this._stringArray[e]=this._getXMLTag("si",[],this._getXMLTag("t",[],this._stringArray[e]));r+=this._getXMLTag("sst",[{name:"xmlns",value:El+"/spreadsheetml/2006/main"},{name:"count",value:this._stringArray.length},{name:"uniqueCount",value:this._stringArray.length}],this._stringArray.join("")),t.file(IA,r),this._stringArray=[]},_getPaneXML:function(){var t=[{name:"activePane",value:"bottomLeft"},{name:"state",value:"frozen"}],e=this._dataProvider.getFrozenArea();return e.x||e.y?(e.x&&t.push({name:"xSplit",value:e.x}),e.y&&t.push({name:"ySplit",value:e.y}),t.push({name:"topLeftCell",value:this._convertToExcelCellRefAndTrackMaxIndex(e.y,e.x)}),this._getXMLTag("pane",t)):""},_getAutoFilterXML:function(t){return this._options.autoFilterEnabled?'<autoFilter ref="A'+this._dataProvider.getHeaderRowCount()+":"+t+'" />':""},_generateWorksheetXML:function(){var t,e,i,r,s,n=[],a=this._cellsArray.length,o=this._colsArray.length,d="1:"+o,u=this._dataProvider.getHeaderRowCount?this._dataProvider.getHeaderRowCount():1,c=['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">'];for(c.push(this._needSheetPr?'<sheetPr><outlinePr summaryBelow="0"/></sheetPr>':"<sheetPr/>"),c.push('<dimension ref="A1:C1"/>'),c.push("<sheetViews><sheetView "),c.push(this._rtlEnabled?'rightToLeft="1" ':""),c.push('tabSelected="1" workbookViewId="0">'),c.push(this._getPaneXML()),c.push("</sheetView></sheetViews>"),c.push('<sheetFormatPr defaultRowHeight="15"'),c.push(' outlineLevelRow="'+(this._dataProvider.getRowsCount()>0?this._dataProvider.getGroupLevel(0):0)+'"'),c.push(' x14ac:dyDescent="0.25"/>'),t=0;t<o;t++)this._colsArray[t]=this._getXMLTag("col",[{name:"width",value:this._colsArray[t]},{name:"min",value:Number(t)+1},{name:"max",value:Number(t)+1},{name:"customWidth",value:1}]);for(c.push(this._getXMLTag("cols",[],this._colsArray.join(""))+"<sheetData>"),e=0;e<a;e++){for(r=[],s=this._cellsArray[e].length,t=0;t<s;t++)e=Number(e),i=this._cellsArray[e][t],r.push(this._getXMLTag("c",[{name:"r",value:this._convertToExcelCellRefAndTrackMaxIndex(e,t)},{name:"s",value:i.style},{name:"t",value:i.type}],(0,v.$K)(i.value)?this._getXMLTag("v",[],i.value):null));n.push(this._getXMLTag("row",[{name:"r",value:Number(e)+1},{name:"spans",value:d},{name:"outlineLevel",value:e>=u?this._dataProvider.getGroupLevel(e):0},{name:"x14ac:dyDescent",value:"0.25"}],r.join(""))),this._cellsArray[e]=null,n.length>1e4&&(c.push(n.join("")),n=[])}c.push(n.join(""));var f=this._convertToExcelCellRef(this._maxRowIndex,this._maxColumnIndex);c.push("</sheetData>"+this._getAutoFilterXML(f)+this._generateMergingXML()+"</worksheet>"),this._zip.folder("xl").folder("worksheets").file(DA,c.join("")),this._colsArray=[],this._cellsArray=[]},_generateMergingXML:function(){var t,e,i,r,d,n=(0,v.$K)(this._dataProvider.getHeaderRowCount)?this._dataProvider.getHeaderRowCount():this._dataProvider.getRowsCount(),a=this._dataProvider.getColumns().length,s=[],o=[],u="";for(r=0;r<n;r++)for(i=0;i!==a;i++)if(!(0,v.$K)(s[r])||!(0,v.$K)(s[r][i])){var c=this._dataProvider.getCellMerging(r,i);if(c.colspan||c.rowspan)for(o.push({start:this._convertToExcelCellRefAndTrackMaxIndex(r,i),end:this._convertToExcelCellRefAndTrackMaxIndex(r+(c.rowspan||0),i+(c.colspan||0))}),t=r;t<=r+c.rowspan;t++)for(e=i;e<=i+c.colspan;e++)(0,v.$K)(s[t])||(s[t]=[]),s[t][e]=!0}var f=o.length;for(d=0;d<f;d++)u+=this._getXMLTag("mergeCell",[{name:"ref",value:o[d].start+":"+o[d].end}]);return u.length?this._getXMLTag("mergeCells",[{name:"count",value:f}],u):""},_generateCommonXML:function(){var t=pu+this._createXMLRelationships(this._createXMLRelationship(1,"officeDocument","xl/"+Yy)),e=this._zip.folder("xl"),i=pu;this._zip.folder("_"+Uy).file("."+Uy,t);var r=this._createXMLRelationship(1,"worksheet","worksheets/"+DA)+this._createXMLRelationship(2,"styles",TA)+this._createXMLRelationship(3,"sharedStrings",IA);i+=this._createXMLRelationships(r),e.folder("_"+Uy).file(Yy+".rels",i),e.file(Yy,this._getWorkbookContent()),this._zip.file("[Content_Types].xml",this._getContentTypesContent())},_generateContent:function(){this._prepareStyleData(),this._prepareCellData(),this._generateWorkXML(),this._generateCommonXML()},_generateWorkXML:function(){this._generateStylesXML(),this._generateStringsXML(),this._generateWorksheetXML()},ctor:function(t,e){this._rtlEnabled=e&&!!e.rtlEnabled,this._options=e,this._maxRowIndex=0,this._maxColumnIndex=0,this._stringArray=[],this._stringHash={},this._styleArray=[],this._colsArray=[],this._cellsArray=[],this._needSheetPr=!1,this._dataProvider=t,this._excelFile=new EA,this._zip=(0,v.$K)(Jc.JSZip)?new Jc.JSZip:null},_checkZipState:function(){if(!this._zip)throw Nt.Z.Error("E1041","JSZip")},ready:function(){return this._dataProvider.ready()},getData:function(t){var e={type:t?"blob":"base64",compression:"DEFLATE",mimeType:yA.EXCEL},i=new Y.BH;return this._checkZipState(),this._generateContent(),this._zip.generateAsync?this._zip.generateAsync(e).then(i.resolve):i.resolve(this._zip.generate(e)),i}});Jc.JSZip=LK();var AA={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},qy=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*\.*\d+)\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4])]}},{re:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^#([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/^hsv\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){var e=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10),n=RA(e,i,r);return[n[0],n[1],n[2],1,[e,i,r]]}},{re:/^hsl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){var e=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10),n=OA(e,i,r);return[n[0],n[1],n[2],1,null,[e,i,r]]}}],cs=Math.round;function ps(t){var e;this.baseColor=t,t&&(e=String(t).toLowerCase().replace(/ /g,""),e=function iG(t){if("transparent"===t)return[0,0,0,0];for(var r,e=0,i=qy.length;e<i;++e)if(r=qy[e].re.exec(t))return qy[e].process(r);return null}(e=AA[e]?"#"+AA[e]:e)),e||(this.colorIsInvalid=!0),this.r=Oa((e=e||{})[0]),this.g=Oa(e[1]),this.b=Oa(e[2]),this.a=Oa(e[3],1,1),this.hsv=e[4]?{h:e[4][0],s:e[4][1],v:e[4][2]}:function nG(t,e,i){var s,o,r=Math.max(t,e,i),n=Math.min(t,e,i),a=r-n,d=r;if(o=0===r?0:1-n/r,r===n)s=0;else switch(r){case t:s=(e-i)/a*60,e<i&&(s+=360);break;case e:s=(i-t)/a*60+120;break;case i:s=(t-e)/a*60+240}return o*=100,d*=100/255,{h:Math.round(s),s:Math.round(o),v:Math.round(d)}}(this.r,this.g,this.b),this.hsl=e[5]?{h:e[5][0],s:e[5][1],l:e[5][2]}:function sG(t,e,i){t=fu(t,255),e=fu(e,255),i=fu(i,255);var s,o,r=Math.max(t,e,i),n=Math.min(t,e,i),a=r+n,d=a/2;if(r===n)s=o=0;else{var u=r-n;o=d>.5?u/(2-a):u/a,s=function aG(t,e,i,r){switch(Math.max(t,e,i)){case t:return(e-i)/r+(e<i?6:0);case e:return(i-t)/r+2;case i:return(t-e)/r+4}}(t,e,i,u),s/=6}return{h:cs(360*s),s:cs(100*o),l:cs(100*d)}}(this.r,this.g,this.b)}function Oa(t,e,i){return e=e||0,i=i||255,t<0||isNaN(t)?e:t>i?i:t}function RA(t,e,i){var d,u,c,n=(100-e)*i/100,a=t%60/60*(i-n),s=n+a,o=i-a;switch(Math.floor(t%360/60)){case 0:d=i,u=s,c=n;break;case 1:d=o,u=i,c=n;break;case 2:d=n,u=i,c=s;break;case 3:d=n,u=o,c=i;break;case 4:d=s,u=n,c=i;break;case 5:d=i,u=n,c=o}return[Math.round(2.55*d),Math.round(2.55*u),Math.round(2.55*c)]}function jy(t,e){var i=e;return"r"===t&&(i=e+1/3),"b"===t&&(i=e-1/3),i}function Xy(t,e,i){return i=function oG(t){return t<0&&(t+=1),t>1&&(t-=1),t}(i),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function OA(t,e,i){var r,n,a;if(t=fu(t,360),e=fu(e,100),i=fu(i,100),0===e)r=n=a=i;else{var s=i<.5?i*(1+e):i+e-i*e,o=2*i-s;r=Xy(o,s,jy("r",t)),n=Xy(o,s,jy("g",t)),a=Xy(o,s,jy("b",t))}return[cs(255*r),cs(255*n),cs(255*a)]}function fu(t,e){return t=Math.min(e,Math.max(0,parseFloat(t))),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Qy(t,e,i){return e=e||0,i=i||255,!(t%1!=0||t<e||t>i||"number"!=typeof t||isNaN(t))}ps.prototype={constructor:ps,highlight:function(t){return this.alter(t=t||10).toHex()},darken:function(t){return this.alter(-(t=t||10)).toHex()},alter:function(t){var e=new ps;return e.r=Oa(this.r+t),e.g=Oa(this.g+t),e.b=Oa(this.b+t),e},blend:function(t,e){var i=t instanceof ps?t:new ps(t),r=new ps;return r.r=Oa(cs(this.r*(1-e)+i.r*e)),r.g=Oa(cs(this.g*(1-e)+i.g*e)),r.b=Oa(cs(this.b*(1-e)+i.b*e)),r},toHex:function(){return function rG(t,e,i){return"#"+(16777216|t<<16|e<<8|i).toString(16).slice(1)}(this.r,this.g,this.b)},getPureColor:function(){return new ps("rgb("+RA(this.hsv.h,100,100).join(",")+")")},isValidHex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},isValidRGB:function(t,e,i){return!(!Qy(t)||!Qy(e)||!Qy(i))},isValidAlpha:function(t){return!(isNaN(t)||t<0||t>1||"number"!=typeof t)},colorIsInvalid:!1,fromHSL:function(t){var e=new ps,i=OA(t.h,t.s,t.l);return e.r=i[0],e.g=i[1],e.b=i[2],e}},(0,qe.Jj)(),(0,qe.Jj)(),Math;k(8948),(0,qe.Jj)(),k(6065),(0,qe.Jj)();var oU_getData=function tG(t,e){var i=new Jc(t,e);return i._checkZipState(),i.ready().then(()=>i.getData((0,v.mf)((0,qe.Jj)().Blob)))},$A="dx-datagrid-export-button";class fU{constructor(e,i,r){this._exportController=e,this._initialColumnWidthsByColumnIndex=i,this._selectedRowsOnly=r}_getGroupValue(e){var{key:i,data:r,rowType:n,groupIndex:a,summaryCells:s}=e,o=this._options.groupColumns[a],d=l.getDisplayValue(o,o.deserializeValue?o.deserializeValue(i[a]):i[a],r,n),u="".concat(o.caption,": ").concat(l.formatValue(d,o));return s&&s[0]&&s[0].length&&(u+=" ".concat(l.getGroupRowSummaryText(s[0],this._options.summaryTexts))),u}_correctCellIndex(e){return e}_initOptions(){var e=this._exportController,i=e._columnsController.getGroupColumns(),r=e.option("export.excelWrapTextEnabled");this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:i,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),getVisibleIndex:e._columnsController.getVisibleIndex.bind(e._columnsController),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),customizeExportData:e.option("customizeExportData"),rtlEnabled:e.option("rtlEnabled"),wrapTextEnabled:(0,v.$K)(r)?r:!!e.option("wordWrapEnabled"),customizeExcelCell:e.option("export.customizeExcelCell")}}hasCustomizeExcelCell(){return(0,v.$K)(this._options.customizeExcelCell)}customizeExcelCell(e,i){this._options.customizeExcelCell&&(e.gridCell=i,(0,v.$K)(this._exportController)&&(0,v.$K)(this._exportController.component)&&(e.component=this._exportController.component),this._options.customizeExcelCell(e))}getHeaderStyles(){return[{bold:!0,alignment:"center",wrapText:!0},{bold:!0,alignment:"left",wrapText:!0},{bold:!0,alignment:"right",wrapText:!0}]}getGroupRowStyle(){return{bold:!0,wrapText:!1,alignment:(0,ti.q)(this._options.rtlEnabled)}}getColumnStyles(){var{wrapTextEnabled:e}=this._options,i=[];return this.getColumns().forEach(r=>{i.push({alignment:r.alignment||"left",format:r.format,wrapText:e,dataType:r.dataType})}),i}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var i,r=(null===(i=this.getColumns()[e])||void 0===i?void 0:i.alignment)||"right";return this.getHeaderStyles().map(n=>n.alignment).indexOf(r)}getStyleId(e,i){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),i)?this._getTotalCellStyleId(i):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:i+this.getHeaderStyles().length}getColumns(e){var{columns:i}=this._options;return e?i:i[i.length-1]}getColumnsWidths(){var e=this.getColumns();return(0,v.$K)(e)?e.map(i=>i.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&"group"===this._options.items[e].rowType}getGroupLevel(e){var i=this._options.items[e-this.getHeaderRowCount()],r=i&&i.groupIndex;return i&&"totalFooter"===i.rowType?0:(0,v.$K)(r)?r:this._options.groupColumns.length}getCellType(e,i){var r=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),i<r.length){var n=this._options.items.length&&this._options.items[e],a=r[i];return n&&"data"===n.rowType&&isFinite(n.values[this._correctCellIndex(i)])&&!(0,v.$K)(a.customizeText)?(0,v.$K)(a.lookup)?a.lookup.dataType:a.dataType:"string"}}ready(){var e=this;e._initOptions();var i=e._options;return(0,Y.gx)(i.items).done(r=>{i.customizeExportData&&i.customizeExportData(e.getColumns(e.getHeaderRowCount()>1),r),i.items=r}).fail(()=>{i.items=[]})}_convertFromGridGroupSummaryItems(e){if((0,v.$K)(e)&&e.length>0)return e.map(i=>({value:i.value,name:i.name}))}getCellData(e,i,r){var n,a,s={cellSourceData:{},value:n},o=this.getColumns(),d=this._correctCellIndex(i);if(e<this.getHeaderRowCount())a=this.getColumns(!0)[e][i],s.cellSourceData.rowType="header",s.cellSourceData.column=a&&a.gridColumn,s.value=a&&a.caption;else{e-=this.getHeaderRowCount();var c=this._options.items.length&&this._options.items[e];if(c){var f=c.values;switch(s.cellSourceData.rowType=c.rowType,s.cellSourceData.column=o[i]&&o[i].gridColumn,c.rowType){case"groupFooter":case"totalFooter":d<f.length&&((0,v.$K)(n=f[d])?(s.cellSourceData.value=n.value,s.cellSourceData.totalSummaryItemName=n.name,s.value=l.getSummaryText(n,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=c.groupIndex,i<1)s.cellSourceData.column=this._options.groupColumns[c.groupIndex],s.cellSourceData.value=c.key[c.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(c.summaryCells[0]),s.value=this._getGroupValue(c);else{var g=c.values[d];if(Array.isArray(g)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(g),n="";for(var m=0;m<g.length;m++)n+=(m>0?r?"\n":" \n ":"")+l.getSummaryText(g[m],this._options.summaryTexts);s.value=n}else s.cellSourceData.value=void 0}break;default:if(a=o[i]){var y=f[d],w=l.getDisplayValue(a,y,c.data,c.rowType);s.value=!isFinite(w)||(0,v.$K)(a.customizeText)?r&&(0,v.$K)(a.customizeText)&&a.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?w:l.formatValue(w,a):w,s.cellSourceData.value=y}s.cellSourceData.data=c.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,i){var{items:r}=this._options,n=r[e],a=this._correctCellIndex(i);return n&&"groupFooter"===n.rowType||"totalFooter"===n.rowType||n.summaryCells&&n.summaryCells[a]&&n.summaryCells[a].length>0&&n.summaryCells[a][0].alignByColumn}getCellMerging(e,i){var{columns:r}=this._options,n=r[e]&&r[e][i];return n?{colspan:(n.exportColspan||1)-1,rowspan:(n.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}l.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",excelFilterEnabled:!1,formats:["xlsx"],excelWrapTextEnabled:void 0,allowExportSelectedData:!1,texts:{exportTo:le.Z.format("dxDataGrid-exportTo"),exportAll:le.Z.format("dxDataGrid-exportAll"),exportSelectedRows:le.Z.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class _U extends l.ViewController{_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,i){e.width=i}_getColumns(e){var r,n,i=[],a=this._columnsController,s=a.getRowCount();for(r=0;r<=s;r++){var o=[];n=a.getVisibleColumns(r,!0);var d=void 0;if(r===s)if(this._updateLockCount)d=e;else{var u=this._getColumnWidths(this._headersView,this._rowsView);if(u&&u.length){d={};for(var c=0;c<n.length;c++)d[n[c].index]=u[c]}}for(var f=0;f<n.length;f++){var g=(0,O.l)({},n[f],{dataType:"datetime"===n[f].dataType?"date":n[f].dataType,gridColumn:n[f]});if(this._needColumnExporting(g)){var m=this._calculateExportColspan(g);(0,v.$K)(m)&&(g.exportColspan=m),d&&this._updateColumnWidth(g,d[g.index]),o.push(g)}}i.push(o)}return n=i[s],i=function lU(t,e){for(var i=c=>c||1,r=[],n=(t[0]||[]).reduce((c,f)=>c+i(f.colspan),0),a=(c=>{var f=0,g=0;return()=>{var m=c[f]||[],y=m[g++];return g>=m.length&&(f++,g=0),y&&(y.colspan=i(y.colspan),y.rowspan=i(y.rowspan)),y}})(t),s=(c,f,g)=>{if((r[c]=r[c]||[])[f]=g,g.colspan>1||g.rowspan>1){for(var y=(0,O.l)({},g,e),w=1;w<g.colspan;w++)s(c,f+w,y);for(var I=1;I<g.rowspan;I++)for(var P=0;P<g.colspan;P++)s(c+I,f+P,y)}},o=a(),d=0;o;){for(var u=0;u<n&&o;u++)r[d]&&r[d][u]||(s(d,u,o),u+=o.colspan-1,o=a());d++}return r}(i.slice(0,-1),this._getEmptyCell()),i.push(n),i}_calculateExportColspan(e){if(e.isBand){var i=this._columnsController.getChildrenByBandColumn(e.index,!0);if((0,v.$K)(i))return i.reduce((r,n)=>this._needColumnExporting(n)?r+(this._calculateExportColspan(n)||1):r,0)}}_needColumnExporting(e){return!e.command&&(e.allowExporting||void 0===e.allowExporting)}_getFooterSummaryItems(e,i){var r=[],n=1,a=0;do{for(var s=[],o=0;o<e.length;o++){var d=e[o],u=d.length;n<u&&(n=u),s.push(d[a])}r.push({values:s,rowType:i?"totalFooter":"groupFooter"})}while(a++<n-1);return r}_hasSummaryGroupFooters(){var e=this.option("summary.groupItems");if((0,v.$K)(e))for(var i=0;i<e.length;i++)if(e[i].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(e){for(var i=[],r=[],n=[],a=0;a<e.length;a++){var s=e[a];"groupFooter"===s.rowType?(n=this._getFooterSummaryItems(s.summaryCells),i=i.concat(r,n),r=[]):r.push(s)}return i.length?i:r}_updateGroupValuesWithSummaryByColumn(e){for(var i=[],r=0;r<e.length;r++){var n=e[r],{summaryCells:a}=n;if("group"===n.rowType&&a&&a.length>1){for(var s=n.values.length,o=1;o<a.length;o++)for(var d=0;d<a[o].length;d++){var u=a[o][d];u&&u.alignByColumn&&(Array.isArray(i[o-s])||(i[o-s]=[]),i[o-s].push(u))}i.length>0&&(n.values.push(...i),i=[])}}}_processUnExportedItems(e){for(var n,a,i=this._columnsController.getVisibleColumns(null,!0),r=this._columnsController.getGroupColumns(),s=0;s<e.length;s++){var o=e[s],d=!1;n=[],a=[];for(var u=0;u<i.length;u++){var c=i[u];if(d||(d=["detailExpand","buttons"].includes(c.type)),this._needColumnExporting(c)&&(o.values&&n.push("group"!==o.rowType||n.length?o.values[u]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||a.length)a.push(o.summaryCells[u]);else{var f=u-r.length+o.groupIndex;a.push(o.summaryCells[d?f:f+1])}}n.length&&(o.values=n),a.length&&(o.summaryCells=a)}}_getAllItems(e){var u,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,n=new Y.BH,a=this.getController("data"),s=a.footerItems(),o=s.length&&s[0],d=r.option("summary.totalItems");return(0,Y.gx)(e).done(c=>{a.loadAll(c,i).done((f,g)=>{r._updateGroupValuesWithSummaryByColumn(f),r._hasSummaryGroupFooters()&&(f=r._getItemsWithSummaryGroupFooters(f)),u=o&&o.summaryCells,(0,v.$K)(g)&&d&&(u=r._getSummaryCells(d,g));var m=o&&r._getFooterSummaryItems(u,!0);m&&(f=f.concat(m)),r._processUnExportedItems(f),n.resolve(f)}).fail(n.reject)}).fail(n.reject),n}_getSummaryCells(e,i){var r=this.getController("data");return r._calculateSummaryCells(e,i,r._columnsController.getVisibleColumns(null,!0),(a,s)=>r._isDataColumn(s)?s.index:-1)}_getSelectedItems(){var e=this.getController("selection");return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(e.loadSelectedItemsWithFilter(),!0):this._getAllItems(e.getSelectedRowsData())}_getColumnWidths(e,i){return e&&e.isVisible()?e.getColumnWidths():i.getColumnWidths()}init(){this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onExported",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFileSaving",{excludeValidators:["disabled","readOnly"]})}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){var r,i=this._getColumnWidths(this._headersView,this._rowsView);if(i&&i.length){r={};for(var n=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),a=0;a<n.length;a++)r[n[a].index]=i[a]}return new fU(this,r,e)}exportToExcel(e){this._selectionOnly=e,function sU(t,e,i){if(!t)return(new Y.BH).resolve();var r=e.exportingAction,n=e.exportedAction,a=e.fileSavingAction,s={fileName:e.fileName,format:e.format,cancel:!1};(0,v.jn)(e.selectedRowsOnly)&&(s.selectedRowsOnly=e.selectedRowsOnly),(0,v.mf)(r)&&r(s),s.cancel?(new Y.BH).resolve():i(t,e).then(o=>{(0,v.mf)(n)&&n(),(0,v.mf)(a)&&(s.data=o,a(s)),s.cancel||kK.saveAs(s.fileName,"xlsx"===e.format?"EXCEL":e.format,o)})}(this.component.getDataProvider(),{fileName:this.option("export.fileName"),format:"xlsx",selectedRowsOnly:!!e,autoFilterEnabled:!!this.option("export.excelFilterEnabled"),rtlEnabled:this.option("rtlEnabled"),exportingAction:this.getAction("onExporting"),exportedAction:this.getAction("onExported"),fileSavingAction:this.getAction("onFileSaving")},oU_getData)}exportTo(e,i){this._selectionOnly=e;var r=this.getAction("onExporting"),n={selectedRowsOnly:!!e,format:i,fileName:this.option("export.fileName"),cancel:!1};(0,v.mf)(r)&&r(n)}publicMethods(){return["getDataProvider","exportToExcel"]}selectionOnly(e){if(!(0,v.$K)(e))return this._isSelectedRows;this._isSelectedRows=e,this.selectionOnlyChanged.fire()}needLoadItemsOnExportingSelectedItems(){var e;return null!==(e=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==e?e:this.getController("data")._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:{callbackNames(){var t=this.callBase();return(0,v.$K)(t)?t.push("editingButtonsUpdated"):["editingButtonsUpdated"]},_updateEditButtons(){this.callBase(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:{_getToolbarItems(){var t=this.callBase(),e=this._getExportToolbarButton();return e&&(t.push(e),this._correctItemsPosition(t)),t},_getExportToolbarButton(){var t=this._getExportToolbarItems();if(0===t.length)return null;var e=this._needDisableExportButton(),i={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:t},disabled:e};if(1===t.length){var r=(0,je.Z)((0,je.Z)({},t[0]),{hint:t[0].text,elementAttr:{class:$A}});i.widget="dxButton",i.showText="inMenu",i.options=r}else{var n={icon:"export",displayExpr:"text",items:t,hint:this.option("export.texts.exportTo"),elementAttr:{class:$A},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};i.options=n,i.widget="dxDropDownButton",i.menuItemTemplate=(a,s,o)=>{this._createComponent((0,C.Z)(o),Sc,{items:t})}}return i},_getExportToolbarItems(){var t,e=this.option("export"),i=this.option("export.texts"),r=null!==(t=this.option("export.formats"))&&void 0!==t?t:[];if(!e.enabled)return[];var n=[];return r.forEach(a=>{var s="exportTo",o=a.toUpperCase(),d="export";"xlsx"===a&&(s="exportToExcel",o="Excel",d="xlsxfile"),"pdf"===a&&(d="pdffile"),n.push({text:(0,tn.WU)(i.exportAll,o),icon:d,onClick:()=>{this._exportController[s](!1,a)}}),e.allowExportSelectedData&&n.push({text:(0,tn.WU)(i.exportSelectedRows,o),icon:"exportselected",onClick:()=>{this._exportController[s](!0,a)}})}),n},_correctItemsPosition(t){t.sort((e,i)=>e.sortIndex-i.sortIndex)},_isExportButtonVisible(){return this.option("export.enabled")},optionChanged(t){this.callBase(t),"export"===t.name&&(t.handled=!0,this._invalidate())},_needDisableExportButton(){var t=!this._columnsController.hasVisibleDataColumns(),e=this._editingController.hasChanges();return t||e},_columnOptionChanged(t){if(this.callBase(t),l.checkChanges(t.optionNames,["groupIndex","visible","all"])){var i=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",i)}},init(){this.callBase(),this._exportController=this.getController("export"),this._editingController=this.getController("editing"),this._editingController.editingButtonsUpdated.add(()=>{var t=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",t)})},isVisible(){return this.callBase()||this._isExportButtonVisible()}}}}});var tp="dx-row-focused",vU=".dx-row.".concat(tp),KA="dx-cell-focus-disabled",GA={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:zt.ViewController.inherit({init(){this._dataController=this.getController("data"),this._keyboardController=this.getController("keyboardNavigation"),this.component._optionsByReference.focusedRowKey=!0},optionChanged(e){var{name:i,value:r,previousValue:n}=e;switch(i){case"focusedRowIndex":this._focusRowByIndex(r),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(r)&&JSON.stringify(r)===JSON.stringify(n))return;this._focusRowByKey(r),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:this.callBase(e)}},isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")},_focusRowByIndex(e,i){this.option("focusedRowEnabled")&&((e=void 0!==e?e:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,i))},_focusRowByIndexCore(e,i){var r=this.getController("data"),n=r.pageSize(),a=()=>{if(this._isValidFocusedRowIndex(e)){var o=e-r.getRowIndexOffset(!0);if(!i||i.paging&&!i.filtering){var d=r._getLastItemIndex();o=Math.min(o,d)}var u=r.getKeyByRowIndex(o,!0);(0,v.$K)(u)&&!this.isRowFocused(u)&&this.option("focusedRowKey",u)}};if(n>=0)if(this._isLocalRowIndex(e))a();else{var s=Math.floor(e/r.pageSize());(0,Y.gx)(r.pageIndex(s),r.waitReady()).done(()=>{a()})}},_isLocalRowIndex(e){var i=this.getController("data");if(this.getController("keyboardNavigation")._isVirtualScrolling()){var n=Math.floor(e/i.pageSize()),a=i.virtualItemsCount(),s=a?a.begin:-1,o=i.getVisibleRows().length+i.getRowIndexOffset(),d=Math.ceil(o/i.pageSize());return s<=e&&d>n}return!0},_setFocusedRowKeyByIndex(e){var i=this.getController("data");if(this._isValidFocusedRowIndex(e)){var r=Math.min(e-i.getRowIndexOffset(),i.items().length-1),n=i.getKeyByRowIndex(r);(0,v.$K)(n)&&!this.isRowFocused(n)&&this.option("focusedRowKey",n)}},_focusRowByKey(e){(0,v.$K)(e)?this._navigateToRow(e,!0):this._resetFocusedRow()},_resetFocusedRow(){var e=this.option("focusedRowKey"),i=(0,v.$K)(e);if(i||!(this.option("focusedRowIndex")<0)){var r=this.getController("keyboardNavigation");i&&this.option("focusedRowKey",null),r.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getController("data").updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),r._fireFocusedRowChanged(void 0,-1)}},_isValidFocusedRowIndex(e){var r=this.getController("data").getVisibleRows()[e];return!r||"data"===r.rowType||"group"===r.rowType},publicMethods:()=>["navigateToRow","isRowFocused"],navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)},_navigateToRow(e,i){var r=this,n=r.getController("data"),a=r.isAutoNavigateToFocusedRow(),s=new Y.BH;if(void 0===e||!n.dataSource())return s.reject().promise();var o=r.getFocusedRowIndexByKey(e);return!a&&i||o>=0?r._navigateTo(e,s,i):n.getPageIndexByKey(e).done(d=>{d<0?s.resolve(-1):d===n.pageIndex()?n.reload().done(()=>{r.isRowFocused(e)&&n.getRowIndexByKey(e)>=0?s.resolve(r.getFocusedRowIndexByKey(e)):r._navigateTo(e,s,i)}).fail(s.reject):n.pageIndex(d).done(()=>{r._navigateTo(e,s,i)}).fail(s.reject)}).fail(s.reject),s.promise()},_navigateTo(e,i,r){var n=this.getController("data").getRowIndexByKey(e),a=ye.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&a&&n<0?this._navigateToVirtualRow(e,i,r):this._navigateToVisibleRow(e,i,r)},_navigateToVisibleRow(e,i,r){if(r)this._triggerUpdateFocusedRow(e,i);else{var n=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,i).done(()=>{i.resolve(n)})}},_navigateToVirtualRow(e,i,r){var n=this.getController("data"),a=n._rowsScrollController,s=ye.getIndexByKey(e,n.items(!0)),o=this.getView("rowsView").getScrollable();if(a&&o&&s>=0){var d=s+n.getRowIndexOffset(!0),u=a.getItemOffset(d),c=()=>{n.totalCount()&&!n.items().length||(this.component.off("contentReady",c),r?this._triggerUpdateFocusedRow(e,i):i.resolve(d))};this.component.on("contentReady",c),this.getView("rowsView").scrollTopPosition(u)}else i.resolve(-1)},_triggerUpdateFocusedRow(e,i){var a,r=this.getController("data"),n=this.getFocusedRowIndexByKey(e);this._isValidFocusedRowIndex(n)?(this.option("focusedRowEnabled")?r.updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):a=this.getView("rowsView").scrollToRowElement(e),(0,Y.gx)(a).done(()=>{this.getController("keyboardNavigation").setFocusedRowIndex(n),i&&i.resolve(n)})):i&&i.resolve(-1)},getFocusedRowIndexByKey(e){var i=this.getController("data"),r=i.getRowIndexByKey(e,!0);return r>=0?r+i.getRowIndexOffset(!0):-1},_focusRowByKeyOrIndex(){var e=this.option("focusedRowKey"),i=this.option("focusedRowIndex"),r=this.getController("keyboardNavigation"),n=this.getController("data");if((0,v.$K)(e)){var a=n.getRowIndexByKey(e);a>=0?(r._isVirtualScrolling()&&(i=a+n.getRowIndexOffset()),r.setFocusedRowIndex(i),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(s=>{i>=0&&s<0?this._focusRowByIndex():i<0&&s>=0&&r.setFocusedRowIndex(s)})}else i>=0&&this.getController("focus")._focusRowByIndex(i)},isRowFocused(e){var i=this.option("focusedRowKey");if((0,v.$K)(i))return(0,ne.bY)(e,this.option("focusedRowKey"))},updateFocusedRow(e){var s,o,{focusedRowKey:i}=e,r=this,n=r._dataController.getRowIndexByKey(i),a=r.getView("rowsView");(0,U.S6)(a.getTableElements(),(d,u)=>{var c=0===d;s=(0,C.Z)(u),r._clearPreviousFocusedRow(s,n);var f=r._prepareFocusedRow({changedItem:r._dataController.getVisibleRows()[n],$tableElement:s,focusedRowIndex:n});c&&(o=f)}),o&&a.scrollToElementVertically(o)},_clearPreviousFocusedRow(e,i){var r=e.find(vU).filter((a,s)=>{var o=(0,C.Z)(s).closest(".".concat(this.addWidgetPrefix("table")));return e.is(o)});r.removeClass(tp).removeClass(KA).removeAttr("tabindex"),r.children("td").removeAttr("tabindex"),0!==i&&(0,C.Z)(this.getView("rowsView").getRowElement(0)).removeClass(KA).removeAttr("tabIndex")},_prepareFocusedRow(e){var i,{changedItem:r}=e;if(r&&("data"===r.rowType||"group"===r.rowType)){var{focusedRowIndex:n}=e,{$tableElement:a}=e,s=this.option("tabindex")||0,o=this.getView("rowsView");(i=(0,C.Z)(o._getRowElements(a).eq(n))).addClass(tp).attr("tabindex",s)}return i}})},extenders:{controllers:{keyboardNavigation:{init(){var t=this.option("focusedRowIndex"),e=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),this.callBase(),this.setRowFocusType(),this._focusedCellPosition={},(0,v.$K)(t)&&t>=0&&(this._focusedCellPosition.rowIndex=t),(0,v.$K)(e)&&e>=0&&(this._focusedCellPosition.columnIndex=e)},setFocusedRowIndex(t){this.callBase(t),this.option("focusedRowIndex",t)},setFocusedColumnIndex(t){this.callBase(t),this.option("focusedColumnIndex",t)},_escapeKeyHandler(t,e){!e&&this.option("focusedRowEnabled")?this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(t.originalEvent.target),!0)):this.callBase(t,e)},_updateFocusedCellPosition(t,e){var i=this.callBase(t,e);i&&i.columnIndex>=0&&this._fireFocusedCellChanged(t)}},editorFactory:{renderFocusOverlay(t,e){var a,i=this.getController("keyboardNavigation"),r=this.option("focusedRowEnabled"),n=this.getController("editing");r&&i?.isRowFocusType()&&!n.isEditing()?r&&"row"===i._getElementType(t)&&!t.hasClass(tp)&&(a=i.getFirstValidCellInRow(t),i.focus(a)):this.callBase(t,e)}},columns:{getSortDataSourceParameters(t,e){var i=this.callBase.apply(this,arguments),r=this.getController("data"),n=r._dataSource,a=r.store(),s=a&&a.key(),o=n&&n.remoteOperations()||{},d=Object.keys(o).every(c=>!o[c]);if(s&&(this.option("focusedRowEnabled")&&!1!==this.getController("focus").isAutoNavigateToFocusedRow()||e)){var u=(s=Array.isArray(s)?s:[s]).filter(c=>!this.columnOption(c,"sortOrder"));u.length&&(i=i||[],d?i.push({selector:n.getDataIndexGetter(),desc:!1}):u.forEach(c=>i.push({selector:c,desc:!1})))}return i}},data:{_applyChange(t){if(!t||"updateFocusedRow"!==t.changeType)return this.callBase.apply(this,arguments)},_fireChanged(t){if(this.callBase(t),this.option("focusedRowEnabled")&&this._dataSource){var i="update"===t.changeType&&t.repaintChangesOnly&&t.changeTypes&&t.changeTypes.indexOf("remove")>=0;"refresh"===t.changeType&&t.items.length||i?(this._updatePageIndexes(),this._updateFocusedRow(t)):"append"===t.changeType||"prepend"===t.changeType?this._updatePageIndexes():"update"===t.changeType&&t.repaintChangesOnly&&this._updateFocusedRow(t)}},_updatePageIndexes(){var t=this._lastRenderingPageIndex||0,e=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=e,this._isPagingByRendering=e!==t},isPagingByRendering(){return this._isPagingByRendering},_updateFocusedRow(t){var e=t.operationTypes||{},i=this.getController("focus"),{reload:r,fullReload:n,pageIndex:a,paging:s}=e,d=this.getController("keyboardNavigation")._isVirtualScrolling(),u=s&&!d,c=this.option("focusedRowKey"),f=i.isAutoNavigateToFocusedRow();if(r&&!1===a&&!n&&(0,v.$K)(c))i._navigateToRow(c,!0).done($=>{$<0&&i._focusRowByIndex(void 0,e)});else if(u&&f){var m=this.getRowIndexByKey(c),y=this.option("focusedRowIndex");y>=0&&(y===m||!(m>=0))&&i._focusRowByIndex(y,e)}else u&&!f&&this.getRowIndexByKey(c)<0?this.option("focusedRowIndex",-1):e.fullReload&&i._focusRowByKeyOrIndex()},getPageIndexByKey(t){var e=this,i=new Y.BH;return e.getGlobalRowIndexByKey(t).done(r=>{i.resolve(r>=0?Math.floor(r/e.pageSize()):-1)}).fail(i.reject),i.promise()},getGlobalRowIndexByKey(t){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(t):this._calculateGlobalRowIndexByFlatData(t)},_calculateGlobalRowIndexByFlatData(t,e,i){var r=this,n=new Y.BH,a=r._dataSource;if(Array.isArray(t)||(t=>"string"==typeof t&&t.startsWith(Rb)&&t.length===Rb.length+36)(t))return n.resolve(-1).promise();var s=r._generateFilterByKey(t);return a.load({filter:r._concatWithCombinedFilter(s),skip:0,take:1}).done(o=>{o.length>0?(s=r._generateOperationFilterByKey(t,o[0],i),a.load({filter:r._concatWithCombinedFilter(s,e),skip:0,take:1,requireTotalCount:!0}).done((d,u)=>{n.resolve(u.totalCount)})):n.resolve(-1)}),n.promise()},_concatWithCombinedFilter(t,e){var i=this.getCombinedFilter();return ye.combineFilters([t,i,e])},_generateBooleanFilter(t,e,i){var{desc:r}=i;switch(!0){case!1===e&&r:return[t,"=",!0];case!1===e&&!r:return[t,"=",null];case!0===e&&!r:case!(0,v.jn)(e)&&r:return[t,"<>",e];default:return}},_generateOperationFilterByKey(t,e,i){var r=this,n=r.option("dateSerializationFormat"),a=r._dataSource.remoteOperations().filtering,s=r._generateFilterByKey(t,"<"),o=r._columnsController.getSortDataSourceParameters(!a,!0);if(i){var d=r._columnsController.getGroupDataSourceParameters(!a);d&&(o=o?d.concat(o):d)}return o&&o.slice().reverse().forEach(u=>{var{selector:c,desc:f,compare:g}=u,{getter:m,rawValue:y,safeValue:w}=((t,e,i)=>{var{isRemoteFiltering:r,dateSerializationFormat:n,getSelector:a}=i,{selector:s}=t,o=(0,v.mf)(s)?s:a(s),d=o?o(e):e[s];return{getter:o,rawValue:d,safeValue:r&&(0,v.J_)(d)?Oi.serializeDate(d,n):d}})(u,e,{isRemoteFiltering:a,dateSerializationFormat:n,getSelector:se=>r._columnsController.columnOption(se,"selector")});if(s=[[c,"=",w],"and",s],null===y||(0,v.jn)(y)){var I=r._generateBooleanFilter(c,w,f);I&&(s=[I,"or",s])}else{var $,P=f?">":"<";g?$=se=>"<"===P?g(y,m(se))>=1:g(y,m(se))<=-1:($=[c,P,w],f||($=[$,"or",[c,"=",null]])),s=[$,"or",s]}}),s},_generateFilterByKey(t,e){var i=this._dataSource.key(),r=[];if(e||(e="="),Array.isArray(i))for(var n=0;n<i.length;++n){var a=t[i[n]];a&&(r.length>0&&r.push("and"),r.push([i[n],e,a]))}else r=[i,e,t];return r},_getLastItemIndex(){return this.items(!0).length-1}},editing:{_deleteRowCore(t){var e=this.callBase.apply(this,arguments),i=this.getController("data"),r=i.getKeyByRowIndex(t);e.done(()=>{var n=i.getRowIndexByKey(r),a=i.getVisibleRows();-1===n&&!a.length&&this.getController("focus")._resetFocusedRow()})}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return this.option("focusedRowEnabled")&&t&&this.getController("focus").isRowFocused(t.key)&&e.addClass(tp),e},_checkRowKeys(t){if(this.callBase.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var e=this._dataController.store();e&&!e.key()&&this._dataController.fireError("E1042","Row focusing")}},_update(t){"updateFocusedRow"===t.changeType?this.option("focusedRowEnabled")&&this.getController("focus").updateFocusedRow(t):this.callBase(t)},updateFocusElementTabIndex(t,e){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(e):this.callBase(t)},_setFocusedRowElementTabIndex(t){var e=this.option("focusedRowKey"),i=this.option("tabIndex")||0,r=this._dataController,n=this._columnsController,a=r.getRowIndexByKey(e),s=this.option("focusedColumnIndex"),o=this._findRowElementForTabIndex();if((0,v.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),o.attr("tabIndex",i),a>=0&&!t&&(s<0&&(s=0),a+=r.getRowIndexOffset(),s+=n.getColumnIndexOffset(),this.getController("keyboardNavigation").setFocusedCellPosition(a,s),this.getController("focus").isAutoNavigateToFocusedRow())){var d=r.dataSource(),u=d&&d.operationTypes();u&&!u.paging&&!r.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}},_findRowElementForTabIndex(){var t=this.option("focusedRowKey"),e=this._dataController.getRowIndexByKey(t);return(0,C.Z)(this.getRowElement(e>=0?e:0))},scrollToRowElement(t){var e=this.getController("data").getRowIndexByKey(t),i=(0,C.Z)(this.getRow(e));return this.scrollToElementVertically(i)},scrollToElementVertically(t){var e=this.getScrollable();if(e&&t.length){var i=e.getScrollElementPosition(t,"vertical");return this.scrollTopPosition(i)}return(new Y.BH).resolve()},scrollTopPosition(t){var e=new Y.BH,i=this.getScrollable();if(i){var r=i.scrollTop(),n=()=>{i.off("scroll",n),e.resolve()};if(t!==r)return i.on("scroll",n),this._dataController.resetFilterApplying(),i.scrollTo({top:t}),e.promise()}return e.resolve()}}}}},yU=Number.MAX_SAFE_INTEGER||9007199254740991;l.registerModule("focus",(0,O.l)(!0,{},GA,{extenders:{controllers:{data:t=>class extends(t.inherit(GA.extenders.controllers.data)){changeRowExpand(e,i){if(this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)){var r=this.getController("keyboardNavigation");(!i||!r.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e)}return super.changeRowExpand(e,i)}_isFocusedRowInsideGroup(e){var i=this.getController("columns"),r=this.option("focusedRowKey"),n=this.getRowIndexByKey(r),a=n>=0&&this.getVisibleRows()[n],s=i.getGroupDataSourceParameters(!0);if(a)for(var o=0;o<e.length;++o)if((0,Pt.vb)(s[o]&&s[o].selector)(a.data)!==e[o])return!1;return!0}_getGroupPath(e,i){for(var r=[],n=[e];n&&n[0]&&i;){var a=n[0];void 0!==a.key&&r.push(a.key),n=a.items,i--}return r}_expandGroupByPath(e,i,r){var n=new Y.BH;return r++,e.expandRow(i.slice(0,r)).done(()=>{r===i.length?n.resolve():e._expandGroupByPath(e,i,r).done(n.resolve).fail(n.reject)}).fail(n.reject),n.promise()}_calculateGlobalRowIndexByGroupedData(e){var i=this,r=i._dataSource,n=i._generateFilterByKey(e),a=new Y.BH,s=Array.isArray(e),o=r.group();return s?a.resolve(-1).promise():r._grouping._updatePagingOptions?(r.load({filter:i._concatWithCombinedFilter(n),group:o}).done(d=>{if(!d||0===d.length||!(0,v.$K)(d[0].key)||-1===d[0].key)return a.resolve(-1).promise();var u=i._getGroupPath(d[0],o.length);i._expandGroupByPath(i,u,0).done(()=>{i._calculateExpandedRowGlobalIndex(a,e,u,o)}).fail(a.reject)}).fail(a.reject),a.promise()):(i._calculateGlobalRowIndexByFlatData(e,null,!0).done(a.resolve).fail(a.reject),a)}_calculateExpandedRowGlobalIndex(e,i,r,n){var c,a=ul(r,{group:n}),s=this._dataSource,o=this.option("scrolling.mode"),d="virtual"===o||"infinite"===o,u=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:yU},(f,g)=>{(0,ne.bY)(f.path,r)&&(c=g)}),this._calculateGlobalRowIndexByFlatData(i,a).done(f=>{var g,m;f<0?e.resolve(-1):(g=(c%u||u)+f-r.length,m=d?0:Math.floor(g/(u-r.length))*r.length,e.resolve(g=c+f+m))}).fail(e.reject)}}}}}));var dw,_u,wU=k(9967),UA=(0,qe.Jj)(),Ba="dxDraggable",SU=(0,be.V4)(hr.BL,Ba),EU=(0,be.V4)(hr.pB,Ba),IU=(0,be.V4)(hr.ut,Ba),TU=(0,be.V4)(hr.IO,Ba),DU=(0,be.V4)(hr.Zu,Ba),AU=(0,be.V4)(qt.Z.down,Ba),RU=(0,be.V4)("keydown",Ba),uw=t=>({x:t.pageX-(0,C.Z)(UA).scrollLeft(),y:t.pageY-(0,C.Z)(UA).scrollTop()});class qA{constructor(e,i){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=i,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,i){var r=!1;e.some(n=>{var a=(0,C.Z)(n),s=a.hasClass("dx-overlay-wrapper"),o=a.hasClass("dx-overlay-content");return!(!s&&!o)||(r=this._trySetScrollable(n,i))}),r||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,Q.dz)(e):(0,Q.Cr)(e))}_trySetScrollable(e,i){var n,r=(0,C.Z)(e),a=this._component.option("scrollSensitivity"),s=this.isScrollable(r);return s&&(a>(n=this._calculateDistanceToBorders(r,i))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(n[this._limitProps.start]),this._$scrollableAtPointer=r):a>n[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(n[this._limitProps.end]),this._$scrollableAtPointer=r):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(e,i){var n,r=e.get(0);return r?(n=(0,ti.l)(r),{left:i.x-n.left,top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y}):{}}_calculateScrollSpeed(e){var i=this._component,r=i.option("scrollSensitivity"),n=i.option("scrollSpeed");return Math.ceil(Math.pow((r-e)/r,2)*n)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),i=e.data("dxScrollable")||e.data("dxScrollView");if(i){var r=i.scrollOffset()[this._limitProps.start]+this._scrollSpeed;i.scrollTo({[this._limitProps.start]:r})}}else{var n=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](n)}var a=this._component._dragMoveArgs;a&&this._component._dragMoveHandler(a)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,i){if(!e)return!1;var r=(0,ti.l)(e.get(0)),n=r[this._limitProps.start],a=r[this._sizeAttr],s=uw(i),o="width"===this._sizeAttr?s.x:s.y;return o<n||o>n+a}}var LU=wU.Z.inherit({ctor(t){this.callBase(),this._strategy=t},_step(){var t=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),e&&e.scrollByStep()}}),jA=tg.Z.inherit({reset:ne.ZT,dragMove:ne.ZT,dragEnter:ne.ZT,dragLeave:ne.ZT,dragEnd(t){return this._getSourceDraggable()._fireRemoveEvent(t),(0,Y.BH)().resolve()},_fireRemoveEvent:ne.ZT,_getDefaultOptions(){return(0,O.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,O.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new LU(this),this._horizontalScrollHelper=new qA("horizontal",this),this._verticalScrollHelper=new qA("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:t=>((0,v.Kn)(t)&&(t={h:t.x,v:t.y}),{left:(t=(0,ne.Um)(t).map(e=>parseFloat(e)))[0],top:1===t.length?t[0]:t[1]}),_getNormalizedCursorOffset(t,e){return(0,v.mf)(t)&&(t=t.call(this,e)),this._normalizeCursorOffset(t)},_calculateElementOffset(t){var e,i,{event:r}=t,n=(0,C.Z)(t.itemElement),a=(0,C.Z)(t.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),d={left:0,top:0},u=this._initialLocate=(0,gi.jt)(a);return(s||t.initialOffset||o)&&(e=t.initialOffset||n.offset(),o&&(d=this._getNormalizedCursorOffset(o,t),isFinite(d.left)&&(e.left=r.pageX),isFinite(d.top)&&(e.top=r.pageY)),i=a.offset(),e.top-=i.top+(d.top||0)-u.top,e.left-=i.left+(d.left||0)-u.left),e},_initPosition(t){var e=(0,C.Z)(t.dragElement),i=this._calculateElementOffset(t);i&&this._move(i,e),this._startPosition=(0,gi.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(t){return(0,Cr.H0)(this.NAME)+(t?"-".concat(t):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var t=this.$element(),e=t.children(".dx-template-wrapper");return e.length?e:t},_attachEventHandlers(){if(!this.option("disabled")){var t=this._$content(),e=this._getItemsSelector(),i=this.option("allowMoveByClick"),r={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(n,a)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),d=this._getScrollable(n);return!this._verticalScrollHelper.isOutsideScrollable(d,a)&&!this._horizontalScrollHelper.isOutsideScrollable(d,a)&&o&&o===s}};i&&(t=this._getArea(),Z.Z.on(t,AU,r,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),Z.Z.on(t,SU,e,r,this._dragStartHandler.bind(this)),Z.Z.on(t,EU,r,this._dragMoveHandler.bind(this)),Z.Z.on(t,IU,r,this._dragEndHandler.bind(this)),Z.Z.on(t,TU,r,this._dragEnterHandler.bind(this)),Z.Z.on(t,DU,r,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&Z.Z.on(t,RU,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(t,e){return{container:(0,gt.u)(e),model:{itemData:this.option("itemData"),itemElement:(0,gt.u)(t)}}},_createDragElement(t){var e=t,i=this.option("clone"),r=this._getContainer(),n=this.option("dragTemplate");return n?(n=this._getTemplate(n),e=(0,C.Z)("<div>").appendTo(r),n.render(this._getDragTemplateArgs(t,e))):i&&(e=(0,C.Z)("<div>").appendTo(r),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){Z.Z.off(this._$content(),".".concat(Ba)),Z.Z.off(this._getArea(),".".concat(Ba))},_move(t,e){(0,gi.pB)(e||this._$dragElement,t)},_getDraggableElement(t){var e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();var r=(0,C.Z)(t&&t.target),n=this._getItemsSelector();if(">"===n[0]){var a=this._$content().find(n);a.is(r)||(r=r.closest(a))}return r},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(t){if(!(0,be.r1)(t)){var e={},i=this.$element(),r=this.option("dragDirection");("horizontal"===r||"both"===r)&&(e.left=t.pageX-i.offset().left+(0,gi.jt)(i).left-(0,Q.dz)(i)/2),("vertical"===r||"both"===r)&&(e.top=t.pageY-i.offset().top+(0,gi.jt)(i).top-(0,Q.Cr)(i)/2),this._move(e,i),this._getAction("onDragMove")(this._getEventArgs(t))}},_isValidElement(t,e){var i=this.option("handle"),r=(0,C.Z)(t.originalEvent&&t.originalEvent.target);return!(i&&!r.closest(i).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(t){var e=this._getDraggableElement(t);if(this.dragInProgress=!0,this._isValidElement(t,e)){if(!this._$sourceElement){var i=this._getDragStartArgs(t,e);if(this._getAction("onDragStart")(i),i.cancel)return void(t.cancel=!0);this.option("itemData",i.itemData),this._setSourceDraggable(),this._$sourceElement=e;var r=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),r=this._getDraggableElementOffset(r.left,r.top));var n=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(n.children());var a="fixed"===n.css("position");this._initPosition((0,O.l)({},i,{dragElement:n.get(0),initialOffset:a&&r})),this._getAction("onDraggableElementShown")((0,je.Z)((0,je.Z)({},i),{dragElement:n}));var s=this._getArea(),o=this._getAreaOffset(s),d=this._getBoundOffset(),u=(0,Q.Y_)(s),c=(0,Q.zp)(s),f=(0,Q.dz)(n),g=(0,Q.Cr)(n),m=n.offset().left-o.left,y=n.offset().top-o.top;s.length&&(t.maxLeftOffset=m-d.left,t.maxRightOffset=u-m-f-d.right,t.maxTopOffset=y-d.top,t.maxBottomOffset=c-y-g-d.bottom),this.option("autoScroll")&&this._startAnimator()}}else t.cancel=!0},_getAreaOffset:t=>t&&js.Z.offset(t)||{left:0,top:0},_toggleDraggingClass(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass(t,e){var i=e||this._$sourceElement;i&&i.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor(t){(0,C.Z)(".".concat("dx-gesture-cover")).css("cursor",t.css("cursor"))},_getBoundOffset(){var t=this.option("boundOffset");return(0,v.mf)(t)&&(t=t.call(this)),(0,tn.$b)(t)},_getArea(){var t=this.option("boundary");return(0,v.mf)(t)&&(t=t.call(this)),(0,C.Z)(t)},_getContainer(){var t=this.option("container");return void 0===t&&(t=(0,q0.S3)()),(0,C.Z)(t)},_getDraggableElementOffset(t,e){var i,r,n,a,s=this._initScrollTop,o=this._initScrollLeft,d=this._getScrollableScrollTop(),u=this._getScrollableScrollLeft(),c=(0,C.Z)(this.element()).css("position"),g={left:(null!==(r=null===(i=this._startPosition)||void 0===i?void 0:i.left)&&void 0!==r?r:0)+t,top:(null!==(a=null===(n=this._startPosition)||void 0===n?void 0:n.top)&&void 0!==a?a:0)+e};return"fixed"===c||this._hasClonedDraggable()?g:{left:(0,v.kE)(u)?g.left+u-o:g.left,top:(0,v.kE)(d)?g.top+d-s:g.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(t){if(this._dragMoveArgs=t,this._$dragElement){var e=this._getDraggableElementOffset(t.offset.x,t.offset.y);this._move(e),this._updateScrollable(t);var i=this._getEventArgs(t);this._getAction("onDragMove")(i),!0!==i.cancel&&this._getTargetDraggable().dragMove(t,scrollBy)}else t.cancel=!0},_updateScrollable(t){if(this.option("autoScroll")){var e=uw(t),i=tt.Z.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(i,e),this._horizontalScrollHelper.updateScrollable(i,e)}},_getScrollable(t){var e;return t.parents().toArray().some(i=>{var r=(0,C.Z)(i);return!(!this._horizontalScrollHelper.isScrollable(r)&&!this._verticalScrollHelper.isScrollable(r)||(e=r,0))}),e},_getScrollableScrollTop(){var t,e;return null!==(e=null===(t=this._getScrollable((0,C.Z)(this.element())))||void 0===t?void 0:t.scrollTop())&&void 0!==e?e:0},_getScrollableScrollLeft(){var t,e;return null!==(e=null===(t=this._getScrollable((0,C.Z)(this.element())))||void 0===t?void 0:t.scrollLeft())&&void 0!==e?e:0},_defaultActionArgs(){var t=this.callBase.apply(this,arguments),e=this.option("component");return e&&(t.component=e,t.element=e.element()),t},_getEventArgs(t){var e=this._getSourceDraggable(),i=this._getTargetDraggable();return{event:t,itemData:e.option("itemData"),itemElement:(0,gt.u)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:i.option("component")||i,fromData:e.option("data"),toData:i.option("data")}},_getDragStartArgs(t,e){var i=this._getEventArgs(t);return{event:i.event,itemData:i.itemData,itemElement:e,fromData:i.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(t){var e=(0,Y.BH)(),i=this._getEventArgs(t),r=this._getEventArgs(t),n=this._getTargetDraggable(),a=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(i)}finally{(0,Y.gx)((0,Y.p4)(i.cancel)).done(s=>{if(!s&&(n!==this&&n._getAction("onDrop")(r),!r.cancel))return a=!1,void(0,Y.gx)((0,Y.p4)(n.dragEnd(i))).always(e.resolve);e.resolve()}).fail(e.resolve),e.done(()=>{a&&this._revertItemToInitialPosition(),this._resetDragOptions(n)})}},_isTargetOverAnotherDraggable(t){var e=this._getSourceDraggable();if(this===e)return!1;var i=e._$dragElement,r=e.$element(),n=this.$element(),a=uw(t),o=tt.Z.elementsFromPoint(a.x,a.y,this.element()).filter(f=>{var g=(0,C.Z)(f);return!!g.hasClass(this._addWidgetPrefix())&&!g.closest(i).length})[0],d=this._getSourceElement(),u=o===r.get(0),c=(0,C.Z)(o).closest(d).length;return!o||o===n.get(0)&&!u&&!c},_dragEnterHandler(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(t)},_dragLeaveHandler(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(t)},_keydownHandler(t){this.dragInProgress&&"Escape"===t.key&&this._keydownEscapeHandler(t)},_keydownEscapeHandler(t){if(this._getSourceElement()){var i=this._getEventArgs(t);if(this._getAction("onDragCancel")(i),!i.cancel){this.dragInProgress=!1,_u?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var r=this._getTargetDraggable();this._resetDragOptions(r),this._attachEventHandlers()}}},_getAction(t){return this["_".concat(t,"Action")]||this._createActionByOption(t)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new J_.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,C.Z)(e.render({container:this.element(),transclude:t}))},_optionChanged(t){var{name:e}=t;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(t)}},_getTargetDraggable(){return dw||this},_getSourceDraggable(){return _u||this},_setTargetDraggable(){var t=this.option("group"),e=this._getSourceDraggable();t&&t===e.option("group")&&(dw=this)},_setSourceDraggable(){_u=this},_resetSourceDraggable(){_u=null},_resetTargetDraggable(){dw=null},_resetDragOptions(t){this.reset(),t.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(t){var e=this._getEventArgs(t);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(t){var e=this._getEventArgs(t);this._getAction("onDragLeave")(e)}});(0,kt.Z)(Ba,jA);const PU=jA;var XA=(0,qe.Jj)(),QA="placeholder",JA=t=>(0,C.Z)(t).is(":visible"),NU=(t,e)=>{var i,r;if(t){var n=(null===(i=e.to)||void 0===i?void 0:i.left)||0,a=(null===(r=e.to)||void 0===r?void 0:r.top)||0;t.style.transform="translate(".concat(n,"px,").concat(a,"px)"),t.style.transition=Ni.Z.off?"":"transform ".concat(e.duration,"ms ").concat(e.easing)}},zU=t=>{t&&(t.style.transform="",t.style.transition="")},eR=PU.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,O.l)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(t,e)=>t.slice(0,e).reverse().filter(JA)[0],_dragStartHandler(t){if(this.callBase.apply(this,arguments),!0!==t.cancel){var e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(t),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(t){var e=this._getScrollable((0,C.Z)(t.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},Z.Z.off(e,"scroll",this._sourceScrollHandler),Z.Z.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(Z.Z.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(t){var e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(i=>{t.target[i]!==e[i]&&(this._correctItemPoints(t.target[i]-e[i]),this._movePlaceholder(),e[i]=t.target[i])})},_dragEnterHandler(t){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(t),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var e=this.option("itemPoints"),i=e[e.length-1];if(i){var r=this.$element(),n=this._getSourceElement(),a=this._isVerticalOrientation(),s=a?(0,Q.zp)(n,!0):(0,Q.Y_)(n,!0),o=r.get(0)[a?"scrollHeight":"scrollWidth"],d=r.get(0)[a?"scrollTop":"scrollLeft"],u=a?"top":"left",c=i[u],g=r.offset()[u]+o-d-c;if(g<s&&a){var m=this._getItems(),y=(0,C.Z)(this._getPrevVisibleItem(m));this._$modifiedItem=y,this._modifiedItemMargin=y.get(0).style.marginBottom,y.css("marginBottom",s-g);var w=y.closest(".dx-sortable"),I=w.data("dxScrollable")||w.data("dxScrollView");I&&I.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(t){var i=this._getTargetDraggable().$element(),r=this._getScrollable(i);if(r){var{left:n,right:a,top:s,bottom:o}=function HU(t){var e=t.offset(),{style:i}=t[0],r=parseFloat(i.paddingLeft)||0,n=parseFloat(i.paddingRight)||0,a=parseFloat(i.paddingTop)||0,s=t[0].clientWidth-(r+n),o=(0,Q.Cr)(t),d=e.left+r,u=e.top+a;return{left:d,right:d+s,top:u,bottom:u+o}}(r),d=this.option("toIndex"),c=this.option("itemPoints")?.filter(g=>g.index===d)[0];if(c&&void 0!==c.top)return this._isVerticalOrientation()?s<=Math.ceil(c.top)&&Math.floor(c.top)<=o:n<=Math.ceil(c.left)&&Math.floor(c.left)<=a}return!0},dragEnd(t){this._unsubscribeFromSourceScroll();var o,d,e=this._getSourceElement(),i=this._getSourceDraggable(),r=i.NAME!==this.NAME,n=this.option("toIndex"),{event:a}=t,s=this._allowDrop(a);return null!==n&&n>=0&&s&&(i!==this&&((o=this._fireAddEvent(a))||(d=this._fireRemoveEvent(a))),r&&(0,gi.Kx)(e),this.option("moveItemOnDrop")&&!o&&this._moveItem(e,n,d),i===this)?this._fireReorderEvent(a):(0,Y.BH)().resolve()},dragMove(t){var e=this.option("itemPoints");if(e){for(var s,i=this._isVerticalOrientation(),r=i?"top":"left",n=i?t.pageY:t.pageX,a=this.option("rtlEnabled"),o=e.length-1;o>=0;o--){var d=e[o+1]&&(e[o][r]+e[o+1][r])/2;if(!(!i&&a?n>d:d>n)&&void 0!==d)break;s=e[o]}s&&(this._updatePlaceholderPosition(t,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var t;return this._isIndicateMode()&&(t=(0,C.Z)("<div>").addClass(this._addWidgetPrefix(QA)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=t,t},_getItems(){var t=this._getItemsSelector();return this._$content().find(t).not(".".concat(this._addWidgetPrefix(QA))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(t,e,i){var r=this.option("allowDropInsideItem");return!!(i||this._allowReordering()||0===t&&r)&&(!this._isIndicateMode()||-1===e||t!==e&&(i||t!==e+1))},_getItemPoints(){var e,i,r,t=[],n=this.option("rtlEnabled"),a=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(JA),d=o.length,u=this._getDraggableElement(),c=o.indexOf(u.get(0));if(d){for(var f=0;f<=d;f++){var g=!a&&n^f===d,m=a&&f===d;f<d&&(i=(e=(0,C.Z)(o[f])).offset(),r=(0,Q.Y_)(e)),t.push({dropInsideItem:!1,left:i.left+(g?r:0),top:i.top+(m?t[f-1].height:0),index:f===d?s.length:s.indexOf(e.get(0)),$item:e,width:(0,Q.Y_)(e),height:(0,Q.zp)(e),isValid:this._isValidPoint(f,c)})}if(this.option("allowDropInsideItem")){var y=t;t=[];for(var w=0;w<y.length;w++)t.push(y[w]),y[w+1]&&t.push((0,O.l)({},y[w],{dropInsideItem:!0,top:Math.floor((y[w].top+y[w+1].top)/2),left:Math.floor((y[w].left+y[w+1].left)/2),isValid:this._isValidPoint(w,c,!0)}))}}else t.push({dropInsideItem:!1,index:0,isValid:!0});return t},_updateItemPoints(t){(t||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(t){var e=this.option("itemPoints");if(t&&e&&!this.option("autoUpdate")){var r=this._isVerticalOrientation()?"top":"left";e.forEach(n=>{n[r]-=t})}},_getElementIndex(t){return this._getItems().indexOf(t.get(0))},_getDragTemplateArgs(t){var e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(t),e},_togglePlaceholder(t){this._$placeholderElement&&this._$placeholderElement.toggle(t)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(t,e){var i=this._getSourceDraggable()!==this._getTargetDraggable(),r=this._getActualFromIndex();return null===t?r:Math.max(i||r>=t||e?t:t-1,0)},_updatePlaceholderPosition(t,e){var i=this._getSourceDraggable(),r=this._normalizeToIndex(e.index,e.dropInsideItem),n=(0,O.l)(this._getEventArgs(t),{toIndex:r,dropInsideItem:e.dropInsideItem});e.isValid&&this._getAction("onDragChange")(n),!n.cancel&&e.isValid?(this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")((0,O.l)(this._getEventArgs(t),{placeholderElement:(0,gt.u)(this._$placeholderElement),dragElement:(0,gt.u)(i._$dragElement)})),this._updateItemPoints()):e.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(t,e){if(this._$scrollable=this._getScrollable(t),this._$scrollable){var i=(0,Q.dz)(this._$scrollable),r=this._$scrollable.offset().left-t.offset().left,n=(0,Q.Y_)(t)-r-i;r>0&&(e-=r),n>0&&(e-=n)}return e},_updatePlaceholderSizes(t,e){var i=this.option("dropInsideItem"),r=(0,C.Z)(e),n=this._isVerticalOrientation(),a="",s="";t.toggleClass(this._addWidgetPrefix("placeholder-inside"),i),(n||i)&&(a=(0,Q.Y_)(r)),(!n||i)&&(s=(0,Q.zp)(r)),a=this._makeWidthCorrection(r,a),t.css({width:a,height:s})},_moveItem(t,e,i){var r,n=this._getItems(),a=n[e],s=this._getSourceDraggable();i&&(t=t.clone(),s._toggleDragSourceClass(!1,t)),a||(r=n[e-1]),this._moveItemCore(t,a,r)},_moveItemCore(t,e,i){e||i?i?t.insertAfter((0,C.Z)(i)):t.insertBefore((0,C.Z)(e)):t.appendTo(this.$element())},_getDragStartArgs(t,e){return(0,O.l)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(t){var e=this._getSourceDraggable(),i=this._getTargetDraggable(),r=i.option("dropInsideItem");return(0,O.l)(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(i.option("toIndex"),r),dropInsideItem:r})},_optionChanged(t){var{name:e}=t;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(i=>{var r=i?t.value:t.previousValue;if(null!==r){var n=(0,C.Z)(this._getItems()[r]);this._toggleDragSourceClass(i,n)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(t);break;case"toIndex":this._optionChangedToIndex(t);break;default:this.callBase(t)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(t){var i,e=this.$element();if("hidden"!==e.css("overflow")?i=e.get(0):e.parents().each(function(){if("visible"!==(0,C.Z)(this).css("overflow"))return i=this,!1}),i){var r=(0,ti.l)(i),n=this._isVerticalOrientation(),a=n?"top":"left",o=n?XA.pageYOffset:XA.pageXOffset;if(t[a]<r[a]+o||t[a]>r[n?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(t){var e=t.value;if(this._isIndicateMode()){var i=null!==e&&e>=0;this._togglePlaceholder(i),i&&this._movePlaceholder()}else this._moveItems(t.previousValue,t.value,t.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var t=this.option("toIndex");this._optionChangedToIndex({value:t,fullUpdate:!0})}},_updateDragSourceClass(){var t=this._getActualFromIndex(),e=(0,C.Z)(this._getItems()[t]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(t){var e=this._$scrollable;if(e&&this._isVerticalOrientation()){var i=e.offset().left-t;i>0&&(t+=i)}return t},_movePlaceholder(){var t=this._$placeholderElement||this._createPlaceholder();if(t){var e=this._getItems(),i=this.option("toIndex"),r=this._isVerticalOrientation(),n=this.option("rtlEnabled"),a=this.option("dropInsideItem"),s=null,o=e[i];if(o){var d=(0,C.Z)(o);s=d.offset(),!r&&n&&!a&&(s.left+=(0,Q.Y_)(d,!0))}else{var u=o=this._getPrevVisibleItem(e,i);u&&(s=(0,C.Z)(u).offset(),r?s.top+=(0,Q.zp)(u,!0):n||(s.left+=(0,Q.Y_)(u,!0)))}if(this._updatePlaceholderSizes(t,o),s&&!this._isPositionVisible(s)&&(s=null),s){var c=r&&i===e.length,f=(0,Q.zp)(t);s.left=this._makeLeftCorrection(s.left),s.top=c&&s.top>=f?s.top-f:s.top,this._move(s,t)}t.toggle(!!s)}},_getPositions(t,e,i,r){for(var n=[],a=0;a<t.length;a++){var s=0;null!==r&&null!==i?(-1===i?a>=r&&(s=e):-1===r?a>i&&(s=-e):i<r?a>i&&a<r&&(s=-e):i>r&&a>=r&&a<i&&(s=e),n.push(s)):n.push(s)}return n},_getDraggableElementSize(t){var e=this._getDraggableElement(),i=this.option("draggableElementSize");return i||(i=t?((0,Q.zp)(e)+(0,Q.zp)(e,!0))/2:((0,Q.Y_)(e)+(0,Q.Y_)(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",i)),i},_getActualFromIndex(){var{fromIndex:t,fromIndexOffset:e,offset:i}=this.option();return null==t?null:t+e-i},_moveItems(t,e,i){for(var r=this._getActualFromIndex(),n=this._isVerticalOrientation(),a=n?"top":"left",s=this._getDraggableElementSize(n),o=this._getItems(),d=this._getPositions(o,s,r,t),u=this._getPositions(o,s,r,e),c=this.option("animation"),f=this.option("rtlEnabled"),g=0;g<o.length;g++){var m=o[g],y=d[g],w=u[g];null===e||null===r?zU(m):(y!==w||i&&w)&&NU(m,(0,O.l)({},c,{to:{[a]:!n&&f?-w:w}}))}},_toggleDragSourceClass(t,e){var i=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||i&&i.toggleClass(this._addWidgetPrefix("source-hidden"),t)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(t){var e=this._getEventArgs(t);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(t){var e=this._getSourceDraggable(),i=this._getEventArgs(t);return e._getAction("onRemove")(i),i.cancel},_fireReorderEvent(t){var e=this._getEventArgs(t);return this._getAction("onReorder")(e),e.promise||(0,Y.BH)().resolve()}});(0,kt.Z)("dxSortable",eR);const ZU=eR;var GU={init(){this.callBase.apply(this,arguments),this._updateHandleColumn()},_allowReordering(){var t=this.option("rowDragging");return!(!t||!(t.allowReordering||t.allowDropInsideItem||t.group))},_updateHandleColumn(){var t=this.option("rowDragging"),e=this._allowReordering(),i=this._columnsController,r=e&&t.showDragIcons;i?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:r}),i?.columnOption("type:drag","visible",r)},_renderContent(){var t=this.option("rowDragging"),e=this._allowReordering(),i=this.callBase.apply(this,arguments),r=this._isFixedTableRendering,n=r?"_sortableFixed":"_sortable",a=r?"_sortable":"_sortableFixed",s=u=>{var c;null===(c=this._sortableFixed)||void 0===c||c.$element().css("pointerEvents",u?"auto":"")},o=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",d=this.option("dataRowTemplate")?"> table > tbody".concat(o):"> table > tbody > ".concat(o);return(e||this[n])&&i.length&&(this[n]=this._createComponent(i,ZU,(0,O.l)({component:this.component,contentTemplate:null,filter:d,cursorOffset:u=>{var{event:c}=u,f=(0,C.Z)(this.element()).offset();return{x:c.pageX-f.left}},onDraggableElementShown:u=>{if(!t.dragTemplate){var f=(0,C.Z)(u.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(f)}},dragTemplate:this._getDraggableRowTemplate(),handle:t.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},t,{onDragStart:u=>{var c,f;null===(c=this.getController("keyboardNavigation"))||void 0===c||c._resetFocusedCell();var g=u.component.getVisibleRows()[u.fromIndex];u.itemData=g&&g.data,u.cancel=!e||!(g&&"data"===g.rowType),null===(f=t.onDragStart)||void 0===f||f.call(t,u)},onDragEnter:()=>{s(!0)},onDragLeave:()=>{s(!1)},onDragEnd:u=>{var c;s(!1),null===(c=t.onDragEnd)||void 0===c||c.call(t,u)},onAdd:u=>{var c;s(!1),null===(c=t.onAdd)||void 0===c||c.call(t,u)},dropFeedbackMode:t.dropFeedbackMode,onOptionChanged:u=>{this._sortableFixed&&("fromIndex"===u.name||"toIndex"===u.name)&&this[a].option(u.name,u.value)}})),i.toggleClass("dx-scrollable-container",r),i.toggleClass("dx-sortable-without-handle",e&&!t.showDragIcons)),i},_renderCore(t){this.callBase.apply(this,arguments),t&&"update"===t.changeType&&t.repaintChangesOnly&&ye.isVirtualRowRendering(this)&&(0,ne.Su)(()=>{this._updateSortable()})},_updateSortable(){var t=this._dataController.getRowIndexOffset();[this._sortable,this._sortableFixed].forEach(e=>{e?.option("offset",t),e?.update()})},_resizeCore(){this.callBase.apply(this,arguments),this._updateSortable()},_getDraggableGridOptions(t){var e=this.option(),i=this.getColumns(),r=(0,C.Z)(this.getRowElement(t.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:e.columnFixing,columnAutoWidth:e.columnAutoWidth,showColumnLines:e.showColumnLines,columns:i.map(n=>({width:n.width||n.visibleWidth,fixed:n.fixed,fixedPosition:n.fixedPosition})),onRowPrepared:n=>{var a=n.component.getView("rowsView");(0,C.Z)(n.rowElement).replaceWith(r.eq(a._isFixedTableRendering?1:0).clone())}}},_synchronizeScrollLeftPosition(t){var e=t?.getScrollable();e?.scrollTo({x:this._scrollLeft})},_getDraggableRowTemplate(){return t=>{var e=this.component.$element(),i=(0,C.Z)("<div>");(0,Q.cl)(i,(0,Q.dz)(e));var r=this._dataController.items(),a=this._getDraggableGridOptions(r&&r[t.fromIndex]);return this._createComponent(i,this.component.NAME,a),i.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),i}},_getHandleTemplate(){return(t=>(e,i)=>{var r=(0,C.Z)(e);if("data"===i.rowType)return r.addClass("dx-cell-focus-disabled"),(0,C.Z)("<span>").addClass(t("drag-icon"));ye.setEmptyText(r)})(t=>this.addWidgetPrefix(t))},optionChanged(t){"rowDragging"===t.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),t.handled=!0),this.callBase.apply(this,arguments)}};l.registerModule("rowDragging",{defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:GU}}});var Fn=k(7217),we=k(4943);let qU=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[we.Uz5,we.LNK,we.mtS,we.tRk,we.idP,we.HaS,we.CxW,we.FZZ,we.Inm,we.e1H,we.$D5,we.SCM,we.DTR,we.ZCX,we.Oll,we.Q8p,we.Jiy,we._9O,we.kSd,we.fOF,we.IOm,we.kOw,we.weU,we.D_l,we.JxK,we.zZW,we.ynY,we.lgR,we.sni,we.waX,we.pxS,we.pGy,we.lj9,we.SH1,we.FJZ,we.RbS,we.$wd,we.xHg,we.p6x,we.vLN,we.rH1,we.lUW,we.kIp,we.yFA,we.$9q,we.nD3,we.Pj6,we.Upd,we.WSE,we.LHj,we._PP,we.ywL,we.WyY,we.$YR,we.kEo,we.aLr,we.uKt,we.YOZ,we.Axk,we.Zjs,we.GaT,we.zLN,we.azD,Fn.Lz,Fn.ie,vd.Cu],we.Uz5,we.LNK,we.mtS,we.tRk,we.idP,we.HaS,we.CxW,we.FZZ,we.Inm,we.e1H,we.$D5,we.SCM,we.DTR,we.ZCX,we.Oll,we.Q8p,we.Jiy,we._9O,we.kSd,we.fOF,we.IOm,we.kOw,we.weU,we.D_l,we.JxK,we.zZW,we.ynY,we.lgR,we.sni,we.waX,we.pxS,we.pGy,we.lj9,we.SH1,we.FJZ,we.RbS,we.$wd,we.xHg,we.p6x,we.vLN,we.rH1,we.lUW,we.kIp,we.yFA,we.$9q,we.nD3,we.Pj6,we.Upd,we.WSE,we.LHj,we._PP,we.ywL,we.WyY,we.$YR,we.kEo,we.aLr,we.uKt,we.YOZ,we.Axk,we.Zjs,we.GaT,we.zLN,we.azD,Fn.ie]}),t})();var jU=k(7841),XU=k(2753),QU=k(7288);const JU={disabled:!1};new p.OlP("nz-wave-global-options",{providedIn:"root",factory:function e6(){return JU}});let tR=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[Pe.ud]}),t})(),t6=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[Kr.vT,ee.ez,tR,An.PV,Rf,Rf,tR]}),t})(),i6=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[ee.ez,Cm,Av,Fl.Fk,qU,jU.G,fh.p9,L.UX,xp,De,Cs.ot,Au.Ps,$o.AV,XU.t,QU.c,Ev,Sh.o7,An.PV,t6,Dp]}),e})()},5650:Qn=>{Qn.exports=function J(k,ee,p){function L(G,ae){if(!ee[G]){if(!k[G]){if(R)return R(G,!0);var te=new Error("Cannot find module '"+G+"'");throw te.code="MODULE_NOT_FOUND",te}var B=ee[G]={exports:{}};k[G][0].call(B.exports,function(W){return L(k[G][1][W]||W)},B,B.exports,J,k,ee,p)}return ee[G].exports}for(var R=void 0,V=0;V<p.length;V++)L(p[V]);return L}({1:[function(J,k,ee){"use strict";var p=J("./utils"),L=J("./support"),R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ee.encode=function(V){for(var G,ae,j,B,W,A,N=[],M=0,K=V.length,re=K,he="string"!==p.getTypeOf(V);M<V.length;)re=K-M,j=he?(G=V[M++],ae=M<K?V[M++]:0,M<K?V[M++]:0):(G=V.charCodeAt(M++),ae=M<K?V.charCodeAt(M++):0,M<K?V.charCodeAt(M++):0),B=(3&G)<<4|ae>>4,W=1<re?(15&ae)<<2|j>>6:64,A=2<re?63&j:64,N.push(R.charAt(G>>2)+R.charAt(B)+R.charAt(W)+R.charAt(A));return N.join("")},ee.decode=function(V){var G,ae,j,te,B,W,A=0,N=0,M="data:";if(V.substr(0,M.length)===M)throw new Error("Invalid base64 input, it looks like a data url.");var K,re=3*(V=V.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(V.charAt(V.length-1)===R.charAt(64)&&re--,V.charAt(V.length-2)===R.charAt(64)&&re--,re%1!=0)throw new Error("Invalid base64 input, bad content length.");for(K=L.uint8array?new Uint8Array(0|re):new Array(0|re);A<V.length;)G=R.indexOf(V.charAt(A++))<<2|(te=R.indexOf(V.charAt(A++)))>>4,ae=(15&te)<<4|(B=R.indexOf(V.charAt(A++)))>>2,j=(3&B)<<6|(W=R.indexOf(V.charAt(A++))),K[N++]=G,64!==B&&(K[N++]=ae),64!==W&&(K[N++]=j);return K}},{"./support":30,"./utils":32}],2:[function(J,k,ee){"use strict";var p=J("./external"),L=J("./stream/DataWorker"),R=J("./stream/Crc32Probe"),V=J("./stream/DataLengthProbe");function G(ae,j,te,B,W){this.compressedSize=ae,this.uncompressedSize=j,this.crc32=te,this.compression=B,this.compressedContent=W}G.prototype={getContentWorker:function(){var ae=new L(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new V("data_length")),j=this;return ae.on("end",function(){if(this.streamInfo.data_length!==j.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),ae},getCompressedWorker:function(){return new L(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},G.createWorkerFrom=function(ae,j,te){return ae.pipe(new R).pipe(new V("uncompressedSize")).pipe(j.compressWorker(te)).pipe(new V("compressedSize")).withStreamInfo("compression",j)},k.exports=G},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(J,k,ee){"use strict";var p=J("./stream/GenericWorker");ee.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},ee.DEFLATE=J("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(J,k,ee){"use strict";var p=J("./utils"),L=function(){for(var R,V=[],G=0;G<256;G++){R=G;for(var ae=0;ae<8;ae++)R=1&R?3988292384^R>>>1:R>>>1;V[G]=R}return V}();k.exports=function(R,V){return void 0!==R&&R.length?"string"!==p.getTypeOf(R)?function(G,ae,j,te){var B=L,W=0+j;G^=-1;for(var A=0;A<W;A++)G=G>>>8^B[255&(G^ae[A])];return-1^G}(0|V,R,R.length):function(G,ae,j,te){var B=L,W=0+j;G^=-1;for(var A=0;A<W;A++)G=G>>>8^B[255&(G^ae.charCodeAt(A))];return-1^G}(0|V,R,R.length):0}},{"./utils":32}],5:[function(J,k,ee){"use strict";ee.base64=!1,ee.binary=!1,ee.dir=!1,ee.createFolders=!0,ee.date=null,ee.compression=null,ee.compressionOptions=null,ee.comment=null,ee.unixPermissions=null,ee.dosPermissions=null},{}],6:[function(J,k,ee){"use strict";var p;p=typeof Promise<"u"?Promise:J("lie"),k.exports={Promise:p}},{lie:37}],7:[function(J,k,ee){"use strict";var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",L=J("pako"),R=J("./utils"),V=J("./stream/GenericWorker"),G=p?"uint8array":"array";function ae(j,te){V.call(this,"FlateWorker/"+j),this._pako=null,this._pakoAction=j,this._pakoOptions=te,this.meta={}}ee.magic="\b\0",R.inherits(ae,V),ae.prototype.processChunk=function(j){this.meta=j.meta,null===this._pako&&this._createPako(),this._pako.push(R.transformTo(G,j.data),!1)},ae.prototype.flush=function(){V.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},ae.prototype.cleanUp=function(){V.prototype.cleanUp.call(this),this._pako=null},ae.prototype._createPako=function(){this._pako=new L[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var j=this;this._pako.onData=function(te){j.push({data:te,meta:j.meta})}},ee.compressWorker=function(j){return new ae("Deflate",j)},ee.uncompressWorker=function(){return new ae("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(J,k,ee){"use strict";function p(B,W){var A,N="";for(A=0;A<W;A++)N+=String.fromCharCode(255&B),B>>>=8;return N}function L(B,W,A,N,M,K){var re,he,ue=B.file,De=B.compression,xe=K!==G.utf8encode,Me=R.transformTo("string",K(ue.name)),ge=R.transformTo("string",G.utf8encode(ue.name)),Pe=ue.comment,dt=R.transformTo("string",K(Pe)),X=R.transformTo("string",G.utf8encode(Pe)),Ie=ge.length!==ue.name.length,E=X.length!==Pe.length,Be="",Ct="",Ve="",Tt=ue.dir,ze=ue.date,ut={crc32:0,compressedSize:0,uncompressedSize:0};W&&!A||(ut.crc32=B.crc32,ut.compressedSize=B.compressedSize,ut.uncompressedSize=B.uncompressedSize);var me=0;W&&(me|=8),xe||!Ie&&!E||(me|=2048);var Ke,zi,_e=0,ot=0;Tt&&(_e|=16),"UNIX"===M?(ot=798,_e|=(zi=Ke=ue.unixPermissions,Ke||(zi=Tt?16893:33204),(65535&zi)<<16)):(ot=20,_e|=function(Ke){return 63&(Ke||0)}(ue.dosPermissions)),re=ze.getUTCHours(),re<<=6,re|=ze.getUTCMinutes(),re<<=5,re|=ze.getUTCSeconds()/2,he=ze.getUTCFullYear()-1980,he<<=4,he|=ze.getUTCMonth()+1,he<<=5,he|=ze.getUTCDate(),Ie&&(Ct=p(1,1)+p(ae(Me),4)+ge,Be+="up"+p(Ct.length,2)+Ct),E&&(Ve=p(1,1)+p(ae(dt),4)+X,Be+="uc"+p(Ve.length,2)+Ve);var Ge="";return Ge+="\n\0",Ge+=p(me,2),Ge+=De.magic,Ge+=p(re,2),Ge+=p(he,2),Ge+=p(ut.crc32,4),Ge+=p(ut.compressedSize,4),Ge+=p(ut.uncompressedSize,4),Ge+=p(Me.length,2),Ge+=p(Be.length,2),{fileRecord:j.LOCAL_FILE_HEADER+Ge+Me+Be,dirRecord:j.CENTRAL_FILE_HEADER+p(ot,2)+Ge+p(dt.length,2)+"\0\0\0\0"+p(_e,4)+p(N,4)+Me+Be+dt}}var R=J("../utils"),V=J("../stream/GenericWorker"),G=J("../utf8"),ae=J("../crc32"),j=J("../signature");function te(B,W,A,N){V.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=W,this.zipPlatform=A,this.encodeFileName=N,this.streamFiles=B,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}R.inherits(te,V),te.prototype.push=function(B){var W=B.meta.percent||0,A=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(B):(this.bytesWritten+=B.data.length,V.prototype.push.call(this,{data:B.data,meta:{currentFile:this.currentFile,percent:A?(W+100*(A-N-1))/A:100}}))},te.prototype.openedSource=function(B){this.currentSourceOffset=this.bytesWritten,this.currentFile=B.file.name;var W=this.streamFiles&&!B.file.dir;if(W){var A=L(B,W,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:A.fileRecord,meta:{percent:0}})}else this.accumulate=!0},te.prototype.closedSource=function(B){this.accumulate=!1;var N,W=this.streamFiles&&!B.file.dir,A=L(B,W,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(A.dirRecord),W)this.push({data:(N=B,j.DATA_DESCRIPTOR+p(N.crc32,4)+p(N.compressedSize,4)+p(N.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:A.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},te.prototype.flush=function(){for(var B=this.bytesWritten,W=0;W<this.dirRecords.length;W++)this.push({data:this.dirRecords[W],meta:{percent:100}});var M,K,re,De,N=(M=this.dirRecords.length,K=this.bytesWritten-B,re=B,De=R.transformTo("string",(0,this.encodeFileName)(this.zipComment)),j.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(M,2)+p(M,2)+p(K,4)+p(re,4)+p(De.length,2)+De);this.push({data:N,meta:{percent:100}})},te.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},te.prototype.registerPrevious=function(B){this._sources.push(B);var W=this;return B.on("data",function(A){W.processChunk(A)}),B.on("end",function(){W.closedSource(W.previous.streamInfo),W._sources.length?W.prepareNextSource():W.end()}),B.on("error",function(A){W.error(A)}),this},te.prototype.resume=function(){return!!V.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},te.prototype.error=function(B){var W=this._sources;if(!V.prototype.error.call(this,B))return!1;for(var A=0;A<W.length;A++)try{W[A].error(B)}catch{}return!0},te.prototype.lock=function(){V.prototype.lock.call(this);for(var B=this._sources,W=0;W<B.length;W++)B[W].lock()},k.exports=te},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(J,k,ee){"use strict";var p=J("../compressions"),L=J("./ZipFileWorker");ee.generateWorker=function(R,V,G){var ae=new L(V.streamFiles,G,V.platform,V.encodeFileName),j=0;try{R.forEach(function(te,B){j++;var W=function(K,re){var he=K||re,ue=p[he];if(!ue)throw new Error(he+" is not a valid compression method !");return ue}(B.options.compression,V.compression),N=B.dir,M=B.date;B._compressWorker(W,B.options.compressionOptions||V.compressionOptions||{}).withStreamInfo("file",{name:te,dir:N,date:M,comment:B.comment||"",unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions}).pipe(ae)}),ae.entriesCount=j}catch(te){ae.error(te)}return ae}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(J,k,ee){"use strict";function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var L=new p;for(var R in this)"function"!=typeof this[R]&&(L[R]=this[R]);return L}}(p.prototype=J("./object")).loadAsync=J("./load"),p.support=J("./support"),p.defaults=J("./defaults"),p.version="3.10.1",p.loadAsync=function(L,R){return(new p).loadAsync(L,R)},p.external=J("./external"),k.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(J,k,ee){"use strict";var p=J("./utils"),L=J("./external"),R=J("./utf8"),V=J("./zipEntries"),G=J("./stream/Crc32Probe"),ae=J("./nodejsUtils");function j(te){return new L.Promise(function(B,W){var A=te.decompressed.getContentWorker().pipe(new G);A.on("error",function(N){W(N)}).on("end",function(){A.streamInfo.crc32!==te.decompressed.crc32?W(new Error("Corrupted zip : CRC32 mismatch")):B()}).resume()})}k.exports=function(te,B){var W=this;return B=p.extend(B||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:R.utf8decode}),ae.isNode&&ae.isStream(te)?L.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",te,!0,B.optimizedBinaryString,B.base64).then(function(A){var N=new V(B);return N.load(A),N}).then(function(A){var N=[L.Promise.resolve(A)],M=A.files;if(B.checkCRC32)for(var K=0;K<M.length;K++)N.push(j(M[K]));return L.Promise.all(N)}).then(function(A){for(var N=A.shift(),M=N.files,K=0;K<M.length;K++){var re=M[K],he=re.fileNameStr,ue=p.resolve(re.fileNameStr);W.file(ue,re.decompressed,{binary:!0,optimizedBinaryString:!0,date:re.date,dir:re.dir,comment:re.fileCommentStr.length?re.fileCommentStr:null,unixPermissions:re.unixPermissions,dosPermissions:re.dosPermissions,createFolders:B.createFolders}),re.dir||(W.file(ue).unsafeOriginalName=he)}return N.zipComment.length&&(W.comment=N.zipComment),W})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(J,k,ee){"use strict";var p=J("../utils"),L=J("../stream/GenericWorker");function R(V,G){L.call(this,"Nodejs stream input adapter for "+V),this._upstreamEnded=!1,this._bindStream(G)}p.inherits(R,L),R.prototype._bindStream=function(V){var G=this;(this._stream=V).pause(),V.on("data",function(ae){G.push({data:ae,meta:{percent:0}})}).on("error",function(ae){G.isPaused?this.generatedError=ae:G.error(ae)}).on("end",function(){G.isPaused?G._upstreamEnded=!0:G.end()})},R.prototype.pause=function(){return!!L.prototype.pause.call(this)&&(this._stream.pause(),!0)},R.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},k.exports=R},{"../stream/GenericWorker":28,"../utils":32}],13:[function(J,k,ee){"use strict";var p=J("readable-stream").Readable;function L(R,V,G){p.call(this,V),this._helper=R;var ae=this;R.on("data",function(j,te){ae.push(j)||ae._helper.pause(),G&&G(te)}).on("error",function(j){ae.emit("error",j)}).on("end",function(){ae.push(null)})}J("../utils").inherits(L,p),L.prototype._read=function(){this._helper.resume()},k.exports=L},{"../utils":32,"readable-stream":16}],14:[function(J,k,ee){"use strict";k.exports={isNode:typeof Buffer<"u",newBufferFrom:function(p,L){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(p,L);if("number"==typeof p)throw new Error('The "data" argument must not be a number');return new Buffer(p,L)},allocBuffer:function(p){if(Buffer.alloc)return Buffer.alloc(p);var L=new Buffer(p);return L.fill(0),L},isBuffer:function(p){return Buffer.isBuffer(p)},isStream:function(p){return p&&"function"==typeof p.on&&"function"==typeof p.pause&&"function"==typeof p.resume}}},{}],15:[function(J,k,ee){"use strict";function p(ue,De,xe){var Me,ge=R.getTypeOf(De),Pe=R.extend(xe||{},ae);Pe.date=Pe.date||new Date,null!==Pe.compression&&(Pe.compression=Pe.compression.toUpperCase()),"string"==typeof Pe.unixPermissions&&(Pe.unixPermissions=parseInt(Pe.unixPermissions,8)),Pe.unixPermissions&&16384&Pe.unixPermissions&&(Pe.dir=!0),Pe.dosPermissions&&16&Pe.dosPermissions&&(Pe.dir=!0),Pe.dir&&(ue=M(ue)),Pe.createFolders&&(Me=N(ue))&&K.call(this,Me,!0),xe&&void 0!==xe.binary||(Pe.binary=!("string"===ge&&!1===Pe.binary&&!1===Pe.base64)),(De instanceof j&&0===De.uncompressedSize||Pe.dir||!De||0===De.length)&&(Pe.base64=!1,Pe.binary=!0,De="",Pe.compression="STORE",ge="string");var X;X=De instanceof j||De instanceof V?De:W.isNode&&W.isStream(De)?new A(ue,De):R.prepareContent(ue,De,Pe.binary,Pe.optimizedBinaryString,Pe.base64);var Ie=new te(ue,X,Pe);this.files[ue]=Ie}var L=J("./utf8"),R=J("./utils"),V=J("./stream/GenericWorker"),G=J("./stream/StreamHelper"),ae=J("./defaults"),j=J("./compressedObject"),te=J("./zipObject"),B=J("./generate"),W=J("./nodejsUtils"),A=J("./nodejs/NodejsStreamInputAdapter"),N=function(ue){"/"===ue.slice(-1)&&(ue=ue.substring(0,ue.length-1));var De=ue.lastIndexOf("/");return 0<De?ue.substring(0,De):""},M=function(ue){return"/"!==ue.slice(-1)&&(ue+="/"),ue},K=function(ue,De){return De=void 0!==De?De:ae.createFolders,ue=M(ue),this.files[ue]||p.call(this,ue,null,{dir:!0,createFolders:De}),this.files[ue]};function re(ue){return"[object RegExp]"===Object.prototype.toString.call(ue)}var he={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ue){var De,xe,Me;for(De in this.files)Me=this.files[De],(xe=De.slice(this.root.length,De.length))&&De.slice(0,this.root.length)===this.root&&ue(xe,Me)},filter:function(ue){var De=[];return this.forEach(function(xe,Me){ue(xe,Me)&&De.push(Me)}),De},file:function(ue,De,xe){if(1!==arguments.length)return p.call(this,ue=this.root+ue,De,xe),this;if(re(ue)){var Me=ue;return this.filter(function(Pe,dt){return!dt.dir&&Me.test(Pe)})}var ge=this.files[this.root+ue];return ge&&!ge.dir?ge:null},folder:function(ue){if(!ue)return this;if(re(ue))return this.filter(function(ge,Pe){return Pe.dir&&ue.test(ge)});var xe=K.call(this,this.root+ue),Me=this.clone();return Me.root=xe.name,Me},remove:function(ue){var De=this.files[ue=this.root+ue];if(De||("/"!==ue.slice(-1)&&(ue+="/"),De=this.files[ue]),De&&!De.dir)delete this.files[ue];else for(var xe=this.filter(function(ge,Pe){return Pe.name.slice(0,ue.length)===ue}),Me=0;Me<xe.length;Me++)delete this.files[xe[Me].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ue){var De,xe={};try{if((xe=R.extend(ue||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:L.utf8encode})).type=xe.type.toLowerCase(),xe.compression=xe.compression.toUpperCase(),"binarystring"===xe.type&&(xe.type="string"),!xe.type)throw new Error("No output type specified.");R.checkSupport(xe.type),"darwin"!==xe.platform&&"freebsd"!==xe.platform&&"linux"!==xe.platform&&"sunos"!==xe.platform||(xe.platform="UNIX"),"win32"===xe.platform&&(xe.platform="DOS"),De=B.generateWorker(this,xe,xe.comment||this.comment||"")}catch(ge){(De=new V("error")).error(ge)}return new G(De,xe.type||"string",xe.mimeType)},generateAsync:function(ue,De){return this.generateInternalStream(ue).accumulate(De)},generateNodeStream:function(ue,De){return(ue=ue||{}).type||(ue.type="nodebuffer"),this.generateInternalStream(ue).toNodejsStream(De)}};k.exports=he},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(J,k,ee){"use strict";k.exports=J("stream")},{stream:void 0}],17:[function(J,k,ee){"use strict";var p=J("./DataReader");function L(R){p.call(this,R);for(var V=0;V<this.data.length;V++)R[V]=255&R[V]}J("../utils").inherits(L,p),L.prototype.byteAt=function(R){return this.data[this.zero+R]},L.prototype.lastIndexOfSignature=function(R){for(var V=R.charCodeAt(0),G=R.charCodeAt(1),ae=R.charCodeAt(2),j=R.charCodeAt(3),te=this.length-4;0<=te;--te)if(this.data[te]===V&&this.data[te+1]===G&&this.data[te+2]===ae&&this.data[te+3]===j)return te-this.zero;return-1},L.prototype.readAndCheckSignature=function(R){var V=R.charCodeAt(0),G=R.charCodeAt(1),ae=R.charCodeAt(2),j=R.charCodeAt(3),te=this.readData(4);return V===te[0]&&G===te[1]&&ae===te[2]&&j===te[3]},L.prototype.readData=function(R){if(this.checkOffset(R),0===R)return[];var V=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,V},k.exports=L},{"../utils":32,"./DataReader":18}],18:[function(J,k,ee){"use strict";var p=J("../utils");function L(R){this.data=R,this.length=R.length,this.index=0,this.zero=0}L.prototype={checkOffset:function(R){this.checkIndex(this.index+R)},checkIndex:function(R){if(this.length<this.zero+R||R<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+R+"). Corrupted zip ?")},setIndex:function(R){this.checkIndex(R),this.index=R},skip:function(R){this.setIndex(this.index+R)},byteAt:function(){},readInt:function(R){var V,G=0;for(this.checkOffset(R),V=this.index+R-1;V>=this.index;V--)G=(G<<8)+this.byteAt(V);return this.index+=R,G},readString:function(R){return p.transformTo("string",this.readData(R))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var R=this.readInt(4);return new Date(Date.UTC(1980+(R>>25&127),(R>>21&15)-1,R>>16&31,R>>11&31,R>>5&63,(31&R)<<1))}},k.exports=L},{"../utils":32}],19:[function(J,k,ee){"use strict";var p=J("./Uint8ArrayReader");function L(R){p.call(this,R)}J("../utils").inherits(L,p),L.prototype.readData=function(R){this.checkOffset(R);var V=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,V},k.exports=L},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(J,k,ee){"use strict";var p=J("./DataReader");function L(R){p.call(this,R)}J("../utils").inherits(L,p),L.prototype.byteAt=function(R){return this.data.charCodeAt(this.zero+R)},L.prototype.lastIndexOfSignature=function(R){return this.data.lastIndexOf(R)-this.zero},L.prototype.readAndCheckSignature=function(R){return R===this.readData(4)},L.prototype.readData=function(R){this.checkOffset(R);var V=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,V},k.exports=L},{"../utils":32,"./DataReader":18}],21:[function(J,k,ee){"use strict";var p=J("./ArrayReader");function L(R){p.call(this,R)}J("../utils").inherits(L,p),L.prototype.readData=function(R){if(this.checkOffset(R),0===R)return new Uint8Array(0);var V=this.data.subarray(this.zero+this.index,this.zero+this.index+R);return this.index+=R,V},k.exports=L},{"../utils":32,"./ArrayReader":17}],22:[function(J,k,ee){"use strict";var p=J("../utils"),L=J("../support"),R=J("./ArrayReader"),V=J("./StringReader"),G=J("./NodeBufferReader"),ae=J("./Uint8ArrayReader");k.exports=function(j){var te=p.getTypeOf(j);return p.checkSupport(te),"string"!==te||L.uint8array?"nodebuffer"===te?new G(j):L.uint8array?new ae(p.transformTo("uint8array",j)):new R(p.transformTo("array",j)):new V(j)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(J,k,ee){"use strict";ee.LOCAL_FILE_HEADER="PK\x03\x04",ee.CENTRAL_FILE_HEADER="PK\x01\x02",ee.CENTRAL_DIRECTORY_END="PK\x05\x06",ee.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",ee.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",ee.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(J,k,ee){"use strict";var p=J("./GenericWorker"),L=J("../utils");function R(V){p.call(this,"ConvertWorker to "+V),this.destType=V}L.inherits(R,p),R.prototype.processChunk=function(V){this.push({data:L.transformTo(this.destType,V.data),meta:V.meta})},k.exports=R},{"../utils":32,"./GenericWorker":28}],25:[function(J,k,ee){"use strict";var p=J("./GenericWorker"),L=J("../crc32");function R(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}J("../utils").inherits(R,p),R.prototype.processChunk=function(V){this.streamInfo.crc32=L(V.data,this.streamInfo.crc32||0),this.push(V)},k.exports=R},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(J,k,ee){"use strict";var p=J("../utils"),L=J("./GenericWorker");function R(V){L.call(this,"DataLengthProbe for "+V),this.propName=V,this.withStreamInfo(V,0)}p.inherits(R,L),R.prototype.processChunk=function(V){V&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+V.data.length),L.prototype.processChunk.call(this,V)},k.exports=R},{"../utils":32,"./GenericWorker":28}],27:[function(J,k,ee){"use strict";var p=J("../utils"),L=J("./GenericWorker");function R(V){L.call(this,"DataWorker");var G=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,V.then(function(ae){G.dataIsReady=!0,G.data=ae,G.max=ae&&ae.length||0,G.type=p.getTypeOf(ae),G.isPaused||G._tickAndRepeat()},function(ae){G.error(ae)})}p.inherits(R,L),R.prototype.cleanUp=function(){L.prototype.cleanUp.call(this),this.data=null},R.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},R.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},R.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var V=null,G=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":V=this.data.substring(this.index,G);break;case"uint8array":V=this.data.subarray(this.index,G);break;case"array":case"nodebuffer":V=this.data.slice(this.index,G)}return this.index=G,this.push({data:V,meta:{percent:this.max?this.index/this.max*100:0}})},k.exports=R},{"../utils":32,"./GenericWorker":28}],28:[function(J,k,ee){"use strict";function p(L){this.name=L||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(L){this.emit("data",L)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(L){this.emit("error",L)}return!0},error:function(L){return!this.isFinished&&(this.isPaused?this.generatedError=L:(this.isFinished=!0,this.emit("error",L),this.previous&&this.previous.error(L),this.cleanUp()),!0)},on:function(L,R){return this._listeners[L].push(R),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(L,R){if(this._listeners[L])for(var V=0;V<this._listeners[L].length;V++)this._listeners[L][V].call(this,R)},pipe:function(L){return L.registerPrevious(this)},registerPrevious:function(L){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=L.streamInfo,this.mergeStreamInfo(),this.previous=L;var R=this;return L.on("data",function(V){R.processChunk(V)}),L.on("end",function(){R.end()}),L.on("error",function(V){R.error(V)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var L=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),L=!0),this.previous&&this.previous.resume(),!L},flush:function(){},processChunk:function(L){this.push(L)},withStreamInfo:function(L,R){return this.extraStreamInfo[L]=R,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var L in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,L)&&(this.streamInfo[L]=this.extraStreamInfo[L])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var L="Worker "+this.name;return this.previous?this.previous+" -> "+L:L}},k.exports=p},{}],29:[function(J,k,ee){"use strict";var p=J("../utils"),L=J("./ConvertWorker"),R=J("./GenericWorker"),V=J("../base64"),G=J("../support"),ae=J("../external"),j=null;if(G.nodestream)try{j=J("../nodejs/NodejsStreamOutputAdapter")}catch{}function B(W,A,N){var M=A;switch(A){case"blob":case"arraybuffer":M="uint8array";break;case"base64":M="string"}try{this._internalType=M,this._outputType=A,this._mimeType=N,p.checkSupport(M),this._worker=W.pipe(new L(M)),W.lock()}catch(K){this._worker=new R("error"),this._worker.error(K)}}B.prototype={accumulate:function(W){return function te(W,A){return new ae.Promise(function(N,M){var K=[],re=W._internalType,he=W._outputType,ue=W._mimeType;W.on("data",function(De,xe){K.push(De),A&&A(xe)}).on("error",function(De){K=[],M(De)}).on("end",function(){try{var De=function(xe,Me,ge){switch(xe){case"blob":return p.newBlob(p.transformTo("arraybuffer",Me),ge);case"base64":return V.encode(Me);default:return p.transformTo(xe,Me)}}(he,function(xe,Me){var ge,Pe=0,dt=null,X=0;for(ge=0;ge<Me.length;ge++)X+=Me[ge].length;switch(xe){case"string":return Me.join("");case"array":return Array.prototype.concat.apply([],Me);case"uint8array":for(dt=new Uint8Array(X),ge=0;ge<Me.length;ge++)dt.set(Me[ge],Pe),Pe+=Me[ge].length;return dt;case"nodebuffer":return Buffer.concat(Me);default:throw new Error("concat : unsupported type '"+xe+"'")}}(re,K),ue);N(De)}catch(xe){M(xe)}K=[]}).resume()})}(this,W)},on:function(W,A){var N=this;return this._worker.on(W,"data"===W?function(M){A.call(N,M.data,M.meta)}:function(){p.delay(A,arguments,N)}),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(W){if(p.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new j(this,{objectMode:"nodebuffer"!==this._outputType},W)}},k.exports=B},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(J,k,ee){"use strict";if(ee.base64=!0,ee.array=!0,ee.string=!0,ee.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",ee.nodebuffer=typeof Buffer<"u",ee.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")ee.blob=!1;else{var p=new ArrayBuffer(0);try{ee.blob=0===new Blob([p],{type:"application/zip"}).size}catch{try{var L=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);L.append(p),ee.blob=0===L.getBlob("application/zip").size}catch{ee.blob=!1}}}try{ee.nodestream=!!J("readable-stream").Readable}catch{ee.nodestream=!1}},{"readable-stream":16}],31:[function(J,k,ee){"use strict";for(var p=J("./utils"),L=J("./support"),R=J("./nodejsUtils"),V=J("./stream/GenericWorker"),G=new Array(256),ae=0;ae<256;ae++)G[ae]=252<=ae?6:248<=ae?5:240<=ae?4:224<=ae?3:192<=ae?2:1;function j(){V.call(this,"utf-8 decode"),this.leftOver=null}function te(){V.call(this,"utf-8 encode")}G[254]=G[254]=1,ee.utf8encode=function(B){return L.nodebuffer?R.newBufferFrom(B,"utf-8"):function(W){var A,N,M,K,re,he=W.length,ue=0;for(K=0;K<he;K++)55296==(64512&(N=W.charCodeAt(K)))&&K+1<he&&56320==(64512&(M=W.charCodeAt(K+1)))&&(N=65536+(N-55296<<10)+(M-56320),K++),ue+=N<128?1:N<2048?2:N<65536?3:4;for(A=L.uint8array?new Uint8Array(ue):new Array(ue),K=re=0;re<ue;K++)55296==(64512&(N=W.charCodeAt(K)))&&K+1<he&&56320==(64512&(M=W.charCodeAt(K+1)))&&(N=65536+(N-55296<<10)+(M-56320),K++),N<128?A[re++]=N:(N<2048?A[re++]=192|N>>>6:(N<65536?A[re++]=224|N>>>12:(A[re++]=240|N>>>18,A[re++]=128|N>>>12&63),A[re++]=128|N>>>6&63),A[re++]=128|63&N);return A}(B)},ee.utf8decode=function(B){return L.nodebuffer?p.transformTo("nodebuffer",B).toString("utf-8"):function(W){var A,N,M,K,re=W.length,he=new Array(2*re);for(A=N=0;A<re;)if((M=W[A++])<128)he[N++]=M;else if(4<(K=G[M]))he[N++]=65533,A+=K-1;else{for(M&=2===K?31:3===K?15:7;1<K&&A<re;)M=M<<6|63&W[A++],K--;1<K?he[N++]=65533:M<65536?he[N++]=M:(he[N++]=55296|(M-=65536)>>10&1023,he[N++]=56320|1023&M)}return he.length!==N&&(he.subarray?he=he.subarray(0,N):he.length=N),p.applyFromCharCode(he)}(B=p.transformTo(L.uint8array?"uint8array":"array",B))},p.inherits(j,V),j.prototype.processChunk=function(B){var W=p.transformTo(L.uint8array?"uint8array":"array",B.data);if(this.leftOver&&this.leftOver.length){if(L.uint8array){var A=W;(W=new Uint8Array(A.length+this.leftOver.length)).set(this.leftOver,0),W.set(A,this.leftOver.length)}else W=this.leftOver.concat(W);this.leftOver=null}var N=function(K,re){var he;for((re=re||K.length)>K.length&&(re=K.length),he=re-1;0<=he&&128==(192&K[he]);)he--;return he<0||0===he?re:he+G[K[he]]>re?he:re}(W),M=W;N!==W.length&&(L.uint8array?(M=W.subarray(0,N),this.leftOver=W.subarray(N,W.length)):(M=W.slice(0,N),this.leftOver=W.slice(N,W.length))),this.push({data:ee.utf8decode(M),meta:B.meta})},j.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:ee.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},ee.Utf8DecodeWorker=j,p.inherits(te,V),te.prototype.processChunk=function(B){this.push({data:ee.utf8encode(B.data),meta:B.meta})},ee.Utf8EncodeWorker=te},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(J,k,ee){"use strict";var p=J("./support"),L=J("./base64"),R=J("./nodejsUtils"),V=J("./external");function G(A){return A}function ae(A,N){for(var M=0;M<A.length;++M)N[M]=255&A.charCodeAt(M);return N}J("setimmediate"),ee.newBlob=function(A,N){ee.checkSupport("blob");try{return new Blob([A],{type:N})}catch{try{var M=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return M.append(A),M.getBlob(N)}catch{throw new Error("Bug : can't construct the Blob.")}}};var j={stringifyByChunk:function(A,N,M){var K=[],re=0,he=A.length;if(he<=M)return String.fromCharCode.apply(null,A);for(;re<he;)K.push(String.fromCharCode.apply(null,"array"===N||"nodebuffer"===N?A.slice(re,Math.min(re+M,he)):A.subarray(re,Math.min(re+M,he)))),re+=M;return K.join("")},stringifyByChar:function(A){for(var N="",M=0;M<A.length;M++)N+=String.fromCharCode(A[M]);return N},applyCanBeUsed:{uint8array:function(){try{return p.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return p.nodebuffer&&1===String.fromCharCode.apply(null,R.allocBuffer(1)).length}catch{return!1}}()}};function te(A){var N=65536,M=ee.getTypeOf(A),K=!0;if("uint8array"===M?K=j.applyCanBeUsed.uint8array:"nodebuffer"===M&&(K=j.applyCanBeUsed.nodebuffer),K)for(;1<N;)try{return j.stringifyByChunk(A,M,N)}catch{N=Math.floor(N/2)}return j.stringifyByChar(A)}function B(A,N){for(var M=0;M<A.length;M++)N[M]=A[M];return N}ee.applyFromCharCode=te;var W={};W.string={string:G,array:function(A){return ae(A,new Array(A.length))},arraybuffer:function(A){return W.string.uint8array(A).buffer},uint8array:function(A){return ae(A,new Uint8Array(A.length))},nodebuffer:function(A){return ae(A,R.allocBuffer(A.length))}},W.array={string:te,array:G,arraybuffer:function(A){return new Uint8Array(A).buffer},uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return R.newBufferFrom(A)}},W.arraybuffer={string:function(A){return te(new Uint8Array(A))},array:function(A){return B(new Uint8Array(A),new Array(A.byteLength))},arraybuffer:G,uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return R.newBufferFrom(new Uint8Array(A))}},W.uint8array={string:te,array:function(A){return B(A,new Array(A.length))},arraybuffer:function(A){return A.buffer},uint8array:G,nodebuffer:function(A){return R.newBufferFrom(A)}},W.nodebuffer={string:te,array:function(A){return B(A,new Array(A.length))},arraybuffer:function(A){return W.nodebuffer.uint8array(A).buffer},uint8array:function(A){return B(A,new Uint8Array(A.length))},nodebuffer:G},ee.transformTo=function(A,N){if(N=N||"",!A)return N;ee.checkSupport(A);var M=ee.getTypeOf(N);return W[M][A](N)},ee.resolve=function(A){for(var N=A.split("/"),M=[],K=0;K<N.length;K++){var re=N[K];"."===re||""===re&&0!==K&&K!==N.length-1||(".."===re?M.pop():M.push(re))}return M.join("/")},ee.getTypeOf=function(A){return"string"==typeof A?"string":"[object Array]"===Object.prototype.toString.call(A)?"array":p.nodebuffer&&R.isBuffer(A)?"nodebuffer":p.uint8array&&A instanceof Uint8Array?"uint8array":p.arraybuffer&&A instanceof ArrayBuffer?"arraybuffer":void 0},ee.checkSupport=function(A){if(!p[A.toLowerCase()])throw new Error(A+" is not supported by this platform")},ee.MAX_VALUE_16BITS=65535,ee.MAX_VALUE_32BITS=-1,ee.pretty=function(A){var N,M,K="";for(M=0;M<(A||"").length;M++)K+="\\x"+((N=A.charCodeAt(M))<16?"0":"")+N.toString(16).toUpperCase();return K},ee.delay=function(A,N,M){setImmediate(function(){A.apply(M||null,N||[])})},ee.inherits=function(A,N){function M(){}M.prototype=N.prototype,A.prototype=new M},ee.extend=function(){var A,N,M={};for(A=0;A<arguments.length;A++)for(N in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],N)&&void 0===M[N]&&(M[N]=arguments[A][N]);return M},ee.prepareContent=function(A,N,M,K,re){return V.Promise.resolve(N).then(function(he){return p.blob&&(he instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(he)))&&typeof FileReader<"u"?new V.Promise(function(ue,De){var xe=new FileReader;xe.onload=function(Me){ue(Me.target.result)},xe.onerror=function(Me){De(Me.target.error)},xe.readAsArrayBuffer(he)}):he}).then(function(he){var De,ue=ee.getTypeOf(he);return ue?("arraybuffer"===ue?he=ee.transformTo("uint8array",he):"string"===ue&&(re?he=L.decode(he):M&&!0!==K&&(he=ae(De=he,p.uint8array?new Uint8Array(De.length):new Array(De.length)))),he):V.Promise.reject(new Error("Can't read the data of '"+A+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(J,k,ee){"use strict";var p=J("./reader/readerFor"),L=J("./utils"),R=J("./signature"),V=J("./zipEntry"),G=J("./support");function ae(j){this.files=[],this.loadOptions=j}ae.prototype={checkSignature:function(j){if(!this.reader.readAndCheckSignature(j)){this.reader.index-=4;var te=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+L.pretty(te)+", expected "+L.pretty(j)+")")}},isSignature:function(j,te){var B=this.reader.index;this.reader.setIndex(j);var W=this.reader.readString(4)===te;return this.reader.setIndex(B),W},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var j=this.reader.readData(this.zipCommentLength),B=L.transformTo(G.uint8array?"uint8array":"array",j);this.zipComment=this.loadOptions.decodeFileName(B)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var j,te,B,W=this.zip64EndOfCentralSize-44;0<W;)j=this.reader.readInt(2),te=this.reader.readInt(4),B=this.reader.readData(te),this.zip64ExtensibleData[j]={id:j,length:te,value:B}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var j,te;for(j=0;j<this.files.length;j++)this.reader.setIndex((te=this.files[j]).localHeaderOffset),this.checkSignature(R.LOCAL_FILE_HEADER),te.readLocalPart(this.reader),te.handleUTF8(),te.processAttributes()},readCentralDir:function(){var j;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(R.CENTRAL_FILE_HEADER);)(j=new V({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(j);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var j=this.reader.lastIndexOfSignature(R.CENTRAL_DIRECTORY_END);if(j<0)throw this.isSignature(0,R.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(j);var te=j;if(this.checkSignature(R.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===L.MAX_VALUE_16BITS||this.diskWithCentralDirStart===L.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===L.MAX_VALUE_16BITS||this.centralDirRecords===L.MAX_VALUE_16BITS||this.centralDirSize===L.MAX_VALUE_32BITS||this.centralDirOffset===L.MAX_VALUE_32BITS){if(this.zip64=!0,(j=this.reader.lastIndexOfSignature(R.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(j),this.checkSignature(R.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,R.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(R.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(R.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var B=this.centralDirOffset+this.centralDirSize;this.zip64&&(B+=20,B+=12+this.zip64EndOfCentralSize);var W=te-B;if(0<W)this.isSignature(te,R.CENTRAL_FILE_HEADER)||(this.reader.zero=W);else if(W<0)throw new Error("Corrupted zip: missing "+Math.abs(W)+" bytes.")},prepareReader:function(j){this.reader=p(j)},load:function(j){this.prepareReader(j),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},k.exports=ae},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(J,k,ee){"use strict";var p=J("./reader/readerFor"),L=J("./utils"),R=J("./compressedObject"),V=J("./crc32"),G=J("./utf8"),ae=J("./compressions"),j=J("./support");function te(B,W){this.options=B,this.loadOptions=W}te.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(B){var W,A;if(B.skip(22),this.fileNameLength=B.readInt(2),A=B.readInt(2),this.fileName=B.readData(this.fileNameLength),B.skip(A),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(W=function(N){for(var M in ae)if(Object.prototype.hasOwnProperty.call(ae,M)&&ae[M].magic===N)return ae[M];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+L.pretty(this.compressionMethod)+" unknown (inner file : "+L.transformTo("string",this.fileName)+")");this.decompressed=new R(this.compressedSize,this.uncompressedSize,this.crc32,W,B.readData(this.compressedSize))},readCentralPart:function(B){this.versionMadeBy=B.readInt(2),B.skip(2),this.bitFlag=B.readInt(2),this.compressionMethod=B.readString(2),this.date=B.readDate(),this.crc32=B.readInt(4),this.compressedSize=B.readInt(4),this.uncompressedSize=B.readInt(4);var W=B.readInt(2);if(this.extraFieldsLength=B.readInt(2),this.fileCommentLength=B.readInt(2),this.diskNumberStart=B.readInt(2),this.internalFileAttributes=B.readInt(2),this.externalFileAttributes=B.readInt(4),this.localHeaderOffset=B.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");B.skip(W),this.readExtraFields(B),this.parseZIP64ExtraField(B),this.fileComment=B.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var B=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==B&&(this.dosPermissions=63&this.externalFileAttributes),3==B&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var B=p(this.extraFields[1].value);this.uncompressedSize===L.MAX_VALUE_32BITS&&(this.uncompressedSize=B.readInt(8)),this.compressedSize===L.MAX_VALUE_32BITS&&(this.compressedSize=B.readInt(8)),this.localHeaderOffset===L.MAX_VALUE_32BITS&&(this.localHeaderOffset=B.readInt(8)),this.diskNumberStart===L.MAX_VALUE_32BITS&&(this.diskNumberStart=B.readInt(4))}},readExtraFields:function(B){var W,A,N,M=B.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});B.index+4<M;)W=B.readInt(2),A=B.readInt(2),N=B.readData(A),this.extraFields[W]={id:W,length:A,value:N};B.setIndex(M)},handleUTF8:function(){var B=j.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=G.utf8decode(this.fileName),this.fileCommentStr=G.utf8decode(this.fileComment);else{var W=this.findExtraFieldUnicodePath();if(null!==W)this.fileNameStr=W;else{var A=L.transformTo(B,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(A)}var N=this.findExtraFieldUnicodeComment();if(null!==N)this.fileCommentStr=N;else{var M=L.transformTo(B,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(M)}}},findExtraFieldUnicodePath:function(){var B=this.extraFields[28789];if(B){var W=p(B.value);return 1!==W.readInt(1)||V(this.fileName)!==W.readInt(4)?null:G.utf8decode(W.readData(B.length-5))}return null},findExtraFieldUnicodeComment:function(){var B=this.extraFields[25461];if(B){var W=p(B.value);return 1!==W.readInt(1)||V(this.fileComment)!==W.readInt(4)?null:G.utf8decode(W.readData(B.length-5))}return null}},k.exports=te},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(J,k,ee){"use strict";function p(W,A,N){this.name=W,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=A,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var L=J("./stream/StreamHelper"),R=J("./stream/DataWorker"),V=J("./utf8"),G=J("./compressedObject"),ae=J("./stream/GenericWorker");p.prototype={internalStream:function(W){var A=null,N="string";try{if(!W)throw new Error("No output type specified.");var M="string"===(N=W.toLowerCase())||"text"===N;"binarystring"!==N&&"text"!==N||(N="string"),A=this._decompressWorker();var K=!this._dataBinary;K&&!M&&(A=A.pipe(new V.Utf8EncodeWorker)),!K&&M&&(A=A.pipe(new V.Utf8DecodeWorker))}catch(re){(A=new ae("error")).error(re)}return new L(A,N,"")},async:function(W,A){return this.internalStream(W).accumulate(A)},nodeStream:function(W,A){return this.internalStream(W||"nodebuffer").toNodejsStream(A)},_compressWorker:function(W,A){if(this._data instanceof G&&this._data.compression.magic===W.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new V.Utf8EncodeWorker)),G.createWorkerFrom(N,W,A)},_decompressWorker:function(){return this._data instanceof G?this._data.getContentWorker():this._data instanceof ae?this._data:new R(this._data)}};for(var j=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],te=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},B=0;B<j.length;B++)p.prototype[j[B]]=te;k.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(J,k,ee){(function(p){"use strict";var L,R,V=p.MutationObserver||p.WebKitMutationObserver;if(V){var G=0,ae=new V(W),j=p.document.createTextNode("");ae.observe(j,{characterData:!0}),L=function(){j.data=G=++G%2}}else if(p.setImmediate||void 0===p.MessageChannel)L="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var A=p.document.createElement("script");A.onreadystatechange=function(){W(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},p.document.documentElement.appendChild(A)}:function(){setTimeout(W,0)};else{var te=new p.MessageChannel;te.port1.onmessage=W,L=function(){te.port2.postMessage(0)}}var B=[];function W(){var A,N;R=!0;for(var M=B.length;M;){for(N=B,B=[],A=-1;++A<M;)N[A]();M=B.length}R=!1}k.exports=function(A){1!==B.push(A)||R||L()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(J,k,ee){"use strict";var p=J("immediate");function L(){}var R={},V=["REJECTED"],G=["FULFILLED"],ae=["PENDING"];function j(M){if("function"!=typeof M)throw new TypeError("resolver must be a function");this.state=ae,this.queue=[],this.outcome=void 0,M!==L&&A(this,M)}function te(M,K,re){this.promise=M,"function"==typeof K&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),"function"==typeof re&&(this.onRejected=re,this.callRejected=this.otherCallRejected)}function B(M,K,re){p(function(){var he;try{he=K(re)}catch(ue){return R.reject(M,ue)}he===M?R.reject(M,new TypeError("Cannot resolve promise with itself")):R.resolve(M,he)})}function W(M){var K=M&&M.then;if(M&&("object"==typeof M||"function"==typeof M)&&"function"==typeof K)return function(){K.apply(M,arguments)}}function A(M,K){var re=!1;function he(xe){re||(re=!0,R.reject(M,xe))}function ue(xe){re||(re=!0,R.resolve(M,xe))}var De=N(function(){K(ue,he)});"error"===De.status&&he(De.value)}function N(M,K){var re={};try{re.value=M(K),re.status="success"}catch(he){re.status="error",re.value=he}return re}(k.exports=j).prototype.finally=function(M){if("function"!=typeof M)return this;var K=this.constructor;return this.then(function(re){return K.resolve(M()).then(function(){return re})},function(re){return K.resolve(M()).then(function(){throw re})})},j.prototype.catch=function(M){return this.then(null,M)},j.prototype.then=function(M,K){if("function"!=typeof M&&this.state===G||"function"!=typeof K&&this.state===V)return this;var re=new this.constructor(L);return this.state!==ae?B(re,this.state===G?M:K,this.outcome):this.queue.push(new te(re,M,K)),re},te.prototype.callFulfilled=function(M){R.resolve(this.promise,M)},te.prototype.otherCallFulfilled=function(M){B(this.promise,this.onFulfilled,M)},te.prototype.callRejected=function(M){R.reject(this.promise,M)},te.prototype.otherCallRejected=function(M){B(this.promise,this.onRejected,M)},R.resolve=function(M,K){var re=N(W,K);if("error"===re.status)return R.reject(M,re.value);var he=re.value;if(he)A(M,he);else{M.state=G,M.outcome=K;for(var ue=-1,De=M.queue.length;++ue<De;)M.queue[ue].callFulfilled(K)}return M},R.reject=function(M,K){M.state=V,M.outcome=K;for(var re=-1,he=M.queue.length;++re<he;)M.queue[re].callRejected(K);return M},j.resolve=function(M){return M instanceof this?M:R.resolve(new this(L),M)},j.reject=function(M){var K=new this(L);return R.reject(K,M)},j.all=function(M){var K=this;if("[object Array]"!==Object.prototype.toString.call(M))return this.reject(new TypeError("must be an array"));var re=M.length,he=!1;if(!re)return this.resolve([]);for(var ue=new Array(re),De=0,xe=-1,Me=new this(L);++xe<re;)ge(M[xe],xe);return Me;function ge(Pe,dt){K.resolve(Pe).then(function(X){ue[dt]=X,++De!==re||he||(he=!0,R.resolve(Me,ue))},function(X){he||(he=!0,R.reject(Me,X))})}},j.race=function(M){if("[object Array]"!==Object.prototype.toString.call(M))return this.reject(new TypeError("must be an array"));var re=M.length,he=!1;if(!re)return this.resolve([]);for(var ue=-1,De=new this(L);++ue<re;)this.resolve(M[ue]).then(function(Me){he||(he=!0,R.resolve(De,Me))},function(Me){he||(he=!0,R.reject(De,Me))});return De}},{immediate:36}],38:[function(J,k,ee){"use strict";var p={};(0,J("./lib/utils/common").assign)(p,J("./lib/deflate"),J("./lib/inflate"),J("./lib/zlib/constants")),k.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(J,k,ee){"use strict";var p=J("./zlib/deflate"),L=J("./utils/common"),R=J("./utils/strings"),V=J("./zlib/messages"),G=J("./zlib/zstream"),ae=Object.prototype.toString,j=0,te=-1,B=0,W=8;function A(M){if(!(this instanceof A))return new A(M);this.options=L.assign({level:te,method:W,chunkSize:16384,windowBits:15,memLevel:8,strategy:B,to:""},M||{});var K=this.options;K.raw&&0<K.windowBits?K.windowBits=-K.windowBits:K.gzip&&0<K.windowBits&&K.windowBits<16&&(K.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new G,this.strm.avail_out=0;var re=p.deflateInit2(this.strm,K.level,K.method,K.windowBits,K.memLevel,K.strategy);if(re!==j)throw new Error(V[re]);if(K.header&&p.deflateSetHeader(this.strm,K.header),K.dictionary){var he;if(he="string"==typeof K.dictionary?R.string2buf(K.dictionary):"[object ArrayBuffer]"===ae.call(K.dictionary)?new Uint8Array(K.dictionary):K.dictionary,(re=p.deflateSetDictionary(this.strm,he))!==j)throw new Error(V[re]);this._dict_set=!0}}function N(M,K){var re=new A(K);if(re.push(M,!0),re.err)throw re.msg||V[re.err];return re.result}A.prototype.push=function(M,K){var re,he,ue=this.strm,De=this.options.chunkSize;if(this.ended)return!1;he=K===~~K?K:!0===K?4:0,ue.input="string"==typeof M?R.string2buf(M):"[object ArrayBuffer]"===ae.call(M)?new Uint8Array(M):M,ue.next_in=0,ue.avail_in=ue.input.length;do{if(0===ue.avail_out&&(ue.output=new L.Buf8(De),ue.next_out=0,ue.avail_out=De),1!==(re=p.deflate(ue,he))&&re!==j)return this.onEnd(re),!(this.ended=!0);0!==ue.avail_out&&(0!==ue.avail_in||4!==he&&2!==he)||this.onData("string"===this.options.to?R.buf2binstring(L.shrinkBuf(ue.output,ue.next_out)):L.shrinkBuf(ue.output,ue.next_out))}while((0<ue.avail_in||0===ue.avail_out)&&1!==re);return 4===he?(re=p.deflateEnd(this.strm),this.onEnd(re),this.ended=!0,re===j):2!==he||(this.onEnd(j),!(ue.avail_out=0))},A.prototype.onData=function(M){this.chunks.push(M)},A.prototype.onEnd=function(M){M===j&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},ee.Deflate=A,ee.deflate=N,ee.deflateRaw=function(M,K){return(K=K||{}).raw=!0,N(M,K)},ee.gzip=function(M,K){return(K=K||{}).gzip=!0,N(M,K)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(J,k,ee){"use strict";var p=J("./zlib/inflate"),L=J("./utils/common"),R=J("./utils/strings"),V=J("./zlib/constants"),G=J("./zlib/messages"),ae=J("./zlib/zstream"),j=J("./zlib/gzheader"),te=Object.prototype.toString;function B(A){if(!(this instanceof B))return new B(A);this.options=L.assign({chunkSize:16384,windowBits:0,to:""},A||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,0===N.windowBits&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||A&&A.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&!(15&N.windowBits)&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ae,this.strm.avail_out=0;var M=p.inflateInit2(this.strm,N.windowBits);if(M!==V.Z_OK)throw new Error(G[M]);this.header=new j,p.inflateGetHeader(this.strm,this.header)}function W(A,N){var M=new B(N);if(M.push(A,!0),M.err)throw M.msg||G[M.err];return M.result}B.prototype.push=function(A,N){var M,K,re,he,ue,De,xe=this.strm,Me=this.options.chunkSize,ge=this.options.dictionary,Pe=!1;if(this.ended)return!1;K=N===~~N?N:!0===N?V.Z_FINISH:V.Z_NO_FLUSH,xe.input="string"==typeof A?R.binstring2buf(A):"[object ArrayBuffer]"===te.call(A)?new Uint8Array(A):A,xe.next_in=0,xe.avail_in=xe.input.length;do{if(0===xe.avail_out&&(xe.output=new L.Buf8(Me),xe.next_out=0,xe.avail_out=Me),(M=p.inflate(xe,V.Z_NO_FLUSH))===V.Z_NEED_DICT&&ge&&(De="string"==typeof ge?R.string2buf(ge):"[object ArrayBuffer]"===te.call(ge)?new Uint8Array(ge):ge,M=p.inflateSetDictionary(this.strm,De)),M===V.Z_BUF_ERROR&&!0===Pe&&(M=V.Z_OK,Pe=!1),M!==V.Z_STREAM_END&&M!==V.Z_OK)return this.onEnd(M),!(this.ended=!0);xe.next_out&&(0!==xe.avail_out&&M!==V.Z_STREAM_END&&(0!==xe.avail_in||K!==V.Z_FINISH&&K!==V.Z_SYNC_FLUSH)||("string"===this.options.to?(re=R.utf8border(xe.output,xe.next_out),he=xe.next_out-re,ue=R.buf2string(xe.output,re),xe.next_out=he,xe.avail_out=Me-he,he&&L.arraySet(xe.output,xe.output,re,he,0),this.onData(ue)):this.onData(L.shrinkBuf(xe.output,xe.next_out)))),0===xe.avail_in&&0===xe.avail_out&&(Pe=!0)}while((0<xe.avail_in||0===xe.avail_out)&&M!==V.Z_STREAM_END);return M===V.Z_STREAM_END&&(K=V.Z_FINISH),K===V.Z_FINISH?(M=p.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===V.Z_OK):K!==V.Z_SYNC_FLUSH||(this.onEnd(V.Z_OK),!(xe.avail_out=0))},B.prototype.onData=function(A){this.chunks.push(A)},B.prototype.onEnd=function(A){A===V.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},ee.Inflate=B,ee.inflate=W,ee.inflateRaw=function(A,N){return(N=N||{}).raw=!0,W(A,N)},ee.ungzip=W},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(J,k,ee){"use strict";var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";ee.assign=function(V){for(var G=Array.prototype.slice.call(arguments,1);G.length;){var ae=G.shift();if(ae){if("object"!=typeof ae)throw new TypeError(ae+"must be non-object");for(var j in ae)ae.hasOwnProperty(j)&&(V[j]=ae[j])}}return V},ee.shrinkBuf=function(V,G){return V.length===G?V:V.subarray?V.subarray(0,G):(V.length=G,V)};var L={arraySet:function(V,G,ae,j,te){if(G.subarray&&V.subarray)V.set(G.subarray(ae,ae+j),te);else for(var B=0;B<j;B++)V[te+B]=G[ae+B]},flattenChunks:function(V){var G,ae,j,te,B,W;for(G=j=0,ae=V.length;G<ae;G++)j+=V[G].length;for(W=new Uint8Array(j),G=te=0,ae=V.length;G<ae;G++)W.set(B=V[G],te),te+=B.length;return W}},R={arraySet:function(V,G,ae,j,te){for(var B=0;B<j;B++)V[te+B]=G[ae+B]},flattenChunks:function(V){return[].concat.apply([],V)}};ee.setTyped=function(V){V?(ee.Buf8=Uint8Array,ee.Buf16=Uint16Array,ee.Buf32=Int32Array,ee.assign(ee,L)):(ee.Buf8=Array,ee.Buf16=Array,ee.Buf32=Array,ee.assign(ee,R))},ee.setTyped(p)},{}],42:[function(J,k,ee){"use strict";var p=J("./common"),L=!0,R=!0;try{String.fromCharCode.apply(null,[0])}catch{L=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{R=!1}for(var V=new p.Buf8(256),G=0;G<256;G++)V[G]=252<=G?6:248<=G?5:240<=G?4:224<=G?3:192<=G?2:1;function ae(j,te){if(te<65537&&(j.subarray&&R||!j.subarray&&L))return String.fromCharCode.apply(null,p.shrinkBuf(j,te));for(var B="",W=0;W<te;W++)B+=String.fromCharCode(j[W]);return B}V[254]=V[254]=1,ee.string2buf=function(j){var te,B,W,A,N,M=j.length,K=0;for(A=0;A<M;A++)55296==(64512&(B=j.charCodeAt(A)))&&A+1<M&&56320==(64512&(W=j.charCodeAt(A+1)))&&(B=65536+(B-55296<<10)+(W-56320),A++),K+=B<128?1:B<2048?2:B<65536?3:4;for(te=new p.Buf8(K),A=N=0;N<K;A++)55296==(64512&(B=j.charCodeAt(A)))&&A+1<M&&56320==(64512&(W=j.charCodeAt(A+1)))&&(B=65536+(B-55296<<10)+(W-56320),A++),B<128?te[N++]=B:(B<2048?te[N++]=192|B>>>6:(B<65536?te[N++]=224|B>>>12:(te[N++]=240|B>>>18,te[N++]=128|B>>>12&63),te[N++]=128|B>>>6&63),te[N++]=128|63&B);return te},ee.buf2binstring=function(j){return ae(j,j.length)},ee.binstring2buf=function(j){for(var te=new p.Buf8(j.length),B=0,W=te.length;B<W;B++)te[B]=j.charCodeAt(B);return te},ee.buf2string=function(j,te){var B,W,A,N,M=te||j.length,K=new Array(2*M);for(B=W=0;B<M;)if((A=j[B++])<128)K[W++]=A;else if(4<(N=V[A]))K[W++]=65533,B+=N-1;else{for(A&=2===N?31:3===N?15:7;1<N&&B<M;)A=A<<6|63&j[B++],N--;1<N?K[W++]=65533:A<65536?K[W++]=A:(K[W++]=55296|(A-=65536)>>10&1023,K[W++]=56320|1023&A)}return ae(K,W)},ee.utf8border=function(j,te){var B;for((te=te||j.length)>j.length&&(te=j.length),B=te-1;0<=B&&128==(192&j[B]);)B--;return B<0||0===B?te:B+V[j[B]]>te?B:te}},{"./common":41}],43:[function(J,k,ee){"use strict";k.exports=function(p,L,R,V){for(var G=65535&p|0,ae=p>>>16&65535|0,j=0;0!==R;){for(R-=j=2e3<R?2e3:R;ae=ae+(G=G+L[V++]|0)|0,--j;);G%=65521,ae%=65521}return G|ae<<16|0}},{}],44:[function(J,k,ee){"use strict";k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(J,k,ee){"use strict";var p=function(){for(var L,R=[],V=0;V<256;V++){L=V;for(var G=0;G<8;G++)L=1&L?3988292384^L>>>1:L>>>1;R[V]=L}return R}();k.exports=function(L,R,V,G){var ae=p,j=G+V;L^=-1;for(var te=G;te<j;te++)L=L>>>8^ae[255&(L^R[te])];return-1^L}},{}],46:[function(J,k,ee){"use strict";var p,L=J("../utils/common"),R=J("./trees"),V=J("./adler32"),G=J("./crc32"),ae=J("./messages"),j=0,te=4,B=0,W=-2,A=-1,N=4,M=2,K=8,re=9,he=286,ue=30,De=19,xe=2*he+1,Me=15,ge=3,Pe=258,dt=Pe+ge+1,X=42,Ie=113,E=1,Be=2,Ct=3,Ve=4;function Tt(x,Te){return x.msg=ae[Te],Te}function ze(x){return(x<<1)-(4<x?9:0)}function ut(x){for(var Te=x.length;0<=--Te;)x[Te]=0}function me(x){var Te=x.state,ve=Te.pending;ve>x.avail_out&&(ve=x.avail_out),0!==ve&&(L.arraySet(x.output,Te.pending_buf,Te.pending_out,ve,x.next_out),x.next_out+=ve,Te.pending_out+=ve,x.total_out+=ve,x.avail_out-=ve,Te.pending-=ve,0===Te.pending&&(Te.pending_out=0))}function _e(x,Te){R._tr_flush_block(x,0<=x.block_start?x.block_start:-1,x.strstart-x.block_start,Te),x.block_start=x.strstart,me(x.strm)}function ot(x,Te){x.pending_buf[x.pending++]=Te}function Ge(x,Te){x.pending_buf[x.pending++]=Te>>>8&255,x.pending_buf[x.pending++]=255&Te}function Ke(x,Te){var ve,z,F=x.max_chain_length,oe=x.strstart,Re=x.prev_length,Le=x.nice_match,ce=x.strstart>x.w_size-dt?x.strstart-(x.w_size-dt):0,Ne=x.window,Ue=x.w_mask,He=x.prev,at=x.strstart+Pe,ni=Ne[oe+Re-1],Dt=Ne[oe+Re];x.prev_length>=x.good_match&&(F>>=2),Le>x.lookahead&&(Le=x.lookahead);do{if(Ne[(ve=Te)+Re]===Dt&&Ne[ve+Re-1]===ni&&Ne[ve]===Ne[oe]&&Ne[++ve]===Ne[oe+1]){oe+=2,ve++;do{}while(Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&Ne[++oe]===Ne[++ve]&&oe<at);if(z=Pe-(at-oe),oe=at-Pe,Re<z){if(x.match_start=Te,Le<=(Re=z))break;ni=Ne[oe+Re-1],Dt=Ne[oe+Re]}}}while((Te=He[Te&Ue])>ce&&0!=--F);return Re<=x.lookahead?Re:x.lookahead}function Si(x){var Te,ve,z,F,oe,Re,Le,ce,Ne,Ue,He=x.w_size;do{if(F=x.window_size-x.lookahead-x.strstart,x.strstart>=He+(He-dt)){for(L.arraySet(x.window,x.window,He,He,0),x.match_start-=He,x.strstart-=He,x.block_start-=He,Te=ve=x.hash_size;z=x.head[--Te],x.head[Te]=He<=z?z-He:0,--ve;);for(Te=ve=He;z=x.prev[--Te],x.prev[Te]=He<=z?z-He:0,--ve;);F+=He}if(0===x.strm.avail_in)break;if(Le=x.window,ce=x.strstart+x.lookahead,Ue=void 0,(Ne=F)<(Ue=(Re=x.strm).avail_in)&&(Ue=Ne),ve=0===Ue?0:(Re.avail_in-=Ue,L.arraySet(Le,Re.input,Re.next_in,Ue,ce),1===Re.state.wrap?Re.adler=V(Re.adler,Le,Ue,ce):2===Re.state.wrap&&(Re.adler=G(Re.adler,Le,Ue,ce)),Re.next_in+=Ue,Re.total_in+=Ue,Ue),x.lookahead+=ve,x.lookahead+x.insert>=ge)for(x.ins_h=x.window[oe=x.strstart-x.insert],x.ins_h=(x.ins_h<<x.hash_shift^x.window[oe+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[oe+ge-1])&x.hash_mask,x.prev[oe&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=oe,oe++,x.insert--,!(x.lookahead+x.insert<ge)););}while(x.lookahead<dt&&0!==x.strm.avail_in)}function zi(x,Te){for(var ve,z;;){if(x.lookahead<dt){if(Si(x),x.lookahead<dt&&Te===j)return E;if(0===x.lookahead)break}if(ve=0,x.lookahead>=ge&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+ge-1])&x.hash_mask,ve=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),0!==ve&&x.strstart-ve<=x.w_size-dt&&(x.match_length=Ke(x,ve)),x.match_length>=ge)if(z=R._tr_tally(x,x.strstart-x.match_start,x.match_length-ge),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=ge){for(x.match_length--;x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+ge-1])&x.hash_mask,ve=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart,0!=--x.match_length;);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else z=R._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(z&&(_e(x,!1),0===x.strm.avail_out))return E}return x.insert=x.strstart<ge-1?x.strstart:ge-1,Te===te?(_e(x,!0),0===x.strm.avail_out?Ct:Ve):x.last_lit&&(_e(x,!1),0===x.strm.avail_out)?E:Be}function Et(x,Te){for(var ve,z,F;;){if(x.lookahead<dt){if(Si(x),x.lookahead<dt&&Te===j)return E;if(0===x.lookahead)break}if(ve=0,x.lookahead>=ge&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+ge-1])&x.hash_mask,ve=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=ge-1,0!==ve&&x.prev_length<x.max_lazy_match&&x.strstart-ve<=x.w_size-dt&&(x.match_length=Ke(x,ve),x.match_length<=5&&(1===x.strategy||x.match_length===ge&&4096<x.strstart-x.match_start)&&(x.match_length=ge-1)),x.prev_length>=ge&&x.match_length<=x.prev_length){for(F=x.strstart+x.lookahead-ge,z=R._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-ge),x.lookahead-=x.prev_length-1,x.prev_length-=2;++x.strstart<=F&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+ge-1])&x.hash_mask,ve=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),0!=--x.prev_length;);if(x.match_available=0,x.match_length=ge-1,x.strstart++,z&&(_e(x,!1),0===x.strm.avail_out))return E}else if(x.match_available){if((z=R._tr_tally(x,0,x.window[x.strstart-1]))&&_e(x,!1),x.strstart++,x.lookahead--,0===x.strm.avail_out)return E}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(z=R._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<ge-1?x.strstart:ge-1,Te===te?(_e(x,!0),0===x.strm.avail_out?Ct:Ve):x.last_lit&&(_e(x,!1),0===x.strm.avail_out)?E:Be}function Lt(x,Te,ve,z,F){this.good_length=x,this.max_lazy=Te,this.nice_length=ve,this.max_chain=z,this.func=F}function Bi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new L.Buf16(2*xe),this.dyn_dtree=new L.Buf16(2*(2*ue+1)),this.bl_tree=new L.Buf16(2*(2*De+1)),ut(this.dyn_ltree),ut(this.dyn_dtree),ut(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new L.Buf16(Me+1),this.heap=new L.Buf16(2*he+1),ut(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new L.Buf16(2*he+1),ut(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function li(x){var Te;return x&&x.state?(x.total_in=x.total_out=0,x.data_type=M,(Te=x.state).pending=0,Te.pending_out=0,Te.wrap<0&&(Te.wrap=-Te.wrap),Te.status=Te.wrap?X:Ie,x.adler=2===Te.wrap?0:1,Te.last_flush=j,R._tr_init(Te),B):Tt(x,W)}function tr(x){var ve,Te=li(x);return Te===B&&((ve=x.state).window_size=2*ve.w_size,ut(ve.head),ve.max_lazy_match=p[ve.level].max_lazy,ve.good_match=p[ve.level].good_length,ve.nice_match=p[ve.level].nice_length,ve.max_chain_length=p[ve.level].max_chain,ve.strstart=0,ve.block_start=0,ve.lookahead=0,ve.insert=0,ve.match_length=ve.prev_length=ge-1,ve.match_available=0,ve.ins_h=0),Te}function $r(x,Te,ve,z,F,oe){if(!x)return W;var Re=1;if(Te===A&&(Te=6),z<0?(Re=0,z=-z):15<z&&(Re=2,z-=16),F<1||re<F||ve!==K||z<8||15<z||Te<0||9<Te||oe<0||N<oe)return Tt(x,W);8===z&&(z=9);var Le=new Bi;return(x.state=Le).strm=x,Le.wrap=Re,Le.gzhead=null,Le.w_bits=z,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=F+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+ge-1)/ge),Le.window=new L.Buf8(2*Le.w_size),Le.head=new L.Buf16(Le.hash_size),Le.prev=new L.Buf16(Le.w_size),Le.lit_bufsize=1<<F+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new L.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Te,Le.strategy=oe,Le.method=ve,tr(x)}p=[new Lt(0,0,0,0,function(x,Te){var ve=65535;for(ve>x.pending_buf_size-5&&(ve=x.pending_buf_size-5);;){if(x.lookahead<=1){if(Si(x),0===x.lookahead&&Te===j)return E;if(0===x.lookahead)break}x.strstart+=x.lookahead,x.lookahead=0;var z=x.block_start+ve;if((0===x.strstart||x.strstart>=z)&&(x.lookahead=x.strstart-z,x.strstart=z,_e(x,!1),0===x.strm.avail_out)||x.strstart-x.block_start>=x.w_size-dt&&(_e(x,!1),0===x.strm.avail_out))return E}return x.insert=0,Te===te?(_e(x,!0),0===x.strm.avail_out?Ct:Ve):(x.strstart>x.block_start&&_e(x,!1),E)}),new Lt(4,4,8,4,zi),new Lt(4,5,16,8,zi),new Lt(4,6,32,32,zi),new Lt(4,4,16,16,Et),new Lt(8,16,32,32,Et),new Lt(8,16,128,128,Et),new Lt(8,32,128,256,Et),new Lt(32,128,258,1024,Et),new Lt(32,258,258,4096,Et)],ee.deflateInit=function(x,Te){return $r(x,Te,K,15,8,0)},ee.deflateInit2=$r,ee.deflateReset=tr,ee.deflateResetKeep=li,ee.deflateSetHeader=function(x,Te){return x&&x.state?2!==x.state.wrap?W:(x.state.gzhead=Te,B):W},ee.deflate=function(x,Te){var ve,z,F,oe;if(!x||!x.state||5<Te||Te<0)return x?Tt(x,W):W;if(z=x.state,!x.output||!x.input&&0!==x.avail_in||666===z.status&&Te!==te)return Tt(x,0===x.avail_out?-5:W);if(z.strm=x,ve=z.last_flush,z.last_flush=Te,z.status===X)if(2===z.wrap)x.adler=0,ot(z,31),ot(z,139),ot(z,8),z.gzhead?(ot(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),ot(z,255&z.gzhead.time),ot(z,z.gzhead.time>>8&255),ot(z,z.gzhead.time>>16&255),ot(z,z.gzhead.time>>24&255),ot(z,9===z.level?2:2<=z.strategy||z.level<2?4:0),ot(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(ot(z,255&z.gzhead.extra.length),ot(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(x.adler=G(x.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(ot(z,0),ot(z,0),ot(z,0),ot(z,0),ot(z,0),ot(z,9===z.level?2:2<=z.strategy||z.level<2?4:0),ot(z,3),z.status=Ie);else{var Re=K+(z.w_bits-8<<4)<<8;Re|=(2<=z.strategy||z.level<2?0:z.level<6?1:6===z.level?2:3)<<6,0!==z.strstart&&(Re|=32),Re+=31-Re%31,z.status=Ie,Ge(z,Re),0!==z.strstart&&(Ge(z,x.adler>>>16),Ge(z,65535&x.adler)),x.adler=1}if(69===z.status)if(z.gzhead.extra){for(F=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),me(x),F=z.pending,z.pending!==z.pending_buf_size));)ot(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(73===z.status)if(z.gzhead.name){F=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),me(x),F=z.pending,z.pending===z.pending_buf_size)){oe=1;break}oe=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,ot(z,oe)}while(0!==oe);z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),0===oe&&(z.gzindex=0,z.status=91)}else z.status=91;if(91===z.status)if(z.gzhead.comment){F=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),me(x),F=z.pending,z.pending===z.pending_buf_size)){oe=1;break}oe=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,ot(z,oe)}while(0!==oe);z.gzhead.hcrc&&z.pending>F&&(x.adler=G(x.adler,z.pending_buf,z.pending-F,F)),0===oe&&(z.status=103)}else z.status=103;if(103===z.status&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&me(x),z.pending+2<=z.pending_buf_size&&(ot(z,255&x.adler),ot(z,x.adler>>8&255),x.adler=0,z.status=Ie)):z.status=Ie),0!==z.pending){if(me(x),0===x.avail_out)return z.last_flush=-1,B}else if(0===x.avail_in&&ze(Te)<=ze(ve)&&Te!==te)return Tt(x,-5);if(666===z.status&&0!==x.avail_in)return Tt(x,-5);if(0!==x.avail_in||0!==z.lookahead||Te!==j&&666!==z.status){var Le=2===z.strategy?function(ce,Ne){for(var Ue;;){if(0===ce.lookahead&&(Si(ce),0===ce.lookahead)){if(Ne===j)return E;break}if(ce.match_length=0,Ue=R._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,Ue&&(_e(ce,!1),0===ce.strm.avail_out))return E}return ce.insert=0,Ne===te?(_e(ce,!0),0===ce.strm.avail_out?Ct:Ve):ce.last_lit&&(_e(ce,!1),0===ce.strm.avail_out)?E:Be}(z,Te):3===z.strategy?function(ce,Ne){for(var Ue,He,at,ni,Dt=ce.window;;){if(ce.lookahead<=Pe){if(Si(ce),ce.lookahead<=Pe&&Ne===j)return E;if(0===ce.lookahead)break}if(ce.match_length=0,ce.lookahead>=ge&&0<ce.strstart&&(He=Dt[at=ce.strstart-1])===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]){ni=ce.strstart+Pe;do{}while(He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&He===Dt[++at]&&at<ni);ce.match_length=Pe-(ni-at),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=ge?(Ue=R._tr_tally(ce,1,ce.match_length-ge),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(Ue=R._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),Ue&&(_e(ce,!1),0===ce.strm.avail_out))return E}return ce.insert=0,Ne===te?(_e(ce,!0),0===ce.strm.avail_out?Ct:Ve):ce.last_lit&&(_e(ce,!1),0===ce.strm.avail_out)?E:Be}(z,Te):p[z.level].func(z,Te);if(Le!==Ct&&Le!==Ve||(z.status=666),Le===E||Le===Ct)return 0===x.avail_out&&(z.last_flush=-1),B;if(Le===Be&&(1===Te?R._tr_align(z):5!==Te&&(R._tr_stored_block(z,0,0,!1),3===Te&&(ut(z.head),0===z.lookahead&&(z.strstart=0,z.block_start=0,z.insert=0))),me(x),0===x.avail_out))return z.last_flush=-1,B}return Te!==te?B:z.wrap<=0?1:(2===z.wrap?(ot(z,255&x.adler),ot(z,x.adler>>8&255),ot(z,x.adler>>16&255),ot(z,x.adler>>24&255),ot(z,255&x.total_in),ot(z,x.total_in>>8&255),ot(z,x.total_in>>16&255),ot(z,x.total_in>>24&255)):(Ge(z,x.adler>>>16),Ge(z,65535&x.adler)),me(x),0<z.wrap&&(z.wrap=-z.wrap),0!==z.pending?B:1)},ee.deflateEnd=function(x){var Te;return x&&x.state?(Te=x.state.status)!==X&&69!==Te&&73!==Te&&91!==Te&&103!==Te&&Te!==Ie&&666!==Te?Tt(x,W):(x.state=null,Te===Ie?Tt(x,-3):B):W},ee.deflateSetDictionary=function(x,Te){var ve,z,F,oe,Re,Le,ce,Ne,Ue=Te.length;if(!x||!x.state||2===(oe=(ve=x.state).wrap)||1===oe&&ve.status!==X||ve.lookahead)return W;for(1===oe&&(x.adler=V(x.adler,Te,Ue,0)),ve.wrap=0,Ue>=ve.w_size&&(0===oe&&(ut(ve.head),ve.strstart=0,ve.block_start=0,ve.insert=0),Ne=new L.Buf8(ve.w_size),L.arraySet(Ne,Te,Ue-ve.w_size,ve.w_size,0),Te=Ne,Ue=ve.w_size),Re=x.avail_in,Le=x.next_in,ce=x.input,x.avail_in=Ue,x.next_in=0,x.input=Te,Si(ve);ve.lookahead>=ge;){for(z=ve.strstart,F=ve.lookahead-(ge-1);ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[z+ge-1])&ve.hash_mask,ve.prev[z&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=z,z++,--F;);ve.strstart=z,ve.lookahead=ge-1,Si(ve)}return ve.strstart+=ve.lookahead,ve.block_start=ve.strstart,ve.insert=ve.lookahead,ve.lookahead=0,ve.match_length=ve.prev_length=ge-1,ve.match_available=0,x.next_in=Le,x.input=ce,x.avail_in=Re,ve.wrap=oe,B},ee.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(J,k,ee){"use strict";k.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(J,k,ee){"use strict";k.exports=function(p,L){var R,V,G,ae,j,te,B,W,A,N,M,K,re,he,ue,De,xe,Me,ge,Pe,dt,X,Ie,E,Be;E=p.input,G=(V=p.next_in)+(p.avail_in-5),Be=p.output,j=(ae=p.next_out)-(L-p.avail_out),te=ae+(p.avail_out-257),B=(R=p.state).dmax,W=R.wsize,A=R.whave,N=R.wnext,M=R.window,K=R.hold,re=R.bits,he=R.lencode,ue=R.distcode,De=(1<<R.lenbits)-1,xe=(1<<R.distbits)-1;e:do{re<15&&(K+=E[V++]<<re,K+=E[V++]<<(re+=8),re+=8),Me=he[K&De];t:for(;;){if(K>>>=ge=Me>>>24,re-=ge,0==(ge=Me>>>16&255))Be[ae++]=65535&Me;else{if(!(16&ge)){if(!(64&ge)){Me=he[(65535&Me)+(K&(1<<ge)-1)];continue t}if(32&ge){R.mode=12;break e}p.msg="invalid literal/length code",R.mode=30;break e}Pe=65535&Me,(ge&=15)&&(re<ge&&(K+=E[V++]<<re,re+=8),Pe+=K&(1<<ge)-1,K>>>=ge,re-=ge),re<15&&(K+=E[V++]<<re,K+=E[V++]<<(re+=8),re+=8),Me=ue[K&xe];i:for(;;){if(K>>>=ge=Me>>>24,re-=ge,!(16&(ge=Me>>>16&255))){if(!(64&ge)){Me=ue[(65535&Me)+(K&(1<<ge)-1)];continue i}p.msg="invalid distance code",R.mode=30;break e}if(dt=65535&Me,re<(ge&=15)&&(K+=E[V++]<<re,(re+=8)<ge&&(K+=E[V++]<<re,re+=8)),B<(dt+=K&(1<<ge)-1)){p.msg="invalid distance too far back",R.mode=30;break e}if(K>>>=ge,re-=ge,(ge=ae-j)<dt){if(A<(ge=dt-ge)&&R.sane){p.msg="invalid distance too far back",R.mode=30;break e}if(Ie=M,(X=0)===N){if(X+=W-ge,ge<Pe){for(Pe-=ge;Be[ae++]=M[X++],--ge;);X=ae-dt,Ie=Be}}else if(N<ge){if(X+=W+N-ge,(ge-=N)<Pe){for(Pe-=ge;Be[ae++]=M[X++],--ge;);if(X=0,N<Pe){for(Pe-=ge=N;Be[ae++]=M[X++],--ge;);X=ae-dt,Ie=Be}}}else if(X+=N-ge,ge<Pe){for(Pe-=ge;Be[ae++]=M[X++],--ge;);X=ae-dt,Ie=Be}for(;2<Pe;)Be[ae++]=Ie[X++],Be[ae++]=Ie[X++],Be[ae++]=Ie[X++],Pe-=3;Pe&&(Be[ae++]=Ie[X++],1<Pe&&(Be[ae++]=Ie[X++]))}else{for(X=ae-dt;Be[ae++]=Be[X++],Be[ae++]=Be[X++],Be[ae++]=Be[X++],2<(Pe-=3););Pe&&(Be[ae++]=Be[X++],1<Pe&&(Be[ae++]=Be[X++]))}break}}break}}while(V<G&&ae<te);V-=Pe=re>>3,K&=(1<<(re-=Pe<<3))-1,p.next_in=V,p.next_out=ae,p.avail_in=V<G?G-V+5:5-(V-G),p.avail_out=ae<te?te-ae+257:257-(ae-te),R.hold=K,R.bits=re}},{}],49:[function(J,k,ee){"use strict";var p=J("../utils/common"),L=J("./adler32"),R=J("./crc32"),V=J("./inffast"),G=J("./inftrees"),ae=1,j=2,te=0,B=-2,W=1,A=852,N=592;function M(X){return(X>>>24&255)+(X>>>8&65280)+((65280&X)<<8)+((255&X)<<24)}function K(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function re(X){var Ie;return X&&X.state?(X.total_in=X.total_out=(Ie=X.state).total=0,X.msg="",Ie.wrap&&(X.adler=1&Ie.wrap),Ie.mode=W,Ie.last=0,Ie.havedict=0,Ie.dmax=32768,Ie.head=null,Ie.hold=0,Ie.bits=0,Ie.lencode=Ie.lendyn=new p.Buf32(A),Ie.distcode=Ie.distdyn=new p.Buf32(N),Ie.sane=1,Ie.back=-1,te):B}function he(X){var Ie;return X&&X.state?((Ie=X.state).wsize=0,Ie.whave=0,Ie.wnext=0,re(X)):B}function ue(X,Ie){var E,Be;return X&&X.state?(Be=X.state,Ie<0?(E=0,Ie=-Ie):(E=1+(Ie>>4),Ie<48&&(Ie&=15)),Ie&&(Ie<8||15<Ie)?B:(null!==Be.window&&Be.wbits!==Ie&&(Be.window=null),Be.wrap=E,Be.wbits=Ie,he(X))):B}function De(X,Ie){var E,Be;return X?(Be=new K,(X.state=Be).window=null,(E=ue(X,Ie))!==te&&(X.state=null),E):B}var xe,Me,ge=!0;function Pe(X){if(ge){var Ie;for(xe=new p.Buf32(512),Me=new p.Buf32(32),Ie=0;Ie<144;)X.lens[Ie++]=8;for(;Ie<256;)X.lens[Ie++]=9;for(;Ie<280;)X.lens[Ie++]=7;for(;Ie<288;)X.lens[Ie++]=8;for(G(ae,X.lens,0,288,xe,0,X.work,{bits:9}),Ie=0;Ie<32;)X.lens[Ie++]=5;G(j,X.lens,0,32,Me,0,X.work,{bits:5}),ge=!1}X.lencode=xe,X.lenbits=9,X.distcode=Me,X.distbits=5}function dt(X,Ie,E,Be){var Ct,Ve=X.state;return null===Ve.window&&(Ve.wsize=1<<Ve.wbits,Ve.wnext=0,Ve.whave=0,Ve.window=new p.Buf8(Ve.wsize)),Be>=Ve.wsize?(p.arraySet(Ve.window,Ie,E-Ve.wsize,Ve.wsize,0),Ve.wnext=0,Ve.whave=Ve.wsize):(Be<(Ct=Ve.wsize-Ve.wnext)&&(Ct=Be),p.arraySet(Ve.window,Ie,E-Be,Ct,Ve.wnext),(Be-=Ct)?(p.arraySet(Ve.window,Ie,E-Be,Be,0),Ve.wnext=Be,Ve.whave=Ve.wsize):(Ve.wnext+=Ct,Ve.wnext===Ve.wsize&&(Ve.wnext=0),Ve.whave<Ve.wsize&&(Ve.whave+=Ct))),0}ee.inflateReset=he,ee.inflateReset2=ue,ee.inflateResetKeep=re,ee.inflateInit=function(X){return De(X,15)},ee.inflateInit2=De,ee.inflate=function(X,Ie){var E,Be,Ct,Ve,Tt,ze,ut,me,_e,ot,Ge,Ke,Si,zi,Et,Lt,Bi,li,tr,$r,x,Te,ve,z,F=0,oe=new p.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!X||!X.state||!X.output||!X.input&&0!==X.avail_in)return B;12===(E=X.state).mode&&(E.mode=13),Tt=X.next_out,Ct=X.output,Ve=X.next_in,Be=X.input,me=E.hold,_e=E.bits,ot=ze=X.avail_in,Ge=ut=X.avail_out,Te=te;e:for(;;)switch(E.mode){case W:if(0===E.wrap){E.mode=13;break}for(;_e<16;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(2&E.wrap&&35615===me){oe[E.check=0]=255&me,oe[1]=me>>>8&255,E.check=R(E.check,oe,2,0),_e=me=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&me)<<8)+(me>>8))%31){X.msg="incorrect header check",E.mode=30;break}if(8!=(15&me)){X.msg="unknown compression method",E.mode=30;break}if(_e-=4,x=8+(15&(me>>>=4)),0===E.wbits)E.wbits=x;else if(x>E.wbits){X.msg="invalid window size",E.mode=30;break}E.dmax=1<<x,X.adler=E.check=1,E.mode=512&me?10:12,_e=me=0;break;case 2:for(;_e<16;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(E.flags=me,8!=(255&E.flags)){X.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){X.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=me>>8&1),512&E.flags&&(oe[0]=255&me,oe[1]=me>>>8&255,E.check=R(E.check,oe,2,0)),_e=me=0,E.mode=3;case 3:for(;_e<32;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.head&&(E.head.time=me),512&E.flags&&(oe[0]=255&me,oe[1]=me>>>8&255,oe[2]=me>>>16&255,oe[3]=me>>>24&255,E.check=R(E.check,oe,4,0)),_e=me=0,E.mode=4;case 4:for(;_e<16;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.head&&(E.head.xflags=255&me,E.head.os=me>>8),512&E.flags&&(oe[0]=255&me,oe[1]=me>>>8&255,E.check=R(E.check,oe,2,0)),_e=me=0,E.mode=5;case 5:if(1024&E.flags){for(;_e<16;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.length=me,E.head&&(E.head.extra_len=me),512&E.flags&&(oe[0]=255&me,oe[1]=me>>>8&255,E.check=R(E.check,oe,2,0)),_e=me=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(ze<(Ke=E.length)&&(Ke=ze),Ke&&(E.head&&(x=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),p.arraySet(E.head.extra,Be,Ve,Ke,x)),512&E.flags&&(E.check=R(E.check,Be,Ke,Ve)),ze-=Ke,Ve+=Ke,E.length-=Ke),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(0===ze)break e;for(Ke=0;x=Be[Ve+Ke++],E.head&&x&&E.length<65536&&(E.head.name+=String.fromCharCode(x)),x&&Ke<ze;);if(512&E.flags&&(E.check=R(E.check,Be,Ke,Ve)),ze-=Ke,Ve+=Ke,x)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(0===ze)break e;for(Ke=0;x=Be[Ve+Ke++],E.head&&x&&E.length<65536&&(E.head.comment+=String.fromCharCode(x)),x&&Ke<ze;);if(512&E.flags&&(E.check=R(E.check,Be,Ke,Ve)),ze-=Ke,Ve+=Ke,x)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;_e<16;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(me!==(65535&E.check)){X.msg="header crc mismatch",E.mode=30;break}_e=me=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),X.adler=E.check=0,E.mode=12;break;case 10:for(;_e<32;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}X.adler=E.check=M(me),_e=me=0,E.mode=11;case 11:if(0===E.havedict)return X.next_out=Tt,X.avail_out=ut,X.next_in=Ve,X.avail_in=ze,E.hold=me,E.bits=_e,2;X.adler=E.check=1,E.mode=12;case 12:if(5===Ie||6===Ie)break e;case 13:if(E.last){me>>>=7&_e,_e-=7&_e,E.mode=27;break}for(;_e<3;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}switch(E.last=1&me,_e-=1,3&(me>>>=1)){case 0:E.mode=14;break;case 1:if(Pe(E),E.mode=20,6!==Ie)break;me>>>=2,_e-=2;break e;case 2:E.mode=17;break;case 3:X.msg="invalid block type",E.mode=30}me>>>=2,_e-=2;break;case 14:for(me>>>=7&_e,_e-=7&_e;_e<32;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if((65535&me)!=(me>>>16^65535)){X.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&me,_e=me=0,E.mode=15,6===Ie)break e;case 15:E.mode=16;case 16:if(Ke=E.length){if(ze<Ke&&(Ke=ze),ut<Ke&&(Ke=ut),0===Ke)break e;p.arraySet(Ct,Be,Ve,Ke,Tt),ze-=Ke,Ve+=Ke,ut-=Ke,Tt+=Ke,E.length-=Ke;break}E.mode=12;break;case 17:for(;_e<14;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(E.nlen=257+(31&me),_e-=5,E.ndist=1+(31&(me>>>=5)),_e-=5,E.ncode=4+(15&(me>>>=5)),me>>>=4,_e-=4,286<E.nlen||30<E.ndist){X.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;_e<3;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.lens[Re[E.have++]]=7&me,me>>>=3,_e-=3}for(;E.have<19;)E.lens[Re[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,Te=G(0,E.lens,0,19,E.lencode,0,E.work,ve={bits:E.lenbits}),E.lenbits=ve.bits,Te){X.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;Lt=(F=E.lencode[me&(1<<E.lenbits)-1])>>>16&255,Bi=65535&F,!((Et=F>>>24)<=_e);){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(Bi<16)me>>>=Et,_e-=Et,E.lens[E.have++]=Bi;else{if(16===Bi){for(z=Et+2;_e<z;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(me>>>=Et,_e-=Et,0===E.have){X.msg="invalid bit length repeat",E.mode=30;break}x=E.lens[E.have-1],Ke=3+(3&me),me>>>=2,_e-=2}else if(17===Bi){for(z=Et+3;_e<z;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}_e-=Et,x=0,Ke=3+(7&(me>>>=Et)),me>>>=3,_e-=3}else{for(z=Et+7;_e<z;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}_e-=Et,x=0,Ke=11+(127&(me>>>=Et)),me>>>=7,_e-=7}if(E.have+Ke>E.nlen+E.ndist){X.msg="invalid bit length repeat",E.mode=30;break}for(;Ke--;)E.lens[E.have++]=x}}if(30===E.mode)break;if(0===E.lens[256]){X.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,Te=G(ae,E.lens,0,E.nlen,E.lencode,0,E.work,ve={bits:E.lenbits}),E.lenbits=ve.bits,Te){X.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,Te=G(j,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,ve={bits:E.distbits}),E.distbits=ve.bits,Te){X.msg="invalid distances set",E.mode=30;break}if(E.mode=20,6===Ie)break e;case 20:E.mode=21;case 21:if(6<=ze&&258<=ut){X.next_out=Tt,X.avail_out=ut,X.next_in=Ve,X.avail_in=ze,E.hold=me,E.bits=_e,V(X,Ge),Tt=X.next_out,Ct=X.output,ut=X.avail_out,Ve=X.next_in,Be=X.input,ze=X.avail_in,me=E.hold,_e=E.bits,12===E.mode&&(E.back=-1);break}for(E.back=0;Lt=(F=E.lencode[me&(1<<E.lenbits)-1])>>>16&255,Bi=65535&F,!((Et=F>>>24)<=_e);){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(Lt&&!(240&Lt)){for(li=Et,tr=Lt,$r=Bi;Lt=(F=E.lencode[$r+((me&(1<<li+tr)-1)>>li)])>>>16&255,Bi=65535&F,!(li+(Et=F>>>24)<=_e);){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}me>>>=li,_e-=li,E.back+=li}if(me>>>=Et,_e-=Et,E.back+=Et,E.length=Bi,0===Lt){E.mode=26;break}if(32&Lt){E.back=-1,E.mode=12;break}if(64&Lt){X.msg="invalid literal/length code",E.mode=30;break}E.extra=15&Lt,E.mode=22;case 22:if(E.extra){for(z=E.extra;_e<z;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.length+=me&(1<<E.extra)-1,me>>>=E.extra,_e-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;Lt=(F=E.distcode[me&(1<<E.distbits)-1])>>>16&255,Bi=65535&F,!((Et=F>>>24)<=_e);){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(!(240&Lt)){for(li=Et,tr=Lt,$r=Bi;Lt=(F=E.distcode[$r+((me&(1<<li+tr)-1)>>li)])>>>16&255,Bi=65535&F,!(li+(Et=F>>>24)<=_e);){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}me>>>=li,_e-=li,E.back+=li}if(me>>>=Et,_e-=Et,E.back+=Et,64&Lt){X.msg="invalid distance code",E.mode=30;break}E.offset=Bi,E.extra=15&Lt,E.mode=24;case 24:if(E.extra){for(z=E.extra;_e<z;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}E.offset+=me&(1<<E.extra)-1,me>>>=E.extra,_e-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){X.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(0===ut)break e;if(E.offset>(Ke=Ge-ut)){if((Ke=E.offset-Ke)>E.whave&&E.sane){X.msg="invalid distance too far back",E.mode=30;break}Si=Ke>E.wnext?E.wsize-(Ke-=E.wnext):E.wnext-Ke,Ke>E.length&&(Ke=E.length),zi=E.window}else zi=Ct,Si=Tt-E.offset,Ke=E.length;for(ut<Ke&&(Ke=ut),ut-=Ke,E.length-=Ke;Ct[Tt++]=zi[Si++],--Ke;);0===E.length&&(E.mode=21);break;case 26:if(0===ut)break e;Ct[Tt++]=E.length,ut--,E.mode=21;break;case 27:if(E.wrap){for(;_e<32;){if(0===ze)break e;ze--,me|=Be[Ve++]<<_e,_e+=8}if(X.total_out+=Ge-=ut,E.total+=Ge,Ge&&(X.adler=E.check=E.flags?R(E.check,Ct,Ge,Tt-Ge):L(E.check,Ct,Ge,Tt-Ge)),Ge=ut,(E.flags?me:M(me))!==E.check){X.msg="incorrect data check",E.mode=30;break}_e=me=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;_e<32;){if(0===ze)break e;ze--,me+=Be[Ve++]<<_e,_e+=8}if(me!==(4294967295&E.total)){X.msg="incorrect length check",E.mode=30;break}_e=me=0}E.mode=29;case 29:Te=1;break e;case 30:Te=-3;break e;case 31:return-4;default:return B}return X.next_out=Tt,X.avail_out=ut,X.next_in=Ve,X.avail_in=ze,E.hold=me,E.bits=_e,(E.wsize||Ge!==X.avail_out&&E.mode<30&&(E.mode<27||4!==Ie))&&dt(X,X.output,X.next_out,Ge-X.avail_out)?(E.mode=31,-4):(Ge-=X.avail_out,X.total_in+=ot-=X.avail_in,X.total_out+=Ge,E.total+=Ge,E.wrap&&Ge&&(X.adler=E.check=E.flags?R(E.check,Ct,Ge,X.next_out-Ge):L(E.check,Ct,Ge,X.next_out-Ge)),X.data_type=E.bits+(E.last?64:0)+(12===E.mode?128:0)+(20===E.mode||15===E.mode?256:0),(0==ot&&0===Ge||4===Ie)&&Te===te&&(Te=-5),Te)},ee.inflateEnd=function(X){if(!X||!X.state)return B;var Ie=X.state;return Ie.window&&(Ie.window=null),X.state=null,te},ee.inflateGetHeader=function(X,Ie){var E;return X&&X.state&&2&(E=X.state).wrap?((E.head=Ie).done=!1,te):B},ee.inflateSetDictionary=function(X,Ie){var E,Be=Ie.length;return X&&X.state?0!==(E=X.state).wrap&&11!==E.mode?B:11===E.mode&&L(1,Ie,Be,0)!==E.check?-3:dt(X,Ie,Be,Be)?(E.mode=31,-4):(E.havedict=1,te):B},ee.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(J,k,ee){"use strict";var p=J("../utils/common"),L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],R=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],V=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(ae,j,te,B,W,A,N,M){var K,re,he,ue,De,xe,Me,ge,Pe,dt=M.bits,X=0,Ie=0,E=0,Be=0,Ct=0,Ve=0,Tt=0,ze=0,ut=0,me=0,_e=null,ot=0,Ge=new p.Buf16(16),Ke=new p.Buf16(16),Si=null,zi=0;for(X=0;X<=15;X++)Ge[X]=0;for(Ie=0;Ie<B;Ie++)Ge[j[te+Ie]]++;for(Ct=dt,Be=15;1<=Be&&0===Ge[Be];Be--);if(Be<Ct&&(Ct=Be),0===Be)return W[A++]=20971520,W[A++]=20971520,M.bits=1,0;for(E=1;E<Be&&0===Ge[E];E++);for(Ct<E&&(Ct=E),X=ze=1;X<=15;X++)if(ze<<=1,(ze-=Ge[X])<0)return-1;if(0<ze&&(0===ae||1!==Be))return-1;for(Ke[1]=0,X=1;X<15;X++)Ke[X+1]=Ke[X]+Ge[X];for(Ie=0;Ie<B;Ie++)0!==j[te+Ie]&&(N[Ke[j[te+Ie]]++]=Ie);if(xe=0===ae?(_e=Si=N,19):1===ae?(_e=L,ot-=257,Si=R,zi-=257,256):(_e=V,Si=G,-1),X=E,De=A,Tt=Ie=me=0,he=-1,ue=(ut=1<<(Ve=Ct))-1,1===ae&&852<ut||2===ae&&592<ut)return 1;for(;;){for(Me=X-Tt,Pe=N[Ie]<xe?(ge=0,N[Ie]):N[Ie]>xe?(ge=Si[zi+N[Ie]],_e[ot+N[Ie]]):(ge=96,0),K=1<<X-Tt,E=re=1<<Ve;W[De+(me>>Tt)+(re-=K)]=Me<<24|ge<<16|Pe|0,0!==re;);for(K=1<<X-1;me&K;)K>>=1;if(0!==K?(me&=K-1,me+=K):me=0,Ie++,0==--Ge[X]){if(X===Be)break;X=j[te+N[Ie]]}if(Ct<X&&(me&ue)!==he){for(0===Tt&&(Tt=Ct),De+=E,ze=1<<(Ve=X-Tt);Ve+Tt<Be&&!((ze-=Ge[Ve+Tt])<=0);)Ve++,ze<<=1;if(ut+=1<<Ve,1===ae&&852<ut||2===ae&&592<ut)return 1;W[he=me&ue]=Ct<<24|Ve<<16|De-A|0}}return 0!==me&&(W[De+me]=X-Tt<<24|64<<16|0),M.bits=Ct,0}},{"../utils/common":41}],51:[function(J,k,ee){"use strict";k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(J,k,ee){"use strict";var p=J("../utils/common");function V(F){for(var oe=F.length;0<=--oe;)F[oe]=0}var G=0,j=256,te=j+1+29,B=30,W=19,A=2*te+1,N=15,M=16,re=256,he=16,ue=17,De=18,xe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt=new Array(2*(te+2));V(dt);var X=new Array(2*B);V(X);var Ie=new Array(512);V(Ie);var E=new Array(256);V(E);var Be=new Array(29);V(Be);var Ct,Ve,Tt,ze=new Array(B);function ut(F,oe,Re,Le,ce){this.static_tree=F,this.extra_bits=oe,this.extra_base=Re,this.elems=Le,this.max_length=ce,this.has_stree=F&&F.length}function me(F,oe){this.dyn_tree=F,this.max_code=0,this.stat_desc=oe}function _e(F){return F<256?Ie[F]:Ie[256+(F>>>7)]}function ot(F,oe){F.pending_buf[F.pending++]=255&oe,F.pending_buf[F.pending++]=oe>>>8&255}function Ge(F,oe,Re){F.bi_valid>M-Re?(F.bi_buf|=oe<<F.bi_valid&65535,ot(F,F.bi_buf),F.bi_buf=oe>>M-F.bi_valid,F.bi_valid+=Re-M):(F.bi_buf|=oe<<F.bi_valid&65535,F.bi_valid+=Re)}function Ke(F,oe,Re){Ge(F,Re[2*oe],Re[2*oe+1])}function Si(F,oe){for(var Re=0;Re|=1&F,F>>>=1,Re<<=1,0<--oe;);return Re>>>1}function zi(F,oe,Re){var Le,ce,Ne=new Array(N+1),Ue=0;for(Le=1;Le<=N;Le++)Ne[Le]=Ue=Ue+Re[Le-1]<<1;for(ce=0;ce<=oe;ce++){var He=F[2*ce+1];0!==He&&(F[2*ce]=Si(Ne[He]++,He))}}function Et(F){var oe;for(oe=0;oe<te;oe++)F.dyn_ltree[2*oe]=0;for(oe=0;oe<B;oe++)F.dyn_dtree[2*oe]=0;for(oe=0;oe<W;oe++)F.bl_tree[2*oe]=0;F.dyn_ltree[2*re]=1,F.opt_len=F.static_len=0,F.last_lit=F.matches=0}function Lt(F){8<F.bi_valid?ot(F,F.bi_buf):0<F.bi_valid&&(F.pending_buf[F.pending++]=F.bi_buf),F.bi_buf=0,F.bi_valid=0}function Bi(F,oe,Re,Le){var ce=2*oe,Ne=2*Re;return F[ce]<F[Ne]||F[ce]===F[Ne]&&Le[oe]<=Le[Re]}function li(F,oe,Re){for(var Le=F.heap[Re],ce=Re<<1;ce<=F.heap_len&&(ce<F.heap_len&&Bi(oe,F.heap[ce+1],F.heap[ce],F.depth)&&ce++,!Bi(oe,Le,F.heap[ce],F.depth));)F.heap[Re]=F.heap[ce],Re=ce,ce<<=1;F.heap[Re]=Le}function tr(F,oe,Re){var Le,ce,Ne,Ue,He=0;if(0!==F.last_lit)for(;Le=F.pending_buf[F.d_buf+2*He]<<8|F.pending_buf[F.d_buf+2*He+1],ce=F.pending_buf[F.l_buf+He],He++,0===Le?Ke(F,ce,oe):(Ke(F,(Ne=E[ce])+j+1,oe),0!==(Ue=xe[Ne])&&Ge(F,ce-=Be[Ne],Ue),Ke(F,Ne=_e(--Le),Re),0!==(Ue=Me[Ne])&&Ge(F,Le-=ze[Ne],Ue)),He<F.last_lit;);Ke(F,re,oe)}function $r(F,oe){var Re,Le,ce,Ne=oe.dyn_tree,Ue=oe.stat_desc.static_tree,He=oe.stat_desc.has_stree,at=oe.stat_desc.elems,ni=-1;for(F.heap_len=0,F.heap_max=A,Re=0;Re<at;Re++)0!==Ne[2*Re]?(F.heap[++F.heap_len]=ni=Re,F.depth[Re]=0):Ne[2*Re+1]=0;for(;F.heap_len<2;)Ne[2*(ce=F.heap[++F.heap_len]=ni<2?++ni:0)]=1,F.depth[ce]=0,F.opt_len--,He&&(F.static_len-=Ue[2*ce+1]);for(oe.max_code=ni,Re=F.heap_len>>1;1<=Re;Re--)li(F,Ne,Re);for(ce=at;Re=F.heap[1],F.heap[1]=F.heap[F.heap_len--],li(F,Ne,1),Le=F.heap[1],F.heap[--F.heap_max]=Re,F.heap[--F.heap_max]=Le,Ne[2*ce]=Ne[2*Re]+Ne[2*Le],F.depth[ce]=(F.depth[Re]>=F.depth[Le]?F.depth[Re]:F.depth[Le])+1,Ne[2*Re+1]=Ne[2*Le+1]=ce,F.heap[1]=ce++,li(F,Ne,1),2<=F.heap_len;);F.heap[--F.heap_max]=F.heap[1],function(Dt,Ar){var yn,Gi,Jn,vi,ka,gs,Wr=Ar.dyn_tree,ho=Ar.max_code,Rl=Ar.stat_desc.static_tree,Ol=Ar.stat_desc.has_stree,Bl=Ar.stat_desc.extra_bits,mu=Ar.stat_desc.extra_base,ms=Ar.stat_desc.max_length,co=0;for(vi=0;vi<=N;vi++)Dt.bl_count[vi]=0;for(Wr[2*Dt.heap[Dt.heap_max]+1]=0,yn=Dt.heap_max+1;yn<A;yn++)ms<(vi=Wr[2*Wr[2*(Gi=Dt.heap[yn])+1]+1]+1)&&(vi=ms,co++),Wr[2*Gi+1]=vi,ho<Gi||(Dt.bl_count[vi]++,ka=0,mu<=Gi&&(ka=Bl[Gi-mu]),Dt.opt_len+=(gs=Wr[2*Gi])*(vi+ka),Ol&&(Dt.static_len+=gs*(Rl[2*Gi+1]+ka)));if(0!==co){do{for(vi=ms-1;0===Dt.bl_count[vi];)vi--;Dt.bl_count[vi]--,Dt.bl_count[vi+1]+=2,Dt.bl_count[ms]--,co-=2}while(0<co);for(vi=ms;0!==vi;vi--)for(Gi=Dt.bl_count[vi];0!==Gi;)ho<(Jn=Dt.heap[--yn])||(Wr[2*Jn+1]!==vi&&(Dt.opt_len+=(vi-Wr[2*Jn+1])*Wr[2*Jn],Wr[2*Jn+1]=vi),Gi--)}}(F,oe),zi(Ne,ni,F.bl_count)}function x(F,oe,Re){var Le,ce,Ne=-1,Ue=oe[1],He=0,at=7,ni=4;for(0===Ue&&(at=138,ni=3),oe[2*(Re+1)+1]=65535,Le=0;Le<=Re;Le++)ce=Ue,Ue=oe[2*(Le+1)+1],++He<at&&ce===Ue||(He<ni?F.bl_tree[2*ce]+=He:0!==ce?(ce!==Ne&&F.bl_tree[2*ce]++,F.bl_tree[2*he]++):He<=10?F.bl_tree[2*ue]++:F.bl_tree[2*De]++,Ne=ce,ni=(He=0)===Ue?(at=138,3):ce===Ue?(at=6,3):(at=7,4))}function Te(F,oe,Re){var Le,ce,Ne=-1,Ue=oe[1],He=0,at=7,ni=4;for(0===Ue&&(at=138,ni=3),Le=0;Le<=Re;Le++)if(ce=Ue,Ue=oe[2*(Le+1)+1],!(++He<at&&ce===Ue)){if(He<ni)for(;Ke(F,ce,F.bl_tree),0!=--He;);else 0!==ce?(ce!==Ne&&(Ke(F,ce,F.bl_tree),He--),Ke(F,he,F.bl_tree),Ge(F,He-3,2)):He<=10?(Ke(F,ue,F.bl_tree),Ge(F,He-3,3)):(Ke(F,De,F.bl_tree),Ge(F,He-11,7));Ne=ce,ni=(He=0)===Ue?(at=138,3):ce===Ue?(at=6,3):(at=7,4)}}V(ze);var ve=!1;function z(F,oe,Re,Le){var ce,Ne,Ue;Ge(F,(G<<1)+(Le?1:0),3),Ne=oe,Ue=Re,Lt(ce=F),ot(ce,Ue),ot(ce,~Ue),p.arraySet(ce.pending_buf,ce.window,Ne,Ue,ce.pending),ce.pending+=Ue}ee._tr_init=function(F){ve||(function(){var oe,Re,Le,ce,Ne,Ue=new Array(N+1);for(ce=Le=0;ce<28;ce++)for(Be[ce]=Le,oe=0;oe<1<<xe[ce];oe++)E[Le++]=ce;for(E[Le-1]=ce,ce=Ne=0;ce<16;ce++)for(ze[ce]=Ne,oe=0;oe<1<<Me[ce];oe++)Ie[Ne++]=ce;for(Ne>>=7;ce<B;ce++)for(ze[ce]=Ne<<7,oe=0;oe<1<<Me[ce]-7;oe++)Ie[256+Ne++]=ce;for(Re=0;Re<=N;Re++)Ue[Re]=0;for(oe=0;oe<=143;)dt[2*oe+1]=8,oe++,Ue[8]++;for(;oe<=255;)dt[2*oe+1]=9,oe++,Ue[9]++;for(;oe<=279;)dt[2*oe+1]=7,oe++,Ue[7]++;for(;oe<=287;)dt[2*oe+1]=8,oe++,Ue[8]++;for(zi(dt,te+1,Ue),oe=0;oe<B;oe++)X[2*oe+1]=5,X[2*oe]=Si(oe,5);Ct=new ut(dt,xe,j+1,te,N),Ve=new ut(X,Me,0,B,N),Tt=new ut(new Array(0),ge,0,W,7)}(),ve=!0),F.l_desc=new me(F.dyn_ltree,Ct),F.d_desc=new me(F.dyn_dtree,Ve),F.bl_desc=new me(F.bl_tree,Tt),F.bi_buf=0,F.bi_valid=0,Et(F)},ee._tr_stored_block=z,ee._tr_flush_block=function(F,oe,Re,Le){var ce,Ne,Ue=0;0<F.level?(2===F.strm.data_type&&(F.strm.data_type=function(He){var at,ni=4093624447;for(at=0;at<=31;at++,ni>>>=1)if(1&ni&&0!==He.dyn_ltree[2*at])return 0;if(0!==He.dyn_ltree[18]||0!==He.dyn_ltree[20]||0!==He.dyn_ltree[26])return 1;for(at=32;at<j;at++)if(0!==He.dyn_ltree[2*at])return 1;return 0}(F)),$r(F,F.l_desc),$r(F,F.d_desc),Ue=function(He){var at;for(x(He,He.dyn_ltree,He.l_desc.max_code),x(He,He.dyn_dtree,He.d_desc.max_code),$r(He,He.bl_desc),at=W-1;3<=at&&0===He.bl_tree[2*Pe[at]+1];at--);return He.opt_len+=3*(at+1)+5+5+4,at}(F),(Ne=F.static_len+3+7>>>3)<=(ce=F.opt_len+3+7>>>3)&&(ce=Ne)):ce=Ne=Re+5,Re+4<=ce&&-1!==oe?z(F,oe,Re,Le):4===F.strategy||Ne===ce?(Ge(F,2+(Le?1:0),3),tr(F,dt,X)):(Ge(F,4+(Le?1:0),3),function(He,at,ni,Dt){var Ar;for(Ge(He,at-257,5),Ge(He,ni-1,5),Ge(He,Dt-4,4),Ar=0;Ar<Dt;Ar++)Ge(He,He.bl_tree[2*Pe[Ar]+1],3);Te(He,He.dyn_ltree,at-1),Te(He,He.dyn_dtree,ni-1)}(F,F.l_desc.max_code+1,F.d_desc.max_code+1,Ue+1),tr(F,F.dyn_ltree,F.dyn_dtree)),Et(F),Le&&Lt(F)},ee._tr_tally=function(F,oe,Re){return F.pending_buf[F.d_buf+2*F.last_lit]=oe>>>8&255,F.pending_buf[F.d_buf+2*F.last_lit+1]=255&oe,F.pending_buf[F.l_buf+F.last_lit]=255&Re,F.last_lit++,0===oe?F.dyn_ltree[2*Re]++:(F.matches++,oe--,F.dyn_ltree[2*(E[Re]+j+1)]++,F.dyn_dtree[2*_e(oe)]++),F.last_lit===F.lit_bufsize-1},ee._tr_align=function(F){var oe;Ge(F,2,3),Ke(F,re,dt),16===(oe=F).bi_valid?(ot(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}},{"../utils/common":41}],53:[function(J,k,ee){"use strict";k.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(J,k,ee){(function(p){!function(L,R){"use strict";if(!L.setImmediate){var V,G,ae,j,te=1,B={},W=!1,A=L.document,N=Object.getPrototypeOf&&Object.getPrototypeOf(L);N=N&&N.setTimeout?N:L,V="[object process]"==={}.toString.call(L.process)?function(he){process.nextTick(function(){K(he)})}:function(){if(L.postMessage&&!L.importScripts){var he=!0,ue=L.onmessage;return L.onmessage=function(){he=!1},L.postMessage("","*"),L.onmessage=ue,he}}()?(j="setImmediate$"+Math.random()+"$",L.addEventListener?L.addEventListener("message",re,!1):L.attachEvent("onmessage",re),function(he){L.postMessage(j+he,"*")}):L.MessageChannel?((ae=new MessageChannel).port1.onmessage=function(he){K(he.data)},function(he){ae.port2.postMessage(he)}):A&&"onreadystatechange"in A.createElement("script")?(G=A.documentElement,function(he){var ue=A.createElement("script");ue.onreadystatechange=function(){K(he),ue.onreadystatechange=null,G.removeChild(ue),ue=null},G.appendChild(ue)}):function(he){setTimeout(K,0,he)},N.setImmediate=function(he){"function"!=typeof he&&(he=new Function(""+he));for(var ue=new Array(arguments.length-1),De=0;De<ue.length;De++)ue[De]=arguments[De+1];return B[te]={callback:he,args:ue},V(te),te++},N.clearImmediate=M}function M(he){delete B[he]}function K(he){if(W)setTimeout(K,0,he);else{var ue=B[he];if(ue){W=!0;try{!function(De){var xe=De.callback,Me=De.args;switch(Me.length){case 0:xe();break;case 1:xe(Me[0]);break;case 2:xe(Me[0],Me[1]);break;case 3:xe(Me[0],Me[1],Me[2]);break;default:xe.apply(R,Me)}}(ue)}finally{M(he),W=!1}}}}function re(he){he.source===L&&"string"==typeof he.data&&0===he.data.indexOf(j)&&K(+he.data.slice(j.length))}}(typeof self>"u"?void 0===p?this:p:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},7489:function(Qn,J,k){var ee;Qn=k.nmd(Qn),function(){var p,R=200,G="Expected a function",j="__lodash_hash_undefined__",B="__lodash_placeholder__",W=1,A=2,N=4,M=1,K=2,re=1,he=2,ue=4,De=8,xe=16,Me=32,ge=64,Pe=128,dt=256,X=512,Be=800,Ct=16,ut=1/0,me=9007199254740991,_e=17976931348623157e292,ot=NaN,Ge=4294967295,Ke=Ge-1,Si=Ge>>>1,zi=[["ary",Pe],["bind",re],["bindKey",he],["curry",De],["curryRight",xe],["flip",X],["partial",Me],["partialRight",ge],["rearg",dt]],Et="[object Arguments]",Lt="[object Array]",Bi="[object AsyncFunction]",li="[object Boolean]",tr="[object Date]",$r="[object DOMException]",x="[object Error]",Te="[object Function]",ve="[object GeneratorFunction]",z="[object Map]",F="[object Number]",oe="[object Null]",Re="[object Object]",Le="[object Promise]",ce="[object Proxy]",Ne="[object RegExp]",Ue="[object Set]",He="[object String]",at="[object Symbol]",ni="[object Undefined]",Dt="[object WeakMap]",yn="[object ArrayBuffer]",Gi="[object DataView]",Jn="[object Float32Array]",vi="[object Float64Array]",ka="[object Int8Array]",gs="[object Int16Array]",Wr="[object Int32Array]",ho="[object Uint8Array]",Rl="[object Uint8ClampedArray]",Ol="[object Uint16Array]",Bl="[object Uint32Array]",mu=/\b__p \+= '';/g,ms=/\b(__p \+=) '' \+/g,co=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gm=/&(?:amp|lt|gt|quot|#39);/g,mm=/[&<>"']/g,cw=RegExp(gm.source),pw=RegExp(mm.source),fw=/<%-([\s\S]+?)%>/g,_w=/<%([\s\S]+?)%>/g,vm=/<%=([\s\S]+?)%>/g,gw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mw=/^\w*$/,Cm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ea=/[\\^$.*+?()[\]{}|]/g,bm=RegExp(ea.source),ir=/^\s+/,vu=/\s/,rp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ym=/\{\n\/\* \[wrapped with (.+)\] \*/,wm=/,? & /,vw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cw=/[()=,{}\[\]\/\s]/,xm=/\\(\\)?/g,bw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,po=/\w*$/,np=/^[-+]0x[0-9a-f]+$/i,ap=/^0b[01]+$/i,kl=/^\[object .+?Constructor\]$/,Cu=/^0o[0-7]+$/i,Sm=/^(?:0|[1-9]\d*)$/,Em=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ml=/($^)/,sp=/['\n\r\u2028\u2029\\]/g,fo="\\ud800-\\udfff",ta="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",op="\\u2700-\\u27bf",Ll="a-z\\xdf-\\xf6\\xf8-\\xff",up="A-Z\\xc0-\\xd6\\xd8-\\xde",hp="\\ufe0e\\ufe0f",cp="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xu="["+fo+"]",pp="["+cp+"]",Pl="["+ta+"]",fp="\\d+",Am="["+op+"]",Rm="["+Ll+"]",Om="[^"+fo+cp+fp+op+Ll+up+"]",Su="\\ud83c[\\udffb-\\udfff]",_p="[^"+fo+"]",gp="(?:\\ud83c[\\udde6-\\uddff]){2}",Eu="[\\ud800-\\udbff][\\udc00-\\udfff]",vs="["+up+"]",mp="(?:"+Rm+"|"+Om+")",ia="(?:"+vs+"|"+Om+")",Tu="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_o="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fl="(?:"+Pl+"|"+Su+")?",Kr="["+hp+"]?",vp=Kr+Fl+"(?:\\u200d(?:"+[_p,gp,Eu].join("|")+")"+Kr+Fl+")*",Lm="(?:"+[Am,gp,Eu].join("|")+")"+vp,Pm="(?:"+[_p+Pl+"?",Pl,gp,Eu,xu].join("|")+")",Fm=RegExp("['\u2019]","g"),Vm=RegExp(Pl,"g"),Du=RegExp(Su+"(?="+Su+")|"+Pm+vp,"g"),Nm=RegExp([vs+"?"+Rm+"+"+Tu+"(?="+[pp,vs,"$"].join("|")+")",ia+"+"+_o+"(?="+[pp,vs+mp,"$"].join("|")+")",vs+"?"+mp+"+"+Tu,vs+"+"+_o,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fp,Lm].join("|"),"g"),zm=RegExp("[\\u200d"+fo+ta+hp+"]"),Vl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Cp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bp=-1,di={};di[Jn]=di[vi]=di[ka]=di[gs]=di[Wr]=di[ho]=di[Rl]=di[Ol]=di[Bl]=!0,di[Et]=di[Lt]=di[yn]=di[li]=di[Gi]=di[tr]=di[x]=di[Te]=di[z]=di[F]=di[Re]=di[Ne]=di[Ue]=di[He]=di[Dt]=!1;var ui={};ui[Et]=ui[Lt]=ui[yn]=ui[Gi]=ui[li]=ui[tr]=ui[Jn]=ui[vi]=ui[ka]=ui[gs]=ui[Wr]=ui[z]=ui[F]=ui[Re]=ui[Ne]=ui[Ue]=ui[He]=ui[at]=ui[ho]=ui[Rl]=ui[Ol]=ui[Bl]=!0,ui[x]=ui[Te]=ui[Dt]=!1;var yw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wm=parseFloat,Km=parseInt,yp="object"==typeof global&&global&&global.Object===Object&&global,wp="object"==typeof self&&self&&self.Object===Object&&self,Pi=yp||wp||Function("return this")(),xp=J&&!J.nodeType&&J,Cs=xp&&Qn&&!Qn.nodeType&&Qn,Au=Cs&&Cs.exports===xp,rr=Au&&yp.process,Rr=function(){try{return Cs&&Cs.require&&Cs.require("util").types||rr&&rr.binding&&rr.binding("util")}catch{}}(),yi=Rr&&Rr.isArrayBuffer,pr=Rr&&Rr.isDate,Sp=Rr&&Rr.isMap,Ru=Rr&&Rr.isRegExp,Ep=Rr&&Rr.isSet,Ip=Rr&&Rr.isTypedArray;function Gr(ie,Ce,pe){switch(pe.length){case 0:return ie.call(Ce);case 1:return ie.call(Ce,pe[0]);case 2:return ie.call(Ce,pe[0],pe[1]);case 3:return ie.call(Ce,pe[0],pe[1],pe[2])}return ie.apply(Ce,pe)}function Tp(ie,Ce,pe,Qe){for(var pt=-1,Ft=null==ie?0:ie.length;++pt<Ft;){var ki=ie[pt];Ce(Qe,ki,pe(ki),ie)}return Qe}function Ur(ie,Ce){for(var pe=-1,Qe=null==ie?0:ie.length;++pe<Qe&&!1!==Ce(ie[pe],pe,ie););return ie}function ww(ie,Ce){for(var pe=null==ie?0:ie.length;pe--&&!1!==Ce(ie[pe],pe,ie););return ie}function Dp(ie,Ce){for(var pe=-1,Qe=null==ie?0:ie.length;++pe<Qe;)if(!Ce(ie[pe],pe,ie))return!1;return!0}function ra(ie,Ce){for(var pe=-1,Qe=null==ie?0:ie.length,pt=0,Ft=[];++pe<Qe;){var ki=ie[pe];Ce(ki,pe,ie)&&(Ft[pt++]=ki)}return Ft}function go(ie,Ce){return!(null==ie||!ie.length)&&La(ie,Ce,0)>-1}function Ou(ie,Ce,pe){for(var Qe=-1,pt=null==ie?0:ie.length;++Qe<pt;)if(pe(Ce,ie[Qe]))return!0;return!1}function Xt(ie,Ce){for(var pe=-1,Qe=null==ie?0:ie.length,pt=Array(Qe);++pe<Qe;)pt[pe]=Ce(ie[pe],pe,ie);return pt}function Ht(ie,Ce){for(var pe=-1,Qe=Ce.length,pt=ie.length;++pe<Qe;)ie[pt+pe]=Ce[pe];return ie}function fr(ie,Ce,pe,Qe){var pt=-1,Ft=null==ie?0:ie.length;for(Qe&&Ft&&(pe=ie[++pt]);++pt<Ft;)pe=Ce(pe,ie[pt],pt,ie);return pe}function nr(ie,Ce,pe,Qe){var pt=null==ie?0:ie.length;for(Qe&&pt&&(pe=ie[--pt]);pt--;)pe=Ce(pe,ie[pt],pt,ie);return pe}function Bt(ie,Ce){for(var pe=-1,Qe=null==ie?0:ie.length;++pe<Qe;)if(Ce(ie[pe],pe,ie))return!0;return!1}var Bu=Nl("length");function Ma(ie,Ce,pe){var Qe;return pe(ie,function(pt,Ft,ki){if(Ce(pt,Ft,ki))return Qe=Ft,!1}),Qe}function hn(ie,Ce,pe,Qe){for(var pt=ie.length,Ft=pe+(Qe?1:-1);Qe?Ft--:++Ft<pt;)if(Ce(ie[Ft],Ft,ie))return Ft;return-1}function La(ie,Ce,pe){return Ce==Ce?function Zt(ie,Ce,pe){for(var Qe=pe-1,pt=ie.length;++Qe<pt;)if(ie[Qe]===Ce)return Qe;return-1}(ie,Ce,pe):hn(ie,Pa,pe)}function mo(ie,Ce,pe,Qe){for(var pt=pe-1,Ft=ie.length;++pt<Ft;)if(Qe(ie[pt],Ce))return pt;return-1}function Pa(ie){return ie!=ie}function bs(ie,Ce){var pe=null==ie?0:ie.length;return pe?Hl(ie,Ce)/pe:ot}function Nl(ie){return function(Ce){return null==Ce?p:Ce[ie]}}function zl(ie){return function(Ce){return null==ie?p:ie[Ce]}}function Mu(ie,Ce,pe,Qe,pt){return pt(ie,function(Ft,ki,Jt){pe=Qe?(Qe=!1,Ft):Ce(pe,Ft,ki,Jt)}),pe}function Hl(ie,Ce){for(var pe,Qe=-1,pt=ie.length;++Qe<pt;){var Ft=Ce(ie[Qe]);Ft!==p&&(pe=pe===p?Ft:pe+Ft)}return pe}function Qt(ie,Ce){for(var pe=-1,Qe=Array(ie);++pe<ie;)Qe[pe]=Ce(pe);return Qe}function Hi(ie){return ie&&ie.slice(0,Lu(ie)+1).replace(ir,"")}function Zi(ie){return function(Ce){return ie(Ce)}}function hi(ie,Ce){return Xt(Ce,function(pe){return ie[pe]})}function Ui(ie,Ce){return ie.has(Ce)}function na(ie,Ce){for(var pe=-1,Qe=ie.length;++pe<Qe&&La(Ce,ie[pe],0)>-1;);return pe}function Fa(ie,Ce){for(var pe=ie.length;pe--&&La(Ce,ie[pe],0)>-1;);return pe}var Zl=zl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Op=zl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Va(ie){return"\\"+yw[ie]}function cn(ie){return zm.test(ie)}function Or(ie){var Ce=-1,pe=Array(ie.size);return ie.forEach(function(Qe,pt){pe[++Ce]=[pt,Qe]}),pe}function Br(ie,Ce){return function(pe){return ie(Ce(pe))}}function wn(ie,Ce){for(var pe=-1,Qe=ie.length,pt=0,Ft=[];++pe<Qe;){var ki=ie[pe];(ki===Ce||ki===B)&&(ie[pe]=B,Ft[pt++]=pe)}return Ft}function Co(ie){var Ce=-1,pe=Array(ie.size);return ie.forEach(function(Qe){pe[++Ce]=Qe}),pe}function Di(ie){return cn(ie)?function Wl(ie){for(var Ce=Du.lastIndex=0;Du.test(ie);)++Ce;return Ce}(ie):Bu(ie)}function kr(ie){return cn(ie)?function Gm(ie){return ie.match(Du)||[]}(ie):function Yr(ie){return ie.split("")}(ie)}function Lu(ie){for(var Ce=ie.length;Ce--&&vu.test(ie.charAt(Ce)););return Ce}var Pu=zl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ws=function ie(Ce){var l,pe=(Ce=null==Ce?Pi:ws.defaults(Pi.Object(),Ce,ws.pick(Pi,Cp))).Array,Qe=Ce.Date,pt=Ce.Error,Ft=Ce.Function,ki=Ce.Math,Jt=Ce.Object,bo=Ce.RegExp,Fu=Ce.String,Mr=Ce.TypeError,Kl=pe.prototype,Na=Jt.prototype,za=Ce["__core-js_shared__"],xs=Ft.prototype.toString,Wt=Na.hasOwnProperty,Fi=0,Ss=(l=/[^.]+$/.exec(za&&za.keys&&za.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",Ha=Na.toString,Ym=xs.call(Jt),_r=Pi._,Bp=bo("^"+xs.call(Wt).replace(ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gl=Au?Ce.Buffer:p,aa=Ce.Symbol,Es=Ce.Uint8Array,kp=Gl?Gl.allocUnsafe:p,Ul=Br(Jt.getPrototypeOf,Jt),Nu=Jt.create,zu=Na.propertyIsEnumerable,Yl=Kl.splice,Mp=aa?aa.isConcatSpreadable:p,Is=aa?aa.iterator:p,Vn=aa?aa.toStringTag:p,Ts=function(){try{var l=ja(Jt,"defineProperty");return l({},"",{}),l}catch{}}(),Lp=Ce.clearTimeout!==Pi.clearTimeout&&Ce.clearTimeout,Hu=Qe&&Qe.now!==Pi.Date.now&&Qe.now,Za=Ce.setTimeout!==Pi.setTimeout&&Ce.setTimeout,ql=ki.ceil,jl=ki.floor,yo=Jt.getOwnPropertySymbols,Zu=Gl?Gl.isBuffer:p,wo=Ce.isFinite,Pp=Kl.join,Fp=Br(Jt.keys,Jt),Ai=ki.max,$i=ki.min,Vp=Qe.now,$u=Ce.parseInt,Wu=ki.random,qm=Kl.reverse,Ku=ja(Ce,"DataView"),xo=ja(Ce,"Map"),So=ja(Ce,"Promise"),Ds=ja(Ce,"Set"),As=ja(Ce,"WeakMap"),Eo=ja(Jt,"create"),Io=As&&new As,Rs={},jm=Us(Ku),Os=Us(xo),Xl=Us(So),Np=Us(Ds),Ql=Us(As),Gt=aa?aa.prototype:p,Bs=Gt?Gt.valueOf:p,Jl=Gt?Gt.toString:p;function T(l){if(bi(l)&&!wt(l)&&!(l instanceof Rt)){if(l instanceof Ti)return l;if(Wt.call(l,"__wrapped__"))return Sv(l)}return new Ti(l)}var sa=function(){function l(){}return function(h){if(!si(h))return{};if(Nu)return Nu(h);l.prototype=h;var _=new l;return l.prototype=p,_}}();function To(){}function Ti(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=p}function Rt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function Nn(l){var h=-1,_=null==l?0:l.length;for(this.clear();++h<_;){var b=l[h];this.set(b[0],b[1])}}function xn(l){var h=-1,_=null==l?0:l.length;for(this.clear();++h<_;){var b=l[h];this.set(b[0],b[1])}}function Sn(l){var h=-1,_=null==l?0:l.length;for(this.clear();++h<_;){var b=l[h];this.set(b[0],b[1])}}function la(l){var h=-1,_=null==l?0:l.length;for(this.__data__=new Sn;++h<_;)this.add(l[h])}function pn(l){var h=this.__data__=new xn(l);this.size=h.size}function Up(l,h){var _=wt(l),b=!_&&Qa(l),S=!_&&!b&&va(l),D=!_&&!b&&!S&&ba(l),H=_||b||S||D,q=H?Qt(l.length,Fu):[],de=q.length;for(var Ae in l)(h||Wt.call(l,Ae))&&(!H||!("length"==Ae||S&&("offset"==Ae||"parent"==Ae)||D&&("buffer"==Ae||"byteLength"==Ae||"byteOffset"==Ae)||Un(Ae,de)))&&q.push(Ae);return q}function Qu(l){var h=l.length;return h?l[Vo(0,h-1)]:p}function Yp(l,h){return xd(ji(l),Xr(h,0,l.length))}function Ju(l){return xd(ji(l))}function Oo(l,h,_){(_!==p&&!rn(l[h],_)||_===p&&!(h in l))&&Vt(l,h,_)}function zn(l,h,_){var b=l[h];(!Wt.call(l,h)||!rn(b,_)||_===p&&!(h in l))&&Vt(l,h,_)}function da(l,h){for(var _=l.length;_--;)if(rn(l[_][0],h))return _;return-1}function Bo(l,h,_,b){return Hn(l,function(S,D,H){h(b,S,_(S),H)}),b}function td(l,h){return l&&or(h,Ri(h),l)}function Vt(l,h,_){"__proto__"==h&&Ts?Ts(l,h,{configurable:!0,enumerable:!0,value:_,writable:!0}):l[h]=_}function Wa(l,h){for(var _=-1,b=h.length,S=pe(b),D=null==l;++_<b;)S[_]=D?p:Hh(l,h[_]);return S}function Xr(l,h,_){return l==l&&(_!==p&&(l=l<=_?l:_),h!==p&&(l=l>=h?l:h)),l}function Yi(l,h,_,b,S,D){var H,q=h&W,de=h&A,Ae=h&N;if(_&&(H=S?_(l,b,S,D):_(l)),H!==p)return H;if(!si(l))return l;var Ee=wt(l);if(Ee){if(H=function gv(l){var h=l.length,_=new l.constructor(h);return h&&"string"==typeof l[0]&&Wt.call(l,"index")&&(_.index=l.index,_.input=l.input),_}(l),!q)return ji(l,H)}else{var ke=Xi(l),Ye=ke==Te||ke==ve;if(va(l))return qa(l,q);if(ke==Re||ke==Et||Ye&&!S){if(H=de||Ye?{}:Sf(l),!q)return de?function sv(l,h){return or(l,wf(l),h)}(l,function ua(l,h){return l&&or(h,yr(h),l)}(H,l)):function av(l,h){return or(l,Ch(l),h)}(l,td(H,l))}else{if(!ui[ke])return S?l:{};H=function mv(l,h,_){var b=l.constructor;switch(h){case yn:return Kn(l);case li:case tr:return new b(+l);case Gi:return function hf(l,h){var _=h?Kn(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.byteLength)}(l,_);case Jn:case vi:case ka:case gs:case Wr:case ho:case Rl:case Ol:case Bl:return pf(l,_);case z:return new b;case F:case He:return new b(l);case Ne:return function cf(l){var h=new l.constructor(l.source,po.exec(l));return h.lastIndex=l.lastIndex,h}(l);case Ue:return new b;case at:return function hh(l){return Bs?Jt(Bs.call(l)):{}}(l)}}(l,ke,q)}}D||(D=new pn);var it=D.get(l);if(it)return it;D.set(l,H),h_(l)?l.forEach(function(lt){H.add(Yi(lt,h,_,lt,l,D))}):Fh(l)&&l.forEach(function(lt,xt){H.set(xt,Yi(lt,h,_,xt,l,D))});var It=Ee?p:(Ae?de?$s:mh:de?yr:Ri)(l);return Ur(It||l,function(lt,xt){It&&(lt=l[xt=lt]),zn(H,xt,Yi(lt,h,_,xt,l,D))}),H}function En(l,h,_){var b=_.length;if(null==l)return!b;for(l=Jt(l);b--;){var S=_[b],H=l[S];if(H===p&&!(S in l)||!(0,h[S])(H))return!1}return!0}function qp(l,h,_){if("function"!=typeof l)throw new Mr(G);return Ko(function(){l.apply(p,_)},h)}function Ka(l,h,_,b){var S=-1,D=go,H=!0,q=l.length,de=[],Ae=h.length;if(!q)return de;_&&(h=Xt(h,Zi(_))),b?(D=Ou,H=!1):h.length>=R&&(D=Ui,H=!1,h=new la(h));e:for(;++S<q;){var Ee=l[S],ke=null==_?Ee:_(Ee);if(Ee=b||0!==Ee?Ee:0,H&&ke==ke){for(var Ye=Ae;Ye--;)if(h[Ye]===ke)continue e;de.push(Ee)}else D(h,ke,b)||de.push(Ee)}return de}T.templateSettings={escape:fw,evaluate:_w,interpolate:vm,variable:"",imports:{_:T}},(T.prototype=To.prototype).constructor=T,(Ti.prototype=sa(To.prototype)).constructor=Ti,(Rt.prototype=sa(To.prototype)).constructor=Rt,Nn.prototype.clear=function oa(){this.__data__=Eo?Eo(null):{},this.size=0},Nn.prototype.delete=function Do(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h},Nn.prototype.get=function Hp(l){var h=this.__data__;if(Eo){var _=h[l];return _===j?p:_}return Wt.call(h,l)?h[l]:p},Nn.prototype.has=function Gu(l){var h=this.__data__;return Eo?h[l]!==p:Wt.call(h,l)},Nn.prototype.set=function ed(l,h){var _=this.__data__;return this.size+=this.has(l)?0:1,_[l]=Eo&&h===p?j:h,this},xn.prototype.clear=function Zp(){this.__data__=[],this.size=0},xn.prototype.delete=function $a(l){var h=this.__data__,_=da(h,l);return!(_<0||(_==h.length-1?h.pop():Yl.call(h,_,1),--this.size,0))},xn.prototype.get=function $p(l){var h=this.__data__,_=da(h,l);return _<0?p:h[_][1]},xn.prototype.has=function Wp(l){return da(this.__data__,l)>-1},xn.prototype.set=function Uu(l,h){var _=this.__data__,b=da(_,l);return b<0?(++this.size,_.push([l,h])):_[b][1]=h,this},Sn.prototype.clear=function Yu(){this.size=0,this.__data__={hash:new Nn,map:new(xo||xn),string:new Nn}},Sn.prototype.delete=function qu(l){var h=Ks(this,l).delete(l);return this.size-=h?1:0,h},Sn.prototype.get=function ju(l){return Ks(this,l).get(l)},Sn.prototype.has=function Xu(l){return Ks(this,l).has(l)},Sn.prototype.set=function Kp(l,h){var _=Ks(this,l),b=_.size;return _.set(l,h),this.size+=_.size==b?0:1,this},la.prototype.add=la.prototype.push=function Gp(l){return this.__data__.set(l,j),this},la.prototype.has=function Qm(l){return this.__data__.has(l)},pn.prototype.clear=function Jm(){this.__data__=new xn,this.size=0},pn.prototype.delete=function ev(l){var h=this.__data__,_=h.delete(l);return this.size=h.size,_},pn.prototype.get=function Ao(l){return this.__data__.get(l)},pn.prototype.has=function Ro(l){return this.__data__.has(l)},pn.prototype.set=function tv(l,h){var _=this.__data__;if(_ instanceof xn){var b=_.__data__;if(!xo||b.length<R-1)return b.push([l,h]),this.size=++_.size,this;_=this.__data__=new Sn(b)}return _.set(l,h),this.size=_.size,this};var Hn=ch(In),id=ch(eh,!0);function jp(l,h){var _=!0;return Hn(l,function(b,S,D){return _=!!h(b,S,D)}),_}function gr(l,h,_){for(var b=-1,S=l.length;++b<S;){var D=l[b],H=h(D);if(null!=H&&(q===p?H==H&&!ur(H):_(H,q)))var q=H,de=D}return de}function rd(l,h){var _=[];return Hn(l,function(b,S,D){h(b,S,D)&&_.push(b)}),_}function Vi(l,h,_,b,S){var D=-1,H=l.length;for(_||(_=Cv),S||(S=[]);++D<H;){var q=l[D];h>0&&_(q)?h>1?Vi(q,h-1,_,b,S):Ht(S,q):b||(S[S.length]=q)}return S}var ko=_f(),Qp=_f(!0);function In(l,h){return l&&ko(l,h,Ri)}function eh(l,h){return l&&Qp(l,h,Ri)}function Mo(l,h){return ra(h,function(_){return Bn(l[_])})}function ha(l,h){for(var _=0,b=(h=Wn(h,l)).length;null!=l&&_<b;)l=l[Rn(h[_++])];return _&&_==b?l:p}function Jp(l,h,_){var b=h(l);return wt(l)?b:Ht(b,_(l))}function sr(l){return null==l?l===p?ni:oe:Vn&&Vn in Jt(l)?function pv(l){var h=Wt.call(l,Vn),_=l[Vn];try{l[Vn]=p;var b=!0}catch{}var S=Ha.call(l);return b&&(h?l[Vn]=_:delete l[Vn]),S}(l):function Ef(l){return Ha.call(l)}(l)}function th(l,h){return l>h}function iv(l,h){return null!=l&&Wt.call(l,h)}function rv(l,h){return null!=l&&h in Jt(l)}function Lo(l,h,_){for(var b=_?Ou:go,S=l[0].length,D=l.length,H=D,q=pe(D),de=1/0,Ae=[];H--;){var Ee=l[H];H&&h&&(Ee=Xt(Ee,Zi(h))),de=$i(Ee.length,de),q[H]=!_&&(h||S>=120&&Ee.length>=120)?new la(H&&Ee):p}Ee=l[0];var ke=-1,Ye=q[0];e:for(;++ke<S&&Ae.length<de;){var it=Ee[ke],ft=h?h(it):it;if(it=_||0!==it?it:0,!(Ye?Ui(Ye,ft):b(Ae,ft,_))){for(H=D;--H;){var It=q[H];if(!(It?Ui(It,ft):b(l[H],ft,_)))continue e}Ye&&Ye.push(ft),Ae.push(it)}}return Ae}function Ci(l,h,_){var b=null==(l=yd(l,h=Wn(h,l)))?l:l[Rn(Pr(h))];return null==b?p:Gr(b,l,_)}function Zn(l){return bi(l)&&sr(l)==Et}function $n(l,h,_,b,S){return l===h||(null==l||null==h||!bi(l)&&!bi(h)?l!=l&&h!=h:function rf(l,h,_,b,S,D){var H=wt(l),q=wt(h),de=H?Lt:Xi(l),Ae=q?Lt:Xi(h),Ee=(de=de==Et?Re:de)==Re,ke=(Ae=Ae==Et?Re:Ae)==Re,Ye=de==Ae;if(Ye&&va(l)){if(!va(h))return!1;H=!0,Ee=!1}if(Ye&&!Ee)return D||(D=new pn),H||ba(l)?bf(l,h,_,b,S,D):function cv(l,h,_,b,S,D,H){switch(_){case Gi:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case yn:return!(l.byteLength!=h.byteLength||!D(new Es(l),new Es(h)));case li:case tr:case F:return rn(+l,+h);case x:return l.name==h.name&&l.message==h.message;case Ne:case He:return l==h+"";case z:var q=Or;case Ue:if(q||(q=Co),l.size!=h.size&&!(b&M))return!1;var Ae=H.get(l);if(Ae)return Ae==h;b|=K,H.set(l,h);var Ee=bf(q(l),q(h),b,S,D,H);return H.delete(l),Ee;case at:if(Bs)return Bs.call(l)==Bs.call(h)}return!1}(l,h,de,_,b,S,D);if(!(_&M)){var it=Ee&&Wt.call(l,"__wrapped__"),ft=ke&&Wt.call(h,"__wrapped__");if(it||ft){var It=it?l.value():l,lt=ft?h.value():h;return D||(D=new pn),S(It,lt,_,b,D)}}return!!Ye&&(D||(D=new pn),function yf(l,h,_,b,S,D){var H=_&M,q=mh(l),de=q.length;if(de!=mh(h).length&&!H)return!1;for(var ke=de;ke--;){var Ye=q[ke];if(!(H?Ye in h:Wt.call(h,Ye)))return!1}var it=D.get(l),ft=D.get(h);if(it&&ft)return it==h&&ft==l;var It=!0;D.set(l,h),D.set(h,l);for(var lt=H;++ke<de;){var xt=l[Ye=q[ke]],At=h[Ye];if(b)var xr=H?b(At,xt,Ye,h,l,D):b(xt,At,Ye,l,h,D);if(!(xr===p?xt===At||S(xt,At,_,b,D):xr)){It=!1;break}lt||(lt="constructor"==Ye)}if(It&&!lt){var Qi=l.constructor,Nr=h.constructor;Qi!=Nr&&"constructor"in l&&"constructor"in h&&!("function"==typeof Qi&&Qi instanceof Qi&&"function"==typeof Nr&&Nr instanceof Nr)&&(It=!1)}return D.delete(l),D.delete(h),It}(l,h,_,b,S,D))}(l,h,_,b,$n,S))}function ih(l,h,_,b){var S=_.length,D=S,H=!b;if(null==l)return!D;for(l=Jt(l);S--;){var q=_[S];if(H&&q[2]?q[1]!==l[q[0]]:!(q[0]in l))return!1}for(;++S<D;){var de=(q=_[S])[0],Ae=l[de],Ee=q[1];if(H&&q[2]){if(Ae===p&&!(de in l))return!1}else{var ke=new pn;if(b)var Ye=b(Ae,Ee,de,l,h,ke);if(!(Ye===p?$n(Ee,Ae,M|K,b,ke):Ye))return!1}}return!0}function ad(l){return!(!si(l)||function yv(l){return!!Ss&&Ss in l}(l))&&(Bn(l)?Bp:kl).test(Us(l))}function Ls(l){return"function"==typeof l?l:null==l?wr:"object"==typeof l?wt(l)?ah(l[0],l[1]):nh(l):O_(l)}function Qr(l){if(!bd(l))return Fp(l);var h=[];for(var _ in Jt(l))Wt.call(l,_)&&"constructor"!=_&&h.push(_);return h}function sd(l,h){return l<h}function Ps(l,h){var _=-1,b=br(l)?pe(l.length):[];return Hn(l,function(S,D,H){b[++_]=h(S,D,H)}),b}function nh(l){var h=vh(l);return 1==h.length&&h[0][2]?xv(h[0][0],h[0][1]):function(_){return _===l||ih(_,l,h)}}function ah(l,h){return bh(l)&&wv(h)?xv(Rn(l),h):function(_){var b=Hh(_,l);return b===p&&b===h?Xn(_,l):$n(h,b,M|K)}}function Ga(l,h,_,b,S){l!==h&&ko(h,function(D,H){if(S||(S=new pn),si(D))!function od(l,h,_,b,S,D,H){var q=xh(l,_),de=xh(h,_),Ae=H.get(de);if(Ae)Oo(l,_,Ae);else{var Ee=D?D(q,de,_+"",l,h,H):p,ke=Ee===p;if(ke){var Ye=wt(de),it=!Ye&&va(de),ft=!Ye&&!it&&ba(de);Ee=de,Ye||it||ft?wt(q)?Ee=q:Ei(q)?Ee=ji(q):it?(ke=!1,Ee=qa(de,!0)):ft?(ke=!1,Ee=pf(de,!0)):Ee=[]:el(de)||Qa(de)?(Ee=q,Qa(q)?Ee=p_(q):(!si(q)||Bn(q))&&(Ee=Sf(de))):ke=!1}ke&&(H.set(de,Ee),S(Ee,de,b,D,H),H.delete(de)),Oo(l,_,Ee)}}(l,h,H,_,Ga,b,S);else{var q=b?b(xh(l,H),D,H+"",l,h,S):p;q===p&&(q=D),Oo(l,H,q)}},yr)}function qi(l,h){var _=l.length;if(_)return Un(h+=h<0?_:0,_)?l[h]:p}function Fs(l,h,_){h=h.length?Xt(h,function(D){return wt(D)?function(H){return ha(H,1===D.length?D[0]:D)}:D}):[wr];var b=-1;return h=Xt(h,Zi(ht())),function ar(ie,Ce){var pe=ie.length;for(ie.sort(Ce);pe--;)ie[pe]=ie[pe].value;return ie}(Ps(l,function(D,H,q){return{criteria:Xt(h,function(Ae){return Ae(D)}),index:++b,value:D}}),function(D,H){return function Mi(l,h,_){for(var b=-1,S=l.criteria,D=h.criteria,H=S.length,q=_.length;++b<H;){var de=ff(S[b],D[b]);if(de)return b>=q?de:de*("desc"==_[b]?-1:1)}return l.index-h.index}(D,H,_)})}function Fo(l,h,_){for(var b=-1,S=h.length,D={};++b<S;){var H=h[b],q=ha(l,H);_(q,H)&&zs(D,Wn(H,l),q)}return D}function Vs(l,h,_,b){var S=b?mo:La,D=-1,H=h.length,q=l;for(l===h&&(h=ji(h)),_&&(q=Xt(l,Zi(_)));++D<H;)for(var de=0,Ae=h[D],Ee=_?_(Ae):Ae;(de=S(q,Ee,de,b))>-1;)q!==l&&Yl.call(q,de,1),Yl.call(l,de,1);return l}function ld(l,h){for(var _=l?h.length:0,b=_-1;_--;){var S=h[_];if(_==b||S!==D){var D=S;Un(S)?Yl.call(l,S,1):fa(l,S)}}return l}function Vo(l,h){return l+jl(Wu()*(h-l+1))}function Ns(l,h){var _="";if(!l||h<1||h>me)return _;do{h%2&&(_+=l),(h=jl(h/2))&&(l+=l)}while(h);return _}function bt(l,h){return wd(ga(l,h,wr),l+"")}function Wi(l){return Qu(Vr(l))}function dd(l,h){var _=Vr(l);return xd(_,Xr(h,0,_.length))}function zs(l,h,_,b){if(!si(l))return l;for(var S=-1,D=(h=Wn(h,l)).length,H=D-1,q=l;null!=q&&++S<D;){var de=Rn(h[S]),Ae=_;if("__proto__"===de||"constructor"===de||"prototype"===de)return l;if(S!=H){var Ee=q[de];(Ae=b?b(Ee,de,q):p)===p&&(Ae=si(Ee)?Ee:Un(h[S+1])?[]:{})}zn(q,de,Ae),q=q[de]}return l}var sh=Io?function(l,h){return Io.set(l,h),l}:wr,No=Ts?function(l,h){return Ts(l,"toString",{configurable:!0,enumerable:!1,value:Zd(h),writable:!0})}:wr;function lf(l){return xd(Vr(l))}function mr(l,h,_){var b=-1,S=l.length;h<0&&(h=-h>S?0:S+h),(_=_>S?S:_)<0&&(_+=S),S=h>_?0:_-h>>>0,h>>>=0;for(var D=pe(S);++b<S;)D[b]=l[b+h];return D}function oh(l,h){var _;return Hn(l,function(b,S,D){return!(_=h(b,S,D))}),!!_}function zo(l,h,_){var b=0,S=null==l?b:l.length;if("number"==typeof h&&h==h&&S<=Si){for(;b<S;){var D=b+S>>>1,H=l[D];null!==H&&!ur(H)&&(_?H<=h:H<h)?b=D+1:S=D}return S}return ud(l,h,wr,_)}function ud(l,h,_,b){var S=0,D=null==l?0:l.length;if(0===D)return 0;for(var H=(h=_(h))!=h,q=null===h,de=ur(h),Ae=h===p;S<D;){var Ee=jl((S+D)/2),ke=_(l[Ee]),Ye=ke!==p,it=null===ke,ft=ke==ke,It=ur(ke);if(H)var lt=b||ft;else lt=Ae?ft&&(b||Ye):q?ft&&Ye&&(b||!it):de?ft&&Ye&&!it&&(b||!It):!it&&!It&&(b?ke<=h:ke<h);lt?S=Ee+1:D=Ee}return $i(D,Ke)}function df(l,h){for(var _=-1,b=l.length,S=0,D=[];++_<b;){var H=l[_],q=h?h(H):H;if(!_||!rn(q,de)){var de=q;D[S++]=0===H?0:H}}return D}function lh(l){return"number"==typeof l?l:ur(l)?ot:+l}function ei(l){if("string"==typeof l)return l;if(wt(l))return Xt(l,ei)+"";if(ur(l))return Jl?Jl.call(l):"";var h=l+"";return"0"==h&&1/l==-ut?"-0":h}function Jr(l,h,_){var b=-1,S=go,D=l.length,H=!0,q=[],de=q;if(_)H=!1,S=Ou;else if(D>=R){var Ae=h?null:hv(l);if(Ae)return Co(Ae);H=!1,S=Ui,de=new la}else de=h?[]:q;e:for(;++b<D;){var Ee=l[b],ke=h?h(Ee):Ee;if(Ee=_||0!==Ee?Ee:0,H&&ke==ke){for(var Ye=de.length;Ye--;)if(de[Ye]===ke)continue e;h&&de.push(ke),q.push(Ee)}else S(de,ke,_)||(de!==q&&de.push(ke),q.push(Ee))}return q}function fa(l,h){return null==(l=yd(l,h=Wn(h,l)))||delete l[Rn(Pr(h))]}function Ya(l,h,_,b){return zs(l,h,_(ha(l,h)),b)}function Ho(l,h,_,b){for(var S=l.length,D=b?S:-1;(b?D--:++D<S)&&h(l[D],D,l););return _?mr(l,b?0:D,b?D+1:S):mr(l,b?D+1:0,b?S:D)}function uf(l,h){var _=l;return _ instanceof Rt&&(_=_.value()),fr(h,function(b,S){return S.func.apply(S.thisArg,Ht([b],S.args))},_)}function dh(l,h,_){var b=l.length;if(b<2)return b?Jr(l[0]):[];for(var S=-1,D=pe(b);++S<b;)for(var H=l[S],q=-1;++q<b;)q!=S&&(D[S]=Ka(D[S]||H,l[q],h,_));return Jr(Vi(D,1),h,_)}function hd(l,h,_){for(var b=-1,S=l.length,D=h.length,H={};++b<S;)_(H,l[b],b<D?h[b]:p);return H}function cd(l){return Ei(l)?l:[]}function pd(l){return"function"==typeof l?l:wr}function Wn(l,h){return wt(l)?l:bh(l,h)?[l]:Af(Yt(l))}var nv=bt;function _a(l,h,_){var b=l.length;return _=_===p?b:_,!h&&_>=b?l:mr(l,h,_)}var uh=Lp||function(l){return Pi.clearTimeout(l)};function qa(l,h){if(h)return l.slice();var _=l.length,b=kp?kp(_):new l.constructor(_);return l.copy(b),b}function Kn(l){var h=new l.constructor(l.byteLength);return new Es(h).set(new Es(l)),h}function pf(l,h){var _=h?Kn(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.length)}function ff(l,h){if(l!==h){var _=l!==p,b=null===l,S=l==l,D=ur(l),H=h!==p,q=null===h,de=h==h,Ae=ur(h);if(!q&&!Ae&&!D&&l>h||D&&H&&de&&!q&&!Ae||b&&H&&de||!_&&de||!S)return 1;if(!b&&!D&&!Ae&&l<h||Ae&&_&&S&&!b&&!D||q&&_&&S||!H&&S||!de)return-1}return 0}function ai(l,h,_,b){for(var S=-1,D=l.length,H=_.length,q=-1,de=h.length,Ae=Ai(D-H,0),Ee=pe(de+Ae),ke=!b;++q<de;)Ee[q]=h[q];for(;++S<H;)(ke||S<D)&&(Ee[_[S]]=l[S]);for(;Ae--;)Ee[q++]=l[S++];return Ee}function fd(l,h,_,b){for(var S=-1,D=l.length,H=-1,q=_.length,de=-1,Ae=h.length,Ee=Ai(D-q,0),ke=pe(Ee+Ae),Ye=!b;++S<Ee;)ke[S]=l[S];for(var it=S;++de<Ae;)ke[it+de]=h[de];for(;++H<q;)(Ye||S<D)&&(ke[it+_[H]]=l[S++]);return ke}function ji(l,h){var _=-1,b=l.length;for(h||(h=pe(b));++_<b;)h[_]=l[_];return h}function or(l,h,_,b){var S=!_;_||(_={});for(var D=-1,H=h.length;++D<H;){var q=h[D],de=b?b(_[q],l[q],q,_,l):p;de===p&&(de=l[q]),S?Vt(_,q,de):zn(_,q,de)}return _}function Hs(l,h){return function(_,b){var S=wt(_)?Tp:Bo,D=h?h():{};return S(_,l,ht(b,2),D)}}function Zs(l){return bt(function(h,_){var b=-1,S=_.length,D=S>1?_[S-1]:p,H=S>2?_[2]:p;for(D=l.length>3&&"function"==typeof D?(S--,D):p,H&&lr(_[0],_[1],H)&&(D=S<3?p:D,S=1),h=Jt(h);++b<S;){var q=_[b];q&&l(h,q,b,D)}return h})}function ch(l,h){return function(_,b){if(null==_)return _;if(!br(_))return l(_,b);for(var S=_.length,D=h?S:-1,H=Jt(_);(h?D--:++D<S)&&!1!==b(H[D],D,H););return _}}function _f(l){return function(h,_,b){for(var S=-1,D=Jt(h),H=b(h),q=H.length;q--;){var de=H[l?q:++S];if(!1===_(D[de],de,D))break}return h}}function lv(l){return function(h){var _=cn(h=Yt(h))?kr(h):p,b=_?_[0]:h.charAt(0),S=_?_a(_,1).join(""):h.slice(1);return b[l]()+S}}function Zo(l){return function(h){return fr(Xh(x_(h).replace(Fm,"")),l,"")}}function _d(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var _=sa(l.prototype),b=l.apply(_,h);return si(b)?b:_}}function ph(l){return function(h,_,b){var S=Jt(h);if(!br(h)){var D=ht(_,3);h=Ri(h),_=function(q){return D(S[q],q,S)}}var H=l(h,_,b);return H>-1?S[D?h[H]:H]:p}}function fh(l){return Dn(function(h){var _=h.length,b=_,S=Ti.prototype.thru;for(l&&h.reverse();b--;){var D=h[b];if("function"!=typeof D)throw new Mr(G);if(S&&!H&&"wrapper"==Ws(D))var H=new Ti([],!0)}for(b=H?b:_;++b<_;){var q=Ws(D=h[b]),de="wrapper"==q?vr(D):p;H=de&&yh(de[0])&&de[1]==(Pe|De|Me|dt)&&!de[4].length&&1==de[9]?H[Ws(de[0])].apply(H,de[3]):1==D.length&&yh(D)?H[q]():H.thru(D)}return function(){var Ae=arguments,Ee=Ae[0];if(H&&1==Ae.length&&wt(Ee))return H.plant(Ee).value();for(var ke=0,Ye=_?h[ke].apply(this,Ae):Ee;++ke<_;)Ye=h[ke].call(this,Ye);return Ye}})}function $o(l,h,_,b,S,D,H,q,de,Ae){var Ee=h&Pe,ke=h&re,Ye=h&he,it=h&(De|xe),ft=h&X,It=Ye?p:_d(l);return function lt(){for(var xt=arguments.length,At=pe(xt),xr=xt;xr--;)At[xr]=arguments[xr];if(it)var Qi=An(lt),Nr=function Rp(ie,Ce){for(var pe=ie.length,Qe=0;pe--;)ie[pe]===Ce&&++Qe;return Qe}(At,Qi);if(b&&(At=ai(At,b,S,it)),D&&(At=fd(At,D,H,it)),xt-=Nr,it&&xt<Ae){var Ii=wn(At,Qi);return mf(l,h,$o,lt.placeholder,_,At,Ii,q,de,Ae-xt)}var an=ke?_:this,kn=Ye?an[l]:l;return xt=At.length,q?At=function wh(l,h){for(var _=l.length,b=$i(h.length,_),S=ji(l);b--;){var D=h[b];l[b]=Un(D,_)?S[D]:p}return l}(At,q):ft&&xt>1&&At.reverse(),Ee&&de<xt&&(At.length=de),this&&this!==Pi&&this instanceof lt&&(kn=It||_d(kn)),kn.apply(an,At)}}function gf(l,h){return function(_,b){return function ca(l,h,_,b){return In(l,function(S,D,H){h(b,_(S),D,H)}),b}(_,l,h(b),{})}}function gd(l,h){return function(_,b){var S;if(_===p&&b===p)return h;if(_!==p&&(S=_),b!==p){if(S===p)return b;"string"==typeof _||"string"==typeof b?(_=ei(_),b=ei(b)):(_=lh(_),b=lh(b)),S=l(_,b)}return S}}function _h(l){return Dn(function(h){return h=Xt(h,Zi(ht())),bt(function(_){var b=this;return l(h,function(S){return Gr(S,b,_)})})})}function md(l,h){var _=(h=h===p?" ":ei(h)).length;if(_<2)return _?Ns(h,l):h;var b=Ns(h,ql(l/Di(h)));return cn(h)?_a(kr(b),0,l).join(""):b.slice(0,l)}function vd(l){return function(h,_,b){return b&&"number"!=typeof b&&lr(h,_,b)&&(_=b=p),h=jn(h),_===p?(_=h,h=0):_=jn(_),function Ua(l,h,_,b){for(var S=-1,D=Ai(ql((h-l)/(_||1)),0),H=pe(D);D--;)H[b?D:++S]=l,l+=_;return H}(h,_,b=b===p?h<_?1:-1:jn(b),l)}}function Cd(l){return function(h,_){return"string"==typeof h&&"string"==typeof _||(h=nn(h),_=nn(_)),l(h,_)}}function mf(l,h,_,b,S,D,H,q,de,Ae){var Ee=h&De;h|=Ee?Me:ge,(h&=~(Ee?ge:Me))&ue||(h&=~(re|he));var It=[l,h,S,Ee?D:p,Ee?H:p,Ee?p:D,Ee?p:H,q,de,Ae],lt=_.apply(p,It);return yh(l)&&If(lt,It),lt.placeholder=b,Tf(lt,l,h)}function gh(l){var h=ki[l];return function(_,b){if(_=nn(_),(b=null==b?0:$i(yt(b),292))&&wo(_)){var S=(Yt(_)+"e").split("e");return+((S=(Yt(h(S[0]+"e"+(+S[1]+b)))+"e").split("e"))[0]+"e"+(+S[1]-b))}return h(_)}}var hv=Ds&&1/Co(new Ds([,-0]))[1]==ut?function(l){return new Ds(l)}:tc;function Gn(l){return function(h){var _=Xi(h);return _==z?Or(h):_==Ue?function $l(ie){var Ce=-1,pe=Array(ie.size);return ie.forEach(function(Qe){pe[++Ce]=[Qe,Qe]}),pe}(h):function Ap(ie,Ce){return Xt(Ce,function(pe){return[pe,ie[pe]]})}(h,l(h))}}function Tn(l,h,_,b,S,D,H,q){var de=h&he;if(!de&&"function"!=typeof l)throw new Mr(G);var Ae=b?b.length:0;if(Ae||(h&=~(Me|ge),b=S=p),H=H===p?H:Ai(yt(H),0),q=q===p?q:yt(q),Ae-=S?S.length:0,h&ge){var Ee=b,ke=S;b=S=p}var Ye=de?p:vr(l),it=[l,h,_,b,S,Ee,ke,D,H,q];if(Ye&&function Ew(l,h){var _=l[1],b=h[1],S=_|b;if(!(S<(re|he|Pe))&&!(b==Pe&&_==De||b==Pe&&_==dt&&l[7].length<=h[8]||b==(Pe|dt)&&h[7].length<=h[8]&&_==De))return l;b&re&&(l[2]=h[2],S|=_&re?0:ue);var q=h[3];if(q){var de=l[3];l[3]=de?ai(de,q,h[4]):q,l[4]=de?wn(l[3],B):h[4]}(q=h[5])&&(l[5]=(de=l[5])?fd(de,q,h[6]):q,l[6]=de?wn(l[5],B):h[6]),(q=h[7])&&(l[7]=q),b&Pe&&(l[8]=null==l[8]?h[8]:$i(l[8],h[8])),null==l[9]&&(l[9]=h[9]),l[0]=h[0],l[1]=S}(it,Ye),l=it[0],h=it[1],_=it[2],b=it[3],S=it[4],!(q=it[9]=it[9]===p?de?0:l.length:Ai(it[9]-Ae,0))&&h&(De|xe)&&(h&=~(De|xe)),h&&h!=re)ft=h==De||h==xe?function dv(l,h,_){var b=_d(l);return function S(){for(var D=arguments.length,H=pe(D),q=D,de=An(S);q--;)H[q]=arguments[q];var Ae=D<3&&H[0]!==de&&H[D-1]!==de?[]:wn(H,de);return(D-=Ae.length)<_?mf(l,h,$o,S.placeholder,p,H,Ae,p,p,_-D):Gr(this&&this!==Pi&&this instanceof S?b:l,this,H)}}(l,h,q):h!=Me&&h!=(re|Me)||S.length?$o.apply(p,it):function uv(l,h,_,b){var S=h&re,D=_d(l);return function H(){for(var q=-1,de=arguments.length,Ae=-1,Ee=b.length,ke=pe(Ee+de),Ye=this&&this!==Pi&&this instanceof H?D:l;++Ae<Ee;)ke[Ae]=b[Ae];for(;de--;)ke[Ae++]=arguments[++q];return Gr(Ye,S?_:this,ke)}}(l,h,_,b);else var ft=function ov(l,h,_){var b=h&re,S=_d(l);return function D(){return(this&&this!==Pi&&this instanceof D?S:l).apply(b?_:this,arguments)}}(l,h,_);return Tf((Ye?sh:If)(ft,it),l,h)}function Wo(l,h,_,b){return l===p||rn(l,Na[_])&&!Wt.call(b,_)?h:l}function vf(l,h,_,b,S,D){return si(l)&&si(h)&&(D.set(h,l),Ga(l,h,p,vf,D),D.delete(h)),l}function Cf(l){return el(l)?p:l}function bf(l,h,_,b,S,D){var H=_&M,q=l.length,de=h.length;if(q!=de&&!(H&&de>q))return!1;var Ae=D.get(l),Ee=D.get(h);if(Ae&&Ee)return Ae==h&&Ee==l;var ke=-1,Ye=!0,it=_&K?new la:p;for(D.set(l,h),D.set(h,l);++ke<q;){var ft=l[ke],It=h[ke];if(b)var lt=H?b(It,ft,ke,h,l,D):b(ft,It,ke,l,h,D);if(lt!==p){if(lt)continue;Ye=!1;break}if(it){if(!Bt(h,function(xt,At){if(!Ui(it,At)&&(ft===xt||S(ft,xt,_,b,D)))return it.push(At)})){Ye=!1;break}}else if(ft!==It&&!S(ft,It,_,b,D)){Ye=!1;break}}return D.delete(l),D.delete(h),Ye}function Dn(l){return wd(ga(l,p,Z),l+"")}function mh(l){return Jp(l,Ri,Ch)}function $s(l){return Jp(l,yr,wf)}var vr=Io?function(l){return Io.get(l)}:tc;function Ws(l){for(var h=l.name+"",_=Rs[h],b=Wt.call(Rs,h)?_.length:0;b--;){var S=_[b],D=S.func;if(null==D||D==l)return S.name}return h}function An(l){return(Wt.call(T,"placeholder")?T:l).placeholder}function ht(){var l=T.iteratee||Jh;return l=l===Jh?Ls:l,arguments.length?l(arguments[0],arguments[1]):l}function Ks(l,h){var _=l.__data__;return function bv(l){var h=typeof l;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==l:null===l}(h)?_["string"==typeof h?"string":"hash"]:_.map}function vh(l){for(var h=Ri(l),_=h.length;_--;){var b=h[_],S=l[b];h[_]=[b,S,wv(S)]}return h}function ja(l,h){var _=function qr(ie,Ce){return null==ie?p:ie[Ce]}(l,h);return ad(_)?_:p}var Ch=yo?function(l){return null==l?[]:(l=Jt(l),ra(yo(l),function(h){return zu.call(l,h)}))}:rc,wf=yo?function(l){for(var h=[];l;)Ht(h,Ch(l)),l=Ul(l);return h}:rc,Xi=sr;function xf(l,h,_){for(var b=-1,S=(h=Wn(h,l)).length,D=!1;++b<S;){var H=Rn(h[b]);if(!(D=null!=l&&_(l,H)))break;l=l[H]}return D||++b!=S?D:!!(S=null==l?0:l.length)&&dr(S)&&Un(H,S)&&(wt(l)||Qa(l))}function Sf(l){return"function"!=typeof l.constructor||bd(l)?{}:sa(Ul(l))}function Cv(l){return wt(l)||Qa(l)||!!(Mp&&l&&l[Mp])}function Un(l,h){var _=typeof l;return!!(h=h??me)&&("number"==_||"symbol"!=_&&Sm.test(l))&&l>-1&&l%1==0&&l<h}function lr(l,h,_){if(!si(_))return!1;var b=typeof h;return!!("number"==b?br(_)&&Un(h,_.length):"string"==b&&h in _)&&rn(_[h],l)}function bh(l,h){if(wt(l))return!1;var _=typeof l;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=l&&!ur(l))||mw.test(l)||!gw.test(l)||null!=h&&l in Jt(h)}function yh(l){var h=Ws(l),_=T[h];if("function"!=typeof _||!(h in Rt.prototype))return!1;if(l===_)return!0;var b=vr(_);return!!b&&l===b[0]}(Ku&&Xi(new Ku(new ArrayBuffer(1)))!=Gi||xo&&Xi(new xo)!=z||So&&Xi(So.resolve())!=Le||Ds&&Xi(new Ds)!=Ue||As&&Xi(new As)!=Dt)&&(Xi=function(l){var h=sr(l),_=h==Re?l.constructor:p,b=_?Us(_):"";if(b)switch(b){case jm:return Gi;case Os:return z;case Xl:return Le;case Np:return Ue;case Ql:return Dt}return h});var xw=za?Bn:nc;function bd(l){var h=l&&l.constructor;return l===("function"==typeof h&&h.prototype||Na)}function wv(l){return l==l&&!si(l)}function xv(l,h){return function(_){return null!=_&&_[l]===h&&(h!==p||l in Jt(_))}}function ga(l,h,_){return h=Ai(h===p?l.length-1:h,0),function(){for(var b=arguments,S=-1,D=Ai(b.length-h,0),H=pe(D);++S<D;)H[S]=b[h+S];S=-1;for(var q=pe(h+1);++S<h;)q[S]=b[S];return q[h]=_(H),Gr(l,this,q)}}function yd(l,h){return h.length<2?l:ha(l,mr(h,0,-1))}function xh(l,h){if(("constructor"!==h||"function"!=typeof l[h])&&"__proto__"!=h)return l[h]}var If=Df(sh),Ko=Za||function(l,h){return Pi.setTimeout(l,h)},wd=Df(No);function Tf(l,h,_){var b=h+"";return wd(l,function vv(l,h){var _=h.length;if(!_)return l;var b=_-1;return h[b]=(_>1?"& ":"")+h[b],h=h.join(_>2?", ":" "),l.replace(rp,"{\n/* [wrapped with "+h+"] */\n")}(b,function Iw(l,h){return Ur(zi,function(_){var b="_."+_[0];h&_[1]&&!go(l,b)&&l.push(b)}),l.sort()}(function _v(l){var h=l.match(ym);return h?h[1].split(wm):[]}(b),_)))}function Df(l){var h=0,_=0;return function(){var b=Vp(),S=Ct-(b-_);if(_=b,S>0){if(++h>=Be)return arguments[0]}else h=0;return l.apply(p,arguments)}}function xd(l,h){var _=-1,b=l.length,S=b-1;for(h=h===p?b:h;++_<h;){var D=Vo(_,S),H=l[D];l[D]=l[_],l[_]=H}return l.length=h,l}var Af=function Sw(l){var h=kd(l,function(b){return 500===_.size&&_.clear(),b}),_=h.cache;return h}(function(l){var h=[];return 46===l.charCodeAt(0)&&h.push(""),l.replace(Cm,function(_,b,S,D){h.push(S?D.replace(xm,"$1"):b||_)}),h});function Rn(l){if("string"==typeof l||ur(l))return l;var h=l+"";return"0"==h&&1/l==-ut?"-0":h}function Us(l){if(null!=l){try{return xs.call(l)}catch{}try{return l+""}catch{}}return""}function Sv(l){if(l instanceof Rt)return l.clone();var h=new Ti(l.__wrapped__,l.__chain__);return h.__actions__=ji(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}var Rf=bt(function(l,h){return Ei(l)?Ka(l,Vi(h,1,Ei,!0)):[]}),Tv=bt(function(l,h){var _=Pr(h);return Ei(_)&&(_=p),Ei(l)?Ka(l,Vi(h,1,Ei,!0),ht(_,2)):[]}),Tw=bt(function(l,h){var _=Pr(h);return Ei(_)&&(_=p),Ei(l)?Ka(l,Vi(h,1,Ei,!0),p,_):[]});function Q(l,h,_){var b=null==l?0:l.length;if(!b)return-1;var S=null==_?0:yt(_);return S<0&&(S=Ai(b+S,0)),hn(l,ht(h,3),S)}function v(l,h,_){var b=null==l?0:l.length;if(!b)return-1;var S=b-1;return _!==p&&(S=yt(_),S=_<0?Ai(b+S,0):$i(S,b-1)),hn(l,ht(h,3),S,!0)}function Z(l){return null!=l&&l.length?Vi(l,1):[]}function ne(l){return l&&l.length?l[0]:p}var Ov=bt(function(l){var h=Xt(l,cd);return h.length&&h[0]===l[0]?Lo(h):[]}),Of=bt(function(l){var h=Pr(l),_=Xt(l,cd);return h===Pr(_)?h=p:_.pop(),_.length&&_[0]===l[0]?Lo(_,ht(h,2)):[]}),Bf=bt(function(l){var h=Pr(l),_=Xt(l,cd);return(h="function"==typeof h?h:p)&&_.pop(),_.length&&_[0]===l[0]?Lo(_,p,h):[]});function Pr(l){var h=null==l?0:l.length;return h?l[h-1]:p}var Sd=bt(Xa);function Xa(l,h){return l&&l.length&&h&&h.length?Vs(l,h):l}var Pf=Dn(function(l,h){var _=null==l?0:l.length,b=Wa(l,h);return ld(l,Xt(h,function(S){return Un(S,_)?+S:S}).sort(ff)),b});function Th(l){return null==l?l:qm.call(l)}var fn=bt(function(l){return Jr(Vi(l,1,Ei,!0))}),ma=bt(function(l){var h=Pr(l);return Ei(h)&&(h=p),Jr(Vi(l,1,Ei,!0),ht(h,2))}),qe=bt(function(l){var h=Pr(l);return h="function"==typeof h?h:p,Jr(Vi(l,1,Ei,!0),p,h)});function Uo(l){if(!l||!l.length)return[];var h=0;return l=ra(l,function(_){if(Ei(_))return h=Ai(_.length,h),!0}),Qt(h,function(_){return Xt(l,Nl(_))})}function Rh(l,h){if(!l||!l.length)return[];var _=Uo(l);return null==h?_:Xt(_,function(b){return Gr(h,p,b)})}var Fv=bt(function(l,h){return Ei(l)?Ka(l,h):[]}),Vv=bt(function(l){return dh(ra(l,Ei))}),je=bt(function(l){var h=Pr(l);return Ei(h)&&(h=p),dh(ra(l,Ei),ht(h,2))}),en=bt(function(l){var h=Pr(l);return h="function"==typeof h?h:p,dh(ra(l,Ei),p,h)}),fi=bt(Uo),Hf=bt(function(l){var h=l.length,_=h>1?l[h-1]:p;return _="function"==typeof _?(l.pop(),_):p,Rh(l,_)});function Id(l){var h=T(l);return h.__chain__=!0,h}function Yo(l,h){return h(l)}var Zf=Dn(function(l){var h=l.length,_=h?l[0]:0,b=this.__wrapped__,S=function(D){return Wa(D,l)};return!(h>1||this.__actions__.length)&&b instanceof Rt&&Un(_)?((b=b.slice(_,+_+(h?1:0))).__actions__.push({func:Yo,args:[S],thisArg:p}),new Ti(b,this.__chain__).thru(function(D){return h&&!D.length&&D.push(p),D})):this.thru(S)}),_n=Hs(function(l,h,_){Wt.call(l,_)?++l[_]:Vt(l,_,1)}),On=ph(Q),Ut=ph(v);function qs(l,h){return(wt(l)?Ur:Hn)(l,ht(h,3))}function Oh(l,h){return(wt(l)?ww:id)(l,ht(h,3))}var Wf=Hs(function(l,h,_){Wt.call(l,_)?l[_].push(h):Vt(l,_,[h])}),qo=bt(function(l,h,_){var b=-1,S="function"==typeof h,D=br(l)?pe(l.length):[];return Hn(l,function(H){D[++b]=S?Gr(h,H,_):Ci(H,h,_)}),D}),Kv=Hs(function(l,h,_){Vt(l,_,h)});function Ad(l,h){return(wt(l)?Xt:Ps)(l,ht(h,3))}var Gv=Hs(function(l,h,_){l[_?0:1].push(h)},function(){return[[],[]]}),qv=bt(function(l,h){if(null==l)return[];var _=h.length;return _>1&&lr(l,h[0],h[1])?h=[]:_>2&&lr(h[0],h[1],h[2])&&(h=[h[0]]),Fs(l,Vi(h,1),[])}),Bd=Hu||function(){return Pi.Date.now()};function Bh(l,h,_){return h=_?p:h,Tn(l,Pe,p,p,p,p,h=l&&null==h?l.length:h)}function Qf(l,h){var _;if("function"!=typeof h)throw new Mr(G);return l=yt(l),function(){return--l>0&&(_=h.apply(this,arguments)),l<=1&&(h=p),_}}var kh=bt(function(l,h,_){var b=re;if(_.length){var S=wn(_,An(kh));b|=Me}return Tn(l,b,h,_,S)}),Jf=bt(function(l,h,_){var b=re|he;if(_.length){var S=wn(_,An(Jf));b|=Me}return Tn(h,b,l,_,S)});function jo(l,h,_){var b,S,D,H,q,de,Ae=0,Ee=!1,ke=!1,Ye=!0;if("function"!=typeof l)throw new Mr(G);function it(Ii){var an=b,kn=S;return b=S=p,Ae=Ii,H=l.apply(kn,an)}function lt(Ii){var an=Ii-de;return de===p||an>=h||an<0||ke&&Ii-Ae>=D}function xt(){var Ii=Bd();if(lt(Ii))return At(Ii);q=Ko(xt,function It(Ii){var F_=h-(Ii-de);return ke?$i(F_,D-(Ii-Ae)):F_}(Ii))}function At(Ii){return q=p,Ye&&b?it(Ii):(b=S=p,H)}function Nr(){var Ii=Bd(),an=lt(Ii);if(b=arguments,S=this,de=Ii,an){if(q===p)return function ft(Ii){return Ae=Ii,q=Ko(xt,h),Ee?it(Ii):H}(de);if(ke)return uh(q),q=Ko(xt,h),it(de)}return q===p&&(q=Ko(xt,h)),H}return h=nn(h)||0,si(_)&&(Ee=!!_.leading,D=(ke="maxWait"in _)?Ai(nn(_.maxWait)||0,h):D,Ye="trailing"in _?!!_.trailing:Ye),Nr.cancel=function xr(){q!==p&&uh(q),Ae=0,b=de=S=q=p},Nr.flush=function Qi(){return q===p?H:At(Bd())},Nr}var jv=bt(function(l,h){return qp(l,1,h)}),Xv=bt(function(l,h,_){return qp(l,nn(h)||0,_)});function kd(l,h){if("function"!=typeof l||null!=h&&"function"!=typeof h)throw new Mr(G);var _=function(){var b=arguments,S=h?h.apply(this,b):b[0],D=_.cache;if(D.has(S))return D.get(S);var H=l.apply(this,b);return _.cache=D.set(S,H)||D,H};return _.cache=new(kd.Cache||Sn),_}function Xo(l){if("function"!=typeof l)throw new Mr(G);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}kd.Cache=Sn;var Mh=nv(function(l,h){var _=(h=1==h.length&&wt(h[0])?Xt(h[0],Zi(ht())):Xt(Vi(h,1),Zi(ht()))).length;return bt(function(b){for(var S=-1,D=$i(b.length,_);++S<D;)b[S]=h[S].call(this,b[S]);return Gr(l,this,b)})}),Md=bt(function(l,h){var _=wn(h,An(Md));return Tn(l,Me,p,h,_)}),i_=bt(function(l,h){var _=wn(h,An(i_));return Tn(l,ge,p,h,_)}),eC=Dn(function(l,h){return Tn(l,dt,p,p,p,h)});function rn(l,h){return l===h||l!=l&&h!=h}var Ph=Cd(th),sC=Cd(function(l,h){return l>=h}),Qa=Zn(function(){return arguments}())?Zn:function(l){return bi(l)&&Wt.call(l,"callee")&&!zu.call(l,"callee")},wt=pe.isArray,oC=yi?Zi(yi):function Po(l){return bi(l)&&sr(l)==yn};function br(l){return null!=l&&dr(l.length)&&!Bn(l)}function Ei(l){return bi(l)&&br(l)}var va=Zu||nc,o_=pr?Zi(pr):function tf(l){return bi(l)&&sr(l)==tr};function Xe(l){if(!bi(l))return!1;var h=sr(l);return h==x||h==$r||"string"==typeof l.message&&"string"==typeof l.name&&!el(l)}function Bn(l){if(!si(l))return!1;var h=sr(l);return h==Te||h==ve||h==Bi||h==ce}function Ld(l){return"number"==typeof l&&l==yt(l)}function dr(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=me}function si(l){var h=typeof l;return null!=l&&("object"==h||"function"==h)}function bi(l){return null!=l&&"object"==typeof l}var Fh=Sp?Zi(Sp):function nd(l){return bi(l)&&Xi(l)==z};function d_(l){return"number"==typeof l||bi(l)&&sr(l)==F}function el(l){if(!bi(l)||sr(l)!=Re)return!1;var h=Ul(l);if(null===h)return!0;var _=Wt.call(h,"constructor")&&h.constructor;return"function"==typeof _&&_ instanceof _&&xs.call(_)==Ym}var Vh=Ru?Zi(Ru):function Ms(l){return bi(l)&&sr(l)==Ne},h_=Ep?Zi(Ep):function nf(l){return bi(l)&&Xi(l)==Ue};function Pd(l){return"string"==typeof l||!wt(l)&&bi(l)&&sr(l)==He}function ur(l){return"symbol"==typeof l||bi(l)&&sr(l)==at}var ba=Ip?Zi(Ip):function pa(l){return bi(l)&&dr(l.length)&&!!di[sr(l)]},qn=Cd(sd),Nh=Cd(function(l,h){return l<=h});function zh(l){if(!l)return[];if(br(l))return Pd(l)?kr(l):ji(l);if(Is&&l[Is])return function vo(ie){for(var Ce,pe=[];!(Ce=ie.next()).done;)pe.push(Ce.value);return pe}(l[Is]());var h=Xi(l);return(h==z?Or:h==Ue?Co:Vr)(l)}function jn(l){return l?(l=nn(l))===ut||l===-ut?(l<0?-1:1)*_e:l==l?l:0:0===l?l:0}function yt(l){var h=jn(l),_=h%1;return h==h?_?h-_:h:0}function Fd(l){return l?Xr(yt(l),0,Ge):0}function nn(l){if("number"==typeof l)return l;if(ur(l))return ot;if(si(l)){var h="function"==typeof l.valueOf?l.valueOf():l;l=si(h)?h+"":h}if("string"!=typeof l)return 0===l?l:+l;l=Hi(l);var _=ap.test(l);return _||Cu.test(l)?Km(l.slice(2),_?2:8):np.test(l)?ot:+l}function p_(l){return or(l,yr(l))}function Yt(l){return null==l?"":ei(l)}var _C=Zs(function(l,h){if(bd(h)||br(h))or(h,Ri(h),l);else for(var _ in h)Wt.call(h,_)&&zn(l,_,h[_])}),__=Zs(function(l,h){or(h,yr(h),l)}),Vd=Zs(function(l,h,_,b){or(h,yr(h),l,b)}),gC=Zs(function(l,h,_,b){or(h,Ri(h),l,b)}),mC=Dn(Wa),CC=bt(function(l,h){l=Jt(l);var _=-1,b=h.length,S=b>2?h[2]:p;for(S&&lr(h[0],h[1],S)&&(b=1);++_<b;)for(var D=h[_],H=yr(D),q=-1,de=H.length;++q<de;){var Ae=H[q],Ee=l[Ae];(Ee===p||rn(Ee,Na[Ae])&&!Wt.call(l,Ae))&&(l[Ae]=D[Ae])}return l}),bC=bt(function(l){return l.push(p,vf),Gr(zd,p,l)});function Hh(l,h,_){var b=null==l?p:ha(l,h);return b===p?_:b}function Xn(l,h){return null!=l&&xf(l,h,rv)}var Zh=gf(function(l,h,_){null!=h&&"function"!=typeof h.toString&&(h=Ha.call(h)),l[h]=_},Zd(wr)),TC=gf(function(l,h,_){null!=h&&"function"!=typeof h.toString&&(h=Ha.call(h)),Wt.call(l,h)?l[h].push(_):l[h]=[_]},ht),$h=bt(Ci);function Ri(l){return br(l)?Up(l):Qr(l)}function yr(l){return br(l)?Up(l,!0):function rh(l){if(!si(l))return function Gs(l){var h=[];if(null!=l)for(var _ in Jt(l))h.push(_);return h}(l);var h=bd(l),_=[];for(var b in l)"constructor"==b&&(h||!Wt.call(l,b))||_.push(b);return _}(l)}var DC=Zs(function(l,h,_){Ga(l,h,_)}),zd=Zs(function(l,h,_,b){Ga(l,h,_,b)}),Wh=Dn(function(l,h){var _={};if(null==l)return _;var b=!1;h=Xt(h,function(D){return D=Wn(D,l),b||(b=D.length>1),D}),or(l,$s(l),_),b&&(_=Yi(_,W|A|N,Cf));for(var S=h.length;S--;)fa(_,h[S]);return _}),v_=Dn(function(l,h){return null==l?{}:function af(l,h){return Fo(l,h,function(_,b){return Xn(l,b)})}(l,h)});function C_(l,h){if(null==l)return{};var _=Xt($s(l),function(b){return[b]});return h=ht(h),Fo(l,_,function(b,S){return h(b,S[0])})}var b_=Gn(Ri),Gh=Gn(yr);function Vr(l){return null==l?[]:hi(l,Ri(l))}var w_=Zo(function(l,h,_){return h=h.toLowerCase(),l+(_?Uh(h):h)});function Uh(l){return Hd(Yt(l).toLowerCase())}function x_(l){return(l=Yt(l))&&l.replace(Em,Zl).replace(Vm,"")}var E_=Zo(function(l,h,_){return l+(_?"-":"")+h.toLowerCase()}),PC=Zo(function(l,h,_){return l+(_?" ":"")+h.toLowerCase()}),FC=lv("toLowerCase"),HC=Zo(function(l,h,_){return l+(_?"_":"")+h.toLowerCase()}),$C=Zo(function(l,h,_){return l+(_?" ":"")+Hd(h)}),jh=Zo(function(l,h,_){return l+(_?" ":"")+h.toUpperCase()}),Hd=lv("toUpperCase");function Xh(l,h,_){return l=Yt(l),(h=_?p:h)===p?function jr(ie){return Vl.test(ie)}(l)?function Um(ie){return ie.match(Nm)||[]}(l):function ku(ie){return ie.match(vw)||[]}(l):l.match(h)||[]}var Qh=bt(function(l,h){try{return Gr(l,p,h)}catch(_){return Xe(_)?_:new pt(_)}}),qC=Dn(function(l,h){return Ur(h,function(_){_=Rn(_),Vt(l,_,kh(l[_],l))}),l});function Zd(l){return function(){return l}}var QC=fh(),JC=fh(!0);function wr(l){return l}function Jh(l){return Ls("function"==typeof l?l:Yi(l,W))}var ec=bt(function(l,h){return function(_){return Ci(_,l,h)}}),t0=bt(function(l,h){return function(_){return Ci(l,_,h)}});function rl(l,h,_){var b=Ri(h),S=Mo(h,b);null==_&&(!si(h)||!S.length&&b.length)&&(_=h,h=l,l=this,S=Mo(h,Ri(h)));var D=!(si(_)&&"chain"in _&&!_.chain),H=Bn(l);return Ur(S,function(q){var de=h[q];l[q]=de,H&&(l.prototype[q]=function(){var Ae=this.__chain__;if(D||Ae){var Ee=l(this.__wrapped__);return(Ee.__actions__=ji(this.__actions__)).push({func:de,args:arguments,thisArg:l}),Ee.__chain__=Ae,Ee}return de.apply(l,Ht([this.value()],arguments))})}),l}function tc(){}var R_=_h(Xt),ic=_h(Dp),a0=_h(Bt);function O_(l){return bh(l)?Nl(Rn(l)):function sf(l){return function(h){return ha(h,l)}}(l)}var $d=vd(),B_=vd(!0);function rc(){return[]}function nc(){return!1}var u0=gd(function(l,h){return l+h},0),M_=gh("ceil"),h0=gd(function(l,h){return l/h},1),c0=gh("floor"),m0=gd(function(l,h){return l*h},1),v0=gh("round"),C0=gd(function(l,h){return l-h},0);return T.after=function Xf(l,h){if("function"!=typeof h)throw new Mr(G);return l=yt(l),function(){if(--l<1)return h.apply(this,arguments)}},T.ary=Bh,T.assign=_C,T.assignIn=__,T.assignInWith=Vd,T.assignWith=gC,T.at=mC,T.before=Qf,T.bind=kh,T.bindAll=qC,T.bindKey=Jf,T.castArray=function nC(){if(!arguments.length)return[];var l=arguments[0];return wt(l)?l:[l]},T.chain=Id,T.chunk=function Ev(l,h,_){h=(_?lr(l,h,_):h===p)?1:Ai(yt(h),0);var b=null==l?0:l.length;if(!b||h<1)return[];for(var S=0,D=0,H=pe(ql(b/h));S<b;)H[D++]=mr(l,S,S+=h);return H},T.compact=function Sh(l){for(var h=-1,_=null==l?0:l.length,b=0,S=[];++h<_;){var D=l[h];D&&(S[b++]=D)}return S},T.concat=function Iv(){var l=arguments.length;if(!l)return[];for(var h=pe(l-1),_=arguments[0],b=l;b--;)h[b-1]=arguments[b];return Ht(wt(_)?ji(_):[_],Vi(h,1))},T.cond=function jC(l){var h=null==l?0:l.length,_=ht();return l=h?Xt(l,function(b){if("function"!=typeof b[1])throw new Mr(G);return[_(b[0]),b[1]]}):[],bt(function(b){for(var S=-1;++S<h;){var D=l[S];if(Gr(D[0],this,b))return Gr(D[1],this,b)}})},T.conforms=function ye(l){return function ks(l){var h=Ri(l);return function(_){return En(_,l,h)}}(Yi(l,W))},T.constant=Zd,T.countBy=_n,T.create=function vC(l,h){var _=sa(l);return null==h?_:td(_,h)},T.curry=function e_(l,h,_){var b=Tn(l,De,p,p,p,p,p,h=_?p:h);return b.placeholder=e_.placeholder,b},T.curryRight=function t_(l,h,_){var b=Tn(l,xe,p,p,p,p,p,h=_?p:h);return b.placeholder=t_.placeholder,b},T.debounce=jo,T.defaults=CC,T.defaultsDeep=bC,T.defer=jv,T.delay=Xv,T.difference=Rf,T.differenceBy=Tv,T.differenceWith=Tw,T.drop=function Dv(l,h,_){var b=null==l?0:l.length;return b?mr(l,(h=_||h===p?1:yt(h))<0?0:h,b):[]},T.dropRight=function Av(l,h,_){var b=null==l?0:l.length;return b?mr(l,0,(h=b-(h=_||h===p?1:yt(h)))<0?0:h):[]},T.dropRightWhile=function C(l,h){return l&&l.length?Ho(l,ht(h,3),!0,!0):[]},T.dropWhile=function O(l,h){return l&&l.length?Ho(l,ht(h,3),!0):[]},T.fill=function U(l,h,_,b){var S=null==l?0:l.length;return S?(_&&"number"!=typeof _&&lr(l,h,_)&&(_=0,b=S),function Xp(l,h,_,b){var S=l.length;for((_=yt(_))<0&&(_=-_>S?0:S+_),(b=b===p||b>S?S:yt(b))<0&&(b+=S),b=_>b?0:Fd(b);_<b;)l[_++]=h;return l}(l,h,_,b)):[]},T.filter=function Td(l,h){return(wt(l)?ra:rd)(l,ht(h,3))},T.flatMap=function Cr(l,h){return Vi(Ad(l,h),1)},T.flatMapDeep=function Wv(l,h){return Vi(Ad(l,h),ut)},T.flatMapDepth=function Dd(l,h,_){return _=_===p?1:yt(_),Vi(Ad(l,h),_)},T.flatten=Z,T.flattenDeep=function le(l){return null!=l&&l.length?Vi(l,ut):[]},T.flattenDepth=function be(l,h){return null!=l&&l.length?Vi(l,h=h===p?1:yt(h)):[]},T.flip=function Qv(l){return Tn(l,X)},T.flow=QC,T.flowRight=JC,T.fromPairs=function tt(l){for(var h=-1,_=null==l?0:l.length,b={};++h<_;){var S=l[h];b[S[0]]=S[1]}return b},T.functions=function EC(l){return null==l?[]:Mo(l,Ri(l))},T.functionsIn=function es(l){return null==l?[]:Mo(l,yr(l))},T.groupBy=Wf,T.initial=function Rv(l){return null!=l&&l.length?mr(l,0,-1):[]},T.intersection=Ov,T.intersectionBy=Of,T.intersectionWith=Bf,T.invert=Zh,T.invertBy=TC,T.invokeMap=qo,T.iteratee=Jh,T.keyBy=Kv,T.keys=Ri,T.keysIn=yr,T.map=Ad,T.mapKeys=function Nd(l,h){var _={};return h=ht(h,3),In(l,function(b,S,D){Vt(_,h(b,S,D),b)}),_},T.mapValues=function m_(l,h){var _={};return h=ht(h,3),In(l,function(b,S,D){Vt(_,S,h(b,S,D))}),_},T.matches=function e0(l){return nh(Yi(l,W))},T.matchesProperty=function il(l,h){return ah(l,Yi(h,W))},T.memoize=kd,T.merge=DC,T.mergeWith=zd,T.method=ec,T.methodOf=t0,T.mixin=rl,T.negate=Xo,T.nthArg=function n0(l){return l=yt(l),bt(function(h){return qi(h,l)})},T.omit=Wh,T.omitBy=function AC(l,h){return C_(l,Xo(ht(h)))},T.once=function Jv(l){return Qf(2,l)},T.orderBy=function Gf(l,h,_,b){return null==l?[]:(wt(h)||(h=null==h?[]:[h]),wt(_=b?p:_)||(_=null==_?[]:[_]),Fs(l,h,_))},T.over=R_,T.overArgs=Mh,T.overEvery=ic,T.overSome=a0,T.partial=Md,T.partialRight=i_,T.partition=Gv,T.pick=v_,T.pickBy=C_,T.property=O_,T.propertyOf=function s0(l){return function(h){return null==l?p:ha(l,h)}},T.pull=Sd,T.pullAll=Xa,T.pullAllBy=function Bv(l,h,_){return l&&l.length&&h&&h.length?Vs(l,h,ht(_,2)):l},T.pullAllWith=function Lf(l,h,_){return l&&l.length&&h&&h.length?Vs(l,h,p,_):l},T.pullAt=Pf,T.range=$d,T.rangeRight=B_,T.rearg=eC,T.reject=function Uv(l,h){return(wt(l)?ra:rd)(l,Xo(ht(h,3)))},T.remove=function kv(l,h){var _=[];if(!l||!l.length)return _;var b=-1,S=[],D=l.length;for(h=ht(h,3);++b<D;){var H=l[b];h(H,b,l)&&(_.push(H),S.push(b))}return ld(l,S),_},T.rest=function tC(l,h){if("function"!=typeof l)throw new Mr(G);return bt(l,h=h===p?h:yt(h))},T.reverse=Th,T.sampleSize=function Uf(l,h,_){return h=(_?lr(l,h,_):h===p)?1:yt(h),(wt(l)?Yp:dd)(l,h)},T.set=function OC(l,h,_){return null==l?l:zs(l,h,_)},T.setWith=function Kh(l,h,_,b){return b="function"==typeof b?b:p,null==l?l:zs(l,h,_,b)},T.shuffle=function Yf(l){return(wt(l)?Ju:lf)(l)},T.slice=function Ff(l,h,_){var b=null==l?0:l.length;return b?(_&&"number"!=typeof _&&lr(l,h,_)?(h=0,_=b):(h=null==h?0:yt(h),_=_===p?b:yt(_)),mr(l,h,_)):[]},T.sortBy=qv,T.sortedUniq=function Pv(l){return l&&l.length?df(l):[]},T.sortedUniqBy=function Go(l,h){return l&&l.length?df(l,ht(h,2)):[]},T.split=function ZC(l,h,_){return _&&"number"!=typeof _&&lr(l,h,_)&&(h=_=p),(_=_===p?Ge:_>>>0)?(l=Yt(l))&&("string"==typeof h||null!=h&&!Vh(h))&&!(h=ei(h))&&cn(l)?_a(kr(l),0,_):l.split(h,_):[]},T.spread=function Qo(l,h){if("function"!=typeof l)throw new Mr(G);return h=null==h?0:Ai(yt(h),0),bt(function(_){var b=_[h],S=_a(_,0,h);return b&&Ht(S,b),Gr(l,this,S)})},T.tail=function gt(l){var h=null==l?0:l.length;return h?mr(l,1,h):[]},T.take=function Ed(l,h,_){return l&&l.length?mr(l,0,(h=_||h===p?1:yt(h))<0?0:h):[]},T.takeRight=function pi(l,h,_){var b=null==l?0:l.length;return b?mr(l,(h=b-(h=_||h===p?1:yt(h)))<0?0:h,b):[]},T.takeRightWhile=function Y(l,h){return l&&l.length?Ho(l,ht(h,3),!1,!0):[]},T.takeWhile=function ti(l,h){return l&&l.length?Ho(l,ht(h,3)):[]},T.tap=function zv(l,h){return h(l),l},T.throttle=function Jo(l,h,_){var b=!0,S=!0;if("function"!=typeof l)throw new Mr(G);return si(_)&&(b="leading"in _?!!_.leading:b,S="trailing"in _?!!_.trailing:S),jo(l,h,{leading:b,maxWait:h,trailing:S})},T.thru=Yo,T.toArray=zh,T.toPairs=b_,T.toPairsIn=Gh,T.toPath=function l0(l){return wt(l)?Xt(l,Rn):ur(l)?[l]:ji(Af(Yt(l)))},T.toPlainObject=p_,T.transform=function ct(l,h,_){var b=wt(l),S=b||va(l)||ba(l);if(h=ht(h,4),null==_){var D=l&&l.constructor;_=S?b?new D:[]:si(l)&&Bn(D)?sa(Ul(l)):{}}return(S?Ur:In)(l,function(H,q,de){return h(_,H,q,de)}),_},T.unary=function iC(l){return Bh(l,1)},T.union=fn,T.unionBy=ma,T.unionWith=qe,T.uniq=function ii(l){return l&&l.length?Jr(l):[]},T.uniqBy=function zf(l,h){return l&&l.length?Jr(l,ht(h,2)):[]},T.uniqWith=function qt(l,h){return h="function"==typeof h?h:p,l&&l.length?Jr(l,p,h):[]},T.unset=function Dw(l,h){return null==l||fa(l,h)},T.unzip=Uo,T.unzipWith=Rh,T.update=function y_(l,h,_){return null==l?l:Ya(l,h,pd(_))},T.updateWith=function kt(l,h,_,b){return b="function"==typeof b?b:p,null==l?l:Ya(l,h,pd(_),b)},T.values=Vr,T.valuesIn=function ts(l){return null==l?[]:hi(l,yr(l))},T.without=Fv,T.words=Xh,T.wrap=function rC(l,h){return Md(pd(h),l)},T.xor=Vv,T.xorBy=je,T.xorWith=en,T.zip=fi,T.zipObject=function Nt(l,h){return hd(l||[],h||[],zn)},T.zipObjectDeep=function Nv(l,h){return hd(l||[],h||[],zs)},T.zipWith=Hf,T.entries=b_,T.entriesIn=Gh,T.extend=__,T.extendWith=Vd,rl(T,T),T.add=u0,T.attempt=Qh,T.camelCase=w_,T.capitalize=Uh,T.ceil=M_,T.clamp=function _i(l,h,_){return _===p&&(_=h,h=p),_!==p&&(_=(_=nn(_))==_?_:0),h!==p&&(h=(h=nn(h))==h?h:0),Xr(nn(l),h,_)},T.clone=function r_(l){return Yi(l,N)},T.cloneDeep=function aC(l){return Yi(l,W|N)},T.cloneDeepWith=function a_(l,h){return Yi(l,W|N,h="function"==typeof h?h:p)},T.cloneWith=function n_(l,h){return Yi(l,N,h="function"==typeof h?h:p)},T.conformsTo=function Lh(l,h){return null==h||En(l,h,Ri(h))},T.deburr=x_,T.defaultTo=function XC(l,h){return null==l||l!=l?h:l},T.divide=h0,T.endsWith=function MC(l,h,_){l=Yt(l),h=ei(h);var b=l.length,S=_=_===p?b:Xr(yt(_),0,b);return(_-=h.length)>=0&&l.slice(_,S)==h},T.eq=rn,T.escape=function LC(l){return(l=Yt(l))&&pw.test(l)?l.replace(mm,Op):l},T.escapeRegExp=function S_(l){return(l=Yt(l))&&bm.test(l)?l.replace(ea,"\\$&"):l},T.every=function Ys(l,h,_){var b=wt(l)?Dp:jp;return _&&lr(l,h,_)&&(h=p),b(l,ht(h,3))},T.find=On,T.findIndex=Q,T.findKey=function yC(l,h){return Ma(l,ht(h,3),In)},T.findLast=Ut,T.findLastIndex=v,T.findLastKey=function wC(l,h){return Ma(l,ht(h,3),eh)},T.floor=c0,T.forEach=qs,T.forEachRight=Oh,T.forIn=function xC(l,h){return null==l?l:ko(l,ht(h,3),yr)},T.forInRight=function SC(l,h){return null==l?l:Qp(l,ht(h,3),yr)},T.forOwn=function g_(l,h){return l&&In(l,ht(h,3))},T.forOwnRight=function tl(l,h){return l&&eh(l,ht(h,3))},T.get=Hh,T.gt=Ph,T.gte=sC,T.has=function IC(l,h){return null!=l&&xf(l,h,iv)},T.hasIn=Xn,T.head=ne,T.identity=wr,T.includes=function Kf(l,h,_,b){l=br(l)?l:Vr(l),_=_&&!b?yt(_):0;var S=l.length;return _<0&&(_=Ai(S+_,0)),Pd(l)?_<=S&&l.indexOf(h,_)>-1:!!S&&La(l,h,_)>-1},T.indexOf=function Eh(l,h,_){var b=null==l?0:l.length;if(!b)return-1;var S=null==_?0:yt(_);return S<0&&(S=Ai(b+S,0)),La(l,h,S)},T.inRange=function BC(l,h,_){return h=jn(h),_===p?(_=h,h=0):_=jn(_),function ef(l,h,_){return l>=$i(h,_)&&l<Ai(h,_)}(l=nn(l),h,_)},T.invoke=$h,T.isArguments=Qa,T.isArray=wt,T.isArrayBuffer=oC,T.isArrayLike=br,T.isArrayLikeObject=Ei,T.isBoolean=function s_(l){return!0===l||!1===l||bi(l)&&sr(l)==li},T.isBuffer=va,T.isDate=o_,T.isElement=function lC(l){return bi(l)&&1===l.nodeType&&!el(l)},T.isEmpty=function dC(l){if(null==l)return!0;if(br(l)&&(wt(l)||"string"==typeof l||"function"==typeof l.splice||va(l)||ba(l)||Qa(l)))return!l.length;var h=Xi(l);if(h==z||h==Ue)return!l.size;if(bd(l))return!Qr(l).length;for(var _ in l)if(Wt.call(l,_))return!1;return!0},T.isEqual=function Fr(l,h){return $n(l,h)},T.isEqualWith=function Ja(l,h,_){var b=(_="function"==typeof _?_:p)?_(l,h):p;return b===p?$n(l,h,p,_):!!b},T.isError=Xe,T.isFinite=function Kt(l){return"number"==typeof l&&wo(l)},T.isFunction=Bn,T.isInteger=Ld,T.isLength=dr,T.isMap=Fh,T.isMatch=function uC(l,h){return l===h||ih(l,h,vh(h))},T.isMatchWith=function l_(l,h,_){return _="function"==typeof _?_:p,ih(l,h,vh(h),_)},T.isNaN=function hC(l){return d_(l)&&l!=+l},T.isNative=function Ca(l){if(xw(l))throw new pt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ad(l)},T.isNil=function pC(l){return null==l},T.isNull=function cC(l){return null===l},T.isNumber=d_,T.isObject=si,T.isObjectLike=bi,T.isPlainObject=el,T.isRegExp=Vh,T.isSafeInteger=function u_(l){return Ld(l)&&l>=-me&&l<=me},T.isSet=h_,T.isString=Pd,T.isSymbol=ur,T.isTypedArray=ba,T.isUndefined=function Yn(l){return l===p},T.isWeakMap=function c_(l){return bi(l)&&Xi(l)==Dt},T.isWeakSet=function fC(l){return bi(l)&&"[object WeakSet]"==sr(l)},T.join=function kf(l,h){return null==l?"":Pp.call(l,h)},T.kebabCase=E_,T.last=Pr,T.lastIndexOf=function Mf(l,h,_){var b=null==l?0:l.length;if(!b)return-1;var S=b;return _!==p&&(S=(S=yt(_))<0?Ai(b+S,0):$i(S,b-1)),h==h?function ci(ie,Ce,pe){for(var Qe=pe+1;Qe--;)if(ie[Qe]===Ce)return Qe;return Qe}(l,h,S):hn(l,Pa,S,!0)},T.lowerCase=PC,T.lowerFirst=FC,T.lt=qn,T.lte=Nh,T.max=function p0(l){return l&&l.length?gr(l,wr,th):p},T.maxBy=function f0(l,h){return l&&l.length?gr(l,ht(h,2),th):p},T.mean=function _0(l){return bs(l,wr)},T.meanBy=function sc(l,h){return bs(l,ht(h,2))},T.min=function L_(l){return l&&l.length?gr(l,wr,sd):p},T.minBy=function g0(l,h){return l&&l.length?gr(l,ht(h,2),sd):p},T.stubArray=rc,T.stubFalse=nc,T.stubObject=function k_(){return{}},T.stubString=function o0(){return""},T.stubTrue=function nl(){return!0},T.multiply=m0,T.nth=function Ih(l,h){return l&&l.length?qi(l,yt(h)):p},T.noConflict=function r0(){return Pi._===this&&(Pi._=_r),this},T.noop=tc,T.now=Bd,T.pad=function Yh(l,h,_){l=Yt(l);var b=(h=yt(h))?Di(l):0;if(!h||b>=h)return l;var S=(h-b)/2;return md(jl(S),_)+l+md(ql(S),_)},T.padEnd=function qh(l,h,_){l=Yt(l);var b=(h=yt(h))?Di(l):0;return h&&b<h?l+md(h-b,_):l},T.padStart=function is(l,h,_){l=Yt(l);var b=(h=yt(h))?Di(l):0;return h&&b<h?md(h-b,_)+l:l},T.parseInt=function VC(l,h,_){return _||null==h?h=0:h&&(h=+h),$u(Yt(l).replace(ir,""),h||0)},T.random=function kC(l,h,_){if(_&&"boolean"!=typeof _&&lr(l,h,_)&&(h=_=p),_===p&&("boolean"==typeof h?(_=h,h=p):"boolean"==typeof l&&(_=l,l=p)),l===p&&h===p?(l=0,h=1):(l=jn(l),h===p?(h=l,l=0):h=jn(h)),l>h){var b=l;l=h,h=b}if(_||l%1||h%1){var S=Wu();return $i(l+S*(h-l+Wm("1e-"+((S+"").length-1))),h)}return Vo(l,h)},T.reduce=function Rd(l,h,_){var b=wt(l)?fr:Mu,S=arguments.length<3;return b(l,ht(h,4),_,S,Hn)},T.reduceRight=function Od(l,h,_){var b=wt(l)?nr:Mu,S=arguments.length<3;return b(l,ht(h,4),_,S,id)},T.repeat=function NC(l,h,_){return h=(_?lr(l,h,_):h===p)?1:yt(h),Ns(Yt(l),h)},T.replace=function zC(){var l=arguments,h=Yt(l[0]);return l.length<3?h:h.replace(l[1],l[2])},T.result=function RC(l,h,_){var b=-1,S=(h=Wn(h,l)).length;for(S||(S=1,l=p);++b<S;){var D=null==l?p:l[Rn(h[b])];D===p&&(b=S,D=_),l=Bn(D)?D.call(l):D}return l},T.round=v0,T.runInContext=ie,T.sample=function Yv(l){return(wt(l)?Qu:Wi)(l)},T.size=function qf(l){if(null==l)return 0;if(br(l))return Pd(l)?Di(l):l.length;var h=Xi(l);return h==z||h==Ue?l.size:Qr(l).length},T.snakeCase=HC,T.some=function jf(l,h,_){var b=wt(l)?Bt:oh;return _&&lr(l,h,_)&&(h=p),b(l,ht(h,3))},T.sortedIndex=function Mv(l,h){return zo(l,h)},T.sortedIndexBy=function Vf(l,h,_){return ud(l,h,ht(_,2))},T.sortedIndexOf=function Lv(l,h){var _=null==l?0:l.length;if(_){var b=zo(l,h);if(b<_&&rn(l[b],h))return b}return-1},T.sortedLastIndex=function Nf(l,h){return zo(l,h,!0)},T.sortedLastIndexBy=function Dh(l,h,_){return ud(l,h,ht(_,2),!0)},T.sortedLastIndexOf=function Ah(l,h){if(null!=l&&l.length){var b=zo(l,h,!0)-1;if(rn(l[b],h))return b}return-1},T.startCase=$C,T.startsWith=function I_(l,h,_){return l=Yt(l),_=null==_?0:Xr(yt(_),0,l.length),h=ei(h),l.slice(_,_+h.length)==h},T.subtract=C0,T.sum=function b0(l){return l&&l.length?Hl(l,wr):0},T.sumBy=function P_(l,h){return l&&l.length?Hl(l,ht(h,2)):0},T.template=function WC(l,h,_){var b=T.templateSettings;_&&lr(l,h,_)&&(h=p),l=Yt(l),h=Vd({},h,b,Wo);var q,de,S=Vd({},h.imports,b.imports,Wo),D=Ri(S),H=hi(S,D),Ae=0,Ee=h.interpolate||Ml,ke="__p += '",Ye=bo((h.escape||Ml).source+"|"+Ee.source+"|"+(Ee===vm?bw:Ml).source+"|"+(h.evaluate||Ml).source+"|$","g"),it="//# sourceURL="+(Wt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bp+"]")+"\n";l.replace(Ye,function(lt,xt,At,xr,Qi,Nr){return At||(At=xr),ke+=l.slice(Ae,Nr).replace(sp,Va),xt&&(q=!0,ke+="' +\n__e("+xt+") +\n'"),Qi&&(de=!0,ke+="';\n"+Qi+";\n__p += '"),At&&(ke+="' +\n((__t = ("+At+")) == null ? '' : __t) +\n'"),Ae=Nr+lt.length,lt}),ke+="';\n";var ft=Wt.call(h,"variable")&&h.variable;if(ft){if(Cw.test(ft))throw new pt("Invalid `variable` option passed into `_.template`")}else ke="with (obj) {\n"+ke+"\n}\n";ke=(de?ke.replace(mu,""):ke).replace(ms,"$1").replace(co,"$1;"),ke="function("+(ft||"obj")+") {\n"+(ft?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(q?", __e = _.escape":"")+(de?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ke+"return __p\n}";var It=Qh(function(){return Ft(D,it+"return "+ke).apply(p,H)});if(It.source=ke,Xe(It))throw It;return It},T.times=function ac(l,h){if((l=yt(l))<1||l>me)return[];var _=Ge,b=$i(l,Ge);h=ht(h),l-=Ge;for(var S=Qt(b,h);++_<l;)h(_);return S},T.toFinite=jn,T.toInteger=yt,T.toLength=Fd,T.toLower=function T_(l){return Yt(l).toLowerCase()},T.toNumber=nn,T.toSafeInteger=function f_(l){return l?Xr(yt(l),-me,me):0===l?l:0},T.toString=Yt,T.toUpper=function KC(l){return Yt(l).toUpperCase()},T.trim=function GC(l,h,_){if((l=Yt(l))&&(_||h===p))return Hi(l);if(!l||!(h=ei(h)))return l;var b=kr(l),S=kr(h);return _a(b,na(b,S),Fa(b,S)+1).join("")},T.trimEnd=function UC(l,h,_){if((l=Yt(l))&&(_||h===p))return l.slice(0,Lu(l)+1);if(!l||!(h=ei(h)))return l;var b=kr(l);return _a(b,0,Fa(b,kr(h))+1).join("")},T.trimStart=function YC(l,h,_){if((l=Yt(l))&&(_||h===p))return l.replace(ir,"");if(!l||!(h=ei(h)))return l;var b=kr(l);return _a(b,na(b,kr(h))).join("")},T.truncate=function D_(l,h){var _=30,b="...";if(si(h)){var S="separator"in h?h.separator:S;_="length"in h?yt(h.length):_,b="omission"in h?ei(h.omission):b}var D=(l=Yt(l)).length;if(cn(l)){var H=kr(l);D=H.length}if(_>=D)return l;var q=_-Di(b);if(q<1)return b;var de=H?_a(H,0,q).join(""):l.slice(0,q);if(S===p)return de+b;if(H&&(q+=de.length-q),Vh(S)){if(l.slice(q).search(S)){var Ae,Ee=de;for(S.global||(S=bo(S.source,Yt(po.exec(S))+"g")),S.lastIndex=0;Ae=S.exec(Ee);)var ke=Ae.index;de=de.slice(0,ke===p?q:ke)}}else if(l.indexOf(ei(S),q)!=q){var Ye=de.lastIndexOf(S);Ye>-1&&(de=de.slice(0,Ye))}return de+b},T.unescape=function A_(l){return(l=Yt(l))&&cw.test(l)?l.replace(gm,Pu):l},T.uniqueId=function d0(l){var h=++Fi;return Yt(l)+h},T.upperCase=jh,T.upperFirst=Hd,T.each=qs,T.eachRight=Oh,T.first=ne,rl(T,function(){var l={};return In(T,function(h,_){Wt.call(T.prototype,_)||(l[_]=h)}),l}(),{chain:!1}),T.VERSION="4.17.21",Ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){T[l].placeholder=T}),Ur(["drop","take"],function(l,h){Rt.prototype[l]=function(_){_=_===p?1:Ai(yt(_),0);var b=this.__filtered__&&!h?new Rt(this):this.clone();return b.__filtered__?b.__takeCount__=$i(_,b.__takeCount__):b.__views__.push({size:$i(_,Ge),type:l+(b.__dir__<0?"Right":"")}),b},Rt.prototype[l+"Right"]=function(_){return this.reverse()[l](_).reverse()}}),Ur(["filter","map","takeWhile"],function(l,h){var _=h+1,b=1==_||3==_;Rt.prototype[l]=function(S){var D=this.clone();return D.__iteratees__.push({iteratee:ht(S,3),type:_}),D.__filtered__=D.__filtered__||b,D}}),Ur(["head","last"],function(l,h){var _="take"+(h?"Right":"");Rt.prototype[l]=function(){return this[_](1).value()[0]}}),Ur(["initial","tail"],function(l,h){var _="drop"+(h?"":"Right");Rt.prototype[l]=function(){return this.__filtered__?new Rt(this):this[_](1)}}),Rt.prototype.compact=function(){return this.filter(wr)},Rt.prototype.find=function(l){return this.filter(l).head()},Rt.prototype.findLast=function(l){return this.reverse().find(l)},Rt.prototype.invokeMap=bt(function(l,h){return"function"==typeof l?new Rt(this):this.map(function(_){return Ci(_,l,h)})}),Rt.prototype.reject=function(l){return this.filter(Xo(ht(l)))},Rt.prototype.slice=function(l,h){l=yt(l);var _=this;return _.__filtered__&&(l>0||h<0)?new Rt(_):(l<0?_=_.takeRight(-l):l&&(_=_.drop(l)),h!==p&&(_=(h=yt(h))<0?_.dropRight(-h):_.take(h-l)),_)},Rt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Rt.prototype.toArray=function(){return this.take(Ge)},In(Rt.prototype,function(l,h){var _=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),S=T[b?"take"+("last"==h?"Right":""):h],D=b||/^find/.test(h);S&&(T.prototype[h]=function(){var H=this.__wrapped__,q=b?[1]:arguments,de=H instanceof Rt,Ae=q[0],Ee=de||wt(H),ke=function(xt){var At=S.apply(T,Ht([xt],q));return b&&Ye?At[0]:At};Ee&&_&&"function"==typeof Ae&&1!=Ae.length&&(de=Ee=!1);var Ye=this.__chain__,ft=D&&!Ye,It=de&&!this.__actions__.length;if(!D&&Ee){H=It?H:new Rt(this);var lt=l.apply(H,q);return lt.__actions__.push({func:Yo,args:[ke],thisArg:p}),new Ti(lt,Ye)}return ft&&It?l.apply(this,q):(lt=this.thru(ke),ft?b?lt.value()[0]:lt.value():lt)})}),Ur(["pop","push","shift","sort","splice","unshift"],function(l){var h=Kl[l],_=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);T.prototype[l]=function(){var S=arguments;if(b&&!this.__chain__){var D=this.value();return h.apply(wt(D)?D:[],S)}return this[_](function(H){return h.apply(wt(H)?H:[],S)})}}),In(Rt.prototype,function(l,h){var _=T[h];if(_){var b=_.name+"";Wt.call(Rs,b)||(Rs[b]=[]),Rs[b].push({name:h,func:_})}}),Rs[$o(p,he).name]=[{name:"wrapper",func:p}],Rt.prototype.clone=function Lr(){var l=new Rt(this.__wrapped__);return l.__actions__=ji(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ji(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ji(this.__views__),l},Rt.prototype.reverse=function zp(){if(this.__filtered__){var l=new Rt(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},Rt.prototype.value=function Xm(){var l=this.__wrapped__.value(),h=this.__dir__,_=wt(l),b=h<0,S=_?l.length:0,D=function fv(l,h,_){for(var b=-1,S=_.length;++b<S;){var D=_[b],H=D.size;switch(D.type){case"drop":l+=H;break;case"dropRight":h-=H;break;case"take":h=$i(h,l+H);break;case"takeRight":l=Ai(l,h-H)}}return{start:l,end:h}}(0,S,this.__views__),H=D.start,q=D.end,de=q-H,Ae=b?q:H-1,Ee=this.__iteratees__,ke=Ee.length,Ye=0,it=$i(de,this.__takeCount__);if(!_||!b&&S==de&&it==de)return uf(l,this.__actions__);var ft=[];e:for(;de--&&Ye<it;){for(var It=-1,lt=l[Ae+=h];++It<ke;){var xt=Ee[It],xr=xt.type,Qi=(0,xt.iteratee)(lt);if(2==xr)lt=Qi;else if(!Qi){if(1==xr)continue e;break e}}ft[Ye++]=lt}return ft},T.prototype.at=Zf,T.prototype.chain=function $f(){return Id(this)},T.prototype.commit=function Hv(){return new Ti(this.value(),this.__chain__)},T.prototype.next=function Zv(){this.__values__===p&&(this.__values__=zh(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?p:this.__values__[this.__index__++]}},T.prototype.plant=function zt(l){for(var h,_=this;_ instanceof To;){var b=Sv(_);b.__index__=0,b.__values__=p,h?S.__wrapped__=b:h=b;var S=b;_=_.__wrapped__}return S.__wrapped__=l,h},T.prototype.reverse=function Pt(){var l=this.__wrapped__;if(l instanceof Rt){var h=l;return this.__actions__.length&&(h=new Rt(this)),(h=h.reverse()).__actions__.push({func:Yo,args:[Th],thisArg:p}),new Ti(h,this.__chain__)}return this.thru(Th)},T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=function tn(){return uf(this.__wrapped__,this.__actions__)},T.prototype.first=T.prototype.head,Is&&(T.prototype[Is]=function $v(){return this}),T}();Pi._=ws,(ee=function(){return ws}.call(J,k,J,Qn))!==p&&(Qn.exports=ee)}.call(this)}}]);